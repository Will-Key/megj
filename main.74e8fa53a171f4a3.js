"use strict";(self.webpackChunkmegj=self.webpackChunkmegj||[]).push([[179],{6217:(Xt,Je,j)=>{j.d(Je,{nm:()=>Qi});var p=j(2122);j(4650),j(259);var me=j(5861),it=j(9681),rt=j(4859),It=j(2090),ut=j(1877);const ce=new Map,je={activated:!1,tokenObservers:[]},se={initialized:!1,enabled:!1};function De(Oe){return ce.get(Oe)||Object.assign({},je)}function Re(){return se}class cn{constructor(Ae,Be,gt,xt,Sn){if(this.operation=Ae,this.retryPolicy=Be,this.getWaitDuration=gt,this.lowerBound=xt,this.upperBound=Sn,this.pending=null,this.nextErrorWaitInterval=xt,xt>Sn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ae){var Be=this;return(0,me.Z)(function*(){Be.stop();try{Be.pending=new It.BH,yield function en(Oe){return new Promise(Ae=>{setTimeout(Ae,Oe)})}(Be.getNextRun(Ae)),Be.pending.resolve(),yield Be.pending.promise,Be.pending=new It.BH,yield Be.operation(),Be.pending.resolve(),yield Be.pending.promise,Be.process(!0).catch(()=>{})}catch(gt){Be.retryPolicy(gt)?Be.process(!1).catch(()=>{}):Be.stop()}})()}getNextRun(Ae){if(Ae)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Be=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Be}}}const Bt=new It.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function In(Oe){if(!De(Oe).activated)throw Bt.create("use-before-activation",{appName:Oe.name})}function Kr(Oe,Ae){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,me.Z)(function*({url:Oe,body:Ae},Be){const gt={"Content-Type":"application/json"},xt=Be.getImmediate({optional:!0});if(xt){const mi=yield xt.getHeartbeatsHeader();mi&&(gt["X-Firebase-Client"]=mi)}const Sn={method:"POST",body:JSON.stringify(Ae),headers:gt};let Un,Fr;try{Un=yield fetch(Oe,Sn)}catch(mi){throw Bt.create("fetch-network-error",{originalErrorMessage:mi?.message})}if(200!==Un.status)throw Bt.create("fetch-status-error",{httpStatus:Un.status});try{Fr=yield Un.json()}catch(mi){throw Bt.create("fetch-parse-error",{originalErrorMessage:mi?.message})}const gr=Fr.ttl.match(/^([\d.]+)(s)$/);if(!gr||!gr[2]||isNaN(Number(gr[1])))throw Bt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Fr.ttl}`});const ws=1e3*Number(gr[1]),Io=Date.now();return{token:Fr.token,expireTimeMillis:Io+ws,issuedAtTimeMillis:Io}})).apply(this,arguments)}function on(Oe,Ae){const{projectId:Be,appId:gt,apiKey:xt}=Oe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Be}/apps/${gt}:exchangeDebugToken?key=${xt}`,body:{debug_token:Ae}}}const ir="firebase-app-check-store";let cr=null;function Bn(){return cr||(cr=new Promise((Oe,Ae)=>{try{const Be=indexedDB.open("firebase-app-check-database",1);Be.onsuccess=gt=>{Oe(gt.target.result)},Be.onerror=gt=>{var xt;Ae(Bt.create("storage-open",{originalErrorMessage:null===(xt=gt.target.error)||void 0===xt?void 0:xt.message}))},Be.onupgradeneeded=gt=>{0===gt.oldVersion&&gt.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(Be){Ae(Bt.create("storage-open",{originalErrorMessage:Be?.message}))}}),cr)}function ye(){return(ye=(0,me.Z)(function*(Oe,Ae){const gt=(yield Bn()).transaction(ir,"readwrite"),Sn=gt.objectStore(ir).put({compositeKey:Oe,value:Ae});return new Promise((Un,Fr)=>{Sn.onsuccess=gr=>{Un()},gt.onerror=gr=>{var ws;Fr(Bt.create("storage-set",{originalErrorMessage:null===(ws=gr.target.error)||void 0===ws?void 0:ws.message}))}})})).apply(this,arguments)}const Qt=new ut.Yd("@firebase/app-check");function Rt(Oe,Ae){return(0,It.hl)()?function si(Oe,Ae){return function Ye(Oe,Ae){return ye.apply(this,arguments)}(function lt(Oe){return`${Oe.options.appId}-${Oe.name}`}(Oe),Ae)}(Oe,Ae).catch(Be=>{Qt.warn(`Failed to write token to IndexedDB. Error: ${Be}`)}):Promise.resolve()}function Pr(){return Re().enabled}function Cn(){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,me.Z)(function*(){const Oe=Re();if(Oe.enabled&&Oe.token)return Oe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ft={error:"UNKNOWN_ERROR"};function pt(Oe){return It.US.encodeString(JSON.stringify(Oe),!1)}function Dt(Oe){return wn.apply(this,arguments)}function wn(){return(wn=(0,me.Z)(function*(Oe,Ae=!1){const Be=Oe.app;In(Be);const gt=De(Be);let Sn,xt=gt.token;if(xt&&!ot(xt)&&(gt.token=void 0,xt=void 0),!xt){const gr=yield gt.cachedTokenPromise;gr&&(ot(gr)?xt=gr:yield Rt(Be,void 0))}if(!Ae&&xt&&ot(xt))return{token:xt.token};let Fr,Un=!1;if(Pr()){gt.exchangeTokenPromise||(gt.exchangeTokenPromise=Kr(on(Be,yield Cn()),Oe.heartbeatServiceProvider).finally(()=>{gt.exchangeTokenPromise=void 0}),Un=!0);const gr=yield gt.exchangeTokenPromise;return yield Rt(Be,gr),gt.token=gr,{token:gr.token}}try{gt.exchangeTokenPromise||(gt.exchangeTokenPromise=gt.provider.getToken().finally(()=>{gt.exchangeTokenPromise=void 0}),Un=!0),xt=yield De(Be).exchangeTokenPromise}catch(gr){"appCheck/throttled"===gr.code?Qt.warn(gr.message):Qt.error(gr),Sn=gr}return xt?Sn?Fr=ot(xt)?{token:xt.token,internalError:Sn}:xe(Sn):(Fr={token:xt.token},gt.token=xt,yield Rt(Be,xt)):Fr=xe(Sn),Un&&be(Be,Fr),Fr})).apply(this,arguments)}function Tn(Oe,Ae){const Be=De(Oe),gt=Be.tokenObservers.filter(xt=>xt.next!==Ae);0===gt.length&&Be.tokenRefresher&&Be.tokenRefresher.isRunning()&&Be.tokenRefresher.stop(),Be.tokenObservers=gt}function ve(Oe){const{app:Ae}=Oe,Be=De(Ae);let gt=Be.tokenRefresher;gt||(gt=function oe(Oe){const{app:Ae}=Oe;return new cn((0,me.Z)(function*(){let gt;if(gt=De(Ae).token?yield Dt(Oe,!0):yield Dt(Oe),gt.error)throw gt.error;if(gt.internalError)throw gt.internalError}),()=>!0,()=>{const Be=De(Ae);if(Be.token){let gt=Be.token.issuedAtTimeMillis+.5*(Be.token.expireTimeMillis-Be.token.issuedAtTimeMillis)+3e5;return gt=Math.min(gt,Be.token.expireTimeMillis-3e5),Math.max(0,gt-Date.now())}return 0},3e4,96e4)}(Oe),Be.tokenRefresher=gt),!gt.isRunning()&&Be.isTokenAutoRefreshEnabled&&gt.start()}function be(Oe,Ae){const Be=De(Oe).tokenObservers;for(const gt of Be)try{"EXTERNAL"===gt.type&&null!=Ae.error?gt.error(Ae.error):gt.next(Ae)}catch{}}function ot(Oe){return Oe.expireTimeMillis-Date.now()>0}function xe(Oe){return{token:pt(Ft),error:Oe}}class Ot{constructor(Ae,Be){this.app=Ae,this.heartbeatServiceProvider=Be}_delete(){const{tokenObservers:Ae}=De(this.app);for(const Be of Ae)Tn(this.app,Be.next);return Promise.resolve()}}const ls="app-check-internal";!function Qr(){(0,it._registerComponent)(new rt.wA("app-check",Oe=>function dn(Oe,Ae){return new Ot(Oe,Ae)}(Oe.getProvider("app").getImmediate(),Oe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Oe,Ae,Be)=>{Oe.getProvider(ls).initialize()})),(0,it._registerComponent)(new rt.wA(ls,Oe=>function Yn(Oe){return{getToken:Ae=>Dt(Oe,Ae),addTokenListener:Ae=>function yn(Oe,Ae,Be,gt){const{app:xt}=Oe,Sn=De(xt);if(Sn.tokenObservers=[...Sn.tokenObservers,{next:Be,error:gt,type:Ae}],Sn.token&&ot(Sn.token)){const Fr=Sn.token;Promise.resolve().then(()=>{Be({token:Fr.token}),ve(Oe)}).catch(()=>{})}Sn.cachedTokenPromise.then(()=>ve(Oe))}(Oe,"INTERNAL",Ae),removeTokenListener:Ae=>Tn(Oe.app,Ae)}}(Oe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,it.registerVersion)("@firebase/app-check","0.6.0")}();class Qi{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Xt,Je,j)=>{j.d(Je,{zQ:()=>mt,ww:()=>bt,rT:()=>se,f7:()=>pe,L6:()=>ce,_Q:()=>je,lh:()=>De,Qv:()=>ut,nw:()=>Re});var p=j(4650),z=j(7579),W=j(9646),Te=j(9751),Ie=j(8996),Me=j(6451),ke=j(5363),Pe=j(3900),Ve=j(4004),de=j(6063);class he extends z.x{constructor(Lt=1/0,Kt=1/0,vt=de.l){super(),this._bufferSize=Lt,this._windowTime=Kt,this._timestampProvider=vt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Kt===1/0,this._bufferSize=Math.max(1,Lt),this._windowTime=Math.max(1,Kt)}next(Lt){const{isStopped:Kt,_buffer:vt,_infiniteTimeWindow:cn,_timestampProvider:en,_windowTime:fn}=this;Kt||(vt.push(Lt),!cn&&vt.push(en.now()+fn)),this._trimBuffer(),super.next(Lt)}_subscribe(Lt){this._throwIfClosed(),this._trimBuffer();const Kt=this._innerSubscribe(Lt),{_infiniteTimeWindow:vt,_buffer:cn}=this,en=cn.slice();for(let fn=0;fn<en.length&&!Lt.closed;fn+=vt?1:2)Lt.next(en[fn]);return this._checkFinalizedStatuses(Lt),Kt}_trimBuffer(){const{_bufferSize:Lt,_timestampProvider:Kt,_buffer:vt,_infiniteTimeWindow:cn}=this,en=(cn?1:2)*Lt;if(Lt<1/0&&en<vt.length&&vt.splice(0,vt.length-en),!cn){const fn=Kt.now();let Bt=0;for(let $n=1;$n<vt.length&&vt[$n]<=fn;$n+=2)Bt=$n;Bt&&vt.splice(0,Bt+1)}}}var Ce=j(3099);function yt(Ct,Lt,Kt){let vt,cn=!1;return Ct&&"object"==typeof Ct?({bufferSize:vt=1/0,windowTime:Lt=1/0,refCount:cn=!1,scheduler:Kt}=Ct):vt=Ct??1/0,(0,Ce.B)({connector:()=>new he(vt,Lt,Kt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:cn})}var ht=j(590),We=j(576);function Ht(Ct,Lt){return(0,We.m)(Lt)?(0,Pe.w)(()=>Ct,Lt):(0,Pe.w)(()=>Ct)}var tt=j(9468),qe=j(9300),Zt=j(2122),Yt=j(2011),me=j(6895),it=j(6217),rt=j(9260);const ut=new p.OlP("angularfire2.auth.use-emulator"),ce=new p.OlP("angularfire2.auth.settings"),je=new p.OlP("angularfire2.auth.tenant-id"),se=new p.OlP("angularfire2.auth.langugage-code"),De=new p.OlP("angularfire2.auth.use-device-language"),pe=new p.OlP("angularfire.auth.persistence"),Re=(Ct,Lt,Kt,vt,cn,en,fn,Bt)=>(0,Yt.cc)(`${Ct.name}.auth`,"AngularFireAuth",Ct.name,()=>{const $n=Lt.runOutsideAngular(()=>Ct.auth());if(Kt&&$n.useEmulator(...Kt),vt&&($n.tenantId=vt),$n.languageCode=cn,en&&$n.useDeviceLanguage(),fn)for(const[In,Zn]of Object.entries(fn))$n.settings[In]=Zn;return Bt&&$n.setPersistence(Bt),$n},[Kt,vt,cn,en,fn,Bt]);let mt=(()=>{class Ct{constructor(Kt,vt,cn,en,fn,Bt,$n,In,Zn,ii,Kr,Kn){const Or=new z.x,Br=(0,W.of)(void 0).pipe((0,ke.Q)(fn.outsideAngular),(0,Pe.w)(()=>en.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9169)))),(0,Ve.U)(()=>(0,Yt.on)(Kt,en,vt)),(0,Ve.U)(on=>Re(on,en,Bt,In,Zn,ii,$n,Kr)),yt({bufferSize:1,refCount:!1}));if((0,me.PM)(cn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,W.of)(null);else{Br.pipe((0,ht.P)()).subscribe();const yr=Br.pipe((0,Pe.w)(Tt=>Tt.getRedirectResult().then(cr=>cr,()=>null)),Zt.iC,yt({bufferSize:1,refCount:!1})),Rr=Br.pipe((0,Pe.w)(Tt=>new Te.y(cr=>({unsubscribe:en.runOutsideAngular(()=>Tt.onAuthStateChanged(Bn=>cr.next(Bn),Bn=>cr.error(Bn),()=>cr.complete()))})))),ir=Br.pipe((0,Pe.w)(Tt=>new Te.y(cr=>({unsubscribe:en.runOutsideAngular(()=>Tt.onIdTokenChanged(Bn=>cr.next(Bn),Bn=>cr.error(Bn),()=>cr.complete()))}))));this.authState=yr.pipe(Ht(Rr),(0,tt.R)(fn.outsideAngular),(0,ke.Q)(fn.insideAngular)),this.user=yr.pipe(Ht(ir),(0,tt.R)(fn.outsideAngular),(0,ke.Q)(fn.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(Tt=>Tt?(0,Ie.D)(Tt.getIdToken()):(0,W.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(Tt=>Tt?(0,Ie.D)(Tt.getIdTokenResult()):(0,W.of)(null))),this.credential=(0,Me.T)(yr,Or,this.authState.pipe((0,qe.h)(Tt=>!Tt))).pipe((0,Ve.U)(Tt=>Tt?.user?Tt:null),(0,tt.R)(fn.outsideAngular),(0,ke.Q)(fn.insideAngular))}return(0,Yt.pX)(this,Br,en,{spy:{apply:(on,yr,Rr)=>{(on.startsWith("signIn")||on.startsWith("createUser"))&&Rr.then(ir=>Or.next(ir))}}})}}return Ct.\u0275fac=function(Kt){return new(Kt||Ct)(p.LFG(Yt.Dh),p.LFG(Yt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Zt.HU),p.LFG(ut,8),p.LFG(ce,8),p.LFG(je,8),p.LFG(se,8),p.LFG(De,8),p.LFG(pe,8),p.LFG(it.nm,8))},Ct.\u0275prov=p.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"any"}),Ct})(),bt=(()=>{class Ct{constructor(){rt.Z.registerVersion("angularfire",Zt.q4.full,"auth-compat")}}return Ct.\u0275fac=function(Kt){return new(Kt||Ct)},Ct.\u0275mod=p.oAB({type:Ct}),Ct.\u0275inj=p.cJS({providers:[mt]}),Ct})()},2095:(Xt,Je,j)=>{j.d(Je,{ST:()=>Pg,yb:()=>T_});var p=j(4650),z=j(4986),W=j(9751),Te=j(8996),Ie=j(9646),Me=j(2122),ke=j(8675),Pe=j(4482),Ve=j(5403);function de(){return(0,Pe.e)((i,e)=>{let t,s=!1;i.subscribe((0,Ve.x)(e,u=>{const d=t;t=u,s&&e.next([d,u]),s=!0}))})}var he=j(4004),Ce=j(5026),yt=j(4671);function We(i,e){return i===e}var se,Ht=j(9300),tt=j(2011),qe=j(6895),Yt=(j(9169),j(3942)),me=j(5861),it=j(9681),rt=j(4859),It=j(1877),ut=j(2090),ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={},De=De||{},pe=ce||self;function Re(){}function mt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function bt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Lt="closure_uid_"+(1e9*Math.random()>>>0),Kt=0;function vt(i,e,t){return i.call.apply(i.bind,arguments)}function cn(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function en(i,e,t){return(en=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vt:cn).apply(null,arguments)}function fn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Bt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,d){for(var g=Array(arguments.length-2),b=2;b<arguments.length;b++)g[b-2]=arguments[b];return e.prototype[u].apply(s,g)}}function $n(){this.s=this.s,this.o=this.o}$n.prototype.s=!1,$n.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ct(i){Object.prototype.hasOwnProperty.call(i,Lt)&&i[Lt]||(i[Lt]=++Kt)}(this)},$n.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function ii(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Kr(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(mt(s)){const u=i.length||0,d=s.length||0;i.length=u+d;for(let g=0;g<d;g++)i[u+g]=s[g]}else i.push(s)}}function Kn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Kn.prototype.h=function(){this.defaultPrevented=!0};var Or=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{pe.addEventListener("test",Re,e),pe.removeEventListener("test",Re,e)}catch{}return i}();function Br(i){return/^[\s\xa0]*$/.test(i)}var on=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function yr(i,e){return i<e?-1:i>e?1:0}function Rr(){var i=pe.navigator;return i&&(i=i.userAgent)?i:""}function ir(i){return-1!=Rr().indexOf(i)}function Tt(i){return Tt[" "](i),i}Tt[" "]=Re;var ue,i,Bn=ir("Opera"),ar=ir("Trident")||ir("MSIE"),si=ir("Edge"),Si=si||ar,qr=ir("Gecko")&&!(-1!=Rr().toLowerCase().indexOf("webkit")&&!ir("Edge"))&&!(ir("Trident")||ir("MSIE"))&&!ir("Edge"),Ye=-1!=Rr().toLowerCase().indexOf("webkit")&&!ir("Edge");function ye(){var i=pe.document;return i?i.documentMode:void 0}e:{var ze="",lt=(i=Rr(),qr?/rv:([^\);]+)(\)|;)/.exec(i):si?/Edge\/([\d\.]+)/.exec(i):ar?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ye?/WebKit\/(\S+)/.exec(i):Bn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(lt&&(ze=lt?lt[1]:""),ar){var Qt=ye();if(null!=Qt&&Qt>parseFloat(ze)){ue=String(Qt);break e}}ue=ze}var En={};var Hn=pe.document&&ar&&(ye()||parseInt(ue,10))||void 0;function Pr(i,e){if(Kn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(qr){e:{try{Tt(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Cn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Pr.X.h.call(this)}}Bt(Pr,Kn);var Cn={2:"touch",3:"pen",4:"mouse"};Pr.prototype.h=function(){Pr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Dn="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function Ft(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++Gt,this.ba=this.ea=!1}function pt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Dt(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function wn(i){const e={};for(const t in i)e[t]=i[t];return e}const yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tn(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let d=0;d<yn.length;d++)t=yn[d],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function ve(i){this.src=i,this.g={},this.h=0}function oe(i,e){var t=e.type;if(t in i.g){var d,s=i.g[t],u=Zn(s,e);(d=0<=u)&&Array.prototype.splice.call(s,u,1),d&&(pt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function be(i,e,t,s){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==s)return u}return-1}ve.prototype.add=function(i,e,t,s,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=be(i,e,s,u);return-1<g?(e=i[g],t||(e.ea=!1)):((e=new Ft(e,this.src,d,!!s,u)).ea=t,i.push(e)),e};var ot="closure_lm_"+(1e6*Math.random()|0),xe={};function Ot(i,e,t,s,u){if(s&&s.once)return vr(i,e,t,s,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)Ot(i,e[d],t,s,u);return null}return t=tn(t),i&&i[Dn]?i.N(e,t,bt(s)?!!s.capture:!!s,u):dn(i,e,t,!1,s,u)}function dn(i,e,t,s,u,d){if(!e)throw Error("Invalid event type");var g=bt(u)?!!u.capture:!!u,b=Ue(i);if(b||(i[ot]=b=new ve(i)),(t=b.add(e,t,s,g,d)).proxy)return t;if(s=function Yn(){const e=te;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Or||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(re(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function vr(i,e,t,s,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)vr(i,e[d],t,s,u);return null}return t=tn(t),i&&i[Dn]?i.O(e,t,bt(s)?!!s.capture:!!s,u):dn(i,e,t,!0,s,u)}function Qn(i,e,t,s,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)Qn(i,e[d],t,s,u);else s=bt(s)?!!s.capture:!!s,t=tn(t),i&&i[Dn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=be(d=i.g[e],t,s,u))&&(pt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Ue(i))&&(e=i.g[e.toString()],i=-1,e&&(i=be(e,t,s,u)),(t=-1<i?e[i]:null)&&fe(t))}function fe(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Dn])oe(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(re(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Ue(e))?(oe(t,i),0==t.h&&(t.src=null,e[ot]=null)):pt(i)}}}function re(i){return i in xe?xe[i]:xe[i]="on"+i}function te(i,e){if(i.ba)i=!0;else{e=new Pr(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&fe(i),i=t.call(s,e)}return i}function Ue(i){return(i=i[ot])instanceof ve?i:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(i){return"function"==typeof i?i:(i[dt]||(i[dt]=function(e){return i.handleEvent(e)}),i[dt])}function an(){$n.call(this),this.i=new ve(this),this.P=this,this.I=null}function un(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Kn(e,i);else if(e instanceof Kn)e.target=e.target||i;else{var u=e;Tn(e=new Kn(s,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=wr(g,s,!0,e)&&u}if(u=wr(g=e.g=i,s,!0,e)&&u,u=wr(g,s,!1,e)&&u,t)for(d=0;d<t.length;d++)u=wr(g=e.g=t[d],s,!1,e)&&u}function wr(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ba&&g.capture==t){var b=g.listener,L=g.ha||g.src;g.ea&&oe(i.i,g),u=!1!==b.call(L,s)&&u}}return u&&!s.defaultPrevented}Bt(an,$n),an.prototype[Dn]=!0,an.prototype.removeEventListener=function(i,e,t,s){Qn(this,i,e,t,s)},an.prototype.M=function(){if(an.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)pt(t[s]);delete i.g[e],i.h--}}this.I=null},an.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},an.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var oi=pe.JSON.stringify;function xn(){var i=Yr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var _s,ti=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ei,i=>i.reset());class Ei{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Bi(i){pe.setTimeout(()=>{throw i},0)}function kr(i,e){_s||function Ri(){var i=pe.Promise.resolve(void 0);_s=function(){i.then(ji)}}(),Zr||(_s(),Zr=!0),Yr.add(i,e)}var Zr=!1,Yr=new class Mr{constructor(){this.h=this.g=null}add(e,t){const s=ti.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ji(){for(var i;i=xn();){try{i.h.call(i.g)}catch(t){Bi(t)}var e=ti;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Zr=!1}function qn(i,e){an.call(this),this.h=i||1,this.g=e||pe,this.j=en(this.lb,this),this.l=Date.now()}function Js(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function ls(i,e,t){if("function"==typeof i)t&&(i=en(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=en(i.handleEvent,i)}return 2147483647<Number(e)?-1:pe.setTimeout(i,e||0)}function Qr(i){i.g=ls(()=>{i.g=null,i.i&&(i.i=!1,Qr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Bt(qn,an),(se=qn.prototype).ca=!1,se.R=null,se.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),un(this,"tick"),this.ca&&(Js(this),this.start()))}},se.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},se.M=function(){qn.X.M.call(this),Js(this),delete this.g};class Pi extends $n{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qr(this)}M(){super.M(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(i){$n.call(this),this.h=i,this.g={}}Bt(ai,$n);var Qi=[];function $i(i,e,t,s){Array.isArray(t)||(t&&(Qi[0]=t.toString()),t=Qi);for(var u=0;u<t.length;u++){var d=Ot(e,t[u],s||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function jr(i){Dt(i.g,function(e,t){this.g.hasOwnProperty(t)&&fe(e)},i),i.g={}}function hi(){this.g=!0}function Hi(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ea(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return oi(t)}catch{return e}}(i,t)+(s?" "+s:"")})}ai.prototype.M=function(){ai.X.M.call(this),jr(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hi.prototype.Aa=function(){this.g=!1},hi.prototype.info=function(){};var Sr={},ui=null;function cs(){return ui=ui||new an}function Xs(i){Kn.call(this,Sr.Pa,i)}function Es(i){const e=cs();un(e,new Xs(e))}function ta(i,e){Kn.call(this,Sr.STAT_EVENT,i),this.stat=e}function _r(i){const e=cs();un(e,new ta(e,i))}function Oe(i,e){Kn.call(this,Sr.Qa,i),this.size=e}function Ae(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){i()},e)}Sr.Pa="serverreachability",Bt(Xs,Kn),Sr.STAT_EVENT="statevent",Bt(ta,Kn),Sr.Qa="timingevent",Bt(Oe,Kn);var Be={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function xt(){}function Un(){}xt.prototype.h=null;var Io,Fr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function gr(){Kn.call(this,"d")}function ws(){Kn.call(this,"c")}function mi(){}function Ai(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new ai(this),this.O=ds,this.T=new qn(i=Si?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new so}function so(){this.i=null,this.g="",this.h=!1}Bt(gr,Kn),Bt(ws,Kn),Bt(mi,xt),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Io=new mi;var ds=45e3,Is={},Do={};function Xi(i,e,t){i.K=1,i.v=Fi(xr(e)),i.s=t,i.P=!0,es(i,null)}function es(i,e){i.F=Date.now(),Oi(i),i.A=xr(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),So(t.i,"t",s),i.C=0,t=i.l.H,i.h=new so,i.g=eo(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Pi(en(i.La,i,i.g),i.N)),$i(i.S,i.g,"readystatechange",i.ib),e=i.H?wn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Es(),function Jr(i,e,t,s,u,d){i.info(function(){if(i.g)if(d)for(var g="",b=d.split("&"),L=0;L<b.length;L++){var H=b[L].split("=");if(1<H.length){var ee=H[0];H=H[1];var Ee=ee.split("_");g=2<=Ee.length&&"type"==Ee[1]?g+(ee+"=")+H+"&":g+(ee+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Mi(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function wi(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=oo(i,t),u==Do){4==e&&(i.o=4,_r(14),s=!1),Hi(i.j,i.m,null,"[Incomplete Response]");break}if(u==Is){i.o=4,_r(15),Hi(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Hi(i.j,i.m,u,null),Di(i,u)}Mi(i)&&u!=Do&&u!=Is&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,_r(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),rr(e),e.K=!0,_r(11))):(Hi(i.j,i.m,t,"[Invalid Chunked Response]"),Ii(i),hs(i))}function oo(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Do:(t=Number(e.substring(t,s)),isNaN(t)?Is:(s+=1)+t>e.length?Do:(e=e.substr(s,t),i.C=s+t,e))}function Oi(i){i.V=Date.now()+i.O,js(i,i.O)}function js(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ae(en(i.gb,i),e)}function bo(i){i.B&&(pe.clearTimeout(i.B),i.B=null)}function hs(i){0==i.l.G||i.I||Gr(i.l,i)}function Ii(i){bo(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Js(i.T),jr(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Di(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Hs(t.h,i)))if(!i.J&&Hs(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Ar(t),N(t)}Ir(t),_r(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ae(en(t.cb,t),6e3));if(1>=er(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else xi(t,11)}else if((i.J||t.g==i)&&Ar(t),!Br(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(t.T=H[0],H=H[1],2==t.G)if("c"==H[0]){t.I=H[1],t.ka=H[2];const ee=H[3];null!=ee&&(t.ma=ee,t.j.info("VER="+t.ma));const Ee=H[4];null!=Ee&&(t.Ca=Ee,t.j.info("SVER="+t.Ca));const He=H[5];null!=He&&"number"==typeof He&&0<He&&(t.J=s=1.5*He,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const wt=i.g;if(wt){const Mt=wt.g?wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mt){var d=s.h;d.g||-1==Mt.indexOf("spdy")&&-1==Mt.indexOf("quic")&&-1==Mt.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(uo(d,d.h),d.h=null))}if(s.D){const hn=wt.g?wt.g.getResponseHeader("X-HTTP-Session-Id"):null;hn&&(s.za=hn,jn(s.F,s.D,hn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var g=i;if((s=t).sa=Ro(s,s.H?s.ka:null,s.V),g.J){Xr(s.h,g);var b=g,L=s.J;L&&b.setTimeout(L),b.B&&(bo(b),Oi(b)),s.g=g}else Dr(s);0<t.i.length&&ge(t)}else"stop"!=H[0]&&"close"!=H[0]||xi(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?xi(t,7):$(t):"noop"!=H[0]&&t.l&&t.l.wa(H),t.A=0)}Es()}catch{}}function na(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(mt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ki(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(mt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function ts(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(mt(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,d=0;d<u;d++)e.call(void 0,s[d],t&&t[d],i)}(se=Ai.prototype).setTimeout=function(i){this.O=i},se.ib=function(i){i=i.target;const e=this.L;e&&3==Os(i)?e.l():this.La(i)},se.La=function(i){try{if(i==this.g)e:{const ee=Os(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ee)&&(3!=ee||Si||this.g&&(this.h.h||this.g.fa()||la(this.g)))){this.I||4!=ee||7==e||Es(),bo(this);var t=this.g.aa();this.Y=t;t:if(Mi(this)){var s=la(this.g);i="";var u=s.length,d=4==Os(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),hs(this);var g="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:d&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.fa();if(this.i=200==t,function gi(i,e,t,s,u,d,g){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.U,ee,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Br(b)){var H=b;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,_r(12),Ii(this),hs(this);break e}Hi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Di(this,t)}this.P?(wi(this,ee,g),Si&&this.i&&3==ee&&($i(this.S,this.T,"tick",this.hb),this.T.start())):(Hi(this.j,this.m,g,null),Di(this,g)),4==ee&&Ii(this),this.i&&!this.I&&(4==ee?Gr(this.l,this):(this.i=!1,Oi(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,_r(12)):(this.o=0,_r(13)),Ii(this),hs(this)}}}catch{}},se.hb=function(){if(this.g){var i=Os(this.g),e=this.g.fa();this.C<e.length&&(bo(this),wi(this,i,e),this.i&&4!=i&&Oi(this))}},se.cancel=function(){this.I=!0,Ii(this)},se.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Ji(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Es(),_r(17)),Ii(this),this.o=2,hs(this)):js(this,this.V-i)};var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ds(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Ds){this.h=void 0!==e?e:i.h,bs(this,i.j),this.s=i.s,this.g=i.g,To(this,i.m),this.l=i.l,e=i.i;var t=new $r;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ns(this,t),this.o=i.o}else i&&(t=String(i).match(fi))?(this.h=!!e,bs(this,t[1]||"",!0),this.s=fs(t[2]||""),this.g=fs(t[3]||"",!0),To(this,t[4]),this.l=fs(t[5]||"",!0),ns(this,t[6]||"",!0),this.o=fs(t[7]||"")):(this.h=!!e,this.i=new $r(null,this.h))}function xr(i){return new Ds(i)}function bs(i,e,t){i.j=t?fs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function To(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ns(i,e,t){e instanceof $r?(i.i=e,function zi(i,e){e&&!i.j&&(bn(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(Go(this,s),So(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Gi(e,ps)),i.i=new $r(e,i.h))}function jn(i,e,t){i.i.set(e,t)}function Fi(i){return jn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function fs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Gi(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,mr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function mr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ds.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Gi(e,Rs,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Gi(e,Rs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Gi(t,"/"==t.charAt(0)?pa:$s,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Gi(t,ra)),i.join("")};var Rs=/[#\/\?@]/g,$s=/[#\?:]/g,pa=/[#\?]/g,ps=/[#\?@]/g,ra=/#/g;function $r(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function bn(i){i.g||(i.g=new Map,i.h=0,i.i&&function Co(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var d=i[t].substring(0,s);u=i[t].substring(s+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Go(i,e){bn(i),e=gs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ua(i,e){return bn(i),e=gs(i,e),i.g.has(e)}function So(i,e,t){Go(i,e),0<t.length&&(i.i=null,i.g.set(gs(i,e),ii(t)),i.h+=t.length)}function gs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ao(i){this.l=i||Ao,i=pe.PerformanceNavigationTiming?0<(i=pe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(pe.g&&pe.g.Ga&&pe.g.Ga()&&pe.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(se=$r.prototype).add=function(i,e){bn(this),this.i=null,i=gs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},se.forEach=function(i,e){bn(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},se.oa=function(){bn(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let d=0;d<u.length;d++)t.push(e[s])}return t},se.W=function(i){bn(this);let e=[];if("string"==typeof i)ua(this,i)&&(e=e.concat(this.g.get(gs(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},se.set=function(i,e){return bn(this),this.i=null,ua(this,i=gs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},se.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},se.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const d=encodeURIComponent(String(s)),g=this.W(s);for(s=0;s<g.length;s++){var u=d;""!==g[s]&&(u+="="+encodeURIComponent(String(g[s]))),i.push(u)}}return this.i=i.join("&")};var Ao=10;function _t(i){return!!i.h||!!i.g&&i.g.size>=i.j}function er(i){return i.h?1:i.g?i.g.size:0}function Hs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function uo(i,e){i.g?i.g.add(e):i.h=e}function Xr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Gs(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return ii(i.i)}function ni(){}function Li(){this.g=new ni}function zs(i,e,t){const s=t||"";try{na(i,function(u,d){let g=u;bt(u)&&(g=oi(u)),e.push(s+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function Ws(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch{}}function Mo(i){this.l=i.ac||null,this.j=i.jb||!1}function k(i,e){an.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=O,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ao.prototype.cancel=function(){if(this.i=Gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ni.prototype.stringify=function(i){return pe.JSON.stringify(i,void 0)},ni.prototype.parse=function(i){return pe.JSON.parse(i,void 0)},Bt(Mo,xt),Mo.prototype.g=function(){return new k(this.l,this.j)},Mo.prototype.i=function(i){return function(){return i}}({}),Bt(k,an);var O=0;function A(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Z(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Qe(i)}function Qe(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(se=k.prototype).open=function(i,e){if(this.readyState!=O)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Qe(this)},se.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||pe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Z(this)),this.readyState=O},se.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Qe(this)),this.g&&(this.readyState=3,Qe(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;A(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},se.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Z(this):Qe(this),3==this.readyState&&A(this)}},se.Va=function(i){this.g&&(this.response=this.responseText=i,Z(this))},se.Ua=function(i){this.g&&(this.response=i,Z(this))},se.ga=function(){this.g&&Z(this)},se.setRequestHeader=function(i,e){this.v.append(i,e)},se.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},se.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(k.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Jt=pe.JSON.parse;function Mn(i){an.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wi,this.K=this.L=!1}Bt(Mn,an);var Wi="",Hr=/^https?$/i,Vi=["POST","PUT"];function lo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,co(i),ho(i)}function co(i){i.D||(i.D=!0,un(i,"complete"),un(i,"error"))}function ga(i){if(i.h&&typeof De<"u"&&(!i.C[1]||4!=Os(i)||2!=i.aa()))if(i.v&&4==Os(i))ls(i.Ha,0,i);else if(un(i,"readystatechange"),4==Os(i)){i.h=!1;try{const b=i.aa();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===b){var u=String(i.H).match(fi)[1]||null;if(!u&&pe.self&&pe.self.location){var d=pe.self.location.protocol;u=d.substr(0,d.length-1)}s=!Hr.test(u?u.toLowerCase():"")}t=s}if(t)un(i,"complete"),un(i,"success");else{i.m=6;try{var g=2<Os(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.aa()+"]",co(i)}}finally{ho(i)}}}function ho(i,e){if(i.g){zo(i);const t=i.g,s=i.C[0]?Re:null;i.g=null,i.C=null,e||un(i,"ready");try{t.onreadystatechange=s}catch{}}}function zo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(pe.clearTimeout(i.A),i.A=null)}function Os(i){return i.g?i.g.readyState:0}function la(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Wi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ia(i){let e="";return Dt(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function sa(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ia(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):jn(i,e,t))}function No(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function S(i){this.Ca=0,this.i=[],this.j=new hi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=No("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=No("baseRetryDelayMs",5e3,i),this.bb=No("retryDelaySeedMs",1e4,i),this.$a=No("forwardChannelMaxRetries",2,i),this.ta=No("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ao(i&&i.concurrentRequestLimit),this.Fa=new Li,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function $(i){if(Y(i),3==i.G){var e=i.U++,t=xr(i.F);jn(t,"SID",i.I),jn(t,"RID",e),jn(t,"TYPE","terminate"),nn(i,t),(e=new Ai(i,i.j,e,void 0)).K=2,e.v=Fi(xr(t)),t=!1,pe.navigator&&pe.navigator.sendBeacon&&(t=pe.navigator.sendBeacon(e.v.toString(),"")),!t&&pe.Image&&((new Image).src=e.v,t=!0),t||(e.g=eo(e.l,null),e.g.da(e.v)),e.F=Date.now(),Oi(e)}ks(i)}function N(i){i.g&&(rr(i),i.g.cancel(),i.g=null)}function Y(i){N(i),i.u&&(pe.clearTimeout(i.u),i.u=null),Ar(i),i.h.cancel(),i.m&&("number"==typeof i.m&&pe.clearTimeout(i.m),i.m=null)}function ge(i){_t(i.h)||i.m||(i.m=!0,kr(i.Ja,i),i.C=0)}function at(i,e){var t;t=e?e.m:i.U++;const s=xr(i.F);jn(s,"SID",i.I),jn(s,"RID",t),jn(s,"AID",i.T),nn(i,s),i.o&&i.s&&sa(s,i.o,i.s),t=new Ai(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=dr(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),uo(i.h,t),Xi(t,s,e)}function nn(i,e){i.ia&&Dt(i.ia,function(t,s){jn(e,s,t)}),i.l&&na({},function(t,s){jn(e,s,t)})}function dr(i,e,t){t=Math.min(i.i.length,t);var s=i.l?en(i.l.Ra,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let b=!0;for(let L=0;L<t;L++){let H=u[L].h;const ee=u[L].g;if(H-=d,0>H)d=Math.max(0,u[L].h-100),b=!1;else try{zs(ee,g,"req"+H+"_")}catch{s&&s(ee)}}if(b){s=g.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function Dr(i){i.g||i.u||(i.Z=1,kr(i.Ia,i),i.A=0)}function Ir(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Ae(en(i.Ia,i),Ks(i,i.A)),i.A++,0))}function rr(i){null!=i.B&&(pe.clearTimeout(i.B),i.B=null)}function pi(i){i.g=new Ai(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=xr(i.sa);jn(e,"RID","rpc"),jn(e,"SID",i.I),jn(e,"CI",i.L?"0":"1"),jn(e,"AID",i.T),jn(e,"TYPE","xmlhttp"),nn(i,e),i.o&&i.s&&sa(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Fi(xr(e)),t.s=null,t.P=!0,es(t,i)}function Ar(i){null!=i.v&&(pe.clearTimeout(i.v),i.v=null)}function Gr(i,e){var t=null;if(i.g==e){Ar(i),rr(i),i.g=null;var s=2}else{if(!Hs(i.h,e))return;t=e.D,Xr(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;un(s=cs(),new Oe(s,t)),ge(i)}else Dr(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function Ke(i,e){return!(er(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Ae(en(i.Ja,i,e),Ks(i,i.C)),i.C++,0)))}(i,e)||2==s&&Ir(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:xi(i,5);break;case 4:xi(i,10);break;case 3:xi(i,6);break;default:xi(i,2)}}function Ks(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function xi(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=en(i.kb,i);t||(t=new Ds("//www.google.com/images/cleardot.gif"),pe.location&&"http"==pe.location.protocol||bs(t,"https"),Fi(t)),function Ps(i,e){const t=new hi;if(pe.Image){const s=new Image;s.onload=fn(Ws,t,s,"TestLoadImage: loaded",!0,e),s.onerror=fn(Ws,t,s,"TestLoadImage: error",!1,e),s.onabort=fn(Ws,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=fn(Ws,t,s,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else _r(2);i.G=0,i.l&&i.l.va(e),ks(i),Y(i)}function ks(i){if(i.G=0,i.la=[],i.l){const e=Gs(i.h);(0!=e.length||0!=i.i.length)&&(Kr(i.la,e),Kr(i.la,i.i),i.h.i.length=0,ii(i.i),i.i.length=0),i.l.ua()}}function Ro(i,e,t){var s=t instanceof Ds?xr(t):new Ds(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),To(s,s.m);else{var u=pe.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new Ds(null,void 0);s&&bs(d,s),e&&(d.g=e),u&&To(d,u),t&&(d.l=t),s=d}return e=i.za,(t=i.D)&&e&&jn(s,t,e),jn(s,"VER",i.ma),nn(i,s),s}function eo(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mn(t&&i.Da&&!i.ra?new Mo({jb:!0}):i.ra)).Ka(i.H),e}function fo(){}function Cs(){if(ar&&!(10<=Number(Hn)))throw Error("Environmental error: no available transport.")}function Ts(i,e){an.call(this),this.g=new S(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Br(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Br(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ma(this)}function yi(i){gr.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ca(){ws.call(this),this.status=1}function ma(i){this.g=i}(se=Mn.prototype).Ka=function(i){this.L=i},se.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Io.g(),this.C=function Sn(i){return i.h||(i.h=i.i())}(this.u?this.u:Io),this.g.onreadystatechange=en(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void lo(this,d)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const d of s.keys())t.set(d,s.get(d))}s=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=pe.FormData&&i instanceof pe.FormData,!(0<=Zn(Vi,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zo(this),0<this.B&&((this.K=function xo(i){return ar&&function sr(){return function cr(i){var e=En;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=on(String(ue)).split("."),t=on("9").split("."),s=Math.max(e.length,t.length);for(let g=0;0==i&&g<s;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=yr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||yr(0==u[2].length,0==d[2].length)||yr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=en(this.qa,this)):this.A=ls(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){lo(this,d)}},se.qa=function(){typeof De<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))},se.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,un(this,"complete"),un(this,"abort"),ho(this))},se.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ho(this,!0)),Mn.X.M.call(this)},se.Ha=function(){this.s||(this.F||this.v||this.l?ga(this):this.fb())},se.fb=function(){ga(this)},se.aa=function(){try{return 2<Os(this)?this.g.status:-1}catch{return-1}},se.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},se.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Jt(e)}},se.Ea=function(){return this.m},se.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(se=S.prototype).ma=8,se.G=1,se.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Ai(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=wn(d),Tn(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dr(this,u,e),jn(t=xr(this.F),"RID",i),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),nn(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(ia(d)))+"&"+e:this.o&&sa(t,this.o,d)),uo(this.h,u),this.Ya&&jn(t,"TYPE","init"),this.O?(jn(t,"$req",e),jn(t,"SID","null"),u.Z=!0,Xi(u,t,null)):Xi(u,t,e),this.G=2}}else 3==this.G&&(i?at(this,i):0==this.i.length||_t(this.h)||at(this))},se.Ia=function(){if(this.u=null,pi(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Ae(en(this.eb,this),i)}},se.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_r(10),N(this),pi(this))},se.cb=function(){null!=this.v&&(this.v=null,N(this),Ir(this),_r(19))},se.kb=function(i){i?(this.j.info("Successfully pinged google.com"),_r(2)):(this.j.info("Failed to ping google.com"),_r(1))},(se=fo.prototype).xa=function(){},se.wa=function(){},se.va=function(){},se.ua=function(){},se.Ra=function(){},Cs.prototype.g=function(i,e){return new Ts(i,e)},Bt(Ts,an),Ts.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;_r(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ro(i,null,i.V),ge(i)},Ts.prototype.close=function(){$(this.g)},Ts.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=oi(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ge(e)},Ts.prototype.M=function(){this.g.l=null,delete this.j,$(this.g),delete this.g,Ts.X.M.call(this)},Bt(yi,gr),Bt(Ca,ws),Bt(ma,fo),ma.prototype.xa=function(){un(this.g,"a")},ma.prototype.wa=function(i){un(this.g,new yi(i))},ma.prototype.va=function(i){un(this.g,new Ca)},ma.prototype.ua=function(){un(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,Ts.prototype.send=Ts.prototype.u,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,gt.COMPLETE="complete",Un.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",an.prototype.listen=an.prototype.N,Mn.prototype.listenOnce=Mn.prototype.O,Mn.prototype.getLastError=Mn.prototype.Oa,Mn.prototype.getLastErrorCode=Mn.prototype.Ea,Mn.prototype.getStatus=Mn.prototype.aa,Mn.prototype.getResponseJson=Mn.prototype.Sa,Mn.prototype.getResponseText=Mn.prototype.fa,Mn.prototype.send=Mn.prototype.da,Mn.prototype.setWithCredentials=Mn.prototype.Ka;var Ru=je.createWebChannelTransport=function(){return new Cs},U=je.getStatEventTarget=function(){return cs()},m=je.ErrorCode=Be,E=je.EventType=gt,R=je.Event=Sr,G=je.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},X=je.FetchXmlHttpFactory=Mo,_e=je.WebChannel=Un,we=je.XhrIo=Mn;const Le="@firebase/firestore";class st{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");let Wt="9.15.0";const jt=new It.Yd("@firebase/firestore");function tr(){return jt.logLevel}function Xe(i,...e){if(jt.logLevel<=It.in.DEBUG){const t=e.map(ur);jt.debug(`Firestore (${Wt}): ${i}`,...t)}}function ln(i,...e){if(jt.logLevel<=It.in.ERROR){const t=e.map(ur);jt.error(`Firestore (${Wt}): ${i}`,...t)}}function Rn(i,...e){if(jt.logLevel<=It.in.WARN){const t=e.map(ur);jt.warn(`Firestore (${Wt}): ${i}`,...t)}}function ur(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Pt(i="Unexpected state"){const e=`FIRESTORE (${Wt}) INTERNAL ASSERTION FAILED: `+i;throw ln(e),new Error(e)}function qt(i,e){i||Pt()}function Vt(i,e){return i}const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends ut.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}}class po{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wo{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,t(H)):Promise.resolve();let g=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Lr,e.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const H=g;e.enqueueRetryable((0,me.Z)(function*(){yield H.promise,yield d(s.currentUser)}))},L=H=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(H=>L(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?L(H):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Lr)}},0),b()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt("string"==typeof s.accessToken),new rs(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qt(null===e||"string"==typeof e),new st(e)}}class Ko{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=st.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(qt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Po{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new Ko(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gn{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=d=>{null!=d.error&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,Xe("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const u=d=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qt("string"==typeof t.token),this.A=t.token,new Oo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function On(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class or{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=On(40);for(let d=0;d<u.length;++d)s.length<20&&u[d]<t&&(s+=e.charAt(u[d]%e.length))}return s}}function mn(i,e){return i<e?-1:i>e?1:0}function Nr(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function is(i){return i+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ft(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ft(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ft(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Er(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mn(this.nanoseconds,e.nanoseconds):mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Er(0,0))}static max(){return new Ut(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ko{constructor(e,t,s){void 0===t?t=0:t>e.length&&Pt(),void 0===s?s=e.length-t:s>e.length-t&&Pt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===ko.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ko?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gn extends ko{construct(e,t,s){return new Gn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ft(Ze.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new Gn(t)}static emptyPath(){return new Gn([])}}const li=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class br extends ko{construct(e,t,s){return new br(e,t,s)}static isValidIdentifier(e){return li.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new br(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const d=()=>{if(0===s.length)throw new ft(Ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let g=!1;for(;u<e.length;){const b=e[u];if("\\"===b){if(u+1===e.length)throw new ft(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new ft(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=L,u+=2}else"`"===b?(g=!g,u++):"."!==b||g?(s+=b,u++):(d(),u++)}if(d(),g)throw new ft(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new br(t)}static emptyPath(){return new br([])}}class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(Gn.fromString(e))}static fromName(e){return new Nt(Gn.fromString(e).popFirst(5))}static empty(){return new Nt(Gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new Gn(e.slice()))}}class Fo{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function go(i){return i.fields.find(e=>2===e.kind)}function Fs(i){return i.fields.filter(e=>2!==e.kind)}Fo.UNKNOWN_ID=-1;class Vr{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ya{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ya(0,qo.min())}}function Sa(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=Ut.fromTimestamp(1e9===s?new Er(t+1,0):new Er(t,s));return new qo(u,Nt.empty(),e)}function Pu(i){return new qo(i.readTime,i.key,-1)}class qo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new qo(Ut.min(),Nt.empty(),-1)}static max(){return new qo(Ut.max(),Nt.empty(),-1)}}function Qa(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Nt.comparator(i.documentKey,e.documentKey),0!==t?t:mn(i.largestBatchId,e.largestBatchId))}const xl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Aa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ma(i){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,me.Z)(function*(i){if(i.code!==Ze.FAILED_PRECONDITION||i.message!==xl)throw i;Xe("LocalStore","Unexpectedly lost primary lease")}),Nl.apply(this,arguments)}class $e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $e((s,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $e?t:$e.resolve(t)}catch(t){return $e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.reject(t)}static resolve(e){return new $e((t,s)=>{t(e)})}static reject(e){return new $e((t,s)=>{s(e)})}static waitFor(e){return new $e((t,s)=>{let u=0,d=0,g=!1;e.forEach(b=>{++u,b.next(()=>{++d,g&&d===u&&t()},L=>s(L))}),g=!0,d===u&&t()})}static or(e){let t=$e.resolve(!1);for(const s of e)t=t.next(u=>u?$e.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,d)=>{s.push(t.call(this,u,d))}),this.waitFor(s)}static mapArray(e,t){return new $e((s,u)=>{const d=e.length,g=new Array(d);let b=0;for(let L=0;L<d;L++){const H=L;t(e[H]).next(ee=>{g[H]=ee,++b,b===d&&s(g)},ee=>u(ee))}})}static doWhile(e,t){return new $e((s,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):s()};d()})}}class xa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Lr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Zo(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=oa(s.target.error);this.P.reject(new Zo(e,u))}}static open(e,t,s,u){try{return new xa(t,e.transaction(u,s))}catch(d){throw new Zo(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lo(t)}}class Ls{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===Ls.D((0,ut.z$)())&&ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),ya(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ut.hl)())return!1;if(Ls.N())return!0;const e=(0,ut.z$)(),t=Ls.D(e),s=0<t&&t<10,u=Ls.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{u(new Zo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const b=g.target.error;u("VersionError"===b.name?new ft(Ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new ft(Ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new Zo(e,b))},d.onupgradeneeded=g=>{Xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{Xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var d=this;return(0,me.Z)(function*(){const g="readonly"===t;let b=0;for(;;){++b;try{d.db=yield d.F(e);const L=xa.open(d.db,e,g?"readonly":"readwrite",s),H=u(L).next(ee=>(L.V(),ee)).catch(ee=>(L.abort(ee),$e.reject(ee))).toPromise();return H.catch(()=>{}),yield L.v,H}catch(L){const H=L,ee="FirebaseError"!==H.name&&b<3;if(Xe("SimpleDb","Transaction failed with error:",H.message,"Retrying:",ee),d.close(),!ee)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oc{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ya(this.q.delete())}}class Zo extends ft{constructor(e,t){super(Ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ss(i){return"IndexedDbTransactionError"===i.name}class Lo{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Xe("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ya(s)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),ya(this.store.add(e))}get(e){return ya(this.store.get(e)).next(t=>(void 0===t&&(t=null),Xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),ya(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),ya(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),d=[];return this.H(u,(g,b)=>{d.push(b)}).next(()=>d)}{const u=this.store.getAll(s.range);return new $e((d,g)=>{u.onerror=b=>{g(b.target.error)},u.onsuccess=b=>{d(b.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new $e((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}Y(e,t){Xe("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const u=this.cursor(s);return this.H(u,(d,g,b)=>b.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new $e((s,u)=>{t.onerror=d=>{const g=oa(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(b=>{b?g.continue():s()}):s()}})}H(e,t){const s=[];return new $e((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const b=g.target.result;if(!b)return void u();const L=new oc(b),H=t(b.primaryKey,b.value,L);if(H instanceof $e){const ee=H.catch(Ee=>(L.done(),$e.reject(Ee)));s.push(ee)}L.isDone?u():null===L.G?b.continue():b.continue(L.G)}}).next(()=>$e.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ya(i){return new $e((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=oa(s.target.error);t(u)}})}let Na=!1;function oa(i){const e=Ls.D((0,ut.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Na||(Na=!0,setTimeout(()=>{throw s},0)),s}}return i}class vu{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Xe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){ss(s)?Xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Ma(s)}yield t.nt(6e4)}))}}class ac{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,d=!0;return $e.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return Xe("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(b=>{u-=b,s.add(g)});d=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(b=>(Xe("IndexBackiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(e,t,b))).next(()=>g.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,d)=>{const g=Pu(d);Qa(g,s)>0&&(s=g)}),new qo(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zs=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class _u{constructor(e,t,s,u,d,g,b,L){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=b,this.useFetchStreams=L}}class mo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}function ka(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function os(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ja(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function w(i){return null==i}function D(i){return 0===i&&1/i==-1/0}function _(i){return"number"==typeof i&&Number.isInteger(i)&&!D(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class P{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new P(t)}static fromUint8Array(e){const t=function(s){let u="";for(let d=0;d<s.length;++d)u+=String.fromCharCode(s[d]);return u}(e);return new P(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}P.EMPTY_BYTE_STRING=new P("");const K=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ie(i){if(qt(!!i),"string"==typeof i){let e=0;const t=K.exec(i);if(qt(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ae(i.seconds),nanos:ae(i.nanos)}}function ae(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function nt(i){return"string"==typeof i?P.fromBase64String(i):P.fromUint8Array(i)}function kt(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zn(i){const e=i.mapValue.fields.__previous_value__;return kt(e)?zn(e):e}function rn(i){const e=ie(i.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}const nr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},as={nullValue:"NULL_VALUE"};function ys(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?kt(i)?4:Fe(i)?9007199254740991:10:Pt()}function vi(i,e){if(i===e)return!0;const t=ys(i);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return rn(i).isEqual(rn(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const d=ie(s.timestampValue),g=ie(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,nt(i.bytesValue).isEqual(nt(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return ae(s.geoPointValue.latitude)===ae(u.geoPointValue.latitude)&&ae(s.geoPointValue.longitude)===ae(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return ae(s.integerValue)===ae(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const d=ae(s.doubleValue),g=ae(u.doubleValue);return d===g?D(d)===D(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return Nr(i.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:return function(s,u){const d=s.mapValue.fields||{},g=u.mapValue.fields||{};if(ka(d)!==ka(g))return!1;for(const b in d)if(d.hasOwnProperty(b)&&(void 0===g[b]||!vi(d[b],g[b])))return!1;return!0}(i,e);default:return Pt()}var u}function Ss(i,e){return void 0!==(i.values||[]).find(t=>vi(t,e))}function As(i,e){if(i===e)return 0;const t=ys(i),s=ys(e);if(t!==s)return mn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return mn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=ae(u.integerValue||u.doubleValue),b=ae(d.integerValue||d.doubleValue);return g<b?-1:g>b?1:g===b?0:isNaN(g)?isNaN(b)?0:-1:1}(i,e);case 3:return Fa(i.timestampValue,e.timestampValue);case 4:return Fa(rn(i),rn(e));case 5:return mn(i.stringValue,e.stringValue);case 6:return function(u,d){const g=nt(u),b=nt(d);return g.compareTo(b)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),b=d.split("/");for(let L=0;L<g.length&&L<b.length;L++){const H=mn(g[L],b[L]);if(0!==H)return H}return mn(g.length,b.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=mn(ae(u.latitude),ae(d.latitude));return 0!==g?g:mn(ae(u.longitude),ae(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],b=d.values||[];for(let L=0;L<g.length&&L<b.length;++L){const H=As(g[L],b[L]);if(H)return H}return mn(g.length,b.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===nr.mapValue&&d===nr.mapValue)return 0;if(u===nr.mapValue)return 1;if(d===nr.mapValue)return-1;const g=u.fields||{},b=Object.keys(g),L=d.fields||{},H=Object.keys(L);b.sort(),H.sort();for(let ee=0;ee<b.length&&ee<H.length;++ee){const Ee=mn(b[ee],H[ee]);if(0!==Ee)return Ee;const He=As(g[b[ee]],L[H[ee]]);if(0!==He)return He}return mn(b.length,H.length)}(i.mapValue,e.mapValue);default:throw Pt()}}function Fa(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return mn(i,e);const t=ie(i),s=ie(e),u=mn(t.seconds,s.seconds);return 0!==u?u:mn(t.nanos,s.nanos)}function Yo(i){return va(i)}function va(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=ie(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?nt(i.bytesValue).toBase64():"referenceValue"in i?Nt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",d=!0;for(const g of s.values||[])d?d=!1:u+=",",u+=va(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let d="{",g=!0;for(const b of u)g?g=!1:d+=",",d+=`${b}:${va(s.fields[b])}`;return d+"}"}(i.mapValue):Pt();var e}function La(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ki(i){return!!i&&"integerValue"in i}function Ou(i){return!!i&&"arrayValue"in i}function x(i){return!!i&&"nullValue"in i}function F(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function q(i){return!!i&&"mapValue"in i}function le(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return os(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=le(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=le(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Fe(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function et(i){return"nullValue"in i?as:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?La(mo.empty(),Nt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Pt()}function St(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?La(mo.empty(),Nt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?nr:Pt()}function pn(i,e){const t=As(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Nn(i,e){const t=As(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class vn{constructor(e,t){this.position=e,this.inclusive=t}}function Cr(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(s=d.field.isKeyField()?Nt.comparator(Nt.fromName(g.referenceValue),t.key):As(g,t.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function Jn(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!vi(i.position[t],e.position[t]))return!1;return!0}class Ms{}class Ln extends Ms{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new ah(e,t,s):"array-contains"===t?new uc(e,s):"in"===t?new el(e,s):"not-in"===t?new qf(e,s):"array-contains-any"===t?new uh(e,s):new Ln(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Wf(e,s):new Kf(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(As(t,this.value)):null!==t&&ys(this.value)===ys(t)&&this.matchesComparison(As(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ur extends Ms{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Ur(e,t)}matches(e){return Ra(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ra(i){return"and"===i.op}function Va(i){return"or"===i.op}function Ys(i){return Vo(i)&&Ra(i)}function Vo(i){for(const e of i.filters)if(e instanceof Ur)return!1;return!0}function ku(i){if(i instanceof Ln)return i.field.canonicalString()+i.op.toString()+Yo(i.value);{const e=i.filters.map(t=>ku(t)).join(",");return`${i.op}(${e})`}}function zf(i,e){return i instanceof Ln?(t=i,(s=e)instanceof Ln&&t.op===s.op&&t.field.isEqual(s.field)&&vi(t.value,s.value)):i instanceof Ur?function(t,s){return s instanceof Ur&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,d,g)=>u&&zf(d,s.filters[g]),!0)}(i,e):void Pt();var t,s}function dd(i,e){const t=i.filters.concat(e);return Ur.create(t,i.op)}function oh(i){return i instanceof Ln?`${(e=i).field.canonicalString()} ${e.op} ${Yo(e.value)}`:i instanceof Ur?function(e){return e.op.toString()+" {"+e.getFilters().map(oh).join(" ,")+"}"}(i):"Filter";var e}class ah extends Ln{constructor(e,t,s){super(e,t,s),this.key=Nt.fromName(s.referenceValue)}matches(e){const t=Nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wf extends Ln{constructor(e,t){super(e,"in",t),this.keys=hd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Kf extends Ln{constructor(e,t){super(e,"not-in",t),this.keys=hd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Nt.fromName(s.referenceValue))}class uc extends Ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ou(t)&&Ss(t.arrayValue,this.value)}}class el extends Ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ss(this.value.arrayValue,t)}}class qf extends Ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ss(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ss(this.value.arrayValue,t)}}class uh extends Ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ss(this.value.arrayValue,s))}}class Rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function lh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class xs{constructor(e,t){this.comparator=e,this.root=t||yo.EMPTY}insert(e,t){return new xs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yo.BLACK,null,null))}remove(e){return new xs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?s(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yo{constructor(e,t,s,u,d){this.key=e,this.value=t,this.color=s??yo.RED,this.left=u??yo.EMPTY,this.right=d??yo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,d){return new yo(e??this.key,t??this.value,s??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const d=s(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return yo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return yo.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pt();const e=this.left.check();if(e!==this.right.check())throw Pt();return e+(this.isRed()?0:1)}}yo.EMPTY=null,yo.RED=!0,yo.BLACK=!1,yo.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt()}get value(){throw Pt()}get color(){throw Pt()}get left(){throw Pt()}get right(){throw Pt()}copy(i,e,t,s,u){return this}insert(i,e,t){return new yo(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ci{constructor(e){this.comparator=e,this.data=new xs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fd(this.data.getIterator())}getIteratorFrom(e){return new fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=s.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ci(this.comparator);return t.data=e,t}}class fd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(i){return i.hasNext()?i.getNext():void 0}class Qo{constructor(e){this.fields=e,e.sort(br.comparator)}static empty(){return new Qo([])}unionWith(e){let t=new ci(br.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Qo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nr(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Uo{constructor(e){this.value=e}static empty(){return new Uo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!q(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=le(t)}setAll(e){let t=br.emptyPath(),s={},u=[];e.forEach((g,b)=>{if(!t.isImmediateParentOf(b)){const L=this.getFieldsMap(t);this.applyChanges(L,s,u),s={},u=[],t=b.popLast()}g?s[b.lastSegment()]=le(g):u.push(b.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,s,u)}delete(e){const t=this.field(e.popLast());q(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];q(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){os(t,(u,d)=>e[u]=d);for(const u of s)delete e[u]}clone(){return new Uo(le(this.value))}}function Zf(i){const e=[];return os(i.fields,(t,s)=>{const u=new br([t]);if(q(s)){const d=Zf(s.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new Qo(e)}class qi{constructor(e,t,s,u,d,g,b){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=d,this.data=g,this.documentState=b}static newInvalidDocument(e){return new qi(e,0,Ut.min(),Ut.min(),Ut.min(),Uo.empty(),0)}static newFoundDocument(e,t,s,u){return new qi(e,1,t,Ut.min(),s,u,0)}static newNoDocument(e,t){return new qi(e,2,t,Ut.min(),Ut.min(),Uo.empty(),0)}static newUnknownDocument(e,t){return new qi(e,3,t,Ut.min(),Ut.min(),Uo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yf{constructor(e,t=null,s=[],u=[],d=null,g=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=d,this.startAt=g,this.endAt=b,this.ft=null}}function ch(i,e=null,t=[],s=[],u=null,d=null,g=null){return new Yf(i,e,t,s,u,d,g)}function Fu(i){const e=Vt(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ku(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),w(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yo(s)).join(",")),e.ft=t}return e.ft}function tl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!lh(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!zf(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Jn(i.startAt,e.startAt)&&Jn(i.endAt,e.endAt)}function nl(i){return Nt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Lu(i,e){return i.filters.filter(t=>t instanceof Ln&&t.field.isEqual(e))}function pd(i,e,t){let s=as,u=!0;for(const d of Lu(i,e)){let g=as,b=!0;switch(d.op){case"<":case"<=":g=et(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,b=!1;break;case"!=":case"not-in":g=as}pn({value:s,inclusive:u},{value:g,inclusive:b})<0&&(s=g,u=b)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];pn({value:s,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(s=g,u=t.inclusive);break}return{value:s,inclusive:u}}function Ol(i,e,t){let s=nr,u=!0;for(const d of Lu(i,e)){let g=nr,b=!0;switch(d.op){case">=":case">":g=St(d.value),b=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,b=!1;break;case"!=":case"not-in":g=nr}Nn({value:s,inclusive:u},{value:g,inclusive:b})>0&&(s=g,u=b)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Nn({value:s,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(s=g,u=t.inclusive);break}return{value:s,inclusive:u}}class to{constructor(e,t=null,s=[],u=[],d=null,g="F",b=null,L=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=d,this.limitType=g,this.startAt=b,this.endAt=L,this.dt=null,this._t=null}}function gd(i,e,t,s,u,d,g,b){return new to(i,e,t,s,u,d,g,b)}function rl(i){return new to(i)}function cc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function dc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Vu(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function hc(i){return null!==i.collectionGroup}function Uu(i){const e=Vt(i);if(null===e.dt){e.dt=[];const t=Vu(e),s=dc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new Rl(t)),e.dt.push(new Rl(br.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.dt.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Rl(br.keyField(),d))}}}return e.dt}function Jo(i){const e=Vt(i);if(!e._t)if("F"===e.limitType)e._t=ch(e.path,e.collectionGroup,Uu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of Uu(e))t.push(new Rl(d.field,"desc"===d.dir?"asc":"desc"));const s=e.endAt?new vn(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new vn(e.startAt.position,e.startAt.inclusive):null;e._t=ch(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e._t}function fc(i,e){e.getFirstInequalityField(),Vu(i);const t=i.filters.concat([e]);return new to(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function pc(i,e,t){return new to(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function kl(i,e){return tl(Jo(i),Jo(e))&&i.limitType===e.limitType}function vo(i){return`${Fu(Jo(i))}|lt:${i.limitType}`}function Fl(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>oh(s)).join(", ")}]`),w(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yo(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yo(s)).join(",")),`Target(${t})`}(Jo(i))}; limitType=${i.limitType})`}function md(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Nt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of Uu(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,d,g){const b=Cr(u,d,g);return u.inclusive?b<=0:b<0}(t.startAt,Uu(t),s)||t.endAt&&!function(u,d,g){const b=Cr(u,d,g);return u.inclusive?b>=0:b>0}(t.endAt,Uu(t),s)));var t,s}function Ua(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function _o(i){return(e,t)=>{let s=!1;for(const u of Uu(i)){const d=Ll(u,e,t);if(0!==d)return d;s=s||u.field.isKeyField()}return 0}}function Ll(i,e,t){const s=i.field.isKeyField()?Nt.comparator(e.key,t.key):function(u,d,g){const b=d.data.field(u),L=g.data.field(u);return null!==b&&null!==L?As(b,L):Pt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Pt()}}function Vl(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D(e)?"-0":e}}function dh(i){return{integerValue:""+i}}function gc(i,e){return _(e)?dh(e):Vl(i,e)}class Ul{constructor(){this._=void 0}}function Qf(i,e,t){return i instanceof Bu?function(s,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Xa?fh(i,e):i instanceof eu?yc(i,e):function(s,u){const d=hh(s,u),g=yd(d)+yd(s.gt);return Ki(d)&&Ki(s.gt)?dh(g):Vl(s.yt,g)}(i,e)}function mc(i,e,t){return i instanceof Xa?fh(i,e):i instanceof eu?yc(i,e):t}function hh(i,e){return i instanceof il?Ki(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Bu extends Ul{}class Xa extends Ul{constructor(e){super(),this.elements=e}}function fh(i,e){const t=vd(e);for(const s of i.elements)t.some(u=>vi(u,s))||t.push(s);return{arrayValue:{values:t}}}class eu extends Ul{constructor(e){super(),this.elements=e}}function yc(i,e){let t=vd(e);for(const s of i.elements)t=t.filter(u=>!vi(u,s));return{arrayValue:{values:t}}}class il extends Ul{constructor(e,t){super(),this.yt=e,this.gt=t}}function yd(i){return ae(i.integerValue||i.doubleValue)}function vd(i){return Ou(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Pa{constructor(e,t){this.field=e,this.transform=t}}class Xf{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Bl{}function ep(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ba(i.key,_i.none()):new nu(i.key,i.data,_i.none());{const t=i.data,s=Uo.empty();let u=new ci(br.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?s.delete(d):s.set(d,g),u=u.add(d)}return new ru(i.key,s,new Qo(u.toArray()),_i.none())}}function tu(i,e,t){i instanceof nu?function(s,u,d){const g=s.value.clone(),b=yh(s.fieldTransforms,u,d.transformResults);g.setAll(b),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof ru?function(s,u,d){if(!Eu(s.precondition,u))return void u.convertToUnknownDocument(d.version);const g=yh(s.fieldTransforms,u,d.transformResults),b=u.data;b.setAll(mh(s)),b.setAll(g),u.convertToFoundDocument(d.version,b).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ju(i,e,t,s){return i instanceof nu?function(u,d,g,b){if(!Eu(u.precondition,d))return g;const L=u.value.clone(),H=vh(u.fieldTransforms,b,d);return L.setAll(H),d.convertToFoundDocument(d.version,L).setHasLocalMutations(),null}(i,e,t,s):i instanceof ru?function(u,d,g,b){if(!Eu(u.precondition,d))return g;const L=vh(u.fieldTransforms,b,d),H=d.data;return H.setAll(mh(u)),H.setAll(L),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(ee=>ee.field))}(i,e,t,s):(g=t,Eu(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function ph(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),d=hh(s.transform,u||null);null!=d&&(null===t&&(t=Uo.empty()),t.set(s.field,d))}return t||null}function gh(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&Nr(t,s,(u,d)=>function Jf(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Xa&&s instanceof Xa||t instanceof eu&&s instanceof eu?Nr(t.elements,s.elements,vi):t instanceof il&&s instanceof il?vi(t.gt,s.gt):t instanceof Bu&&s instanceof Bu);var t,s}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class nu extends Bl{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ru extends Bl{constructor(e,t,s,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function mh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function yh(i,e,t){const s=new Map;qt(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,b=e.data.field(d.field);s.set(d.field,mc(g,b,t[u]))}return s}function vh(i,e,t){const s=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);s.set(u.field,Qf(d,g,e))}return s}class Ba extends Bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _d extends Bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ed{constructor(e){this.count=e}}var vs,zr;function vc(i){switch(i){default:return Pt();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0}}function _h(i){if(void 0===i)return ln("GRPC error has no .code"),Ze.UNKNOWN;switch(i){case vs.OK:return Ze.OK;case vs.CANCELLED:return Ze.CANCELLED;case vs.UNKNOWN:return Ze.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Ze.INTERNAL;case vs.UNAVAILABLE:return Ze.UNAVAILABLE;case vs.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case vs.NOT_FOUND:return Ze.NOT_FOUND;case vs.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case vs.ABORTED:return Ze.ABORTED;case vs.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case vs.DATA_LOSS:return Ze.DATA_LOSS;default:return Pt()}}(zr=vs||(vs={}))[zr.OK=0]="OK",zr[zr.CANCELLED=1]="CANCELLED",zr[zr.UNKNOWN=2]="UNKNOWN",zr[zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zr[zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zr[zr.NOT_FOUND=5]="NOT_FOUND",zr[zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",zr[zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",zr[zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",zr[zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zr[zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zr[zr.ABORTED=10]="ABORTED",zr[zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",zr[zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",zr[zr.INTERNAL=13]="INTERNAL",zr[zr.UNAVAILABLE=14]="UNAVAILABLE",zr[zr.DATA_LOSS=15]="DATA_LOSS";class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,d]of s)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(t,s)=>{for(const[u,d]of s)e(u,d)})}isEmpty(){return Ja(this.inner)}size(){return this.innerSize}}const _c=new xs(Nt.comparator);function Eo(){return _c}const su=new xs(Nt.comparator);function sl(...i){let e=su;for(const t of i)e=e.insert(t.key,t);return e}function jl(i){let e=su;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ja(){return _a()}function ca(){return _a()}function _a(){return new iu(i=>i.toString(),(i,e)=>i.isEqual(e))}const Eh=new xs(Nt.comparator),wh=new ci(Nt.comparator);function fr(...i){let e=wh;for(const t of i)e=e.add(t);return e}const Ec=new ci(mn);function ol(){return Ec}class $u{constructor(e,t,s,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $u(Ut.min(),u,ol(),Eo(),fr())}}class wu{constructor(e,t,s,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wu(s,t,fr(),fr(),fr())}}class aa{constructor(e,t,s,u){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=u}}class wc{constructor(e,t){this.targetId=e,this.Et=t}}class Ic{constructor(e,t,s=P.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class Dc{constructor(){this.At=0,this.Rt=Xo(),this.bt=P.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=fr(),t=fr(),s=fr();return this.Rt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:Pt()}}),new wu(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=Xo()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class wd{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Eo(),this.qt=Hu(),this.Ut=new ci(mn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:Pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,u)=>{this.zt(u)&&t(u)})}Jt(e){const t=e.targetId,s=e.Et.count,u=this.Yt(t);if(u){const d=u.target;if(nl(d))if(0===s){const g=new Nt(d.path);this.Qt(t,g,qi.newNoDocument(g,Ut.min()))}else qt(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((d,g)=>{const b=this.Yt(g);if(b){if(d.current&&nl(b.target)){const L=new Nt(b.target.path);null!==this.Lt.get(L)||this.te(g,L)||this.Qt(g,L,qi.newNoDocument(L,e))}d.St&&(t.set(g,d.Ct()),d.xt())}});let s=fr();this.qt.forEach((d,g)=>{let b=!0;g.forEachWhile(L=>{const H=this.Yt(L);return!H||2===H.purpose||(b=!1,!1)}),b&&(s=s.add(d))}),this.Lt.forEach((d,g)=>g.setReadTime(e));const u=new $u(e,t,this.Ut,this.Lt,s);return this.Lt=Eo(),this.qt=Hu(),this.Ut=new ci(mn),u}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const u=this.Wt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Dc,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ci(mn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Xe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Dc),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new xs(Nt.comparator)}function Xo(){return new xs(Nt.comparator)}const bc={asc:"ASCENDING",desc:"DESCENDING"},Id={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tp={and:"AND",or:"OR"};class $a{constructor(e,t){this.databaseId=e,this.wt=t}}function Ea(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function al(i,e){return i.wt?e.toBase64():e.toUint8Array()}function Cc(i,e){return Ea(i,e.toTimestamp())}function Ci(i){return qt(!!i),Ut.fromTimestamp(function(e){const t=ie(e);return new Er(t.seconds,t.nanos)}(i))}function $l(i,e){return(t=i,new Gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ih(i){const e=Gn.fromString(i);return qt(Sc(e)),e}function Tc(i,e){return $l(i.databaseId,e.path)}function Ha(i,e){const t=Ih(e);if(t.get(1)!==i.databaseId.projectId)throw new ft(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ft(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Nt(f(t))}function Hl(i,e){return $l(i.databaseId,e)}function y(i){const e=Ih(i);return 4===e.length?Gn.emptyPath():f(e)}function c(i){return new Gn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function f(i){return qt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function I(i,e,t){return{name:Tc(i,e),fields:t.value.mapValue.fields}}function B(i,e,t){const s=Ha(i,e.name),u=Ci(e.updateTime),d=e.createTime?Ci(e.createTime):Ut.min(),g=new Uo({mapValue:{fields:e.fields}}),b=qi.newFoundDocument(s,u,d,g);return t&&b.setHasCommittedMutations(),t?b.setHasCommittedMutations():b}function ct(i,e){let t;if(e instanceof nu)t={update:I(i,e.key,e.value)};else if(e instanceof Ba)t={delete:Tc(i,e.key)};else if(e instanceof ru)t={update:I(i,e.key,e.data),updateMask:Dd(e.fieldMask)};else{if(!(e instanceof _d))return Pt();t={verify:Tc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const g=d.transform;if(g instanceof Bu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Xa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof eu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof il)return{fieldPath:d.field.canonicalString(),increment:g.gt};throw Pt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Cc(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Pt()),t;var u}function zt(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?_i.updateTime(Ci(u.updateTime)):void 0!==u.exists?_i.exists(u.exists):_i.none():_i.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let b=null;"setToServerValue"in g?(qt("REQUEST_TIME"===g.setToServerValue),b=new Bu):"appendMissingElements"in g?b=new Xa(g.appendMissingElements.values||[]):"removeAllFromArray"in g?b=new eu(g.removeAllFromArray.values||[]):"increment"in g?b=new il(d,g.increment):Pt();const L=br.fromServerFormat(g.fieldPath);return new Pa(L,b)}(i,u)):[];var u;if(e.update){const u=Ha(i,e.update.name),d=new Uo({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Qo((e.updateMask.fieldPaths||[]).map(H=>br.fromServerFormat(H)));return new ru(u,d,g,t,s)}return new nu(u,d,t,s)}if(e.delete){const u=Ha(i,e.delete);return new Ba(u,t)}if(e.verify){const u=Ha(i,e.verify);return new _d(u,t)}return Pt()}function Wn(i,e){return{documents:[Hl(i,e.path)]}}function Vn(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Hl(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hl(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(L){if(0!==L.length)return Ch(Ur.create(L,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const d=function(L){if(0!==L.length)return L.map(H=>{return{field:ul((ee=H).field),direction:Dh(ee.dir)};var ee})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(H=e.limit,i.wt||w(H)?H:{value:H});var H,b,L;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(b=e.startAt).inclusive,values:b.position}),e.endAt&&(t.structuredQuery.endAt={before:!(L=e.endAt).inclusive,values:L.position}),t}function Vs(i){let e=y(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){qt(1===s);const ee=t.from[0];ee.allDescendants?u=ee.collectionId:e=e.child(ee.collectionId)}let d=[];t.where&&(d=function(ee){const Ee=ou(ee);return Ee instanceof Ur&&Ys(Ee)?Ee.getFilters():[Ee]}(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(ee=>{return new Rl(Gu((Ee=ee).field),function(He){switch(He){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ee.direction));var Ee}));let b=null;t.limit&&(b=function(ee){let Ee;return Ee="object"==typeof ee?ee.value:ee,w(Ee)?null:Ee}(t.limit));let L=null;var ee;t.startAt&&(L=new vn((ee=t.startAt).values||[],!!ee.before));let H=null;return t.endAt&&(H=function(ee){return new vn(ee.values||[],!ee.before)}(t.endAt)),gd(e,u,g,d,b,"F",L,H)}function ou(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gu(e.unaryFilter.field);return Ln.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Gu(e.unaryFilter.field);return Ln.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Gu(e.unaryFilter.field);return Ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Gu(e.unaryFilter.field);return Ln.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Pt()}}(i):void 0!==i.fieldFilter?Ln.create(Gu((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Ur.create(e.compositeFilter.filters.map(t=>ou(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Pt()}}(e.compositeFilter.op))}(i):Pt();var e}function Dh(i){return bc[i]}function bh(i){return Id[i]}function np(i){return tp[i]}function ul(i){return{fieldPath:i.canonicalString()}}function Gu(i){return br.fromServerFormat(i.fieldPath)}function Ch(i){return i instanceof Ln?function(e){if("=="===e.op){if(F(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NAN"}};if(x(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(F(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NOT_NAN"}};if(x(e.value))return{unaryFilter:{field:ul(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(e.field),op:bh(e.op),value:e.value}}}(i):i instanceof Ur?function(e){const t=e.getFilters().map(s=>Ch(s));return 1===t.length?t[0]:{compositeFilter:{op:np(e.op),filters:t}}}(i):Pt()}function Dd(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Sc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Bo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ac(e)),e=rp(i.get(t),e);return Ac(e)}function rp(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function Ac(i){return i+"\x01\x01"}function wa(i){const e=i.length;if(qt(e>=2),2===e)return qt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Gn.emptyPath();const t=e-2,s=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&Pt(),i.charAt(g+1)){case"\x01":const b=i.substring(d,g);let L;0===u.length?L=b:(u+=b,L=u,u=""),s.push(L);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:Pt()}d=g+2}return new Gn(s)}const Iu=["userId","batchId"];function ll(i,e){return[i,Bo(e)]}function ip(i,e,t){return[i,Bo(e),t]}const Vg={},Ug=["prefixPath","collectionGroup","readTime","documentId"],y0=["prefixPath","collectionGroup","documentId"],v0=["collectionGroup","readTime","prefixPath","documentId"],_0=["canonicalId","targetId"],sp=["targetId","path"],op=["path","targetId"],E0=["collectionId","parent"],w0=["indexId","uid"],Bg=["uid","sequenceNumber"],Yy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qy=["indexId","uid","orderedDocumentKey"],Jy=["userId","collectionPath","documentId"],Xy=["userId","collectionPath","largestBatchId"],jg=["userId","collectionGroup","largestBatchId"],bd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ev=[...bd,"documentOverlays"],Th=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$g=Th,ro=[...$g,"indexConfiguration","indexState","indexEntries"];class ap extends Aa{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function jo(i,e){const t=Vt(i);return Ls.M(t.se,e)}class Cd{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&tu(d,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ju(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ju(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ca();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let b=this.applyToLocalView(g,d.mutatedFields);b=t.has(u.key)?null:b;const L=ep(g,b);null!==L&&s.set(u.key,L),g.isValidDocument()||g.convertToNoDocument(Ut.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fr())}isEqual(e){return this.batchId===e.batchId&&Nr(this.mutations,e.mutations,(t,s)=>gh(t,s))&&Nr(this.baseMutations,e.baseMutations,(t,s)=>gh(t,s))}}class Sh{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){qt(e.mutations.length===s.length);let u=Eh;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,s[g].version);return new Sh(e,t,s,u)}}class up{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cl{constructor(e,t,s,u,d=Ut.min(),g=Ut.min(),b=P.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=b}withSequenceNumber(e){return new cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hg{constructor(e){this.ie=e}}function Gg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Tc(u=i.ie,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Ea(u,d.version.toTimestamp()),createTime:Ea(u,d.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Mc(e.version)};else{if(!e.isUnknownDocument())return Pt();s.unknownDocument={path:t.path.toArray(),version:Mc(e.version)}}var u,d;return s}function lp(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Mc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function au(i){const e=new Er(i.seconds,i.nanoseconds);return Ut.fromTimestamp(e)}function zu(i,e){const t=(e.baseMutations||[]).map(d=>zt(i.ie,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const s=e.mutations.map(d=>zt(i.ie,d)),u=Er.fromMillis(e.localWriteTimeMs);return new Cd(e.batchId,u,t,s)}function xc(i){const e=au(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?au(i.lastLimboFreeSnapshotVersion):Ut.min();let s;var u;return void 0!==i.query.documents?(qt(1===(u=i.query).documents.length),s=Jo(rl(y(u.documents[0])))):s=Jo(Vs(i.query)),new cl(s,i.targetId,0,i.lastListenSequenceNumber,e,t,P.fromBase64String(i.resumeToken))}function cp(i,e){const t=Mc(e.snapshotVersion),s=Mc(e.lastLimboFreeSnapshotVersion);let u;u=nl(e.target)?Wn(i.ie,e.target):Vn(i.ie,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fu(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Ah(i){const e=Vs({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?pc(e,e.limit,"L"):e}function dp(i,e){return new up(e.largestBatchId,zt(i.ie,e.overlayMutation))}function hp(i,e){const t=e.path.lastSegment();return[i,Bo(e.path.popLast()),t]}function fp(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Mc(s.readTime),documentKey:Bo(s.documentKey.path),largestBatchId:s.largestBatchId}}class pp{getBundleMetadata(e,t){return nv(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:au(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return nv(e).put({bundleId:(s=t).id,createTime:Mc(Ci(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return zg(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Ah(u.bundledQuery),readTime:au(u.readTime)};var u})}saveNamedQuery(e,t){return zg(e).put({name:(s=t).name,readTime:Mc(Ci(s.readTime)),bundledQuery:s.bundledQuery});var s}}function nv(i){return jo(i,"bundles")}function zg(i){return jo(i,"namedQueries")}class Nc{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Nc(e,t.uid||"")}getOverlay(e,t){return Rc(e).get(hp(this.userId,t)).next(s=>s?dp(this.yt,s):null)}getOverlays(e,t){const s=ja();return $e.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((d,g)=>{const b=new up(t,g);u.push(this.oe(e,b))}),$e.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(g=>u.add(Bo(g.getCollectionPath())));const d=[];return u.forEach(g=>{const b=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(Rc(e).Y("collectionPathOverlayIndex",b))}),$e.waitFor(d)}getOverlaysForCollection(e,t,s){const u=ja(),d=Bo(t),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Rc(e).W("collectionPathOverlayIndex",g).next(b=>{for(const L of b){const H=dp(this.yt,L);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const d=ja();let g;const b=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rc(e).Z({index:"collectionGroupOverlayIndex",range:b},(L,H,ee)=>{const Ee=dp(this.yt,H);d.size()<u||Ee.largestBatchId===g?(d.set(Ee.getKey(),Ee),g=Ee.largestBatchId):ee.done()}).next(()=>d)}oe(e,t){return Rc(e).put(function(s,u,d){const[g,b,L]=hp(u,d.mutation.key);return{userId:u,collectionPath:b,documentId:L,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:ct(s.ie,d.mutation)}}(this.yt,this.userId,t))}}function Rc(i){return jo(i,"documentOverlays")}class dl{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ae(e.integerValue));else if("doubleValue"in e){const s=ae(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),D(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(nt(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Fe(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Pt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const u of Object.keys(s))this.de(u,t),this.ce(s[u],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const u of s)this.ce(u,t)}me(e,t){this.he(t,37),Nt.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Gl(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Wg(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const d=Gl(255&t[u]);if(s+=d,8!==d)break}return s}(i);return Math.ceil(e/8)}dl.Ie=new dl;class gp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const u=t.codePointAt(0);this.Ee(240|u>>>18),this.Ee(128|63&u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Pe()}Se(e){const t=this.De(e),s=Wg(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}xe(e){const t=this.De(e),s=Wg(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Mh{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class rv{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class zl{constructor(){this.$e=new gp,this.Be=new Mh(this.$e),this.Le=new rv(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Du{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Du(this.indexId,this.documentKey,this.arrayValue,s)}}function Ia(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=mp(i.arrayValue,e.arrayValue),0!==t?t:(t=mp(i.directionalValue,e.directionalValue),0!==t?t:Nt.comparator(i.documentKey,e.documentKey)))}function mp(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class yp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){qt(e.collectionGroup===this.collectionId);const t=go(e);if(void 0!==t&&!this.We(t))return!1;const s=Fs(e);let u=0,d=0;for(;u<s.length&&this.We(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Qe){const g=s[u];if(!this.ze(this.Qe,g)||!this.He(this.Ke[d++],g))return!1;++u}for(;u<s.length;++u){const g=s[u];if(d>=this.Ke.length||!this.He(this.Ke[d++],g))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Kg(i){var e,t;if(qt(i instanceof Ln||i instanceof Ur),i instanceof Ln){if(i instanceof el){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(d=>Ln.create(i.field,"==",d)))||[];return Ur.create(u,"or")}return i}const s=i.filters.map(u=>Kg(u));return Ur.create(s,i.op)}function iv(i){if(0===i.getFilters().length)return[];const e=vp(Kg(i));return qt(qg(e)),xh(e)||hl(e)?[e]:e.getFilters()}function xh(i){return i instanceof Ln}function hl(i){return i instanceof Ur&&Ys(i)}function qg(i){return xh(i)||hl(i)||function(e){if(e instanceof Ur&&Va(e)){for(const t of e.getFilters())if(!xh(t)&&!hl(t))return!1;return!0}return!1}(i)}function vp(i){if(qt(i instanceof Ln||i instanceof Ur),i instanceof Ln)return i;if(1===i.filters.length)return vp(i.filters[0]);const e=i.filters.map(s=>vp(s));let t=Ur.create(e,i.op);return t=Pc(t),qg(t)?t:(qt(t instanceof Ur),qt(Ra(t)),qt(t.filters.length>1),t.filters.reduce((s,u)=>_p(s,u)))}function _p(i,e){let t;return qt(i instanceof Ln||i instanceof Ur),qt(e instanceof Ln||e instanceof Ur),t=i instanceof Ln?e instanceof Ln?Ur.create([i,e],"and"):Zg(i,e):e instanceof Ln?Zg(e,i):function(s,u){if(qt(s.filters.length>0&&u.filters.length>0),Ra(s)&&Ra(u))return dd(s,u.getFilters());const d=Va(s)?s:u,g=Va(s)?u:s,b=d.filters.map(L=>_p(L,g));return Ur.create(b,"or")}(i,e),Pc(t)}function Zg(i,e){if(Ra(e))return dd(e,i.getFilters());{const t=e.filters.map(s=>_p(i,s));return Ur.create(t,"or")}}function Pc(i){if(qt(i instanceof Ln||i instanceof Ur),i instanceof Ln)return i;const e=i.getFilters();if(1===e.length)return Pc(e[0]);if(Vo(i))return i;const t=e.map(u=>Pc(u)),s=[];return t.forEach(u=>{u instanceof Ln?s.push(u):u instanceof Ur&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:Ur.create(s,i.op)}class sv{constructor(){this.Je=new Nh}addToCollectionParentIndex(e,t){return this.Je.add(t),$e.resolve()}getCollectionParents(e,t){return $e.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return $e.resolve()}deleteFieldIndex(e,t){return $e.resolve()}getDocumentsMatchingTarget(e,t){return $e.resolve(null)}getIndexType(e,t){return $e.resolve(0)}getFieldIndexes(e,t){return $e.resolve([])}getNextCollectionGroupToUpdate(e){return $e.resolve(null)}getMinOffset(e,t){return $e.resolve(qo.min())}getMinOffsetFromCollectionGroup(e,t){return $e.resolve(qo.min())}updateCollectionGroup(e,t,s){return $e.resolve()}updateIndexEntries(e,t){return $e.resolve()}}class Nh{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new ci(Gn.comparator),d=!u.has(s);return this.index[t]=u.add(s),d}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new ci(Gn.comparator)).toArray()}}const Rh=new Uint8Array(0);class Yg{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Nh,this.Xe=new iu(s=>Fu(s),(s,u)=>tl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const d={collectionId:s,parent:Bo(u)};return ov(e).put(d)}return $e.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[is(t),""],!1,!0);return ov(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;s.push(wa(g.parent))}return s})}addFieldIndex(e,t){const s=fl(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var g;delete u.indexId;const d=s.add(u);if(t.indexState){const g=Sd(e);return d.next(b=>{g.put(fp(b,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const s=fl(e),u=Sd(e),d=Td(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Td(e);let u=!0;const d=new Map;return $e.forEach(this.Ze(t),g=>this.tn(e,g).next(b=>{u&&(u=!!b),d.set(g,b)})).next(()=>{if(u){let g=fr();const b=[];return $e.forEach(d,(L,H)=>{var ee;Xe("IndexedDbIndexManager",`Using index ${ee=L,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(ri=>`${ri.fieldPath}:${ri.kind}`).join(",")}`} to execute ${Fu(t)}`);const Ee=function(ri,Us){const Wr=go(Us);if(void 0===Wr)return null;for(const di of Lu(ri,Wr.fieldPath))switch(di.op){case"array-contains-any":return di.value.arrayValue.values||[];case"array-contains":return[di.value]}return null}(H,L),He=function(ri,Us){const Wr=new Map;for(const di of Fs(Us))for(const io of Lu(ri,di.fieldPath))switch(io.op){case"==":case"in":Wr.set(di.fieldPath.canonicalString(),io.value);break;case"not-in":case"!=":return Wr.set(di.fieldPath.canonicalString(),io.value),Array.from(Wr.values())}return null}(H,L),wt=function(ri,Us){const Wr=[];let di=!0;for(const io of Fs(Us)){const rh=0===io.kind?pd(ri,io.fieldPath,ri.startAt):Ol(ri,io.fieldPath,ri.startAt);Wr.push(rh.value),di&&(di=rh.inclusive)}return new vn(Wr,di)}(H,L),Mt=function(ri,Us){const Wr=[];let di=!0;for(const io of Fs(Us)){const rh=0===io.kind?Ol(ri,io.fieldPath,ri.endAt):pd(ri,io.fieldPath,ri.endAt);Wr.push(rh.value),di&&(di=rh.inclusive)}return new vn(Wr,di)}(H,L),hn=this.en(L,H,wt),Fn=this.en(L,H,Mt),Ni=this.nn(L,H,He),us=this.sn(L.indexId,Ee,hn,wt.inclusive,Fn,Mt.inclusive,Ni);return $e.forEach(us,ri=>s.J(ri,t.limit).next(Us=>{Us.forEach(Wr=>{const di=Nt.fromSegments(Wr.documentKey);g.has(di)||(g=g.add(di),b.push(di))})}))}).next(()=>b)}return $e.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:iv(Ur.create(e.filters,"and")).map(s=>ch(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,u,d,g,b){const L=(null!=t?t.length:1)*Math.max(s.length,d.length),H=L/(null!=t?t.length:1),ee=[];for(let Ee=0;Ee<L;++Ee){const He=t?this.rn(t[Ee/H]):Rh,wt=this.on(e,He,s[Ee%H],u),Mt=this.un(e,He,d[Ee%H],g),hn=b.map(Fn=>this.on(e,He,Fn,!0));ee.push(...this.createRange(wt,Mt,hn))}return ee}on(e,t,s,u){const d=new Du(e,Nt.empty(),t,s);return u?d:d.Ue()}un(e,t,s,u){const d=new Du(e,Nt.empty(),t,s);return u?d.Ue():d}tn(e,t){const s=new yp(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const b of d)s.je(b)&&(!g||b.fields.length>g.fields.length)&&(g=b);return g})}getIndexType(e,t){let s=2;const u=this.Ze(t);return $e.forEach(u,d=>this.tn(e,d).next(g=>{g?0!==s&&g.fields.length<function(b){let L=new ci(br.comparator),H=!1;for(const ee of b.filters)for(const Ee of ee.getFlattenedFilters())Ee.field.isKeyField()||("array-contains"===Ee.op||"array-contains-any"===Ee.op?H=!0:L=L.add(Ee.field));for(const ee of b.orderBy)ee.field.isKeyField()||(L=L.add(ee.field));return L.size+(H?1:0)}(d)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}cn(e,t){const s=new zl;for(const u of Fs(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=s.qe(u.kind);dl.Ie.ue(d,g)}return s.Fe()}rn(e){const t=new zl;return dl.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new zl;return dl.Ie.ue(La(this.databaseId,t),s.qe(function(u){const d=Fs(u);return 0===d.length?0:d[d.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let u=[];u.push(new zl);let d=0;for(const g of Fs(e)){const b=s[d++];for(const L of u)if(this.hn(t,g.fieldPath)&&Ou(b))u=this.ln(u,g,b);else{const H=L.qe(g.kind);dl.Ie.ue(b,H)}}return this.fn(u)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const u=[...e],d=[];for(const g of s.arrayValue.values||[])for(const b of u){const L=new zl;L.seed(b.Fe()),dl.Ie.ue(g,L.qe(t.kind)),d.push(L)}return d}hn(e,t){return!!e.filters.find(s=>s instanceof Ln&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=fl(e),u=Sd(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(d=>{const g=[];return $e.forEach(d,b=>u.get([b.indexId,this.uid]).next(L=>{g.push(function(H,ee){const Ee=ee?new Ya(ee.sequenceNumber,new qo(au(ee.readTime),new Nt(wa(ee.documentKey)),ee.largestBatchId)):Ya.empty(),He=H.fields.map(([wt,Mt])=>new Vr(br.fromServerFormat(wt),Mt));return new Fo(H.indexId,H.collectionGroup,He,Ee)}(b,L))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const d=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:mn(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=fl(e),d=Sd(e);return this.dn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(b=>$e.forEach(b,L=>d.put(fp(L.indexId,this.user,g,s)))))}updateIndexEntries(e,t){const s=new Map;return $e.forEach(t,(u,d)=>{const g=s.get(u.collectionGroup);return(g?$e.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(b=>(s.set(u.collectionGroup,b),$e.forEach(b,L=>this._n(e,u,L).next(H=>{const ee=this.wn(d,L);return H.isEqual(ee)?$e.resolve():this.mn(e,d,L,H,ee)}))))})}gn(e,t,s,u){return Td(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,u){return Td(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const u=Td(e);let d=new ci(Ia);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(g,b)=>{d=d.add(new Du(s.indexId,t,b.arrayValue,b.directionalValue))}).next(()=>d)}wn(e,t){let s=new ci(Ia);const u=this.cn(t,e);if(null==u)return s;const d=go(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Ou(g))for(const b of g.arrayValue.values||[])s=s.add(new Du(t.indexId,e.key,this.rn(b),u))}else s=s.add(new Du(t.indexId,e.key,Rh,u));return s}mn(e,t,s,u,d){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(b,L,H,ee,Ee){const He=b.getIterator(),wt=L.getIterator();let Mt=Pl(He),hn=Pl(wt);for(;Mt||hn;){let Fn=!1,Ni=!1;if(Mt&&hn){const us=H(Mt,hn);us<0?Ni=!0:us>0&&(Fn=!0)}else null!=Mt?Ni=!0:Fn=!0;Fn?(ee(hn),hn=Pl(wt)):Ni?(Ee(Mt),Mt=Pl(He)):(Mt=Pl(He),hn=Pl(wt))}}(u,d,Ia,b=>{g.push(this.gn(e,t,s,b))},b=>{g.push(this.yn(e,t,s,b))}),$e.waitFor(g)}dn(e){let t=1;return Sd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((g,b)=>Ia(g,b)).filter((g,b,L)=>!b||0!==Ia(g,L[b-1]));const u=[];u.push(e);for(const g of s){const b=Ia(g,e),L=Ia(g,t);if(0===b)u[0]=e.Ue();else if(b>0&&L<0)u.push(g),u.push(g.Ue());else if(L>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2){if(this.pn(u[g],u[g+1]))return[];d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,Rh,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,Rh,[]]))}return d}pn(e,t){return Ia(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Wl)}getMinOffset(e,t){return $e.mapArray(this.Ze(t),s=>this.tn(e,s).next(u=>u||Pt())).next(Wl)}}function ov(i){return jo(i,"collectionParents")}function Td(i){return jo(i,"indexEntries")}function fl(i){return jo(i,"indexConfiguration")}function Sd(i){return jo(i,"indexState")}function Wl(i){qt(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Qa(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new qo(e.readTime,e.documentKey,t)}const Oc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Da{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Da(e,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function av(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let b=0;const L=s.Z({range:g},(ee,Ee,He)=>(b++,He.delete()));d.push(L.next(()=>{qt(1===b)}));const H=[];for(const ee of t.mutations){const Ee=ip(e,ee.key.path,t.batchId);d.push(u.delete(Ee)),H.push(ee.key)}return $e.waitFor(d).next(()=>H)}function Ad(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Pt();e=i.noDocument}return JSON.stringify(e).length}Da.DEFAULT_COLLECTION_PERCENTILE=10,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Da.DEFAULT=new Da(41943040,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Da.DISABLED=new Da(-1,0,0);class Ph{constructor(e,t,s,u){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=u,this.In={}}static re(e,t,s,u){qt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Ph(d,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pl(e).Z({index:"userMutationsIndex",range:s},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const d=Kl(e),g=pl(e);return g.add({}).next(b=>{qt("number"==typeof b);const L=new Cd(b,t,s,u),H=function(He,wt,Mt){const hn=Mt.baseMutations.map(Ni=>ct(He.ie,Ni)),Fn=Mt.mutations.map(Ni=>ct(He.ie,Ni));return{userId:wt,batchId:Mt.batchId,localWriteTimeMs:Mt.localWriteTime.toMillis(),baseMutations:hn,mutations:Fn}}(this.yt,this.userId,L),ee=[];let Ee=new ci((He,wt)=>mn(He.canonicalString(),wt.canonicalString()));for(const He of u){const wt=ip(this.userId,He.key.path,b);Ee=Ee.add(He.key.path.popLast()),ee.push(g.put(H)),ee.push(d.put(wt,Vg))}return Ee.forEach(He=>{ee.push(this.indexManager.addToCollectionParentIndex(e,He))}),e.addOnCommittedListener(()=>{this.In[b]=L.keys()}),$e.waitFor(ee).next(()=>L)})}lookupMutationBatch(e,t){return pl(e).get(t).next(s=>s?(qt(s.userId===this.userId),zu(this.yt,s)):null)}Tn(e,t){return this.In[t]?$e.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return pl(e).Z({index:"userMutationsIndex",range:u},(g,b,L)=>{b.userId===this.userId&&(qt(b.batchId>=s),d=zu(this.yt,b)),L.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return pl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pl(e).W("userMutationsIndex",t).next(s=>s.map(u=>zu(this.yt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ll(this.userId,t.path),u=IDBKeyRange.lowerBound(s),d=[];return Kl(e).Z({range:u},(g,b,L)=>{const[H,ee,Ee]=g,He=wa(ee);if(H===this.userId&&t.path.isEqual(He))return pl(e).get(Ee).next(wt=>{if(!wt)throw Pt();qt(wt.userId===this.userId),d.push(zu(this.yt,wt))});L.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ci(mn);const u=[];return t.forEach(d=>{const g=ll(this.userId,d.path),b=IDBKeyRange.lowerBound(g),L=Kl(e).Z({range:b},(H,ee,Ee)=>{const[He,wt,Mt]=H,hn=wa(wt);He===this.userId&&d.path.isEqual(hn)?s=s.add(Mt):Ee.done()});u.push(L)}),$e.waitFor(u).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,d=ll(this.userId,s),g=IDBKeyRange.lowerBound(d);let b=new ci(mn);return Kl(e).Z({range:g},(L,H,ee)=>{const[Ee,He,wt]=L,Mt=wa(He);Ee===this.userId&&s.isPrefixOf(Mt)?Mt.length===u&&(b=b.add(wt)):ee.done()}).next(()=>this.En(e,b))}En(e,t){const s=[],u=[];return t.forEach(d=>{u.push(pl(e).get(d).next(g=>{if(null===g)throw Pt();qt(g.userId===this.userId),s.push(zu(this.yt,g))}))}),$e.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return av(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),$e.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $e.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return Kl(e).Z({range:s},(d,g,b)=>{if(d[0]===this.userId){const L=wa(d[1]);u.push(L)}else b.done()}).next(()=>{qt(0===u.length)})})}containsKey(e,t){return Qg(e,this.userId,t)}Rn(e){return Ep(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qg(i,e,t){const s=ll(e,t.path),u=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return Kl(i).Z({range:d,X:!0},(b,L,H)=>{const[ee,Ee,He]=b;ee===e&&Ee===u&&(g=!0),H.done()}).next(()=>g)}function pl(i){return jo(i,"mutations")}function Kl(i){return jo(i,"documentMutations")}function Ep(i){return jo(i,"mutationQueues")}class Wu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Wu(0)}static vn(){return new Wu(-1)}}class wp{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new Wu(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ut.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>kc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(qt(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let u=0;const d=[];return kc(e).Z((g,b)=>{const L=xc(b);L.sequenceNumber<=t&&null===s.get(L.targetId)&&(u++,d.push(this.removeTargetData(e,L)))}).next(()=>$e.waitFor(d)).next(()=>u)}forEachTarget(e,t){return kc(e).Z((s,u)=>{const d=xc(u);t(d)})}Vn(e){return Oh(e).get("targetGlobalKey").next(t=>(qt(null!==t),t))}Sn(e,t){return Oh(e).put("targetGlobalKey",t)}Dn(e,t){return kc(e).put(cp(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Fu(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return kc(e).Z({range:u,index:"queryTargetsIndex"},(g,b,L)=>{const H=xc(b);tl(t,H.target)&&(d=H,L.done())}).next(()=>d)}addMatchingKeys(e,t,s){const u=[],d=Ga(e);return t.forEach(g=>{const b=Bo(g.path);u.push(d.put({targetId:s,path:b})),u.push(this.referenceDelegate.addReference(e,s,g))}),$e.waitFor(u)}removeMatchingKeys(e,t,s){const u=Ga(e);return $e.forEach(t,d=>{const g=Bo(d.path);return $e.waitFor([u.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,t){const s=Ga(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=Ga(e);let d=fr();return u.Z({range:s,X:!0},(g,b,L)=>{const H=wa(g[1]),ee=new Nt(H);d=d.add(ee)}).next(()=>d)}containsKey(e,t){const s=Bo(t.path),u=IDBKeyRange.bound([s],[is(s)],!1,!0);let d=0;return Ga(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,b],L,H)=>{0!==g&&(d++,H.done())}).next(()=>d>0)}ne(e,t){return kc(e).get(t).next(s=>s?xc(s):null)}}function kc(i){return jo(i,"targets")}function Oh(i){return jo(i,"targetGlobal")}function Ga(i){return jo(i,"targetDocuments")}function Jg([i,e],[t,s]){const u=mn(i,t);return 0===u?mn(e,s):u}class uv{constructor(e){this.xn=e,this.buffer=new ci(Jg),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Jg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lv{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ss(s)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Ma(s)}yield t.Fn(3e5)}))}}class cv{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return $e.resolve(Zs.at);const s=new uv(t);return this.$n.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),$e.resolve(Oc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Oc):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,u,d,g,b,L,H;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ee=>(Ee>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ee}`),u=this.params.maximumSequenceNumbersToCollect):u=Ee,g=Date.now(),this.nthSequenceNumber(e,u))).next(Ee=>(s=Ee,b=Date.now(),this.removeTargets(e,s,t))).next(Ee=>(d=Ee,L=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ee=>(H=Date.now(),tr()<=It.in.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-ee}ms\n\tDetermined least recently used ${u} in `+(b-g)+`ms\n\tRemoved ${d} targets in `+(L-b)+`ms\n\tRemoved ${Ee} documents in `+(H-L)+`ms\nTotal Duration: ${H-ee}ms`),$e.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Ee})))}}class dv{constructor(e,t){this.db=e,this.garbageCollector=new cv(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,u)=>t(u))}addReference(e,t,s){return kh(e,s)}removeReference(e,t,s){return kh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return kh(e,t)}Gn(e,t){return function(s,u){let d=!1;return Ep(s).tt(g=>Qg(s,g,u).next(b=>(b&&(d=!0),$e.resolve(!b)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,b)=>{if(b<=t){const L=this.Gn(e,g).next(H=>{if(!H)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,Ut.min()),Ga(e).delete([0,Bo(g.path)])))});u.push(L)}}).next(()=>$e.waitFor(u)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return kh(e,t)}Kn(e,t){const s=Ga(e);let u,d=Zs.at;return s.Z({index:"documentTargetsIndex"},([g,b],{path:L,sequenceNumber:H})=>{0===g?(d!==Zs.at&&t(new Nt(wa(u)),d),d=H,u=L):d=Zs.at}).next(()=>{d!==Zs.at&&t(new Nt(wa(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kh(i,e){return Ga(i).put((s=i.currentSequenceNumber,{targetId:0,path:Bo(e.path),sequenceNumber:s}));var s}class Xg{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?$e.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Fc{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Lc(e).put(s)}removeEntry(e,t,s){return Lc(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],lp(d),g[g.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=qi.newInvalidDocument(t);return Lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fh(t))},(u,d)=>{s=this.jn(t,d)}).next(()=>s)}Wn(e,t){let s={size:0,document:qi.newInvalidDocument(t)};return Lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Fh(t))},(u,d)=>{s={document:this.jn(t,d),size:Ad(d)}}).next(()=>s)}getEntries(e,t){let s=Eo();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);s=s.insert(u,g)}).next(()=>s)}Hn(e,t){let s=Eo(),u=new xs(Nt.comparator);return this.zn(e,t,(d,g)=>{const b=this.jn(d,g);s=s.insert(d,b),u=u.insert(d,Ad(g))}).next(()=>({documents:s,Jn:u}))}zn(e,t,s){if(t.isEmpty())return $e.resolve();let u=new ci(fv);t.forEach(L=>u=u.add(L));const d=IDBKeyRange.bound(Fh(u.first()),Fh(u.last())),g=u.getIterator();let b=g.getNext();return Lc(e).Z({index:"documentKeyIndex",range:d},(L,H,ee)=>{const Ee=Nt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;b&&fv(b,Ee)<0;)s(b,null),b=g.getNext();b&&b.isEqual(Ee)&&(s(b,H),b=g.hasNext()?g.getNext():null),b?ee.j(Fh(b)):ee.done()}).next(()=>{for(;b;)s(b,null),b=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),lp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lc(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let b=Eo();for(const L of g){const H=this.jn(Nt.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);b=b.insert(H.key,H)}return b})}getAllFromCollectionGroup(e,t,s,u){let d=Eo();const g=Ip(t,s),b=Ip(t,qo.max());return Lc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,b,!0)},(L,H,ee)=>{const Ee=this.jn(Nt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(Ee.key,Ee),d.size===u&&ee.done()}).next(()=>d)}newChangeBuffer(e){return new hv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return em(e).get("remoteDocumentGlobalKey").next(t=>(qt(!!t),t))}Qn(e,t){return em(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function tv(i,e){let t;if(e.document)t=B(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Nt.fromSegments(e.noDocument.path),u=au(e.noDocument.readTime);t=qi.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pt();{const s=Nt.fromSegments(e.unknownDocument.path),u=au(e.unknownDocument.version);t=qi.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Er(s[0],s[1]);return Ut.fromTimestamp(u)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(Ut.min()))return s}return qi.newInvalidDocument(e)}}function bu(i){return new Fc(i)}class hv extends Xg{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new iu(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new ci((d,g)=>mn(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const b=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,b.readTime)),g.isValidDocument()){const L=Gg(this.Yn.yt,g);u=u.add(d.path.popLast()),s+=Ad(L)-b.size,t.push(this.Yn.addEntry(e,d,L))}else if(s-=b.size,this.trackRemovals){const L=Gg(this.Yn.yt,g.convertToNoDocument(Ut.min()));t.push(this.Yn.addEntry(e,d,L))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,s)),$e.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function em(i){return jo(i,"remoteDocumentGlobal")}function Lc(i){return jo(i,"remoteDocumentsV14")}function Fh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ip(i,e){const t=e.documentKey.path.toArray();return[i,lp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fv(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<s.length-2;++d)if(u=mn(t[d],s[d]),u)return u;return u=mn(t.length,s.length),u||(u=mn(t[t.length-2],s[s.length-2]),u||mn(t[t.length-1],s[s.length-1]))}class tm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pv{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&ju(s.mutation,u,Qo.empty(),Er.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,fr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=fr()){const u=ja();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(d=>{let g=sl();return d.forEach((b,L)=>{g=g.insert(b,L.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const s=ja();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,fr()))}populateOverlays(e,t,s){const u=[];return s.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,b)=>{t.set(g,b)})})}computeViews(e,t,s,u){let d=Eo();const g=_a(),b=_a();return t.forEach((L,H)=>{const ee=s.get(H.key);u.has(H.key)&&(void 0===ee||ee.mutation instanceof ru)?d=d.insert(H.key,H):void 0!==ee&&(g.set(H.key,ee.mutation.getFieldMask()),ju(ee.mutation,H,ee.mutation.getFieldMask(),Er.now()))}),this.recalculateAndSaveOverlays(e,d).next(L=>(L.forEach((H,ee)=>g.set(H,ee)),t.forEach((H,ee)=>{var Ee;return b.set(H,new tm(ee,null!==(Ee=g.get(H))&&void 0!==Ee?Ee:null))}),b))}recalculateAndSaveOverlays(e,t){const s=_a();let u=new xs((g,b)=>g-b),d=fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const b of g)b.keys().forEach(L=>{const H=t.get(L);if(null===H)return;let ee=s.get(L)||Qo.empty();ee=b.applyToLocalView(H,ee),s.set(L,ee);const Ee=(u.get(b.batchId)||fr()).add(L);u=u.insert(b.batchId,Ee)})}).next(()=>{const g=[],b=u.getReverseIterator();for(;b.hasNext();){const L=b.getNext(),H=L.key,ee=L.value,Ee=ca();ee.forEach(He=>{if(!d.has(He)){const wt=ep(t.get(He),s.get(He));null!==wt&&Ee.set(He,wt),d=d.add(He)}}),g.push(this.documentOverlayCache.saveOverlays(e,H,Ee))}return $e.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Nt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-d.size):$e.resolve(ja());let b=-1,L=d;return g.next(H=>$e.forEach(H,(ee,Ee)=>(b<Ee.largestBatchId&&(b=Ee.largestBatchId),d.get(ee)?$e.resolve():this.remoteDocumentCache.getEntry(e,ee).next(He=>{L=L.insert(ee,He)}))).next(()=>this.populateOverlays(e,H,d)).next(()=>this.computeViews(e,L,H,fr())).next(ee=>({batchId:b,changes:jl(ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nt(t)).next(s=>{let u=sl();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let d=sl();return this.indexManager.getCollectionParents(e,u).next(g=>$e.forEach(g,b=>{const L=(H=t,ee=b.child(u),new to(ee,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,ee;return this.getDocumentsMatchingCollectionQuery(e,L,s).next(H=>{H.forEach((ee,Ee)=>{d=d.insert(ee,Ee)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(d=>{d.forEach((b,L)=>{const H=L.getKey();null===u.get(H)&&(u=u.insert(H,qi.newInvalidDocument(H)))});let g=sl();return u.forEach((b,L)=>{const H=d.get(b);void 0!==H&&ju(H.mutation,L,Qo.empty(),Er.now()),md(t,L)&&(g=g.insert(b,L))}),g})}}class nm{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return $e.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:Ci(s.createTime)}),$e.resolve()}getNamedQuery(e,t){return $e.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:Ah(s.bundledQuery),readTime:Ci(s.readTime)}),$e.resolve();var s}}class gv{constructor(){this.overlays=new xs(Nt.comparator),this.es=new Map}getOverlay(e,t){return $e.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ja();return $e.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,d)=>{this.oe(e,t,d)}),$e.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.es.get(s);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(s)),$e.resolve()}getOverlaysForCollection(e,t,s){const u=ja(),d=t.length+1,g=new Nt(t.child("")),b=this.overlays.getIteratorFrom(g);for(;b.hasNext();){const L=b.getNext().value,H=L.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===d&&L.largestBatchId>s&&u.set(L.getKey(),L)}return $e.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let d=new xs((H,ee)=>H-ee);const g=this.overlays.getIterator();for(;g.hasNext();){const H=g.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>s){let ee=d.get(H.largestBatchId);null===ee&&(ee=ja(),d=d.insert(H.largestBatchId,ee)),ee.set(H.getKey(),H)}}const b=ja(),L=d.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((H,ee)=>b.set(H,ee)),!(b.size()>=u)););return $e.resolve(b)}oe(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(s.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new up(t,s));let d=this.es.get(t);void 0===d&&(d=fr(),this.es.set(t,d)),this.es.set(t,d.add(s.key))}}class Lh{constructor(){this.ns=new ci($o.ss),this.rs=new ci($o.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new $o(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new $o(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new Nt(new Gn([])),s=new $o(t,e),u=new $o(t,e+1),d=[];return this.rs.forEachInRange([s,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Nt(new Gn([])),s=new $o(t,e),u=new $o(t,e+1);let d=fr();return this.rs.forEachInRange([s,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new $o(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class $o{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Nt.comparator(e.key,t.key)||mn(e._s,t._s)}static os(e,t){return mn(e._s,t._s)||Nt.comparator(e.key,t.key)}}class mv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ci($o.ss)}checkEmpty(e){return $e.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const d=this.ws;this.ws++;const g=new Cd(d,t,s,u);this.mutationQueue.push(g);for(const b of u)this.gs=this.gs.add(new $o(b.key,d)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return $e.resolve(g)}lookupMutationBatch(e,t){return $e.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return $e.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return $e.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return $e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new $o(t,0),u=new $o(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([s,u],g=>{const b=this.ys(g._s);d.push(b)}),$e.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ci(mn);return t.forEach(u=>{const d=new $o(u,0),g=new $o(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],b=>{s=s.add(b._s)})}),$e.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let d=s;Nt.isDocumentKey(d)||(d=d.child(""));const g=new $o(new Nt(d),0);let b=new ci(mn);return this.gs.forEachWhile(L=>{const H=L.key.path;return!!s.isPrefixOf(H)&&(H.length===u&&(b=b.add(L._s)),!0)},g),$e.resolve(this.Is(b))}Is(e){const t=[];return e.forEach(s=>{const u=this.ys(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){qt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return $e.forEach(t.mutations,u=>{const d=new $o(u.key,t.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new $o(t,0),u=this.gs.firstAfterOrEqual(s);return $e.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return $e.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uu{constructor(e){this.Es=e,this.docs=new xs(Nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return $e.resolve(s?s.document.mutableCopy():qi.newInvalidDocument(t))}getEntries(e,t){let s=Eo();return t.forEach(u=>{const d=this.docs.get(u);s=s.insert(u,d?d.document.mutableCopy():qi.newInvalidDocument(u))}),$e.resolve(s)}getAllFromCollection(e,t,s){let u=Eo();const d=new Nt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:b,value:{document:L}}=g.getNext();if(!t.isPrefixOf(b.path))break;b.path.length>t.length+1||Qa(Pu(L),s)<=0||(u=u.insert(L.key,L.mutableCopy()))}return $e.resolve(u)}getAllFromCollectionGroup(e,t,s,u){Pt()}As(e,t){return $e.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new yv(this)}getSize(e){return $e.resolve(this.size)}}class yv extends Xg{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(s)}),$e.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rm{constructor(e){this.persistence=e,this.Rs=new iu(t=>Fu(t),tl),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Lh,this.targetCount=0,this.vs=Wu.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,u)=>t(u)),$e.resolve()}getLastRemoteSnapshotVersion(e){return $e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $e.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),$e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),$e.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Wu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,$e.resolve()}updateTargetData(e,t){return this.Dn(t),$e.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,$e.resolve()}removeTargets(e,t,s){let u=0;const d=[];return this.Rs.forEach((g,b)=>{b.sequenceNumber<=t&&null===s.get(b.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,b.targetId)),u++)}),$e.waitFor(d).next(()=>u)}getTargetCount(e){return $e.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return $e.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),$e.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),$e.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),$e.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return $e.resolve(s)}containsKey(e,t){return $e.resolve(this.Ps.containsKey(t))}}class im{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Zs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rm(this),this.indexManager=new sv,this.remoteDocumentCache=new uu(s=>this.referenceDelegate.xs(s)),this.yt=new Hg(t),this.Ns=new nm(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new mv(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){Xe("MemoryPersistence","Starting transaction:",e);const u=new vv(this.Ss.next());return this.referenceDelegate.ks(),s(u).next(d=>this.referenceDelegate.Os(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ms(e,t){return $e.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class vv extends Aa{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Fs=new Lh,this.$s=null}static Bs(e){return new Vh(e)}get Ls(){if(this.$s)return this.$s;throw Pt()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),$e.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),$e.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),$e.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.Ls,s=>{const u=Nt.fromPath(s);return this.qs(e,u).next(d=>{d||t.removeEntry(u,Ut.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return $e.or([()=>$e.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class _v{constructor(e){this.yt=e}$(e,t,s,u){const d=new xa("createOrUpgrade",t);var b;s<1&&u>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iu,{unique:!0}),b.createObjectStore("documentMutations"),Dp(e),function(b){b.createObjectStore("remoteDocuments")}(e));let g=$e.resolve();return s<3&&u>=3&&(0!==s&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),Dp(e)),g=g.next(()=>function(b){const L=b.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",H)}(d))),s<4&&u>=4&&(0!==s&&(g=g.next(()=>function(b,L){return L.store("mutations").W().next(H=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iu,{unique:!0});const ee=L.store("mutations"),Ee=H.map(He=>ee.put(He));return $e.waitFor(Ee)})}(e,d))),g=g.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(g=g.next(()=>this.Us(d))),s<6&&u>=6&&(g=g.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),s<7&&u>=7&&(g=g.next(()=>this.Gs(d))),s<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),s<9&&u>=9&&(g=g.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(g=g.next(()=>this.js(d))),s<11&&u>=11&&(g=g.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(g=g.next(()=>{!function(b){const L=b.createObjectStore("documentOverlays",{keyPath:Jy});L.createIndex("collectionPathOverlayIndex",Xy,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",jg,{unique:!1})}(e)})),s<13&&u>=13&&(g=g.next(()=>function(b){const L=b.createObjectStore("remoteDocumentsV14",{keyPath:Ug});L.createIndex("documentKeyIndex",y0),L.createIndex("collectionGroupIndex",v0)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),s<15&&u>=15&&(g=g.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:w0}).createIndex("sequenceNumberIndex",Bg,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:Yy}).createIndex("documentKeyIndex",Qy,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,u)=>{t+=Ad(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>$e.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",g).next(b=>$e.forEach(b,L=>{qt(L.userId===d.userId);const H=zu(this.yt,L);return av(e,d.userId,H).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return s.Z((g,b)=>{const L=new Gn(g),H=[0,Bo(L)];d.push(t.get(H).next(ee=>ee?$e.resolve():t.put({targetId:0,path:Bo(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>$e.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:E0});const s=t.store("collectionParents"),u=new Nh,d=g=>{if(u.add(g)){const b=g.lastSegment(),L=g.popLast();return s.put({collectionId:b,parent:Bo(L)})}};return t.store("remoteDocuments").Z({X:!0},(g,b)=>{const L=new Gn(g);return d(L.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,b,L],H)=>{const ee=wa(b);return d(ee.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,u)=>{const d=xc(u),g=cp(this.yt,d);return t.put(g)})}Ws(e,t){const s=t.store("remoteDocuments"),u=[];return s.Z((d,g)=>{const b=t.store("remoteDocumentsV14"),L=(H=g,H.document?new Nt(Gn.fromString(H.document.name).popFirst(5)):H.noDocument?Nt.fromSegments(H.noDocument.path):H.unknownDocument?Nt.fromSegments(H.unknownDocument.path):Pt()).path.toArray();var H;const ee={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(b.put(ee))}).next(()=>$e.waitFor(u))}zs(e,t){const s=t.store("mutations"),u=bu(this.yt),d=new im(Vh.Bs,this.yt.ie);return s.W().next(g=>{const b=new Map;return g.forEach(L=>{var H;let ee=null!==(H=b.get(L.userId))&&void 0!==H?H:fr();zu(this.yt,L).keys().forEach(Ee=>ee=ee.add(Ee)),b.set(L.userId,ee)}),$e.forEach(b,(L,H)=>{const ee=new st(H),Ee=Nc.re(this.yt,ee),He=d.getIndexManager(ee),wt=Ph.re(ee,this.yt,He,d.referenceDelegate);return new pv(u,wt,Ee,He).recalculateAndSaveOverlaysForDocumentKeys(new ap(t,Zs.at),L).next()})})}}function Dp(i){i.createObjectStore("targetDocuments",{keyPath:sp}).createIndex("documentTargetsIndex",op,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_0,{unique:!0}),i.createObjectStore("targetGlobal")}const bp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cp{constructor(e,t,s,u,d,g,b,L,H,ee,Ee=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=d,this.window=g,this.document=b,this.Js=H,this.Ys=ee,this.Xs=Ee,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=He=>Promise.resolve(),!Cp.C())throw new ft(Ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dv(this,u),this.ii=t+"main",this.yt=new Hg(L),this.ri=new Ls(this.ii,this.Xs,new _v(this.yt)),this.Cs=new wp(this.referenceDelegate,this.yt),this.remoteDocumentCache=bu(this.yt),this.Ns=new pp,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ee&&ln("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(Ze.FAILED_PRECONDITION,bp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Zs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,me.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pr(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ss(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Md(e).get("owner").next(t=>$e.resolve(this.mi(t)))}gi(e){return pr(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=jo(s,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),b=d.filter(L=>-1===g.indexOf(L));return $e.forEach(b,L=>u.delete(L.clientId)).next(()=>b)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?$e.resolve(!0):Md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ft(Ze.FAILED_PRECONDITION,bp);return!1}}return!(!this.networkEnabled||!this.inForeground)||pr(e).W().next(s=>void 0===this.Ii(s,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,b=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&b)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new ap(t,Zs.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>pr(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ph.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yg(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Nc.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){Xe("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?ro:14===g?$g:13===g?Th:12===g?ev:11===g?bd:void Pt();var g;let b;return this.ri.runTransaction(e,u,d,L=>(b=new ap(L,this.Ss?this.Ss.next():Zs.at),"readwrite-primary"===t?this.fi(b).next(H=>!!H||this.di(b)).next(H=>{if(!H)throw ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ft(Ze.FAILED_PRECONDITION,xl);return s(b)}).next(H=>this.wi(b).next(()=>H)):this.Vi(b).next(()=>s(b)))).then(L=>(b.raiseOnCommittedEvent(),L))}Vi(e){return Md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ft(Ze.FAILED_PRECONDITION,bp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Md(e).put("owner",t)}static C(){return Ls.C()}_i(e){const t=Md(e);return t.get("owner").next(s=>this.mi(s)?(Xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$e.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(ln(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ut.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Xe("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ln("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ln("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Md(i){return jo(i,"owner")}function pr(i){return jo(i,"clientMetadata")}function Uh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Bh{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=u}static Ci(e,t){let s=fr(),u=fr();for(const d of t.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Bh(e,t.fromCache,s,u)}}class Tp{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,u){return this.ki(e,t).next(d=>d||this.Oi(e,t,u,s)).next(d=>d||this.Mi(e,t))}ki(e,t){if(cc(t))return $e.resolve(null);let s=Jo(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=pc(t,null,"F"),s=Jo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=fr(...d);return this.Ni.getDocuments(e,g).next(b=>this.indexManager.getMinOffset(e,s).next(L=>{const H=this.Fi(t,b);return this.$i(t,H,g,L.readTime)?this.ki(e,pc(t,null,"F")):this.Bi(e,H,t,L)}))})))}Oi(e,t,s,u){return cc(t)||u.isEqual(Ut.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,s,u)?this.Mi(e,t):(tr()<=It.in.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Fl(t)),this.Bi(e,g,t,Sa(u,-1)))})}Fi(e,t){let s=new ci(_o(e));return t.forEach((u,d)=>{md(e,d)&&(s=s.add(d))}),s}$i(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Mi(e,t){return tr()<=It.in.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.Ni.getDocumentsMatchingQuery(e,t,qo.min())}Bi(e,t,s,u){return this.Ni.getDocumentsMatchingQuery(e,s,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class Ev{constructor(e,t,s,u){this.persistence=e,this.Li=t,this.yt=u,this.qi=new xs(mn),this.Ui=new iu(d=>Fu(d),tl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function sm(i,e,t,s){return new Ev(i,e,t,s)}function Sp(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,me.Z)(function*(i,e){const t=Vt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],b=[];let L=fr();for(const H of u){g.push(H.batchId);for(const ee of H.mutations)L=L.add(ee.key)}for(const H of d){b.push(H.batchId);for(const ee of H.mutations)L=L.add(ee.key)}return t.localDocuments.getDocuments(s,L).next(H=>({ji:H,removedBatchIds:g,addedBatchIds:b}))})})}),Ap.apply(this,arguments)}function om(i,e){const t=Vt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,b,L,H){const ee=L.batch,Ee=ee.keys();let He=$e.resolve();return Ee.forEach(wt=>{He=He.next(()=>H.getEntry(b,wt)).next(Mt=>{const hn=L.docVersions.get(wt);qt(null!==hn),Mt.version.compareTo(hn)<0&&(ee.applyToRemoteDocument(Mt,L),Mt.isValidDocument()&&(Mt.setReadTime(L.commitVersion),H.addEntry(Mt)))})}),He.next(()=>g.mutationQueue.removeMutationBatch(b,ee))}(t,s,e,d).next(()=>d.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let b=fr();for(let L=0;L<g.mutationResults.length;++L)g.mutationResults[L].transformResults.length>0&&(b=b.add(g.batch.mutations[L].key));return b}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function am(i){const e=Vt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function wv(i,e){const t=Vt(i),s=e.snapshotVersion;let u=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.qi;const b=[];e.targetChanges.forEach((ee,Ee)=>{const He=u.get(Ee);if(!He)return;b.push(t.Cs.removeMatchingKeys(d,ee.removedDocuments,Ee).next(()=>t.Cs.addMatchingKeys(d,ee.addedDocuments,Ee)));let wt=He.withSequenceNumber(d.currentSequenceNumber);var Mt,hn,Fn;e.targetMismatches.has(Ee)?wt=wt.withResumeToken(P.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):ee.resumeToken.approximateByteSize()>0&&(wt=wt.withResumeToken(ee.resumeToken,s)),u=u.insert(Ee,wt),hn=wt,Fn=ee,(0===(Mt=He).resumeToken.approximateByteSize()||hn.snapshotVersion.toMicroseconds()-Mt.snapshotVersion.toMicroseconds()>=3e8||Fn.addedDocuments.size+Fn.modifiedDocuments.size+Fn.removedDocuments.size>0)&&b.push(t.Cs.updateTargetData(d,wt))});let L=Eo(),H=fr();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(d,ee))}),b.push(Iv(d,g,e.documentUpdates).next(ee=>{L=ee.Wi,H=ee.zi})),!s.isEqual(Ut.min())){const ee=t.Cs.getLastRemoteSnapshotVersion(d).next(Ee=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,s));b.push(ee)}return $e.waitFor(b).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,L,H)).next(()=>L)}).then(d=>(t.qi=u,d))}function Iv(i,e,t){let s=fr(),u=fr();return t.forEach(d=>s=s.add(d)),e.getEntries(i,s).next(d=>{let g=Eo();return t.forEach((b,L)=>{const H=d.get(b);L.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(b)),L.isNoDocument()&&L.version.isEqual(Ut.min())?(e.removeEntry(b,L.readTime),g=g.insert(b,L)):!H.isValidDocument()||L.version.compareTo(H.version)>0||0===L.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(L),g=g.insert(b,L)):Xe("LocalStore","Ignoring outdated watch update for ",b,". Current version:",H.version," Watch version:",L.version)}),{Wi:g,zi:u}})}function um(i,e){const t=Vt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ql(i,e){const t=Vt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Cs.getTargetData(s,e).next(d=>d?(u=d,$e.resolve(u)):t.Cs.allocateTargetId(s).next(g=>(u=new cl(e,g,0,s.currentSequenceNumber),t.Cs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.qi.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function za(i,e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,me.Z)(function*(i,e,t){const s=Vt(i),u=s.qi.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!ss(g))throw g;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.qi=s.qi.remove(e),s.Ui.delete(u.target)}),Mp.apply(this,arguments)}function Vc(i,e,t){const s=Vt(i);let u=Ut.min(),d=fr();return s.persistence.runTransaction("Execute query","readonly",g=>function(b,L,H){const ee=Vt(b),Ee=ee.Ui.get(H);return void 0!==Ee?$e.resolve(ee.qi.get(Ee)):ee.Cs.getTargetData(L,H)}(s,g,Jo(e)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(g,b.targetId).next(L=>{d=L})}).next(()=>s.Li.getDocumentsMatchingQuery(g,e,t?u:Ut.min(),t?d:fr())).next(b=>(Dv(s,Ua(e),b),{documents:b,Hi:d})))}function jh(i,e){const t=Vt(i),s=Vt(t.Cs),u=t.qi.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>s.ne(d,e).next(g=>g?g.target:null))}function lm(i,e){const t=Vt(i),s=t.Ki.get(e)||Ut.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,Sa(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Dv(t,e,u),u))}function Dv(i,e,t){let s=i.Ki.get(e)||Ut.min();t.forEach((u,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),i.Ki.set(e,s)}function cm(){return cm=(0,me.Z)(function*(i,e,t,s){const u=Vt(i);let d=fr(),g=Eo();for(const H of t){const ee=e.Ji(H.metadata.name);H.document&&(d=d.add(ee));const Ee=e.Yi(H);Ee.setReadTime(e.Xi(H.metadata.readTime)),g=g.insert(ee,Ee)}const b=u.Gi.newChangeBuffer({trackRemovals:!0}),L=yield ql(u,(H=s,Jo(rl(Gn.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>Iv(H,b,g).next(ee=>(b.apply(H),ee)).next(ee=>u.Cs.removeMatchingKeysForTargetId(H,L.targetId).next(()=>u.Cs.addMatchingKeys(H,d,L.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,ee.Wi,ee.zi)).next(()=>ee.Wi)))}),cm.apply(this,arguments)}function bv(i,e){return $h.apply(this,arguments)}function $h(){return $h=(0,me.Z)(function*(i,e,t=fr()){const s=yield ql(i,Jo(Ah(e.bundledQuery))),u=Vt(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=Ci(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const b=s.withResumeToken(P.EMPTY_BYTE_STRING,g);return u.qi=u.qi.insert(b.targetId,b),u.Cs.updateTargetData(d,b).next(()=>u.Cs.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,s.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),$h.apply(this,arguments)}function Cv(i,e){return`firestore_clients_${i}_${e}`}function dm(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function gl(i,e){return`firestore_targets_${i}_${e}`}class Hh{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Zi(e,t,s){const u=JSON.parse(s);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new ft(u.error.code,u.error.message))),g?new Hh(e,t,u.state,d):(ln("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let u,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new ft(s.error.code,s.error.message))),d?new Uc(e,s.state,u):(ln("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,d=ol();for(let g=0;u&&g<s.activeTargetIds.length;++g)u=_(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return u?new Zl(e,d):(ln("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xp(t.clientId,t.onlineState):(ln("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gh{constructor(){this.activeTargetIds=ol()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Np{constructor(e,t,s,u,d){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new xs(mn),this.started=!1,this.cr=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=Cv(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Gh),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(Cv(e.persistenceKey,u));if(d){const g=Zl.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const u=e.yr(s);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(gl(this.persistenceKey,e));if(s){const u=Uc.Zi(e,s);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gl(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Er(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Xe("SharedClientState","READ",e,t),t}setItem(e,t){Xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Xe("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void ln("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const u=t.vr(s.key);return t.Vr(u,null)}{const u=t.Sr(s.key,s.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const u=t.Dr(s.key,s.newValue);if(u)return t.Cr(u)}}else if(t._r.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(s.key===t.wr){if(null!==s.newValue){const u=t.yr(s.newValue);if(u)return t.pr(u)}}else if(s.key===t.hr){const u=function(d){let g=Zs.at;if(null!=d)try{const b=JSON.parse(d);qt("number"==typeof b),g=b}catch(b){ln("SharedClientState","Failed to read sequence number from WebStorage",b)}return g}(s.newValue);u!==Zs.at&&t.sequenceNumberHandler(u)}else if(s.key===t.mr){const u=t.Or(s.newValue);yield Promise.all(u.map(d=>t.syncEngine.Mr(d)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const u=new Hh(this.currentUser,e,t,s),d=dm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=dm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const u=gl(this.persistenceKey,e),d=new Uc(e,t,s);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return Zl.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),u=Number(s[1]);return Hh.Zi(new st(void 0!==s[2]?s[2]:null),u,t)}Nr(e,t){const s=this._r.exec(e),u=Number(s[1]);return Uc.Zi(u,t)}yr(e){return xp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(s),g=[],b=[];return d.forEach(L=>{u.has(L)||g.push(L)}),u.forEach(L=>{d.has(L)||b.push(L)}),this.syncEngine.Br(g,b).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=ol();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class hm{constructor(){this.Lr=new Gh,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Gh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tv{Ur(e){}shutdown(){}}class fm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Sv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Av extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,u,d){const g=this.ho(e,t);Xe("RestConnection","Sending: ",g,s);const b={};return this.lo(b,u,d),this.fo(e,g,b,s).then(L=>(Xe("RestConnection","Received: ",L),L),L=>{throw Rn("RestConnection",`${e} failed with error: `,L,"url: ",g,"request:",s),L})}_o(e,t,s,u,d,g){return this.ao(e,t,s,u,d)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),s&&s.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.oo}/v1/${t}:${Sv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,u){return new Promise((d,g)=>{const b=new we;b.setWithCredentials(!0),b.listenOnce(E.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case m.NO_ERROR:const H=b.getResponseJson();Xe("Connection","XHR received:",JSON.stringify(H)),d(H);break;case m.TIMEOUT:Xe("Connection",'RPC "'+e+'" timed out'),g(new ft(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const ee=b.getStatus();if(Xe("Connection",'RPC "'+e+'" failed with status:',ee,"response text:",b.getResponseText()),ee>0){let Ee=b.getResponseJson();Array.isArray(Ee)&&(Ee=Ee[0]);const He=Ee?.error;if(He&&He.status&&He.message){const wt=function(Mt){const hn=Mt.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(hn)>=0?hn:Ze.UNKNOWN}(He.status);g(new ft(wt,He.message))}else g(new ft(Ze.UNKNOWN,"Server responded with status "+b.getStatus()))}else g(new ft(Ze.UNAVAILABLE,"Connection failed."));break;default:Pt()}}finally{Xe("Connection",'RPC "'+e+'" completed.')}});const L=JSON.stringify(u);b.send(t,"POST",L,s,15)})}wo(e,t,s){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Ru(),g=U(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(b.xmlHttpFactory=new X({})),this.lo(b.initMessageHeaders,t,s),b.encodeInitMessageHeaders=!0;const L=u.join("");Xe("Connection","Creating WebChannel: "+L,b);const H=d.createWebChannel(L,b);let ee=!1,Ee=!1;const He=new pm({Hr:Mt=>{Ee?Xe("Connection","Not sending because WebChannel is closed:",Mt):(ee||(Xe("Connection","Opening WebChannel transport."),H.open(),ee=!0),Xe("Connection","WebChannel sending:",Mt),H.send(Mt))},Jr:()=>H.close()}),wt=(Mt,hn,Fn)=>{Mt.listen(hn,Ni=>{try{Fn(Ni)}catch(us){setTimeout(()=>{throw us},0)}})};return wt(H,_e.EventType.OPEN,()=>{Ee||Xe("Connection","WebChannel transport opened.")}),wt(H,_e.EventType.CLOSE,()=>{Ee||(Ee=!0,Xe("Connection","WebChannel transport closed"),He.io())}),wt(H,_e.EventType.ERROR,Mt=>{Ee||(Ee=!0,Rn("Connection","WebChannel transport errored:",Mt),He.io(new ft(Ze.UNAVAILABLE,"The operation could not be completed")))}),wt(H,_e.EventType.MESSAGE,Mt=>{var hn;if(!Ee){const Fn=Mt.data[0];qt(!!Fn);const Ni=Fn,us=Ni.error||(null===(hn=Ni[0])||void 0===hn?void 0:hn.error);if(us){Xe("Connection","WebChannel received error:",us);const ri=us.status;let Us=function(di){const io=vs[di];if(void 0!==io)return _h(io)}(ri),Wr=us.message;void 0===Us&&(Us=Ze.INTERNAL,Wr="Unknown error status: "+ri+" with message "+us.message),Ee=!0,He.io(new ft(Us,Wr)),H.close()}else Xe("Connection","WebChannel received:",Fn),He.ro(Fn)}}),wt(g,R.STAT_EVENT,Mt=>{Mt.stat===G.PROXY?Xe("Connection","Detected buffering proxy"):Mt.stat===G.NOPROXY&&Xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{He.so()},0),He}}function Rp(){return typeof window<"u"?window:null}function xd(){return typeof document<"u"?document:null}function Yl(i){return new $a(i,!0)}class gm{constructor(e,t,s=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-s);u>0&&Xe("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class zh{constructor(e,t,s,u,d,g,b,L){this.Hs=e,this.vo=s,this.Vo=u,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=b,this.listener=L,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new gm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,me.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===Ze.RESOURCE_EXHAUSTED?(ln(t.toString()),ln("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===Ze.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.So===t&&this.Go(s,u)},s=>{e(()=>{const u=new ft(Ze.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(u)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{s(()=>this.Qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mv extends zh{constructor(e,t,s,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,g),this.yt=d}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Ne(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:Pt(),u=e.targetChange.targetIds||[],d=function(L,H){return L.wt?(qt(void 0===H||"string"==typeof H),P.fromBase64String(H||"")):(qt(void 0===H||H instanceof Uint8Array),P.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,b=g&&function(L){const H=void 0===L.code?Ze.UNKNOWN:_h(L.code);return new ft(H,L.message||"")}(g);t=new Ic(s,u,d,b||null)}else if("documentChange"in e){const s=e.documentChange,u=Ha(i,s.document.name),d=Ci(s.document.updateTime),g=s.document.createTime?Ci(s.document.createTime):Ut.min(),b=new Uo({mapValue:{fields:s.document.fields}}),L=qi.newFoundDocument(u,d,g,b);t=new aa(s.targetIds||[],s.removedTargetIds||[],L.key,L)}else if("documentDelete"in e){const s=e.documentDelete,u=Ha(i,s.document),d=s.readTime?Ci(s.readTime):Ut.min(),g=qi.newNoDocument(u,d);t=new aa([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,u=Ha(i,s.document);t=new aa([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Pt();{const s=e.filter,d=new Ed(s.count||0);t=new wc(s.targetId,d)}}var L;return t}(this.yt,e),s=function(u){if(!("targetChange"in u))return Ut.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ut.min():d.readTime?Ci(d.readTime):Ut.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=c(this.yt),t.addTarget=function(u,d){let g;const b=d.target;return g=nl(b)?{documents:Wn(u,b)}:{query:Vn(u,b)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=al(u,d.resumeToken):d.snapshotVersion.compareTo(Ut.min())>0&&(g.readTime=Ea(u,d.snapshotVersion.toTimestamp())),g}(this.yt,e);const s=function no(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=c(this.yt),t.removeTarget=e,this.Bo(t)}}class D0 extends zh{constructor(e,t,s,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,g),this.yt=d,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function _n(i,e){return i&&i.length>0?(qt(void 0!==e),i.map(t=>function(s,u){let d=Ci(s.updateTime?s.updateTime:u);return d.isEqual(Ut.min())&&(d=Ci(u)),new Xf(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ci(e.commitTime);return this.listener.Zo(s,t)}return qt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=c(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ct(this.yt,s))};this.Bo(t)}}class Bc extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=u,this.nu=!1}su(){if(this.nu)throw new ft(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.ao(e,t,s,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(Ze.UNKNOWN,u.toString())})}_o(e,t,s,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection._o(e,t,s,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ft(Ze.UNKNOWN,d.toString())})}terminate(){this.nu=!0}}class Kh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ln(t),this.ou=!1):Xe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class lu{constructor(e,t,s,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=d,this.mu.Ur(b=>{s.enqueueAndForget((0,me.Z)(function*(){var L;Wa(g)&&(Xe("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,me.Z)(function*(H){const ee=Vt(H);ee._u.add(4),yield ml(ee),ee.gu.set("Unknown"),ee._u.delete(4),yield jc(ee)}),function(H){return L.apply(this,arguments)})(g))}))}),this.gu=new Kh(s,u)}}function jc(i){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,me.Z)(function*(i){if(Wa(i))for(const e of i.wu)yield e(!0)}),Pp.apply(this,arguments)}function ml(i){return cu.apply(this,arguments)}function cu(){return cu=(0,me.Z)(function*(i){for(const e of i.wu)yield e(!1)}),cu.apply(this,arguments)}function $c(i,e){const t=Vt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ym(t)?qh(t):yl(t).ko()&&Nd(t,e))}function Hc(i,e){const t=Vt(i),s=yl(t);t.du.delete(e),s.ko()&&xv(t,e),0===t.du.size&&(s.ko()?s.Fo():Wa(t)&&t.gu.set("Unknown"))}function Nd(i,e){i.yu.Ot(e.targetId),yl(i).zo(e)}function xv(i,e){i.yu.Ot(e),yl(i).Ho(e)}function qh(i){i.yu=new wd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),yl(i).start(),i.gu.uu()}function ym(i){return Wa(i)&&!yl(i).No()&&i.du.size>0}function Wa(i){return 0===Vt(i)._u.size}function Rd(i){i.yu=void 0}function Op(i){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,me.Z)(function*(i){i.du.forEach((e,t)=>{Nd(i,e)})}),Pd.apply(this,arguments)}function kp(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,me.Z)(function*(i,e){Rd(i),ym(i)?(i.gu.hu(e),qh(i)):i.gu.set("Unknown")}),vm.apply(this,arguments)}function Nv(i,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,me.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Ic&&2===e.state&&e.cause)try{yield(s=(0,me.Z)(function*(u,d){const g=d.cause;for(const b of d.targetIds)u.du.has(b)&&(yield u.remoteSyncer.rejectListen(b,g),u.du.delete(b),u.yu.removeTarget(b))}),function(u,d){return s.apply(this,arguments)})(i,e)}catch(s){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Zh(i,s)}else if(e instanceof aa?i.yu.Kt(e):e instanceof wc?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Ut.min()))try{const s=yield am(i.localStore);t.compareTo(s)>=0&&(yield function(u,d){const g=u.yu.Zt(d);return g.targetChanges.forEach((b,L)=>{if(b.resumeToken.approximateByteSize()>0){const H=u.du.get(L);H&&u.du.set(L,H.withResumeToken(b.resumeToken,d))}}),g.targetMismatches.forEach(b=>{const L=u.du.get(b);if(!L)return;u.du.set(b,L.withResumeToken(P.EMPTY_BYTE_STRING,L.snapshotVersion)),xv(u,b);const H=new cl(L.target,b,1,L.sequenceNumber);Nd(u,H)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(s){Xe("RemoteStore","Failed to raise snapshot:",s),yield Zh(i,s)}var s}),Fp.apply(this,arguments)}function Zh(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,me.Z)(function*(i,e,t){if(!ss(e))throw e;i._u.add(1),yield ml(i),i.gu.set("Offline"),t||(t=()=>am(i.localStore)),i.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Xe("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield jc(i)}))}),Lp.apply(this,arguments)}function Vp(i,e){return e().catch(t=>Zh(i,t,e))}function Od(i){return Up.apply(this,arguments)}function Up(){return Up=(0,me.Z)(function*(i){const e=Vt(i),t=vl(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;b0(e);)try{const u=yield um(e.localStore,s);if(null===u){0===e.fu.length&&t.Fo();break}s=u.batchId,_m(e,u)}catch(u){yield Zh(e,u)}Bp(e)&&Em(e)}),Up.apply(this,arguments)}function b0(i){return Wa(i)&&i.fu.length<10}function _m(i,e){i.fu.push(e);const t=vl(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Bp(i){return Wa(i)&&!vl(i).No()&&i.fu.length>0}function Em(i){vl(i).start()}function jp(i){return wm.apply(this,arguments)}function wm(){return wm=(0,me.Z)(function*(i){vl(i).eu()}),wm.apply(this,arguments)}function C0(i){return Im.apply(this,arguments)}function Im(){return Im=(0,me.Z)(function*(i){const e=vl(i);for(const t of i.fu)e.Xo(t.mutations)}),Im.apply(this,arguments)}function T0(i,e,t){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,me.Z)(function*(i,e,t){const s=i.fu.shift(),u=Sh.from(s,e,t);yield Vp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Od(i)}),Dm.apply(this,arguments)}function S0(i,e){return bm.apply(this,arguments)}function bm(){return bm=(0,me.Z)(function*(i,e){var t;e&&vl(i).Yo&&(yield(t=(0,me.Z)(function*(s,u){if(vc(d=u.code)&&d!==Ze.ABORTED){const g=s.fu.shift();vl(s).Mo(),yield Vp(s,()=>s.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield Od(s)}var d}),function(s,u){return t.apply(this,arguments)})(i,e)),Bp(i)&&Em(i)}),bm.apply(this,arguments)}function Rv(i,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,me.Z)(function*(i,e){const t=Vt(i);t.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const s=Wa(t);t._u.add(3),yield ml(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jc(t)}),Cm.apply(this,arguments)}function Tm(i,e){return Cu.apply(this,arguments)}function Cu(){return Cu=(0,me.Z)(function*(i,e){const t=Vt(i);e?(t._u.delete(2),yield jc(t)):e||(t._u.add(2),yield ml(t),t.gu.set("Unknown"))}),Cu.apply(this,arguments)}function yl(i){return i.pu||(i.pu=function(e,t,s){const u=Vt(e);return u.su(),new Mv(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:Op.bind(null,i),Zr:kp.bind(null,i),Wo:Nv.bind(null,i)}),i.wu.push(function(){var e=(0,me.Z)(function*(t){t?(i.pu.Mo(),ym(i)?qh(i):i.gu.set("Unknown")):(yield i.pu.stop(),Rd(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function vl(i){return i.Iu||(i.Iu=function(e,t,s){const u=Vt(e);return u.su(),new D0(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:jp.bind(null,i),Zr:S0.bind(null,i),tu:C0.bind(null,i),Zo:T0.bind(null,i)}),i.wu.push(function(){var e=(0,me.Z)(function*(t){t?(i.Iu.Mo(),yield Od(i)):(yield i.Iu.stop(),i.fu.length>0&&(Xe("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Yh{constructor(e,t,s,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=d,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,s,u,d){const g=Date.now()+s,b=new Yh(e,t,g,u,d);return b.start(s),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ft(Ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _l(i,e){if(ln("AsyncQueue",`${e}: ${i}`),ss(i))return new ft(Ze.UNAVAILABLE,`${e}: ${i}`);throw i}class Ql{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Nt.comparator(t.key,s.key):(t,s)=>Nt.comparator(t.key,s.key),this.keyedMap=sl(),this.sortedSet=new xs(this.comparator)}static emptySet(e){return new Ql(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=s.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Ql;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Qh{constructor(){this.Tu=new xs(Nt.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Pt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Gc{constructor(e,t,s,u,d,g,b,L,H){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=b,this.excludesMetadataChanges=L,this.hasCachedResults=H}static fromInitialDocuments(e,t,s,u,d){const g=[];return t.forEach(b=>{g.push({type:0,doc:b})}),new Gc(e,t,Ql.emptySet(t),g,s,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class El{constructor(){this.Au=void 0,this.listeners=[]}}class Sm{constructor(){this.queries=new iu(e=>vo(e),kl),this.onlineState="Unknown",this.Ru=new Set}}function $p(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,me.Z)(function*(i,e){const t=Vt(i),s=e.query;let u=!1,d=t.queries.get(s);if(d||(u=!0,d=new El),u)try{d.Au=yield t.onListen(s)}catch(g){const b=_l(g,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(b)}t.queries.set(s,d),d.listeners.push(e),e.bu(t.onlineState),d.Au&&e.Pu(d.Au)&&wl(t)}),Hp.apply(this,arguments)}function Jh(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,me.Z)(function*(i,e){const t=Vt(i),s=e.query;let u=!1;const d=t.queries.get(s);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),Gp.apply(this,arguments)}function Pv(i,e){const t=Vt(i);let s=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const b of g.listeners)b.Pu(u)&&(s=!0);g.Au=u}}s&&wl(t)}function Xh(i,e,t){const s=Vt(i),u=s.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);s.queries.delete(e)}function wl(i){i.Ru.forEach(e=>{e.next()})}class kd{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Gc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class zc{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class ef{constructor(e){this.yt=e}Ji(e){return Ha(this.yt,e)}Yi(e){return e.metadata.exists?B(this.yt,e.document,!1):qi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ci(e)}}class tf{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=Gn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new ef(this.yt);for(const u of e)if(u.metadata.queries){const d=s.Ji(u.metadata.name);for(const g of u.metadata.queries){const b=(t.get(g)||fr()).add(d);t.set(g,b)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function I0(i,e,t,s){return cm.apply(this,arguments)}(e.localStore,new ef(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const u of e.queries)yield bv(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function zp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Wp{constructor(e){this.key=e}}class nf{constructor(e){this.key=e}}class rf{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=fr(),this.mutatedKeys=fr(),this.Gu=_o(e),this.Qu=new Ql(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new Qh,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,b=!1;const L="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ee,Ee)=>{const He=u.get(ee),wt=md(this.query,Ee)?Ee:null,Mt=!!He&&this.mutatedKeys.has(He.key),hn=!!wt&&(wt.hasLocalMutations||this.mutatedKeys.has(wt.key)&&wt.hasCommittedMutations);let Fn=!1;He&&wt?He.data.isEqual(wt.data)?Mt!==hn&&(s.track({type:3,doc:wt}),Fn=!0):this.Hu(He,wt)||(s.track({type:2,doc:wt}),Fn=!0,(L&&this.Gu(wt,L)>0||H&&this.Gu(wt,H)<0)&&(b=!0)):!He&&wt?(s.track({type:0,doc:wt}),Fn=!0):He&&!wt&&(s.track({type:1,doc:He}),Fn=!0,(L||H)&&(b=!0)),Fn&&(wt?(g=g.add(wt),d=hn?d.add(ee):d.delete(ee)):(g=g.delete(ee),d=d.delete(ee)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const ee="F"===this.query.limitType?g.last():g.first();g=g.delete(ee.key),d=d.delete(ee.key),s.track({type:1,doc:ee})}return{Qu:g,zu:s,$i:b,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Eu();d.sort((H,ee)=>function(Ee,He){const wt=Mt=>{switch(Mt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt()}};return wt(Ee)-wt(He)}(H.type,ee.type)||this.Gu(H.doc,ee.doc)),this.Ju(s);const g=t?this.Yu():[],b=0===this.Ku.size&&this.current?1:0,L=b!==this.Uu;return this.Uu=b,0!==d.length||L?{snapshot:new Gc(this.query,e.Qu,u,d,e.mutatedKeys,0===b,L,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:g}:{Xu:g}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Qh,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=fr(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new nf(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new Wp(s))}),t}tc(e){this.qu=e.Hi,this.Ku=fr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Gc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Am{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Kp{constructor(e){this.key=e,this.nc=!1}}class Ov{constructor(e,t,s,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.sc={},this.ic=new iu(b=>vo(b),kl),this.rc=new Map,this.oc=new Set,this.uc=new xs(Nt.comparator),this.cc=new Map,this.ac=new Lh,this.hc={},this.lc=new Map,this.fc=Wu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function A0(i,e){return qp.apply(this,arguments)}function qp(){return qp=(0,me.Z)(function*(i,e){const t=Bd(i);let s,u;const d=t.ic.get(e);if(d)s=d.targetId,t.sharedClientState.addLocalQueryTarget(s),u=d.view.ec();else{const g=yield ql(t.localStore,Jo(e));t.isPrimaryClient&&$c(t.remoteStore,g);const b=t.sharedClientState.addLocalQueryTarget(g.targetId);s=g.targetId,u=yield sf(t,e,s,"current"===b,g.resumeToken)}return u}),qp.apply(this,arguments)}function sf(i,e,t,s,u){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,me.Z)(function*(i,e,t,s,u){i._c=(Ee,He,wt)=>{return(Mt=(0,me.Z)(function*(hn,Fn,Ni,us){let ri=Fn.view.Wu(Ni);ri.$i&&(ri=yield Vc(hn.localStore,Fn.query,!1).then(({documents:di})=>Fn.view.Wu(di,ri)));const Us=us&&us.targetChanges.get(Fn.targetId),Wr=Fn.view.applyChanges(ri,hn.isPrimaryClient,Us);return lf(hn,Fn.targetId,Wr.Xu),Wr.snapshot}),function(hn,Fn,Ni,us){return Mt.apply(this,arguments)})(i,Ee,He,wt);var Mt};const d=yield Vc(i.localStore,e,!0),g=new rf(e,d.Hi),b=g.Wu(d.documents),L=wu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),H=g.applyChanges(b,i.isPrimaryClient,L);lf(i,t,H.Xu);const ee=new Am(e,t,g);return i.ic.set(e,ee),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),H.snapshot}),Zp.apply(this,arguments)}function Mm(i,e){return af.apply(this,arguments)}function af(){return af=(0,me.Z)(function*(i,e){const t=Vt(i),s=t.ic.get(e),u=t.rc.get(s.targetId);if(u.length>1)return t.rc.set(s.targetId,u.filter(d=>!kl(d,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield za(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Hc(t.remoteStore,s.targetId),Wc(t,s.targetId)}).catch(Ma))):(Wc(t,s.targetId),yield za(t.localStore,s.targetId,!0))}),af.apply(this,arguments)}function da(){return da=(0,me.Z)(function*(i,e,t){const s=hu(i);try{const u=yield function(d,g){const b=Vt(d),L=Er.now(),H=g.reduce((He,wt)=>He.add(wt.key),fr());let ee,Ee;return b.persistence.runTransaction("Locally write mutations","readwrite",He=>{let wt=Eo(),Mt=fr();return b.Gi.getEntries(He,H).next(hn=>{wt=hn,wt.forEach((Fn,Ni)=>{Ni.isValidDocument()||(Mt=Mt.add(Fn))})}).next(()=>b.localDocuments.getOverlayedDocuments(He,wt)).next(hn=>{ee=hn;const Fn=[];for(const Ni of g){const us=ph(Ni,ee.get(Ni.key).overlayedDocument);null!=us&&Fn.push(new ru(Ni.key,us,Zf(us.value.mapValue),_i.exists(!0)))}return b.mutationQueue.addMutationBatch(He,L,Fn,g)}).next(hn=>{Ee=hn;const Fn=hn.applyToLocalDocumentSet(ee,Mt);return b.documentOverlayCache.saveOverlays(He,hn.batchId,Fn)})}).then(()=>({batchId:Ee.batchId,changes:jl(ee)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(d,g,b){let L=d.hc[d.currentUser.toKey()];L||(L=new xs(mn)),L=L.insert(g,b),d.hc[d.currentUser.toKey()]=L}(s,u.batchId,t),yield du(s,u.changes),yield Od(s.remoteStore)}catch(u){const d=_l(u,"Failed to persist write");t.reject(d)}}),da.apply(this,arguments)}function Yp(i,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,me.Z)(function*(i,e){const t=Vt(i);try{const s=yield wv(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.cc.get(d);g&&(qt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.nc=!0:u.modifiedDocuments.size>0?qt(g.nc):u.removedDocuments.size>0&&(qt(g.nc),g.nc=!1))}),yield du(t,s,e)}catch(s){yield Ma(s)}}),Qp.apply(this,arguments)}function Fv(i,e,t){const s=Vt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.ic.forEach((d,g)=>{const b=g.view.bu(e);b.snapshot&&u.push(b.snapshot)}),function(d,g){const b=Vt(d);b.onlineState=g;let L=!1;b.queries.forEach((H,ee)=>{for(const Ee of ee.listeners)Ee.bu(g)&&(L=!0)}),L&&wl(b)}(s.eventManager,e),u.length&&s.sc.Wo(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Lv(i,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,me.Z)(function*(i,e,t){const s=Vt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.cc.get(e),d=u&&u.key;if(d){let g=new xs(Nt.comparator);g=g.insert(d,qi.newNoDocument(d,Ut.min()));const b=fr().add(d),L=new $u(Ut.min(),new Map,new ci(mn),g,b);yield Yp(s,L),s.uc=s.uc.remove(d),s.cc.delete(e),Ka(s)}else yield za(s.localStore,e,!1).then(()=>Wc(s,e,t)).catch(Ma)}),Fd.apply(this,arguments)}function xm(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,me.Z)(function*(i,e){const t=Vt(i),s=e.batch.batchId;try{const u=yield om(t.localStore,e);tg(t,s,null),uf(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield du(t,u)}catch(u){yield Ma(u)}}),Jp.apply(this,arguments)}function Vv(i,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,me.Z)(function*(i,e,t){const s=Vt(i);try{const u=yield function(d,g){const b=Vt(d);return b.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let H;return b.mutationQueue.lookupMutationBatch(L,g).next(ee=>(qt(null!==ee),H=ee.keys(),b.mutationQueue.removeMutationBatch(L,ee))).next(()=>b.mutationQueue.performConsistencyCheck(L)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(L,H,g)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,H)).next(()=>b.localDocuments.getDocuments(L,H))})}(s.localStore,e);tg(s,e,t),uf(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield du(s,u)}catch(u){yield Ma(u)}}),Xp.apply(this,arguments)}function eg(){return eg=(0,me.Z)(function*(i,e){const t=Vt(i);Wa(t.remoteStore)||Xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const g=Vt(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>g.mutationQueue.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===s)return void e.resolve();const u=t.lc.get(s)||[];u.push(e),t.lc.set(s,u)}catch(s){const u=_l(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),eg.apply(this,arguments)}function uf(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function tg(i,e,t){const s=Vt(i);let u=s.hc[s.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),s.hc[s.currentUser.toKey()]=u}}function Wc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||ng(i,s)})}function ng(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Hc(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Ka(i))}function lf(i,e,t){for(const s of t)s instanceof Wp?(i.ac.addReference(s.key,e),Uv(i,s)):s instanceof nf?(Xe("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||ng(i,s.key)):Pt()}function Uv(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||(Xe("SyncEngine","New document in limbo: "+t),i.oc.add(s),Ka(i))}function Ka(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Nt(Gn.fromString(e)),s=i.fc.next();i.cc.set(s,new Kp(t)),i.uc=i.uc.insert(t,s),$c(i.remoteStore,new cl(Jo(rl(t.path)),s,2,Zs.at))}}function du(i,e,t){return rg.apply(this,arguments)}function rg(){return rg=(0,me.Z)(function*(i,e,t){const s=Vt(i),u=[],d=[],g=[];var b;s.ic.isEmpty()||(s.ic.forEach((b,L)=>{g.push(s._c(L,e,t).then(H=>{if((H||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(L.targetId,H?.fromCache?"not-current":"current"),H){u.push(H);const ee=Bh.Ci(L.targetId,H);d.push(ee)}}))}),yield Promise.all(g),s.sc.Wo(u),yield(b=(0,me.Z)(function*(L,H){const ee=Vt(L);try{yield ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ee=>$e.forEach(H,He=>$e.forEach(He.Si,wt=>ee.persistence.referenceDelegate.addReference(Ee,He.targetId,wt)).next(()=>$e.forEach(He.Di,wt=>ee.persistence.referenceDelegate.removeReference(Ee,He.targetId,wt)))))}catch(Ee){if(!ss(Ee))throw Ee;Xe("LocalStore","Failed to update sequence numbers: "+Ee)}for(const Ee of H){const He=Ee.targetId;if(!Ee.fromCache){const wt=ee.qi.get(He),hn=wt.withLastLimboFreeSnapshotVersion(wt.snapshotVersion);ee.qi=ee.qi.insert(He,hn)}}}),function(L,H){return b.apply(this,arguments)})(s.localStore,d))}),rg.apply(this,arguments)}function Bv(i,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,me.Z)(function*(i,e){const t=Vt(i);if(!t.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const s=yield Sp(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(g=>{g.forEach(b=>{b.reject(new ft(Ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield du(t,s.ji)}var u}),Rm.apply(this,arguments)}function Pm(i,e){const t=Vt(i),s=t.cc.get(e);if(s&&s.nc)return fr().add(s.key);{let u=fr();const d=t.rc.get(e);if(!d)return u;for(const g of d){const b=t.ic.get(g);u=u.unionWith(b.view.ju)}return u}}function jv(i,e){return ig.apply(this,arguments)}function ig(){return ig=(0,me.Z)(function*(i,e){const t=Vt(i),s=yield Vc(t.localStore,e.query,!0),u=e.view.tc(s);return t.isPrimaryClient&&lf(t,e.targetId,u.Xu),u}),ig.apply(this,arguments)}function $v(i,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,me.Z)(function*(i,e){const t=Vt(i);return lm(t.localStore,e).then(s=>du(t,s))}),Ld.apply(this,arguments)}function Hv(i,e,t,s){return sg.apply(this,arguments)}function sg(){return sg=(0,me.Z)(function*(i,e,t,s){const u=Vt(i),d=yield function(g,b){const L=Vt(g),H=Vt(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",ee=>H.Tn(ee,b).next(Ee=>Ee?L.localDocuments.getDocuments(ee,Ee):$e.resolve(null)))}(u.localStore,e);var b;null!==d?("pending"===t?yield Od(u.remoteStore):"acknowledged"===t||"rejected"===t?(tg(u,e,s||null),uf(u,e),b=e,Vt(Vt(u.localStore).mutationQueue).An(b)):Pt(),yield du(u,d)):Xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),sg.apply(this,arguments)}function Vd(){return Vd=(0,me.Z)(function*(i,e){const t=Vt(i);if(Bd(t),hu(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield Ud(t,s.toArray());t.dc=!0,yield Tm(t.remoteStore,!0);for(const d of u)$c(t.remoteStore,d)}else if(!1===e&&!1!==t.dc){const s=[];let u=Promise.resolve();t.rc.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?s.push(g):u=u.then(()=>(Wc(t,g),za(t.localStore,g,!0))),Hc(t.remoteStore,g)}),yield u,yield Ud(t,s),function(d){const g=Vt(d);g.cc.forEach((b,L)=>{Hc(g.remoteStore,L)}),g.ac.fs(),g.cc=new Map,g.uc=new xs(Nt.comparator)}(t),t.dc=!1,yield Tm(t.remoteStore,!1)}}),Vd.apply(this,arguments)}function Ud(i,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,me.Z)(function*(i,e,t){const s=Vt(i),u=[],d=[];for(const g of e){let b;const L=s.rc.get(g);if(L&&0!==L.length){b=yield ql(s.localStore,Jo(L[0]));for(const H of L){const ee=s.ic.get(H),Ee=yield jv(s,ee);Ee.snapshot&&d.push(Ee.snapshot)}}else{const H=yield jh(s.localStore,g);b=yield ql(s.localStore,H),yield sf(s,df(H),g,!1,b.resumeToken)}u.push(b)}return s.sc.Wo(d),u}),Om.apply(this,arguments)}function df(i){return gd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function M0(i){const e=Vt(i);return Vt(Vt(e.localStore).persistence).vi()}function km(i,e,t,s){return hf.apply(this,arguments)}function hf(){return hf=(0,me.Z)(function*(i,e,t,s){const u=Vt(i);if(u.dc)return void Xe("SyncEngine","Ignoring unexpected query state notification.");const d=u.rc.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield lm(u.localStore,Ua(d[0])),b=$u.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,P.EMPTY_BYTE_STRING);yield du(u,g,b);break}case"rejected":yield za(u.localStore,e,!0),Wc(u,e,s);break;default:Pt()}}),hf.apply(this,arguments)}function Fm(i,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,me.Z)(function*(i,e,t){const s=Bd(i);if(s.dc){for(const u of e){if(s.rc.has(u)){Xe("SyncEngine","Adding an already active target "+u);continue}const d=yield jh(s.localStore,u),g=yield ql(s.localStore,d);yield sf(s,df(d),g.targetId,!1,g.resumeToken),$c(s.remoteStore,g)}for(const u of t)s.rc.has(u)&&(yield za(s.localStore,u,!1).then(()=>{Hc(s.remoteStore,u),Wc(s,u)}).catch(Ma))}}),ff.apply(this,arguments)}function Bd(i){const e=Vt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lv.bind(null,e),e.sc.Wo=Pv.bind(null,e.eventManager),e.sc.wc=Xh.bind(null,e.eventManager),e}function hu(i){const e=Vt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vv.bind(null,e),e}class jd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.yt=Yl(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return sm(this.persistence,new Tp,e.initialUser,this.yt)}yc(e){return new im(Vh.Bs,this.yt)}gc(e){return new hm}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Kc extends jd{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,me.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield hu(s.Ac.syncEngine),yield Od(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return sm(this.persistence,new Tp,e.initialUser,this.yt)}Tc(e,t){return new lv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new ac(t,this.persistence);return new vu(e.asyncQueue,s)}yc(e){const t=Uh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Da.withCacheSize(this.cacheSizeBytes):Da.DEFAULT;return new Cp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Rp(),xd(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hm}}class Gv extends Kc{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,me.Z)(function*(){yield t().call(s,e);const u=s.Ac.syncEngine;s.sharedClientState instanceof Np&&(s.sharedClientState.syncEngine={Fr:Hv.bind(null,u),$r:km.bind(null,u),Br:Fm.bind(null,u),vi:M0.bind(null,u),Mr:$v.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var d=(0,me.Z)(function*(g){yield function cf(i,e){return Vd.apply(this,arguments)}(s.Ac.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}gc(e){const t=Rp();if(!Np.C(t))throw new ft(Ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Uh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Np(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class $d{initialize(e,t){var s=this;return(0,me.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Fv(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Bv.bind(null,s.syncEngine),yield Tm(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Sm}createDatastore(e){const t=Yl(e.databaseInfo.databaseId),s=new Av(e.databaseInfo);return new Bc(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,d=b=>Fv(this.syncEngine,b,0),g=fm.C()?new fm:new Tv,new lu(t,s,u,d,g);var t,s,u,d,g}createSyncEngine(e,t){return function(s,u,d,g,b,L,H){const ee=new Ov(s,u,d,g,b,L);return H&&(ee.dc=!0),ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const s=Vt(t);Xe("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield ml(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gf(i,e,t){if(!t)throw new ft(Ze.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Lm(i,e,t,s){if(!0===e&&!0===s)throw new ft(Ze.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Vm(i){if(!Nt.isDocumentKey(i))throw new ft(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qc(i){if(Nt.isDocumentKey(i))throw new ft(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function mf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Pt()}function ei(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ft(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mf(i);throw new ft(Ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Um(i,e){if(e<=0)throw new ft(Ze.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const zv=new Map;class Bm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ft(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ft(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Lm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ft(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ft(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qs;switch(t.type){case"gapi":return new Po(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ft(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zv.get(e);t&&(Xe("ComponentProvider","Removing Datastore"),zv.delete(e),t.terminate())}(this),Promise.resolve()}}class Zi{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zi(this.firestore,e,this._key)}}class wo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wo(this.firestore,e,this._query)}}class Tu extends wo{constructor(e,t,s){super(e,t,rl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zi(this.firestore,null,new Nt(e))}withConverter(e){return new Tu(this.firestore,e,this._path)}}function yf(i,e,...t){if(i=(0,ut.m9)(i),gf("collection","path",e),i instanceof Hd){const s=Gn.fromString(e,...t);return qc(s),new Tu(i,null,s)}{if(!(i instanceof Zi||i instanceof Tu))throw new ft(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Gn.fromString(e,...t));return qc(s),new Tu(i.firestore,null,s)}}function vf(i,e,...t){if(i=(0,ut.m9)(i),1===arguments.length&&(e=or.R()),gf("doc","path",e),i instanceof Hd){const s=Gn.fromString(e,...t);return Vm(s),new Zi(i,null,new Nt(s))}{if(!(i instanceof Zi||i instanceof Tu))throw new ft(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Gn.fromString(e,...t));return Vm(s),new Zi(i.firestore,i instanceof Tu?i.converter:null,new Nt(s))}}function $m(i,e){return i=(0,ut.m9)(i),e=(0,ut.m9)(e),(i instanceof Zi||i instanceof Tu)&&(e instanceof Zi||e instanceof Tu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function og(i,e){return i=(0,ut.m9)(i),e=(0,ut.m9)(e),i instanceof wo&&e instanceof wo&&i.firestore===e.firestore&&kl(i._query,e._query)&&i.converter===e.converter}function Hm(i,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _f{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ln("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ef{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),u=Number(s);isNaN(u)&&e.Dc(`length string (${s}) is not valid number`);const d=yield e.Cc(u);return new zc(JSON.parse(d),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Kv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ft(Ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,me.Z)(function*(d,g){const b=Vt(d),L=c(b.yt)+"/documents",H={documents:g.map(wt=>Tc(b.yt,wt))},ee=yield b._o("BatchGetDocuments",L,H,g.length),Ee=new Map;ee.forEach(wt=>{const Mt=function J(i,e){return"found"in e?function(t,s){qt(!!s.found);const u=Ha(t,s.found.name),d=Ci(s.found.updateTime),g=s.found.createTime?Ci(s.found.createTime):Ut.min(),b=new Uo({mapValue:{fields:s.found.fields}});return qi.newFoundDocument(u,d,g,b)}(i,e):"missing"in e?function(t,s){qt(!!s.missing),qt(!!s.readTime);const u=Ha(t,s.missing),d=Ci(s.readTime);return qi.newNoDocument(u,d)}(i,e):Pt()}(b.yt,wt);Ee.set(Mt.key.toString(),Mt)});const He=[];return g.forEach(wt=>{const Mt=Ee.get(wt.toString());qt(!!Mt),He.push(Mt)}),He}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ba(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const d=Nt.fromPath(u);e.mutations.push(new _d(d,e.precondition(d)))}),yield(s=(0,me.Z)(function*(u,d){const g=Vt(u),b=c(g.yt)+"/documents",L={writes:d.map(H=>ct(g.yt,H))};yield g.ao("Commit",b,L)}),function(u,d){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pt();t=Ut.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new ft(Ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ut.min())?_i.exists(!1):_i.updateTime(t):_i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ut.min()))throw new ft(Ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _i.updateTime(t)}return _i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qv{constructor(e,t,s,u,d){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=d,this.kc=s.maxAttempts,this.xo=new gm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new Kv(e.datastore),s=e.Mc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Fc(d)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!w(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vc(t)}return!1}}class ag{constructor(e,t,s,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=st.UNAUTHENTICATED,this.clientId=or.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var g=(0,me.Z)(function*(b){Xe("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(s,g=>(Xe("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ft(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=_l(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Gm(i,e){return qa.apply(this,arguments)}function qa(){return qa=(0,me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,me.Z)(function*(d){s.isEqual(d)||(yield Sp(e.localStore,d),s=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),qa.apply(this,arguments)}function Yc(i,e){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ku(i);Xe("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>Rv(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>Rv(e.remoteStore,d)),i.onlineComponents=e}),Ho.apply(this,arguments)}function Ku(i){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,me.Z)(function*(i){return i.offlineComponents||(Xe("FirestoreClient","Using default OfflineComponentProvider"),yield Gm(i,new jd)),i.offlineComponents}),Qc.apply(this,arguments)}function ha(i){return zd.apply(this,arguments)}function zd(){return zd=(0,me.Z)(function*(i){return i.onlineComponents||(Xe("FirestoreClient","Using default OnlineComponentProvider"),yield Yc(i,new $d)),i.onlineComponents}),zd.apply(this,arguments)}function Jl(i){return Ku(i).then(e=>e.persistence)}function qu(i){return Ku(i).then(e=>e.localStore)}function Il(i){return ha(i).then(e=>e.remoteStore)}function Dl(i){return ha(i).then(e=>e.syncEngine)}function fu(i){return bl.apply(this,arguments)}function bl(){return bl=(0,me.Z)(function*(i){const e=yield ha(i),t=e.eventManager;return t.onListen=A0.bind(null,e.syncEngine),t.onUnlisten=Mm.bind(null,e.syncEngine),t}),bl.apply(this,arguments)}function ug(i,e,t={}){const s=new Lr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(u,d,g,b,L){const H=new _f({next:Ee=>{d.enqueueAndForget(()=>Jh(u,ee));const He=Ee.docs.has(g);!He&&Ee.fromCache?L.reject(new ft(Ze.UNAVAILABLE,"Failed to get document because the client is offline.")):He&&Ee.fromCache&&b&&"server"===b.source?L.reject(new ft(Ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(Ee)},error:Ee=>L.reject(Ee)}),ee=new kd(rl(g.path),H,{includeMetadataChanges:!0,Nu:!0});return $p(u,ee)}(yield fu(i),i.asyncQueue,e,t,s)})),s.promise}function lg(i,e,t={}){const s=new Lr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(u,d,g,b,L){const H=new _f({next:Ee=>{d.enqueueAndForget(()=>Jh(u,ee)),Ee.fromCache&&"server"===b.source?L.reject(new ft(Ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(Ee)},error:Ee=>L.reject(Ee)}),ee=new kd(g,H,{includeMetadataChanges:!0,Nu:!0});return $p(u,ee)}(yield fu(i),i.asyncQueue,e,t,s)})),s.promise}class Ym{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new gm(this,"async_queue_retry"),this.Wc=()=>{const t=xd();t&&Xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=xd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Lr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ss(t))throw t;Xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,ln("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Yh.createAndSchedule(this,e,t,s,d=>this.Yc(d));return this.Uc.push(u),u}zc(){this.Kc&&Pt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function wf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class Zv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yi extends Hd{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new Ym,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||If(this),this._firestoreClient.terminate()}}function Ns(i){return i._firestoreClient||If(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function If(i){var e;const t=i._freezeSettings(),s=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new _u(i._databaseId,d,i._persistenceKey,(b=t).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var d,b;i._firestoreClient=new ag(i._authCredentials,i._appCheckCredentials,i._queue,s)}function Wd(i,e,t){const s=new Lr;return i.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Gm(i,t),yield Yc(i,e),s.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===Ze.FAILED_PRECONDITION||g.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;Rn("Error enabling offline persistence. Falling back to persistence disabled: "+d),s.reject(d)}var g})).then(()=>s.promise)}function pg(i){if(i._initialized||i._terminated)throw new ft(Ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pu(P.fromBase64String(e))}catch(t){throw new ft(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pu(P.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ft(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ec{constructor(e){this._methodName=e}}class Kd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ft(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ft(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mn(this._lat,e._lat)||mn(this._long,e._long)}}const Jm=/^__.*__$/;class Xm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class gg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ey(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt()}}class bf{constructor(e,t,s,u,d,g){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=u,void 0===d&&this.na(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.ua(e),u}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Mf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ey(this.sa)&&Jm.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class n_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||Yl(e)}da(e,t,s,u=!1){return new bf({sa:e,methodName:t,fa:s,path:br.emptyPath(),oa:!1,la:u},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Cl(i){const e=i._freezeSettings(),t=Yl(i._databaseId);return new n_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function ed(i,e,t,s,u,d={}){const g=i.da(d.merge||d.mergeFields?2:0,e,t,u);vg("Data must be an object, but it was:",g,s);const b=iy(s,g);let L,H;if(d.merge)L=new Qo(g.fieldMask),H=g.fieldTransforms;else if(d.mergeFields){const ee=[];for(const Ee of d.mergeFields){const He=Qs(e,Ee,t);if(!g.contains(He))throw new ft(Ze.INVALID_ARGUMENT,`Field '${He}' is specified in your field mask but missing from your input data.`);_g(ee,He)||ee.push(He)}L=new Qo(ee),H=g.fieldTransforms.filter(Ee=>L.covers(Ee.field))}else L=null,H=g.fieldTransforms;return new Xm(new Uo(b),L,H)}class td extends ec{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof td}}function mg(i,e,t){return new bf({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Cf extends ec{_toFieldTransform(e){return new Pa(e.path,new Bu)}isEqual(e){return e instanceof Cf}}class ty extends ec{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=mg(this,e,!0),s=this._a.map(d=>tc(d,t)),u=new Xa(s);return new Pa(e.path,u)}isEqual(e){return this===e}}class ny extends ec{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=mg(this,e,!0),s=this._a.map(d=>tc(d,t)),u=new eu(s);return new Pa(e.path,u)}isEqual(e){return this===e}}class ry extends ec{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new il(e.yt,gc(e.yt,this.wa));return new Pa(e.path,t)}isEqual(e){return this===e}}function Tf(i,e,t,s){const u=i.da(1,e,t);vg("Data must be an object, but it was:",u,s);const d=[],g=Uo.empty();os(s,(L,H)=>{const ee=Af(e,L,t);H=(0,ut.m9)(H);const Ee=u.ca(ee);if(H instanceof td)d.push(ee);else{const He=tc(H,Ee);null!=He&&(d.push(ee),g.set(ee,He))}});const b=new Qo(d);return new gg(g,b,u.fieldTransforms)}function Sf(i,e,t,s,u,d){const g=i.da(1,e,t),b=[Qs(e,s,t)],L=[u];if(d.length%2!=0)throw new ft(Ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let He=0;He<d.length;He+=2)b.push(Qs(e,d[He])),L.push(d[He+1]);const H=[],ee=Uo.empty();for(let He=b.length-1;He>=0;--He)if(!_g(H,b[He])){const wt=b[He];let Mt=L[He];Mt=(0,ut.m9)(Mt);const hn=g.ca(wt);if(Mt instanceof td)H.push(wt);else{const Fn=tc(Mt,hn);null!=Fn&&(H.push(wt),ee.set(wt,Fn))}}const Ee=new Qo(H);return new gg(ee,Ee,g.fieldTransforms)}function r_(i,e,t,s=!1){return tc(t,i.da(s?4:3,e))}function tc(i,e){if(yg(i=(0,ut.m9)(i)))return vg("Unsupported field value:",e,i),iy(i,e);if(i instanceof ec)return function(t,s){if(!ey(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const u=[];let d=0;for(const g of t){let b=tc(g,s.aa(d));null==b&&(b={nullValue:"NULL_VALUE"}),u.push(b),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,ut.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gc(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Er.fromDate(t);return{timestampValue:Ea(s.yt,u)}}if(t instanceof Er){const u=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ea(s.yt,u)}}if(t instanceof Kd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pu)return{bytesValue:al(s.yt,t._byteString)};if(t instanceof Zi){const u=s.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw s.ha(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:$l(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${mf(t)}`)}(i,e)}function iy(i,e){const t={};return Ja(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(i,(s,u)=>{const d=tc(u,e.ra(s));null!=d&&(t[s]=d)}),{mapValue:{fields:t}}}function yg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Er||i instanceof Kd||i instanceof pu||i instanceof Zi||i instanceof ec)}function vg(i,e,t){if(!yg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=mf(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Qs(i,e,t){if((e=(0,ut.m9)(e))instanceof gu)return e._internalPath;if("string"==typeof e)return Af(i,e);throw Mf("Field path arguments must be of type string or ",i,!1,void 0,t)}const sy=new RegExp("[~\\*/\\[\\]]");function Af(i,e,t){if(e.search(sy)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new gu(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Mf(i,e,t,s,u){const d=s&&!s.isEmpty(),g=void 0!==u;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let L="";return(d||g)&&(L+=" (found",d&&(L+=` in field ${s}`),g&&(L+=` in document ${u}`),L+=")"),new ft(Ze.INVALID_ARGUMENT,b+i+L)}function _g(i,e){return i.some(t=>t.isEqual(e))}class qd{constructor(e,t,s,u,d){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Zi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class oy extends qd{data(){return super.data()}}function Zd(i,e){return"string"==typeof e?Af(i,e):e instanceof gu?e._internalPath:e._delegate._internalPath}function nc(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ft(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class Yd extends Eg{}function Zu(i,e,...t){let s=[];e instanceof Eg&&s.push(e),s=s.concat(t),function(u){const d=u.filter(b=>b instanceof Jd).length,g=u.filter(b=>b instanceof Qd).length;if(d>1||d>0&&g>0)throw new ft(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Qd extends Yd{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Qd(e,t,s)}_apply(e){const t=this._parse(e);return hy(e._query,t),new wo(e.firestore,e.converter,fc(e._query,t))}_parse(e){const t=Cl(e.firestore);return function(u,d,g,b,L,H,ee){let Ee;if(L.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new ft(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){nd(ee,H);const He=[];for(const wt of ee)He.push(Rf(b,u,wt));Ee={arrayValue:{values:He}}}else Ee=Rf(b,u,ee)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||nd(ee,H),Ee=r_(g,"where",ee,"in"===H||"not-in"===H);return Ln.create(L,H,Ee)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jd extends Eg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jd(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let d=s;const g=u.getFlattenedFilters();for(const b of g)hy(d,b),d=fc(d,b)}(e._query,t),new wo(e.firestore,e.converter,fc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Za extends Yd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Za(e,t)}_apply(e){const t=function(s,u,d){if(null!==s.startAt)throw new ft(Ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new ft(Ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new Rl(u,d);return function(b,L){if(null===dc(b)){const H=Vu(b);null!==H&&wg(0,H,L.field)}}(s,g),g}(e._query,this._field,this._direction);return new wo(e.firestore,e.converter,function(s,u){const d=s.explicitOrderBy.concat([u]);return new to(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class xf extends Yd{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xf(e,t,s)}_apply(e){return new wo(e.firestore,e.converter,pc(e._query,this._limit,this._limitType))}}class ba extends Yd{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ba(e,t,s)}_apply(e){const t=dy(e,this.type,this._docOrFields,this._inclusive);return new wo(e.firestore,e.converter,(u=t,new to((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class Nf extends Yd{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Nf(e,t,s)}_apply(e){const t=dy(e,this.type,this._docOrFields,this._inclusive);return new wo(e.firestore,e.converter,(u=t,new to((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function dy(i,e,t,s){if(t[0]=(0,ut.m9)(t[0]),t[0]instanceof qd)return function(u,d,g,b,L){if(!b)throw new ft(Ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const H=[];for(const ee of Uu(u))if(ee.field.isKeyField())H.push(La(d,b.key));else{const Ee=b.data.field(ee.field);if(kt(Ee))throw new ft(Ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ee){const He=ee.field.canonicalString();throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${He}' (used as the orderBy) does not exist.`)}H.push(Ee)}return new vn(H,L)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=Cl(i.firestore);return function(d,g,b,L,H,ee){const Ee=d.explicitOrderBy;if(H.length>Ee.length)throw new ft(Ze.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const He=[];for(let wt=0;wt<H.length;wt++){const Mt=H[wt];if(Ee[wt].field.isKeyField()){if("string"!=typeof Mt)throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof Mt}`);if(!hc(d)&&-1!==Mt.indexOf("/"))throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${Mt}' contains a slash.`);const hn=d.path.child(Gn.fromString(Mt));if(!Nt.isDocumentKey(hn))throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${hn}' is not because it contains an odd number of segments.`);const Fn=new Nt(hn);He.push(La(g,Fn))}else{const hn=r_(b,L,Mt);He.push(hn)}}return new vn(He,ee)}(i._query,i.firestore._databaseId,u,e,t,s)}}function Rf(i,e,t){if("string"==typeof(t=(0,ut.m9)(t))){if(""===t)throw new ft(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hc(e)&&-1!==t.indexOf("/"))throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Gn.fromString(t));if(!Nt.isDocumentKey(s))throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return La(i,new Nt(s))}if(t instanceof Zi)return La(i,t._key);throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(t)}.`)}function nd(i,e){if(!Array.isArray(i)||0===i.length)throw new ft(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new ft(Ze.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hy(i,e){if(e.isInequality()){const s=Vu(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const d=dc(i);null!==d&&wg(0,u,d)}const t=function(s,u){for(const d of s)for(const g of d.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ft(Ze.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function wg(i,e,t){if(!t.isEqual(e))throw new ft(Ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Pf{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pt()}}convertObject(e,t){const s={};return os(e.fields,(u,d)=>{s[u]=this.convertValue(d,t)}),s}convertGeoPoint(e){return new Kd(ae(e.latitude),ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=zn(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(rn(e));default:return null}}convertTimestamp(e){const t=ie(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Gn.fromString(e);qt(Sc(s));const u=new mo(s.get(1),s.get(3)),d=new Nt(s.popFirst(5));return u.isEqual(t)||ln(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Xd(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class Of extends Pf{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zi(this.firestore,null,t)}}class rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Au extends qd{constructor(e,t,s,u,d,g){super(e,t,s,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Zd("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class rd extends Au{data(e={}){return super.data(e)}}class Mu{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new rc(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new rd(this._firestore,this._userDataWriter,s.key,s,new rc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ft(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new rd(s._firestore,s._userDataWriter,g.doc.key,g.doc,new rc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const b=new rd(s._firestore,s._userDataWriter,g.doc.key,g.doc,new rc(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let L=-1,H=-1;return 0!==g.type&&(L=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),H=d.indexOf(g.doc.key)),{type:Ig(g.type),doc:b,oldIndex:L,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ig(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt()}}function kf(i,e){return i instanceof Au&&e instanceof Au?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Mu&&e instanceof Mu&&i._firestore===e._firestore&&og(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Yu extends Pf{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zi(this.firestore,null,t)}}function Ey(i,e,t){i=ei(i,Zi);const s=ei(i.firestore,Yi),u=Xd(i.converter,e,t);return id(s,[ed(Cl(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,_i.none())])}function wy(i,e,t,...s){i=ei(i,Zi);const u=ei(i.firestore,Yi),d=Cl(u);let g;return g="string"==typeof(e=(0,ut.m9)(e))||e instanceof gu?Sf(d,"updateDoc",i._key,e,t,s):Tf(d,"updateDoc",i._key,e),id(u,[g.toMutation(i._key,_i.exists(!0))])}function Iy(i,...e){var t,s,u;i=(0,ut.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||wf(e[g])||(d=e[g],g++);const b={includeMetadataChanges:d.includeMetadataChanges};if(wf(e[g])){const Ee=e[g];e[g]=null===(t=Ee.next)||void 0===t?void 0:t.bind(Ee),e[g+1]=null===(s=Ee.error)||void 0===s?void 0:s.bind(Ee),e[g+2]=null===(u=Ee.complete)||void 0===u?void 0:u.bind(Ee)}let L,H,ee;if(i instanceof Zi)H=ei(i.firestore,Yi),ee=rl(i._key.path),L={next:Ee=>{e[g]&&e[g](Dg(H,i,Ee))},error:e[g+1],complete:e[g+2]};else{const Ee=ei(i,wo);H=ei(Ee.firestore,Yi),ee=Ee._query;const He=new Yu(H);L={next:wt=>{e[g]&&e[g](new Mu(H,He,Ee,wt))},error:e[g+1],complete:e[g+2]},nc(i._query)}return function(Ee,He,wt,Mt){const hn=new _f(Mt),Fn=new kd(He,hn,wt);return Ee.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return $p(yield fu(Ee),Fn)})),()=>{hn.bc(),Ee.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Jh(yield fu(Ee),Fn)}))}}(Ns(H),ee,b,L)}function id(i,e){return function(t,s){const u=new Lr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function kv(i,e,t){return da.apply(this,arguments)}(yield Dl(t),s,u)})),u.promise}(Ns(i),e)}function Dg(i,e,t){const s=t.docs.get(e._key),u=new Yu(i);return new Au(i,u,e._key,s,new rc(t.hasPendingWrites,t.fromCache),e.converter)}const d_={maxAttempts:5};class Dy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cl(e)}set(e,t,s){this._verifyNotCommitted();const u=Tl(e,this._firestore),d=Xd(u.converter,t,s),g=ed(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,s);return this._mutations.push(g.toMutation(u._key,_i.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const d=Tl(e,this._firestore);let g;return g="string"==typeof(t=(0,ut.m9)(t))||t instanceof gu?Sf(this._dataReader,"WriteBatch.update",d._key,t,s,u):Tf(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tl(e,this._firestore);return this._mutations=this._mutations.concat(new Ba(t._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(Ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tl(i,e){if((i=(0,ut.m9)(i)).firestore!==e)throw new ft(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class h_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cl(e)}get(e){const t=Tl(e,this._firestore),s=new Of(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Pt();const d=u[0];if(d.isFoundDocument())return new qd(this._firestore,s,d.key,d,t.converter);if(d.isNoDocument())return new qd(this._firestore,s,t._key,null,t.converter);throw Pt()})}set(e,t,s){const u=Tl(e,this._firestore),d=Xd(u.converter,t,s),g=ed(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,s);return this._transaction.set(u._key,g),this}update(e,t,s,...u){const d=Tl(e,this._firestore);let g;return g="string"==typeof(t=(0,ut.m9)(t))||t instanceof gu?Sf(this._dataReader,"Transaction.update",d._key,t,s,u):Tf(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Tl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tl(e,this._firestore),s=new Yu(this._firestore);return super.get(e).then(u=>new Au(this._firestore,s,t._key,u._document,new rc(!1,!1),t.converter))}}function Ff(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ft("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Cg(){if(typeof Uint8Array>"u")throw new ft("unimplemented","Uint8Arrays are not available in this environment.")}function Tg(){if(!function T(){return typeof atob<"u"}())throw new ft("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Wt=it.SDK_VERSION,(0,it._registerComponent)(new rt.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new Yi(new Wo(t.getProvider("auth-internal")),new gn(t.getProvider("app-check-internal")),function(b,L){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new ft(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(b.options.projectId,L)}(d,s),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,it.registerVersion)(Le,"3.8.0",i),(0,it.registerVersion)(Le,"3.8.0","esm2017")}();class sd{constructor(e){this._delegate=e}static fromBase64String(e){return Tg(),new sd(pu.fromBase64String(e))}static fromUint8Array(e){return Cg(),new sd(pu.fromUint8Array(e))}toBase64(){return Tg(),this._delegate.toBase64()}toUint8Array(){return Cg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qu(i){return function __(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class E_{enableIndexedDbPersistence(e,t){return function Jv(i,e){pg(i=ei(i,Yi));const t=Ns(i),s=i._freezeSettings(),u=new $d;return Wd(t,u,new Kc(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Df(i){pg(i=ei(i,Yi));const e=Ns(i),t=i._freezeSettings(),s=new $d;return Wd(e,s,new Gv(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cg(i){if(i._initialized&&!i._terminated)throw new ft(Ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(s){if(!Ls.C())return Promise.resolve();const u=s+"main";yield Ls.delete(u)}),function(s){return t.apply(this,arguments)})(Uh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ic{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof mo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function jm(i,e,t,s={}){var u;const d=(i=ei(i,Hd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&Rn("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let g,b;if("string"==typeof s.mockUserToken)g=s.mockUserToken,b=st.MOCK_USER;else{g=(0,ut.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const L=s.mockUserToken.sub||s.mockUserToken.user_id;if(!L)throw new ft(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new st(L)}i._authCredentials=new po(new rs(g,b))}}(this._delegate,e,t,s)}enableNetwork(){return function dg(i){return function Jc(i){return i.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Jl(i),t=yield Il(i);return e.setNetworkEnabled(!0),function(s){const u=Vt(s);return u._u.delete(0),jc(u)}(t)}))}(Ns(i=ei(i,Yi)))}(this._delegate)}disableNetwork(){return function hg(i){return function Xc(i){return i.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Jl(i),t=yield Il(i);return e.setNetworkEnabled(!1),(s=(0,me.Z)(function*(u){const d=Vt(u);d._u.add(0),yield ml(d),d.gu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(Ns(i=ei(i,Yi)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Lm("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Xv(i){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Nm(i,e){return eg.apply(this,arguments)}(yield Dl(e),t)})),t.promise}(Ns(i=ei(i,Yi)))}(this._delegate)}onSnapshotsInSync(e){return function c_(i,e){return function Km(i,e){const t=new _f(e);return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return s=yield fu(i),u=t,Vt(s).Ru.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return s=yield fu(i),u=t,void Vt(s).Ru.delete(u);var s,u}))}}(Ns(i=ei(i,Yi)),wf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ft("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ui(this,yf(this._delegate,e))}catch(t){throw An(t,"collection()","Firestore.collection()")}}doc(e){try{return new yu(this,vf(this._delegate,e))}catch(t){throw An(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fa(this,function Wv(i,e){if(i=ei(i,Hd),gf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ft(Ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wo(i,null,(t=e,new to(Gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw An(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function f_(i,e,t){i=ei(i,Yi);const s=Object.assign(Object.assign({},d_),t);return function(u){if(u.maxAttempts<1)throw new ft(Ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,d,g){const b=new Lr;return u.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const L=yield function Xl(i){return ha(i).then(e=>e.datastore)}(u);new qv(u.asyncQueue,L,g,d,b).run()})),b.promise}(Ns(i),u=>e(new h_(i,u)),s)}(this._delegate,t=>e(new w_(this,t)))}batch(){return Ns(this._delegate),new Mg(new Dy(this._delegate,e=>id(this._delegate,e)))}loadBundle(e){return function Qm(i,e){const t=Ns(i=ei(i,Yi)),s=new Zv;return function qm(i,e,t,s){const u=function(d,g){let b;return b="string"==typeof d?(new TextEncoder).encode(d):d,L=function(L,H){if(L instanceof Uint8Array)return Hm(L,H);if(L instanceof ArrayBuffer)return Hm(new Uint8Array(L),H);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new Ef(L,g);var L}(t,Yl(e));i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function pf(i,e,t){const s=Vt(i);var u;(u=(0,me.Z)(function*(d,g,b){try{const L=yield g.getMetadata();if(yield function(He,wt){const Mt=Vt(He),hn=Ci(wt.createTime);return Mt.persistence.runTransaction("hasNewerBundle","readonly",Fn=>Mt.Ns.getBundleMetadata(Fn,wt.id)).then(Fn=>!!Fn&&Fn.createTime.compareTo(hn)>=0)}(d.localStore,L))return yield g.close(),b._completeWith({taskState:"Success",documentsLoaded:(He=L).totalDocuments,bytesLoaded:He.totalBytes,totalDocuments:He.totalDocuments,totalBytes:He.totalBytes}),Promise.resolve(new Set);b._updateProgress(zp(L));const H=new tf(L,d.localStore,g.yt);let ee=yield g.mc();for(;ee;){const He=yield H.Fu(ee);He&&b._updateProgress(He),ee=yield g.mc()}const Ee=yield H.complete();return yield du(d,Ee.Lu,void 0),yield function(He,wt){const Mt=Vt(He);return Mt.persistence.runTransaction("Save bundle","readwrite",hn=>Mt.Ns.saveBundleMetadata(hn,wt))}(d.localStore,L),b._completeWith(Ee.progress),Promise.resolve(Ee.Bu)}catch(L){return Rn("SyncEngine",`Loading bundle failed with ${L}`),b._failWith(L),Promise.resolve(new Set)}var He}),function(d,g,b){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield Dl(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function fg(i,e){return function Zm(i,e){return i.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,s){const u=Vt(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,s))}(yield qu(i),e)}))}(Ns(i=ei(i,Yi)),e).then(t=>t?new wo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new fa(this,t):null)}}class Sg extends Pf{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(new pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return yu.forKey(t,this.firestore,null)}}class w_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Sg(e)}get(e){const t=ad(e);return this._delegate.get(t).then(s=>new eh(this._firestore,new Au(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=ad(e);return s?(Ff("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const d=ad(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...u),this}delete(e){const t=ad(e);return this._delegate.delete(t),this}}class Mg{constructor(e){this._delegate=e}set(e,t,s){const u=ad(e);return s?(Ff("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const d=ad(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...u),this}delete(e){const t=ad(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sl{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new rd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xu(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Sl.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let d=u.get(t);return d||(d=new Sl(e,new Sg(e),t),u.set(t,d)),d}}Sl.INSTANCES=new WeakMap;class yu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new ft("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new yu(t,new Zi(t._delegate,s,new Nt(e)))}static forKey(e,t,s){return new yu(t,new Zi(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Ui(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ui(this.firestore,yf(this._delegate,e))}catch(t){throw An(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ut.m9)(e))instanceof Zi&&$m(this._delegate,e)}set(e,t){t=Ff("DocumentReference.set",t);try{return t?Ey(this._delegate,e,t):Ey(this._delegate,e)}catch(s){throw An(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?wy(this._delegate,e):wy(this._delegate,e,t,...s)}catch(u){throw An(u,"updateDoc()","DocumentReference.update()")}}delete(){return function u_(i){return id(ei(i.firestore,Yi),[new Ba(i._key,_i.none())])}(this._delegate)}onSnapshot(...e){const t=Ay(e),s=My(e,u=>new eh(this.firestore,new Au(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function gy(i){i=ei(i,Zi);const e=ei(i.firestore,Yi),t=Ns(e),s=new Yu(e);return function zm(i,e){const t=new Lr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(s=(0,me.Z)(function*(u,d,g){try{const b=yield function(L,H){const ee=Vt(L);return ee.persistence.runTransaction("read document","readonly",Ee=>ee.localDocuments.getDocument(Ee,H))}(u,d);b.isFoundDocument()?g.resolve(b):b.isNoDocument()?g.resolve(null):g.reject(new ft(Ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const L=_l(b,`Failed to get document '${d} from cache`);g.reject(L)}}),function(u,d,g){return s.apply(this,arguments)})(yield qu(i),e,t);var s})),t.promise}(t,i._key).then(u=>new Au(e,s,i._key,u,new rc(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function my(i){i=ei(i,Zi);const e=ei(i.firestore,Yi);return ug(Ns(e),i._key,{source:"server"}).then(t=>Dg(e,i,t))}(this._delegate):function py(i){i=ei(i,Zi);const e=ei(i.firestore,Yi);return ug(Ns(e),i._key).then(t=>Dg(e,i,t))}(this._delegate),t.then(s=>new eh(this.firestore,new Au(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new yu(this.firestore,this._delegate.withConverter(e?Sl.getInstance(this.firestore,e):null))}}function An(i,e,t){return i.message=i.message.replace(e,t),i}function Ay(i){for(const e of i)if("object"==typeof e&&!Qu(e))return e;return{}}function My(i,e){var t,s;let u;return u=Qu(i[0])?i[0]:Qu(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class eh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new yu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kf(this._delegate,e._delegate)}}class xu extends eh{data(e){const t=this._delegate.data(e);return function bi(i,e){i||Pt()}(void 0!==t),t}}class fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sg(e)}where(e,t,s){try{return new fa(this.firestore,Zu(this._delegate,function ay(i,e,t){const s=e,u=Zd("where",i);return Qd._create(u,s,t)}(e,t,s)))}catch(u){throw An(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fa(this.firestore,Zu(this._delegate,function s_(i,e="asc"){const t=e,s=Zd("orderBy",i);return Za._create(s,t)}(e,t)))}catch(s){throw An(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fa(this.firestore,Zu(this._delegate,function Su(i){return Um("limit",i),xf._create("limit",i,"F")}(e)))}catch(t){throw An(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fa(this.firestore,Zu(this._delegate,function mu(i){return Um("limitToLast",i),xf._create("limitToLast",i,"L")}(e)))}catch(t){throw An(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fa(this.firestore,Zu(this._delegate,function ly(...i){return ba._create("startAt",i,!0)}(...e)))}catch(t){throw An(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fa(this.firestore,Zu(this._delegate,function cy(...i){return ba._create("startAfter",i,!1)}(...e)))}catch(t){throw An(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fa(this.firestore,Zu(this._delegate,function o_(...i){return Nf._create("endBefore",i,!1)}(...e)))}catch(t){throw An(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fa(this.firestore,Zu(this._delegate,function a_(...i){return Nf._create("endAt",i,!0)}(...e)))}catch(t){throw An(t,"endAt()","Query.endAt()")}}isEqual(e){return og(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function vy(i){i=ei(i,wo);const e=ei(i.firestore,Yi),t=Ns(e),s=new Yu(e);return function Wm(i,e){const t=new Lr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(s=(0,me.Z)(function*(u,d,g){try{const b=yield Vc(u,d,!0),L=new rf(d,b.Hi),H=L.Wu(b.documents),ee=L.applyChanges(H,!1);g.resolve(ee.snapshot)}catch(b){const L=_l(b,`Failed to execute query '${d} against cache`);g.reject(L)}}),function(u,d,g){return s.apply(this,arguments)})(yield qu(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Mu(e,s,i,u))}(this._delegate):"server"===e?.source?function _y(i){i=ei(i,wo);const e=ei(i.firestore,Yi),t=Ns(e),s=new Yu(e);return lg(t,i._query,{source:"server"}).then(u=>new Mu(e,s,i,u))}(this._delegate):function yy(i){i=ei(i,wo);const e=ei(i.firestore,Yi),t=Ns(e),s=new Yu(e);return nc(i._query),lg(t,i._query).then(u=>new Mu(e,s,i,u))}(this._delegate),t.then(s=>new od(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Ay(e),s=My(e,u=>new od(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,t,s)}withConverter(e){return new fa(this.firestore,this._delegate.withConverter(e?Sl.getInstance(this.firestore,e):null))}}class Lf{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class od{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Lf(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new xu(this._firestore,s))})}isEqual(e){return kf(this._delegate,e._delegate)}}class Ui extends fa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yu(this.firestore,e):null}doc(e){try{return new yu(this.firestore,void 0===e?vf(this._delegate):vf(this._delegate,e))}catch(t){throw An(t,"doc()","CollectionReference.doc()")}}add(e){return function l_(i,e){const t=ei(i.firestore,Yi),s=vf(i),u=Xd(i.converter,e);return id(t,[ed(Cl(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,_i.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new yu(this.firestore,t))}isEqual(e){return $m(this._delegate,e._delegate)}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?Sl.getInstance(this.firestore,e):null))}}function ad(i){return ei(i,Zi)}class Vf{constructor(...e){this._delegate=new gu(...e)}static documentId(){return new Vf(br.keyField().canonicalString())}isEqual(e){return(e=(0,ut.m9)(e))instanceof gu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._delegate=e}static serverTimestamp(){const e=function g_(){return new Cf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Al(e)}static delete(){const e=function p_(){return new td("deleteField")}();return e._methodName="FieldValue.delete",new Al(e)}static arrayUnion(...e){const t=function m_(...i){return new ty("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Al(t)}static arrayRemove(...e){const t=function by(...i){return new ny("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Al(t)}static increment(e){const t=function Cy(i){return new ry("increment",i)}(e);return t._methodName="FieldValue.increment",new Al(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const I_={Firestore:ic,GeoPoint:Kd,Timestamp:Er,Blob:sd,Transaction:w_,WriteBatch:Mg,DocumentReference:yu,DocumentSnapshot:eh,Query:fa,QueryDocumentSnapshot:xu,QuerySnapshot:od,CollectionReference:Ui,FieldPath:Vf,FieldValue:Al,setLogLevel:function Ag(i){!function hr(i){jt.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Ny(i){(function xy(i,e){i.INTERNAL.registerComponent(new rt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},I_)))})(i,(e,t)=>new ic(e,t,new E_)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(Yt.Z);var Ju=j(1205),Ry=j(6217),D_=j(9260);function Py(i,e){return function b_(i,e=z.z){return new W.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(i,e)}function xg(i,e){return Py(i,e).pipe((0,he.U)(t=>({payload:t,type:"query"})))}function Uf(i,e){return xg(i,e).pipe((0,ke.O)(void 0),de(),(0,he.U)(([t,s])=>{const u=s.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,b)=>{const L=u.find(ee=>ee.doc.ref.isEqual(g.ref)),H=t?.payload.docs.find(ee=>ee.ref.isEqual(g.ref));L&&JSON.stringify(L.doc.metadata)===JSON.stringify(g.metadata)||!L&&H&&JSON.stringify(H.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:g}})}),d}))}function Oy(i,e,t){return Uf(i,t).pipe((0,Ce.R)((s,u)=>function Bf(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function ky(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return jf(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jf(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jf(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(d=>d.payload),e),[]),function ht(i,e=yt.y){return i=i??We,(0,Pe.e)((t,s)=>{let u,d=!0;t.subscribe((0,Ve.x)(s,g=>{const b=e(g);(d||!i(u,b))&&(d=!1,u=b,s.next(g))}))})}(),(0,he.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function jf(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function Ng(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Fy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Uf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,he.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,ke.O)(void 0),de(),(0,Ht.h)(([s,u])=>u.length>0||!s),(0,he.U)(([s,u])=>u),Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ng(e);return Oy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return xg(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Me.iC)}get(e){return(0,Te.D)(this.query.get(e)).pipe(Me.iC)}add(e){return this.ref.add(e)}doc(e){return new ud(this.ref.doc(e),this.afs)}}class ud{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:d}=Rg(s,t);return new Fy(u,d,this.afs)}snapshotChanges(){return function th(i,e){return Py(i,e).pipe((0,ke.O)(void 0),de(),(0,he.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,he.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Te.D)(this.ref.get(e)).pipe(Me.iC)}}class nh{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Uf(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Ht.h)(t=>t.length>0),Me.iC):Uf(this.query,this.afs.schedulers.outsideAngular).pipe(Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ng(e);return Oy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return xg(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Me.iC)}get(e){return(0,Te.D)(this.query.get(e)).pipe(Me.iC)}}const Ly=new p.OlP("angularfire2.enableFirestorePersistence"),Vy=new p.OlP("angularfire2.firestore.persistenceSettings"),C_=new p.OlP("angularfire2.firestore.settings"),Uy=new p.OlP("angularfire2.firestore.use-emulator");function Rg(i,e=(t=>t)){return{query:e(i),ref:i}}let Pg=(()=>{class i{constructor(t,s,u,d,g,b,L,H,ee,Ee,He,wt,Mt,hn,Fn,Ni,us){this.schedulers=L;const ri=(0,tt.on)(t,b,s),Us=ee;Ee&&(0,Ju.nw)(ri,b,He,Mt,hn,Fn,wt,Ni),[this.firestore,this.persistenceEnabled$]=(0,tt.cc)(`${ri.name}.firestore`,"AngularFirestore",ri.name,()=>{const Wr=b.runOutsideAngular(()=>ri.firestore());if(d&&Wr.settings(d),Us&&Wr.useEmulator(...Us),u&&!(0,qe.PM)(g)){const di=()=>{try{return(0,Te.D)(Wr.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(io){return typeof console<"u"&&console.warn(io),(0,Ie.of)(!1)}};return[Wr,b.runOutsideAngular(di)]}return[Wr,(0,Ie.of)(!1)]},[d,Us,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Rg(u,s),b=this.schedulers.ngZone.run(()=>d);return new Fy(b,g,this)}collectionGroup(t,s){const u=s||(g=>g),d=this.firestore.collectionGroup(t);return new nh(u(d),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new ud(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(tt.Dh),p.LFG(tt.xv,8),p.LFG(Ly,8),p.LFG(C_,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Me.HU),p.LFG(Vy,8),p.LFG(Uy,8),p.LFG(Ju.zQ,8),p.LFG(Ju.Qv,8),p.LFG(Ju.L6,8),p.LFG(Ju._Q,8),p.LFG(Ju.rT,8),p.LFG(Ju.lh,8),p.LFG(Ju.f7,8),p.LFG(Ry.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),T_=(()=>{class i{constructor(){D_.Z.registerVersion("angularfire",Me.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ly,useValue:!0},{provide:Vy,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[Pg]}),i})()},2011:(Xt,Je,j)=>{j.d(Je,{Dh:()=>Pe,GT:()=>Me,cc:()=>ht,hO:()=>yt,on:()=>de,pX:()=>Ie,xv:()=>Ve});var p=j(4650),z=j(9260),W=j(2122);Xt=j.hmd(Xt);const Te=["ngOnDestroy"],Ie=(qe,Zt,Yt,me={})=>new Proxy(qe,{get:(it,rt)=>Yt.runOutsideAngular(()=>{var It;if(qe[rt])return!(null===(It=me?.spy)||void 0===It)&&It.get&&me.spy.get(rt,qe[rt]),qe[rt];if(Te.indexOf(rt)>-1)return()=>{};const ut=Zt.toPromise().then(ce=>{const je=ce&&ce[rt];return"function"==typeof je?je.bind(ce):je&&je.then?je.then(se=>Yt.run(()=>se)):Yt.run(()=>je)});return new Proxy(()=>{},{get:(ce,je)=>ut[je],apply:(ce,je,se)=>ut.then(De=>{var pe;const Re=De&&De(...se);return!(null===(pe=me?.spy)||void 0===pe)&&pe.apply&&me.spy.apply(rt,se,Re),Re})})})}),Me=(qe,Zt)=>{Zt.forEach(Yt=>{Object.getOwnPropertyNames(Yt.prototype||Yt).forEach(me=>{Object.defineProperty(qe.prototype,me,Object.getOwnPropertyDescriptor(Yt.prototype||Yt,me))})})};class ke{constructor(Zt){return Zt}}const Pe=new p.OlP("angularfire2.app.options"),Ve=new p.OlP("angularfire2.app.name");function de(qe,Zt,Yt){const it="object"==typeof Yt&&Yt||{};it.name=it.name||"string"==typeof Yt&&Yt||"[DEFAULT]";const It=z.Z.apps.filter(ut=>ut&&ut.name===it.name)[0]||Zt.runOutsideAngular(()=>z.Z.initializeApp(qe,it));try{JSON.stringify(qe)!==JSON.stringify(It.options)&&he("error",`${It.name} Firebase App already initialized with different options${Xt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ke(It)}const he=(qe,...Zt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[qe](...Zt)},Ce={provide:ke,useFactory:de,deps:[Pe,p.R0b,[new p.FiY,Ve]]};let yt=(()=>{class qe{constructor(Yt){z.Z.registerVersion("angularfire",W.q4.full,"core"),z.Z.registerVersion("angularfire",W.q4.full,"app-compat"),z.Z.registerVersion("angular",p.q4F.full,Yt.toString())}static initializeApp(Yt,me){return{ngModule:qe,providers:[{provide:Pe,useValue:Yt},{provide:Ve,useValue:me}]}}}return qe.\u0275fac=function(Yt){return new(Yt||qe)(p.LFG(p.Lbi))},qe.\u0275mod=p.oAB({type:qe}),qe.\u0275inj=p.cJS({providers:[Ce]}),qe})();function ht(qe,Zt,Yt,me,it){const[,rt,It]=globalThis.\u0275AngularfireInstanceCache.find(ut=>ut[0]===qe)||[];if(rt)return function We(qe,Zt){try{return qe.toString()===Zt.toString()}catch{return qe===Zt}}(it,It)||(tt("error",`${Zt} was already initialized on the ${Yt} Firebase App with different settings.${Ht?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:it,was:It})),rt;{const ut=me();return globalThis.\u0275AngularfireInstanceCache.push([qe,ut,it]),ut}}const Ht=!!Xt.hot,tt=(qe,...Zt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[qe](...Zt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Xt,Je,j)=>{j.d(Je,{q4:()=>os,iC:()=>va,HU:()=>ys,vb:()=>zn,JM:()=>kt});var p=j(4650),z=j(259),W=j(5861),Te=j(9681),Ie=j(2090),Me=j(4859),ke=j(1877),Pe=j(8766);const Ve="@firebase/installations",Ce="w:0.6.0",yt="FIS_v2",Zt=new Ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Yt(x){return x instanceof Ie.ZR&&x.code.includes("request-failed")}function me({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function it(x){return{token:x.token,requestStatus:2,expiresIn:De(x.expiresIn),creationTime:Date.now()}}function rt(x,F){return It.apply(this,arguments)}function It(){return(It=(0,W.Z)(function*(x,F){const le=(yield F.json()).error;return Zt.create("request-failed",{requestName:x,serverCode:le.code,serverMessage:le.message,serverStatus:le.status})})).apply(this,arguments)}function ut({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ce(x,{refreshToken:F}){const q=ut(x);return q.append("Authorization",function pe(x){return`${yt} ${x}`}(F)),q}function je(x){return se.apply(this,arguments)}function se(){return(se=(0,W.Z)(function*(x){const F=yield x();return F.status>=500&&F.status<600?x():F})).apply(this,arguments)}function De(x){return Number(x.replace("s","000"))}function Re(x,F){return mt.apply(this,arguments)}function mt(){return(mt=(0,W.Z)(function*({appConfig:x,heartbeatServiceProvider:F},{fid:q}){const le=me(x),Fe=ut(x),et=F.getImmediate({optional:!0});if(et){const vn=yield et.getHeartbeatsHeader();vn&&Fe.append("x-firebase-client",vn)}const pn={method:"POST",headers:Fe,body:JSON.stringify({fid:q,authVersion:yt,appId:x.appId,sdkVersion:Ce})},Nn=yield je(()=>fetch(le,pn));if(Nn.ok){const vn=yield Nn.json();return{fid:vn.fid||q,registrationStatus:2,refreshToken:vn.refreshToken,authToken:it(vn.authToken)}}throw yield rt("Create Installation",Nn)})).apply(this,arguments)}function bt(x){return new Promise(F=>{setTimeout(F,x)})}const Lt=/^[cdef][\w-]{21}$/;function vt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const q=function cn(x){return function Ct(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return Lt.test(q)?q:""}catch{return""}}function en(x){return`${x.appName}!${x.appId}`}const fn=new Map;function Bt(x,F){const q=en(x);Zn(q,F),function ii(x,F){const q=function Kn(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=x=>{Zn(x.data.key,x.data.fid)}),Kr}();q&&q.postMessage({key:x,fid:F}),function Or(){0===fn.size&&Kr&&(Kr.close(),Kr=null)}()}(q,F)}function Zn(x,F){const q=fn.get(x);if(q)for(const le of q)le(F)}let Kr=null;const yr="firebase-installations-store";let Rr=null;function ir(){return Rr||(Rr=(0,Pe.X3)("firebase-installations-database",1,{upgrade:(x,F)=>{0===F&&x.createObjectStore(yr)}})),Rr}function Tt(x,F){return cr.apply(this,arguments)}function cr(){return(cr=(0,W.Z)(function*(x,F){const q=en(x),Fe=(yield ir()).transaction(yr,"readwrite"),et=Fe.objectStore(yr),St=yield et.get(q);return yield et.put(F,q),yield Fe.done,(!St||St.fid!==F.fid)&&Bt(x,F.fid),F})).apply(this,arguments)}function Bn(x){return ar.apply(this,arguments)}function ar(){return(ar=(0,W.Z)(function*(x){const F=en(x),le=(yield ir()).transaction(yr,"readwrite");yield le.objectStore(yr).delete(F),yield le.done})).apply(this,arguments)}function si(x,F){return Si.apply(this,arguments)}function Si(){return(Si=(0,W.Z)(function*(x,F){const q=en(x),Fe=(yield ir()).transaction(yr,"readwrite"),et=Fe.objectStore(yr),St=yield et.get(q),pn=F(St);return void 0===pn?yield et.delete(q):yield et.put(pn,q),yield Fe.done,pn&&(!St||St.fid!==pn.fid)&&Bt(x,pn.fid),pn})).apply(this,arguments)}function qr(x){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,W.Z)(function*(x){let F;const q=yield si(x.appConfig,le=>{const Fe=ye(le),et=ue(x,Fe);return F=et.registrationPromise,et.installationEntry});return""===q.fid?{installationEntry:yield F}:{installationEntry:q,registrationPromise:F}})).apply(this,arguments)}function ye(x){return Rt(x||{fid:vt(),registrationStatus:0})}function ue(x,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(Zt.create("app-offline"))};const q={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},le=function ze(x,F){return lt.apply(this,arguments)}(x,q);return{installationEntry:q,registrationPromise:le}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:Qt(x)}:{installationEntry:F}}function lt(){return(lt=(0,W.Z)(function*(x,F){try{const q=yield Re(x,F);return Tt(x.appConfig,q)}catch(q){throw Yt(q)&&409===q.customData.serverCode?yield Bn(x.appConfig):yield Tt(x.appConfig,{fid:F.fid,registrationStatus:0}),q}})).apply(this,arguments)}function Qt(x){return En.apply(this,arguments)}function En(){return(En=(0,W.Z)(function*(x){let F=yield sr(x.appConfig);for(;1===F.registrationStatus;)yield bt(100),F=yield sr(x.appConfig);if(0===F.registrationStatus){const{installationEntry:q,registrationPromise:le}=yield qr(x);return le||q}return F})).apply(this,arguments)}function sr(x){return si(x,F=>{if(!F)throw Zt.create("installation-not-found");return Rt(F)})}function Rt(x){return function Tr(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Hn(x,F){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,W.Z)(function*({appConfig:x,heartbeatServiceProvider:F},q){const le=Cn(x,q),Fe=ce(x,q),et=F.getImmediate({optional:!0});if(et){const vn=yield et.getHeartbeatsHeader();vn&&Fe.append("x-firebase-client",vn)}const pn={method:"POST",headers:Fe,body:JSON.stringify({installation:{sdkVersion:Ce,appId:x.appId}})},Nn=yield je(()=>fetch(le,pn));if(Nn.ok)return it(yield Nn.json());throw yield rt("Generate Auth Token",Nn)})).apply(this,arguments)}function Cn(x,{fid:F}){return`${me(x)}/${F}/authTokens:generate`}function Dn(x){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,W.Z)(function*(x,F=!1){let q;const le=yield si(x.appConfig,et=>{if(!Tn(et))throw Zt.create("not-registered");const St=et.authToken;if(!F&&ve(St))return et;if(1===St.requestStatus)return q=Ft(x,F),et;{if(!navigator.onLine)throw Zt.create("app-offline");const pn=be(et);return q=wn(x,pn),pn}});return q?yield q:le.authToken})).apply(this,arguments)}function Ft(x,F){return pt.apply(this,arguments)}function pt(){return(pt=(0,W.Z)(function*(x,F){let q=yield Dt(x.appConfig);for(;1===q.authToken.requestStatus;)yield bt(100),q=yield Dt(x.appConfig);const le=q.authToken;return 0===le.requestStatus?Dn(x,F):le})).apply(this,arguments)}function Dt(x){return si(x,F=>{if(!Tn(F))throw Zt.create("not-registered");return function ot(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function wn(x,F){return yn.apply(this,arguments)}function yn(){return(yn=(0,W.Z)(function*(x,F){try{const q=yield Hn(x,F),le=Object.assign(Object.assign({},F),{authToken:q});return yield Tt(x.appConfig,le),q}catch(q){if(!Yt(q)||401!==q.customData.serverCode&&404!==q.customData.serverCode){const le=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Tt(x.appConfig,le)}else yield Bn(x.appConfig);throw q}})).apply(this,arguments)}function Tn(x){return void 0!==x&&2===x.registrationStatus}function ve(x){return 2===x.requestStatus&&!function oe(x){const F=Date.now();return F<x.creationTime||x.creationTime+x.expiresIn<F+36e5}(x)}function be(x){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:F})}function Ot(){return(Ot=(0,W.Z)(function*(x){const F=x,{installationEntry:q,registrationPromise:le}=yield qr(F);return le?le.catch(console.error):Dn(F).catch(console.error),q.fid})).apply(this,arguments)}function Yn(){return(Yn=(0,W.Z)(function*(x,F=!1){const q=x;return yield vr(q),(yield Dn(q,F)).token})).apply(this,arguments)}function vr(x){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,W.Z)(function*(x){const{registrationPromise:F}=yield qr(x);F&&(yield F)})).apply(this,arguments)}function wr(x){return Zt.create("missing-app-config-values",{valueName:x})}const oi="installations",Mr=x=>{const F=x.getProvider("app").getImmediate(),q=function un(x){if(!x||!x.options)throw wr("App Configuration");if(!x.name)throw wr("App Name");const F=["projectId","apiKey","appId"];for(const q of F)if(!x.options[q])throw wr(q);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(F);return{app:F,appConfig:q,heartbeatServiceProvider:(0,Te._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},ti=x=>{const F=x.getProvider("app").getImmediate(),q=(0,Te._getProvider)(F,oi).getImmediate();return{getId:()=>function xe(x){return Ot.apply(this,arguments)}(q),getToken:Fe=>function dn(x){return Yn.apply(this,arguments)}(q,Fe)}};(function Ei(){(0,Te._registerComponent)(new Me.wA(oi,Mr,"PUBLIC")),(0,Te._registerComponent)(new Me.wA("installations-internal",ti,"PRIVATE"))})(),(0,Te.registerVersion)(Ve,"0.6.0"),(0,Te.registerVersion)(Ve,"0.6.0","esm2017");const Bi="@firebase/remote-config",Yr=new Ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xs{constructor(F,q,le,Fe){this.client=F,this.storage=q,this.storageCache=le,this.logger=Fe}isCachedDataFresh(F,q){if(!q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const le=Date.now()-q,Fe=le<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${le}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Fe}.`),Fe}fetch(F){var q=this;return(0,W.Z)(function*(){const[le,Fe]=yield Promise.all([q.storage.getLastSuccessfulFetchTimestampMillis(),q.storage.getLastSuccessfulFetchResponse()]);if(Fe&&q.isCachedDataFresh(F.cacheMaxAgeMillis,le))return Fe;F.eTag=Fe&&Fe.eTag;const et=yield q.client.fetch(F),St=[q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===et.status&&St.push(q.storage.setLastSuccessfulFetchResponse(et)),yield Promise.all(St),et})()}}function Es(x=navigator){return x.languages&&x.languages[0]||x.language}class ta{constructor(F,q,le,Fe,et,St){this.firebaseInstallations=F,this.sdkVersion=q,this.namespace=le,this.projectId=Fe,this.apiKey=et,this.appId=St}fetch(F){var q=this;return(0,W.Z)(function*(){const[le,Fe]=yield Promise.all([q.firebaseInstallations.getId(),q.firebaseInstallations.getToken()]),St=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${q.projectId}/namespaces/${q.namespace}:fetch?key=${q.apiKey}`,pn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Nn={sdk_version:q.sdkVersion,app_instance_id:le,app_instance_id_token:Fe,app_id:q.appId,language_code:Es()},vn={method:"POST",headers:pn,body:JSON.stringify(Nn)},Cr=fetch(St,vn),Jn=new Promise((Ys,Vo)=>{F.signal.addEventListener(()=>{const ku=new Error("The operation was aborted.");ku.name="AbortError",Vo(ku)})});let Ms;try{yield Promise.race([Cr,Jn]),Ms=yield Cr}catch(Ys){let Vo="fetch-client-network";throw"AbortError"===Ys?.name&&(Vo="fetch-timeout"),Yr.create(Vo,{originalErrorMessage:Ys?.message})}let Ln=Ms.status;const Ur=Ms.headers.get("ETag")||void 0;let Ra,Va;if(200===Ms.status){let Ys;try{Ys=yield Ms.json()}catch(Vo){throw Yr.create("fetch-client-parse",{originalErrorMessage:Vo?.message})}Ra=Ys.entries,Va=Ys.state}if("INSTANCE_STATE_UNSPECIFIED"===Va?Ln=500:"NO_CHANGE"===Va?Ln=304:("NO_TEMPLATE"===Va||"EMPTY_CONFIG"===Va)&&(Ra={}),304!==Ln&&200!==Ln)throw Yr.create("fetch-status",{httpStatus:Ln});return{status:Ln,eTag:Ur,config:Ra}})()}}class Ae{constructor(F,q){this.client=F,this.storage=q}fetch(F){var q=this;return(0,W.Z)(function*(){const le=(yield q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return q.attemptFetch(F,le)})()}attemptFetch(F,{throttleEndTimeMillis:q,backoffCount:le}){var Fe=this;return(0,W.Z)(function*(){yield function _r(x,F){return new Promise((q,le)=>{const Fe=Math.max(F-Date.now(),0),et=setTimeout(q,Fe);x.addEventListener(()=>{clearTimeout(et),le(Yr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,q);try{const et=yield Fe.client.fetch(F);return yield Fe.storage.deleteThrottleMetadata(),et}catch(et){if(!function Oe(x){if(!(x instanceof Ie.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}(et))throw et;const St={throttleEndTimeMillis:Date.now()+(0,Ie.$s)(le),backoffCount:le+1};return yield Fe.storage.setThrottleMetadata(St),Fe.attemptFetch(F,St)}})()}}class xt{constructor(F,q,le,Fe,et){this.app=F,this._client=q,this._storageCache=le,this._storage=Fe,this._logger=et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sn(x,F){const q=x.target.error||void 0;return Yr.create(F,{originalErrorMessage:q&&q?.message})}const Un="app_namespace_store";class Io{constructor(F,q,le,Fe=function ws(){return new Promise((x,F)=>{try{const q=indexedDB.open("firebase_remote_config",1);q.onerror=le=>{F(Sn(le,"storage-open"))},q.onsuccess=le=>{x(le.target.result)},q.onupgradeneeded=le=>{0===le.oldVersion&&le.target.result.createObjectStore(Un,{keyPath:"compositeKey"})}}catch(q){F(Yr.create("storage-open",{originalErrorMessage:q?.message}))}})}()){this.appId=F,this.appName=q,this.namespace=le,this.openDbPromise=Fe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var q=this;return(0,W.Z)(function*(){const le=yield q.openDbPromise;return new Promise((Fe,et)=>{const pn=le.transaction([Un],"readonly").objectStore(Un),Nn=q.createCompositeKey(F);try{const vn=pn.get(Nn);vn.onerror=Cr=>{et(Sn(Cr,"storage-get"))},vn.onsuccess=Cr=>{const Jn=Cr.target.result;Fe(Jn?Jn.value:void 0)}}catch(vn){et(Yr.create("storage-get",{originalErrorMessage:vn?.message}))}})})()}set(F,q){var le=this;return(0,W.Z)(function*(){const Fe=yield le.openDbPromise;return new Promise((et,St)=>{const Nn=Fe.transaction([Un],"readwrite").objectStore(Un),vn=le.createCompositeKey(F);try{const Cr=Nn.put({compositeKey:vn,value:q});Cr.onerror=Jn=>{St(Sn(Jn,"storage-set"))},Cr.onsuccess=()=>{et()}}catch(Cr){St(Yr.create("storage-set",{originalErrorMessage:Cr?.message}))}})})()}delete(F){var q=this;return(0,W.Z)(function*(){const le=yield q.openDbPromise;return new Promise((Fe,et)=>{const pn=le.transaction([Un],"readwrite").objectStore(Un),Nn=q.createCompositeKey(F);try{const vn=pn.delete(Nn);vn.onerror=Cr=>{et(Sn(Cr,"storage-delete"))},vn.onsuccess=()=>{Fe()}}catch(vn){et(Yr.create("storage-delete",{originalErrorMessage:vn?.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class mi{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,W.Z)(function*(){const q=F.storage.getLastFetchStatus(),le=F.storage.getLastSuccessfulFetchTimestampMillis(),Fe=F.storage.getActiveConfig(),et=yield q;et&&(F.lastFetchStatus=et);const St=yield le;St&&(F.lastSuccessfulFetchTimestampMillis=St);const pn=yield Fe;pn&&(F.activeConfig=pn)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function Is(){return Do.apply(this,arguments)}function Do(){return(Do=(0,W.Z)(function*(){if(!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Ai(){(0,Te._registerComponent)(new Me.wA("remote-config",function x(F,{instanceIdentifier:q}){const le=F.getProvider("app").getImmediate(),Fe=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yr.create("registration-window");if(!(0,Ie.hl)())throw Yr.create("indexed-db-unavailable");const{projectId:et,apiKey:St,appId:pn}=le.options;if(!et)throw Yr.create("registration-project-id");if(!St)throw Yr.create("registration-api-key");if(!pn)throw Yr.create("registration-app-id");const Nn=new Io(pn,le.name,q=q||"firebase"),vn=new mi(Nn),Cr=new ke.Yd(Bi);Cr.logLevel=ke.in.ERROR;const Jn=new ta(Fe,Te.SDK_VERSION,q,et,St,pn),Ms=new Ae(Jn,Nn),Ln=new Xs(Ms,Nn,vn,Cr),Ur=new xt(le,Ln,vn,Nn,Cr);return function jr(x){const F=(0,Ie.m9)(x);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(Ur),Ur},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Bi,"0.4.0"),(0,Te.registerVersion)(Bi,"0.4.0","esm2017")}();const Xi="/firebase-messaging-sw.js",es="/firebase-cloud-messaging-push-scope",Mi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oo="google.c.a.c_id",Oi="google.c.a.c_l",js="google.c.a.ts",bo="google.c.a.e";var Ii=(()=>{return(x=Ii||(Ii={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Ii;var x})();function Di(x){const F=new Uint8Array(x);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ts(x){const q=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),le=atob(q),Fe=new Uint8Array(le.length);for(let et=0;et<le.length;++et)Fe[et]=le.charCodeAt(et);return Fe}const ki="fcm_token_details_db",fi="fcm_token_object_Store";function Co(x){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,W.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(et=>et.name).includes(ki))return null;let F=null;return(yield(0,Pe.X3)(ki,5,{upgrade:(le=(0,W.Z)(function*(Fe,et,St,pn){var Nn;if(et<2||!Fe.objectStoreNames.contains(fi))return;const vn=pn.objectStore(fi),Cr=yield vn.index("fcmSenderId").get(x);if(yield vn.clear(),Cr)if(2===et){const Jn=Cr;if(!Jn.auth||!Jn.p256dh||!Jn.endpoint)return;F={token:Jn.fcmToken,createTime:null!==(Nn=Jn.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:Jn.auth,p256dh:Jn.p256dh,endpoint:Jn.endpoint,swScope:Jn.swScope,vapidKey:"string"==typeof Jn.vapidKey?Jn.vapidKey:Di(Jn.vapidKey)}}}else if(3===et){const Jn=Cr;F={token:Jn.fcmToken,createTime:Jn.createTime,subscriptionOptions:{auth:Di(Jn.auth),p256dh:Di(Jn.p256dh),endpoint:Jn.endpoint,swScope:Jn.swScope,vapidKey:Di(Jn.vapidKey)}}}else if(4===et){const Jn=Cr;F={token:Jn.fcmToken,createTime:Jn.createTime,subscriptionOptions:{auth:Di(Jn.auth),p256dh:Di(Jn.p256dh),endpoint:Jn.endpoint,swScope:Jn.swScope,vapidKey:Di(Jn.vapidKey)}}}}),function(et,St,pn,Nn){return le.apply(this,arguments)})})).close(),yield(0,Pe.Lj)(ki),yield(0,Pe.Lj)("fcm_vapid_details_db"),yield(0,Pe.Lj)("undefined"),xr(F)?F:null;var le}),Ds.apply(this,arguments)}function xr(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:F}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const ns="firebase-messaging-store";let jn=null;function Fi(){return jn||(jn=(0,Pe.X3)("firebase-messaging-database",1,{upgrade:(x,F)=>{0===F&&x.createObjectStore(ns)}})),jn}function fs(x){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,W.Z)(function*(x){const F=ps(x),le=yield(yield Fi()).transaction(ns).objectStore(ns).get(F);if(le)return le;{const Fe=yield Co(x.appConfig.senderId);if(Fe)return yield mr(x,Fe),Fe}})).apply(this,arguments)}function mr(x,F){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,W.Z)(function*(x,F){const q=ps(x),Fe=(yield Fi()).transaction(ns,"readwrite");return yield Fe.objectStore(ns).put(F,q),yield Fe.done,F})).apply(this,arguments)}function $s(x){return pa.apply(this,arguments)}function pa(){return(pa=(0,W.Z)(function*(x){const F=ps(x),le=(yield Fi()).transaction(ns,"readwrite");yield le.objectStore(ns).delete(F),yield le.done})).apply(this,arguments)}function ps({appConfig:x}){return x.appId}const $r=new Ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bn(x,F){return Go.apply(this,arguments)}function Go(){return(Go=(0,W.Z)(function*(x,F){const q=yield ao(x),le=_t(F),Fe={method:"POST",headers:q,body:JSON.stringify(le)};let et;try{et=yield(yield fetch(ms(x.appConfig),Fe)).json()}catch(St){throw $r.create("token-subscribe-failed",{errorInfo:St?.toString()})}if(et.error)throw $r.create("token-subscribe-failed",{errorInfo:et.error.message});if(!et.token)throw $r.create("token-subscribe-no-token");return et.token})).apply(this,arguments)}function ua(x,F){return So.apply(this,arguments)}function So(){return(So=(0,W.Z)(function*(x,F){const q=yield ao(x),le=_t(F.subscriptionOptions),Fe={method:"PATCH",headers:q,body:JSON.stringify(le)};let et;try{et=yield(yield fetch(`${ms(x.appConfig)}/${F.token}`,Fe)).json()}catch(St){throw $r.create("token-update-failed",{errorInfo:St?.toString()})}if(et.error)throw $r.create("token-update-failed",{errorInfo:et.error.message});if(!et.token)throw $r.create("token-update-no-token");return et.token})).apply(this,arguments)}function gs(x,F){return zi.apply(this,arguments)}function zi(){return(zi=(0,W.Z)(function*(x,F){const le={method:"DELETE",headers:yield ao(x)};try{const et=yield(yield fetch(`${ms(x.appConfig)}/${F}`,le)).json();if(et.error)throw $r.create("token-unsubscribe-failed",{errorInfo:et.error.message})}catch(Fe){throw $r.create("token-unsubscribe-failed",{errorInfo:Fe?.toString()})}})).apply(this,arguments)}function ms({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function ao(x){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,W.Z)(function*({appConfig:x,installations:F}){const q=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${q}`})})).apply(this,arguments)}function _t({p256dh:x,auth:F,endpoint:q,vapidKey:le}){const Fe={web:{endpoint:q,auth:F,p256dh:x}};return le!==Mi&&(Fe.web.applicationPubKey=le),Fe}const er=6048e5;function Hs(x){return uo.apply(this,arguments)}function uo(){return(uo=(0,W.Z)(function*(x){const F=yield Ws(x.swRegistration,x.vapidKey),q={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:F.endpoint,auth:Di(F.getKey("auth")),p256dh:Di(F.getKey("p256dh"))},le=yield fs(x.firebaseDependencies);if(le){if(k(le.subscriptionOptions,q))return Date.now()>=le.createTime+er?ni(x,{token:le.token,createTime:Date.now(),subscriptionOptions:q}):le.token;try{yield gs(x.firebaseDependencies,le.token)}catch(Fe){console.warn(Fe)}return zs(x.firebaseDependencies,q)}return zs(x.firebaseDependencies,q)})).apply(this,arguments)}function Xr(x){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,W.Z)(function*(x){const F=yield fs(x.firebaseDependencies);F&&(yield gs(x.firebaseDependencies,F.token),yield $s(x.firebaseDependencies));const q=yield x.swRegistration.pushManager.getSubscription();return!q||q.unsubscribe()})).apply(this,arguments)}function ni(x,F){return Li.apply(this,arguments)}function Li(){return(Li=(0,W.Z)(function*(x,F){try{const q=yield ua(x.firebaseDependencies,F),le=Object.assign(Object.assign({},F),{token:q,createTime:Date.now()});return yield mr(x.firebaseDependencies,le),q}catch(q){throw yield Xr(x),q}})).apply(this,arguments)}function zs(x,F){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,W.Z)(function*(x,F){const le={token:yield bn(x,F),createTime:Date.now(),subscriptionOptions:F};return yield mr(x,le),le.token})).apply(this,arguments)}function Ws(x,F){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,W.Z)(function*(x,F){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ts(F)})})).apply(this,arguments)}function k(x,F){return F.vapidKey===x.vapidKey&&F.endpoint===x.endpoint&&F.auth===x.auth&&F.p256dh===x.p256dh}function O(x){const F={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function A(x,F){if(!F.notification)return;x.notification={};const q=F.notification.title;q&&(x.notification.title=q);const le=F.notification.body;le&&(x.notification.body=le);const Fe=F.notification.image;Fe&&(x.notification.image=Fe);const et=F.notification.icon;et&&(x.notification.icon=et)}(F,x),function Z(x,F){!F.data||(x.data=F.data)}(F,x),function Qe(x,F){var q,le,Fe,et,St;if(!(F.fcmOptions||null!==(q=F.notification)&&void 0!==q&&q.click_action))return;x.fcmOptions={};const pn=null!==(Fe=null===(le=F.fcmOptions)||void 0===le?void 0:le.link)&&void 0!==Fe?Fe:null===(et=F.notification)||void 0===et?void 0:et.click_action;pn&&(x.fcmOptions.link=pn);const Nn=null===(St=F.fcmOptions)||void 0===St?void 0:St.analytics_label;Nn&&(x.fcmOptions.analyticsLabel=Nn)}(F,x),F}function Jt(x){return"object"==typeof x&&!!x&&oo in x}function Mn(x,F){const q=[];for(let le=0;le<x.length;le++)q.push(x.charAt(le)),le<F.length&&q.push(F.charAt(le));return q.join("")}function Hr(x){return $r.create("missing-app-config-values",{valueName:x})}Mn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vi{constructor(F,q,le){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Fe=function Wi(x){if(!x||!x.options)throw Hr("App Configuration Object");if(!x.name)throw Hr("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:q}=x;for(const le of F)if(!q[le])throw Hr(le);return{appName:x.name,projectId:q.projectId,apiKey:q.apiKey,appId:q.appId,senderId:q.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Fe,installations:q,analyticsProvider:le}}_delete(){return Promise.resolve()}}function xo(x){return lo.apply(this,arguments)}function lo(){return(lo=(0,W.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(Xi,{scope:es}),x.swRegistration.update().catch(()=>{})}catch(F){throw $r.create("failed-service-worker-registration",{browserErrorMessage:F?.message})}})).apply(this,arguments)}function co(x,F){return ga.apply(this,arguments)}function ga(){return(ga=(0,W.Z)(function*(x,F){if(!F&&!x.swRegistration&&(yield xo(x)),F||!x.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw $r.create("invalid-sw-registration");x.swRegistration=F}})).apply(this,arguments)}function ho(x,F){return zo.apply(this,arguments)}function zo(){return(zo=(0,W.Z)(function*(x,F){F?x.vapidKey=F:x.vapidKey||(x.vapidKey=Mi)})).apply(this,arguments)}function la(){return(la=(0,W.Z)(function*(x,F){if(!navigator)throw $r.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $r.create("permission-blocked");return yield ho(x,F?.vapidKey),yield co(x,F?.serviceWorkerRegistration),Hs(x)})).apply(this,arguments)}function ia(x,F,q){return sa.apply(this,arguments)}function sa(){return(sa=(0,W.Z)(function*(x,F,q){const le=No(F);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(le,{message_id:q[oo],message_name:q[Oi],message_time:q[js],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function No(x){switch(x){case Ii.NOTIFICATION_CLICKED:return"notification_open";case Ii.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $(){return($=(0,W.Z)(function*(x,F){const q=F.data;if(!q.isFirebaseMessaging)return;x.onMessageHandler&&q.messageType===Ii.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(O(q)):x.onMessageHandler.next(O(q)));const le=q.data;Jt(le)&&"1"===le[bo]&&(yield ia(x,q.messageType,le))})).apply(this,arguments)}const N="@firebase/messaging",Y="0.12.0",ge=x=>{const F=new Vi(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",q=>function S(x,F){return $.apply(this,arguments)}(F,q)),F},Ke=x=>{const F=x.getProvider("messaging").getImmediate();return{getToken:le=>function Os(x,F){return la.apply(this,arguments)}(F,le)}};function nn(){return dr.apply(this,arguments)}function dr(){return(dr=(0,W.Z)(function*(){try{yield(0,Ie.eu)()}catch{return!1}return typeof window<"u"&&(0,Ie.hl)()&&(0,Ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function at(){(0,Te._registerComponent)(new Me.wA("messaging",ge,"PUBLIC")),(0,Te._registerComponent)(new Me.wA("messaging-internal",Ke,"PRIVATE")),(0,Te.registerVersion)(N,Y),(0,Te.registerVersion)(N,Y,"esm2017")}();const ks="analytics",Ro="firebase_id",Cs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ts="https://www.googletagmanager.com/gtag/js",yi=new ke.Yd("@firebase/analytics");function Ca(x){return Promise.all(x.map(F=>F.catch(q=>q)))}function ma(x,F){const q=document.createElement("script");q.src=`${Ts}?l=${x}&id=${F}`,q.async=!0,document.head.appendChild(q)}function U(x,F,q,le,Fe,et){return m.apply(this,arguments)}function m(){return(m=(0,W.Z)(function*(x,F,q,le,Fe,et){const St=le[Fe];try{if(St)yield F[St];else{const Nn=(yield Ca(q)).find(vn=>vn.measurementId===Fe);Nn&&(yield F[Nn.appId])}}catch(pn){yi.error(pn)}x("config",Fe,et)})).apply(this,arguments)}function E(x,F,q,le,Fe){return R.apply(this,arguments)}function R(){return(R=(0,W.Z)(function*(x,F,q,le,Fe){try{let et=[];if(Fe&&Fe.send_to){let St=Fe.send_to;Array.isArray(St)||(St=[St]);const pn=yield Ca(q);for(const Nn of St){const vn=pn.find(Jn=>Jn.measurementId===Nn),Cr=vn&&F[vn.appId];if(!Cr){et=[];break}et.push(Cr)}}0===et.length&&(et=Object.values(F)),yield Promise.all(et),x("event",le,Fe||{})}catch(et){yi.error(et)}})).apply(this,arguments)}function _e(x){const F=window.document.getElementsByTagName("script");for(const q of Object.values(F))if(q.src&&q.src.includes(Ts)&&q.src.includes(x))return q;return null}const Le=new Ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tr=new class jt{constructor(F={},q=1e3){this.throttleMetadata=F,this.intervalMillis=q}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,q){this.throttleMetadata[F]=q}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function hr(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Xe(x){return ln.apply(this,arguments)}function ln(){return(ln=(0,W.Z)(function*(x){var F;const{appId:q,apiKey:le}=x,Fe={method:"GET",headers:hr(le)},et=Cs.replace("{app-id}",q),St=yield fetch(et,Fe);if(200!==St.status&&304!==St.status){let pn="";try{const Nn=yield St.json();null!==(F=Nn.error)&&void 0!==F&&F.message&&(pn=Nn.error.message)}catch{}throw Le.create("config-fetch-failed",{httpStatus:St.status,responseMessage:pn})}return St.json()})).apply(this,arguments)}function Rn(x){return ur.apply(this,arguments)}function ur(){return(ur=(0,W.Z)(function*(x,F=tr,q){const{appId:le,apiKey:Fe,measurementId:et}=x.options;if(!le)throw Le.create("no-app-id");if(!Fe){if(et)return{measurementId:et,appId:le};throw Le.create("no-api-key")}const St=F.getThrottleMetadata(le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},pn=new Ze;return setTimeout((0,W.Z)(function*(){pn.abort()}),void 0!==q?q:6e4),Pt({appId:le,apiKey:Fe,measurementId:et},St,pn,F)})).apply(this,arguments)}function Pt(x,F,q){return qt.apply(this,arguments)}function qt(){return(qt=(0,W.Z)(function*(x,{throttleEndTimeMillis:F,backoffCount:q},le,Fe=tr){var et;const{appId:St,measurementId:pn}=x;try{yield bi(le,F)}catch(Nn){if(pn)return yi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pn} provided in the "measurementId" field in the local Firebase config. [${Nn?.message}]`),{appId:St,measurementId:pn};throw Nn}try{const Nn=yield Xe(x);return Fe.deleteThrottleMetadata(St),Nn}catch(Nn){const vn=Nn;if(!Vt(vn)){if(Fe.deleteThrottleMetadata(St),pn)return yi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pn} provided in the "measurementId" field in the local Firebase config. [${vn?.message}]`),{appId:St,measurementId:pn};throw Nn}const Cr=503===Number(null===(et=vn?.customData)||void 0===et?void 0:et.httpStatus)?(0,Ie.$s)(q,Fe.intervalMillis,30):(0,Ie.$s)(q,Fe.intervalMillis),Jn={throttleEndTimeMillis:Date.now()+Cr,backoffCount:q+1};return Fe.setThrottleMetadata(St,Jn),yi.debug(`Calling attemptFetch again in ${Cr} millis`),Pt(x,Jn,le,Fe)}})).apply(this,arguments)}function bi(x,F){return new Promise((q,le)=>{const Fe=Math.max(F-Date.now(),0),et=setTimeout(q,Fe);x.addEventListener(()=>{clearTimeout(et),le(Le.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Vt(x){if(!(x instanceof Ie.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}class Ze{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let ft,On;function rs(){return(rs=(0,W.Z)(function*(x,F,q,le,Fe){if(Fe&&Fe.global)x("event",q,le);else{const et=yield F;x("event",q,Object.assign(Object.assign({},le),{send_to:et}))}})).apply(this,arguments)}function or(x){On=x}function mn(x){ft=x}function Nr(){return is.apply(this,arguments)}function is(){return(is=(0,W.Z)(function*(){if(!(0,Ie.hl)())return yi.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ie.eu)()}catch(x){return yi.warn(Le.create("indexeddb-unavailable",{errorInfo:x?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ut(){return(Ut=(0,W.Z)(function*(x,F,q,le,Fe,et,St){var pn;const Nn=Rn(x);Nn.then(Ln=>{q[Ln.measurementId]=Ln.appId,x.options.measurementId&&Ln.measurementId!==x.options.measurementId&&yi.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${Ln.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ln=>yi.error(Ln)),F.push(Nn);const vn=Nr().then(Ln=>{if(Ln)return le.getId()}),[Cr,Jn]=yield Promise.all([Nn,vn]);_e(et)||ma(et,Cr.measurementId),On&&(Fe("consent","default",On),or(void 0)),Fe("js",new Date);const Ms=null!==(pn=St?.config)&&void 0!==pn?pn:{};return Ms.origin="firebase",Ms.update=!0,null!=Jn&&(Ms[Ro]=Jn),Fe("config",Cr.measurementId,Ms),ft&&(Fe("set",ft),mn(void 0)),Cr.measurementId})).apply(this,arguments)}class ko{constructor(F){this.app=F}_delete(){return delete Gn[this.app.options.appId],Promise.resolve()}}let Gn={},li=[];const br={};let go,Fs,Nt="dataLayer",Ta=!1;function Ya(x,F,q){!function cd(){const x=[];if((0,Ie.ru)()&&x.push("This is a browser extension environment."),(0,Ie.zI)()||x.push("Cookies are not available."),x.length>0){const F=x.map((le,Fe)=>`(${Fe+1}) ${le}`).join(" "),q=Le.create("invalid-analytics-context",{errorInfo:F});yi.warn(q.message)}}();const le=x.options.appId;if(!le)throw Le.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Le.create("no-api-key");yi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gn[le])throw Le.create("already-exists",{id:le});if(!Ta){!function Ru(x){let F=[];Array.isArray(window[x])?F=window[x]:window[x]=F}(Nt);const{wrappedGtag:et,gtagCore:St}=function X(x,F,q,le,Fe){let et=function(...St){window[le].push(arguments)};return window[Fe]&&"function"==typeof window[Fe]&&(et=window[Fe]),window[Fe]=function G(x,F,q,le){function et(){return(et=(0,W.Z)(function*(St,pn,Nn){try{"event"===St?yield E(x,F,q,pn,Nn):"config"===St?yield U(x,F,q,le,pn,Nn):"consent"===St?x("consent","update",Nn):x("set",pn)}catch(vn){yi.error(vn)}})).apply(this,arguments)}return function Fe(St,pn,Nn){return et.apply(this,arguments)}}(et,x,F,q),{gtagCore:et,wrappedGtag:window[Fe]}}(Gn,li,br,Nt,"gtag");Fs=et,go=St,Ta=!0}return Gn[le]=function Er(x,F,q,le,Fe,et,St){return Ut.apply(this,arguments)}(x,li,br,F,go,Nt,q),new ko(x)}function qo(){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,W.Z)(function*(){if((0,Ie.ru)()||!(0,Ie.zI)()||!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}const oc="@firebase/analytics";!function ss(){(0,Te._registerComponent)(new Me.wA(ks,(F,{options:q})=>Ya(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,Te._registerComponent)(new Me.wA("analytics-internal",function x(F){try{const q=F.getProvider(ks).getImmediate();return{logEvent:(le,Fe,et)=>function xa(x,F,q,le){x=(0,Ie.m9)(x),function Lr(x,F,q,le,Fe){return rs.apply(this,arguments)}(Fs,Gn[x.app.options.appId],F,q,le).catch(Fe=>yi.error(Fe))}(q,le,Fe,et)}}catch(q){throw Le.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,Te.registerVersion)(oc,"0.9.0"),(0,Te.registerVersion)(oc,"0.9.0","esm2017")}();var Lo=j(4408),Na=j(7565);const vu=new class oa extends Na.v{}(class ya extends Lo.o{constructor(F,q){super(F,q),this.scheduler=F,this.work=q}schedule(F,q=0){return q>0?super.schedule(F,q):(this.delay=q,this.state=F,this.scheduler.flush(this),this)}execute(F,q){return q>0||this.closed?super.execute(F,q):this._execute(F,q)}requestAsyncId(F,q,le=0){return null!=le&&le>0||null==le&&this.delay>0?super.requestAsyncId(F,q,le):(F.flush(this),0)}});var Zs=j(4986),_u=j(8505),mo=j(9468),ka=j(5363);const os=new p.GfV("7.5.0"),Ja="__angularfire_symbol__analyticsIsSupportedValue",w="__angularfire_symbol__analyticsIsSupported",D="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",T="__angularfire_symbol__messagingIsSupportedValue",P="__angularfire_symbol__messagingIsSupported";function kt(x,F,q){if(F){if(1===F.length)return F[0];const et=F.filter(St=>St.app===q);if(1===et.length)return et[0]}return q.container.getProvider(x).getImmediate({optional:!0})}globalThis[w]||(globalThis[w]=qo().then(x=>globalThis[Ja]=x).catch(()=>globalThis[Ja]=!1)),globalThis[P]||(globalThis[P]=nn().then(x=>globalThis[T]=x).catch(()=>globalThis[T]=!1)),globalThis[_]||(globalThis[_]=Is().then(x=>globalThis[D]=x).catch(()=>globalThis[D]=!1));const zn=(x,F)=>{const q=F?[F]:(0,z.C6)(),le=[];return q.forEach(Fe=>{Fe.container.getProvider(x).instances.forEach(St=>{le.includes(St)||le.push(St)})}),le};function rn(){}class nr{constructor(F,q=vu){this.zone=F,this.delegate=q}now(){return this.delegate.now()}schedule(F,q,le){const Fe=this.zone;return this.delegate.schedule(function(St){Fe.runGuarded(()=>{F.apply(this,[St])})},q,le)}}class as{constructor(F){this.zone=F,this.task=null}call(F,q){const le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rn,{},rn,rn)),q.pipe((0,_u.b)({next:le,complete:le,error:le})).subscribe(F).add(le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ys=(()=>{class x{constructor(q){this.ngZone=q,this.outsideAngular=q.runOutsideAngular(()=>new nr(Zone.current)),this.insideAngular=q.run(()=>new nr(Zone.current,Zs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(q){return new(q||x)(p.LFG(p.R0b))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function vi(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function va(x){return vi(),function La(x){return function(q){return(q=q.lift(new as(x.ngZone))).pipe((0,mo.R)(x.outsideAngular),(0,ka.Q)(x.insideAngular))}}(vi())(x)}},2090:(Xt,Je,j)=>{j.d(Je,{$s:()=>Dt,BH:()=>Kt,G6:()=>rt,L:()=>Pe,LL:()=>fn,Pz:()=>Lt,Sg:()=>vt,UG:()=>We,US:()=>Me,ZB:()=>he,ZR:()=>en,aH:()=>Ct,b$:()=>qe,eu:()=>ut,hl:()=>It,jU:()=>Ht,m9:()=>Tn,ne:()=>Ye,pd:()=>Si,r3:()=>on,ru:()=>tt,tV:()=>Ve,uI:()=>ht,vZ:()=>Tt,w1:()=>Yt,xO:()=>ar,xb:()=>Rr,z$:()=>yt,zI:()=>ce,zd:()=>si});const Te=function(ve){const oe=[];let be=0;for(let ot=0;ot<ve.length;ot++){let xe=ve.charCodeAt(ot);xe<128?oe[be++]=xe:xe<2048?(oe[be++]=xe>>6|192,oe[be++]=63&xe|128):55296==(64512&xe)&&ot+1<ve.length&&56320==(64512&ve.charCodeAt(ot+1))?(xe=65536+((1023&xe)<<10)+(1023&ve.charCodeAt(++ot)),oe[be++]=xe>>18|240,oe[be++]=xe>>12&63|128,oe[be++]=xe>>6&63|128,oe[be++]=63&xe|128):(oe[be++]=xe>>12|224,oe[be++]=xe>>6&63|128,oe[be++]=63&xe|128)}return oe},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ve,oe){if(!Array.isArray(ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const be=oe?this.byteToCharMapWebSafe_:this.byteToCharMap_,ot=[];for(let xe=0;xe<ve.length;xe+=3){const Ot=ve[xe],dn=xe+1<ve.length,Yn=dn?ve[xe+1]:0,vr=xe+2<ve.length,Qn=vr?ve[xe+2]:0;let te=(15&Yn)<<2|Qn>>6,Ue=63&Qn;vr||(Ue=64,dn||(te=64)),ot.push(be[Ot>>2],be[(3&Ot)<<4|Yn>>4],be[te],be[Ue])}return ot.join("")},encodeString(ve,oe){return this.HAS_NATIVE_SUPPORT&&!oe?btoa(ve):this.encodeByteArray(Te(ve),oe)},decodeString(ve,oe){return this.HAS_NATIVE_SUPPORT&&!oe?atob(ve):function(ve){const oe=[];let be=0,ot=0;for(;be<ve.length;){const xe=ve[be++];if(xe<128)oe[ot++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const Ot=ve[be++];oe[ot++]=String.fromCharCode((31&xe)<<6|63&Ot)}else if(xe>239&&xe<365){const vr=((7&xe)<<18|(63&ve[be++])<<12|(63&ve[be++])<<6|63&ve[be++])-65536;oe[ot++]=String.fromCharCode(55296+(vr>>10)),oe[ot++]=String.fromCharCode(56320+(1023&vr))}else{const Ot=ve[be++],dn=ve[be++];oe[ot++]=String.fromCharCode((15&xe)<<12|(63&Ot)<<6|63&dn)}}return oe.join("")}(this.decodeStringToByteArray(ve,oe))},decodeStringToByteArray(ve,oe){this.init_();const be=oe?this.charToByteMapWebSafe_:this.charToByteMap_,ot=[];for(let xe=0;xe<ve.length;){const Ot=be[ve.charAt(xe++)],Yn=xe<ve.length?be[ve.charAt(xe)]:0;++xe;const Qn=xe<ve.length?be[ve.charAt(xe)]:64;++xe;const re=xe<ve.length?be[ve.charAt(xe)]:64;if(++xe,null==Ot||null==Yn||null==Qn||null==re)throw Error();ot.push(Ot<<2|Yn>>4),64!==Qn&&(ot.push(Yn<<4&240|Qn>>2),64!==re&&ot.push(Qn<<6&192|re))}return ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ve=0;ve<this.ENCODED_VALS.length;ve++)this.byteToCharMap_[ve]=this.ENCODED_VALS.charAt(ve),this.charToByteMap_[this.byteToCharMap_[ve]]=ve,this.byteToCharMapWebSafe_[ve]=this.ENCODED_VALS_WEBSAFE.charAt(ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ve]]=ve,ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ve)]=ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ve)]=ve)}}},Pe=function(ve){return function(ve){const oe=Te(ve);return Me.encodeByteArray(oe,!0)}(ve).replace(/\./g,"")},Ve=function(ve){try{return Me.decodeString(ve,!0)}catch(oe){console.error("base64Decode failed: ",oe)}return null};function he(ve,oe){if(!(oe instanceof Object))return oe;switch(oe.constructor){case Date:return new Date(oe.getTime());case Object:void 0===ve&&(ve={});break;case Array:ve=[];break;default:return oe}for(const be in oe)!oe.hasOwnProperty(be)||!Ce(be)||(ve[be]=he(ve[be],oe[be]));return ve}function Ce(ve){return"__proto__"!==ve}function yt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function We(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ht(){return"object"==typeof self&&self.self===self}function tt(){const ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ve&&void 0!==ve.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Yt(){const ve=yt();return ve.indexOf("MSIE ")>=0||ve.indexOf("Trident/")>=0}function rt(){return!We()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function It(){try{return"object"==typeof indexedDB}catch{return!1}}function ut(){return new Promise((ve,oe)=>{try{let be=!0;const ot="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(ot);xe.onsuccess=()=>{xe.result.close(),be||self.indexedDB.deleteDatabase(ot),ve(!0)},xe.onupgradeneeded=()=>{be=!1},xe.onerror=()=>{var Ot;oe((null===(Ot=xe.error)||void 0===Ot?void 0:Ot.message)||"")}}catch(be){oe(be)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Re=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ve=process.env.__FIREBASE_DEFAULTS__;return ve?JSON.parse(ve):void 0})()||(()=>{if(typeof document>"u")return;let ve;try{ve=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const oe=ve&&Ve(ve[1]);return oe&&JSON.parse(oe)})()}catch(ve){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ve}`)}},Ct=()=>{var ve;return null===(ve=Re())||void 0===ve?void 0:ve.config},Lt=ve=>{var oe;return null===(oe=Re())||void 0===oe?void 0:oe[`_${ve}`]};class Kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((oe,be)=>{this.resolve=oe,this.reject=be})}wrapCallback(oe){return(be,ot)=>{be?this.reject(be):this.resolve(ot),"function"==typeof oe&&(this.promise.catch(()=>{}),1===oe.length?oe(be):oe(be,ot))}}}function vt(ve,oe){if(ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ot=oe||"demo-project",xe=ve.iat||0,Ot=ve.sub||ve.user_id;if(!Ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dn=Object.assign({iss:`https://securetoken.google.com/${ot}`,aud:ot,iat:xe,exp:xe+3600,auth_time:xe,sub:Ot,user_id:Ot,firebase:{sign_in_provider:"custom",identities:{}}},ve);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(dn)),""].join(".")}class en extends Error{constructor(oe,be,ot){super(be),this.code=oe,this.customData=ot,this.name="FirebaseError",Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fn.prototype.create)}}class fn{constructor(oe,be,ot){this.service=oe,this.serviceName=be,this.errors=ot}create(oe,...be){const ot=be[0]||{},xe=`${this.service}/${oe}`,Ot=this.errors[oe],dn=Ot?function Bt(ve,oe){return ve.replace($n,(be,ot)=>{const xe=oe[ot];return null!=xe?String(xe):`<${ot}?>`})}(Ot,ot):"Error";return new en(xe,`${this.serviceName}: ${dn} (${xe}).`,ot)}}const $n=/\{\$([^}]+)}/g;function on(ve,oe){return Object.prototype.hasOwnProperty.call(ve,oe)}function Rr(ve){for(const oe in ve)if(Object.prototype.hasOwnProperty.call(ve,oe))return!1;return!0}function Tt(ve,oe){if(ve===oe)return!0;const be=Object.keys(ve),ot=Object.keys(oe);for(const xe of be){if(!ot.includes(xe))return!1;const Ot=ve[xe],dn=oe[xe];if(cr(Ot)&&cr(dn)){if(!Tt(Ot,dn))return!1}else if(Ot!==dn)return!1}for(const xe of ot)if(!be.includes(xe))return!1;return!0}function cr(ve){return null!==ve&&"object"==typeof ve}function ar(ve){const oe=[];for(const[be,ot]of Object.entries(ve))Array.isArray(ot)?ot.forEach(xe=>{oe.push(encodeURIComponent(be)+"="+encodeURIComponent(xe))}):oe.push(encodeURIComponent(be)+"="+encodeURIComponent(ot));return oe.length?"&"+oe.join("&"):""}function si(ve){const oe={};return ve.replace(/^\?/,"").split("&").forEach(ot=>{if(ot){const[xe,Ot]=ot.split("=");oe[decodeURIComponent(xe)]=decodeURIComponent(Ot)}}),oe}function Si(ve){const oe=ve.indexOf("?");if(!oe)return"";const be=ve.indexOf("#",oe);return ve.substring(oe,be>0?be:void 0)}function Ye(ve,oe){const be=new ye(ve,oe);return be.subscribe.bind(be)}class ye{constructor(oe,be){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=be,this.task.then(()=>{oe(this)}).catch(ot=>{this.error(ot)})}next(oe){this.forEachObserver(be=>{be.next(oe)})}error(oe){this.forEachObserver(be=>{be.error(oe)}),this.close(oe)}complete(){this.forEachObserver(oe=>{oe.complete()}),this.close()}subscribe(oe,be,ot){let xe;if(void 0===oe&&void 0===be&&void 0===ot)throw new Error("Missing Observer.");xe=function ze(ve,oe){if("object"!=typeof ve||null===ve)return!1;for(const be of oe)if(be in ve&&"function"==typeof ve[be])return!0;return!1}(oe,["next","error","complete"])?oe:{next:oe,error:be,complete:ot},void 0===xe.next&&(xe.next=lt),void 0===xe.error&&(xe.error=lt),void 0===xe.complete&&(xe.complete=lt);const Ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch{}}),this.observers.push(xe),Ot}unsubscribeOne(oe){void 0===this.observers||void 0===this.observers[oe]||(delete this.observers[oe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(oe){if(!this.finalized)for(let be=0;be<this.observers.length;be++)this.sendOne(be,oe)}sendOne(oe,be){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[oe])try{be(this.observers[oe])}catch(ot){typeof console<"u"&&console.error&&console.error(ot)}})}close(oe){this.finalized||(this.finalized=!0,void 0!==oe&&(this.finalError=oe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lt(){}function Dt(ve,oe=1e3,be=2){const ot=oe*Math.pow(be,ve),xe=Math.round(.5*ot*(Math.random()-.5)*2);return Math.min(144e5,ot+xe)}function Tn(ve){return ve&&ve._delegate?ve._delegate:ve}},2340:(Xt,Je,j)=>{j.d(Je,{N:()=>p});const p={production:!0,firebase:{projectId:"megj-a6b90",appId:"1:326413185288:web:270c313a3cb7241647fcbd",databaseURL:"https://megj-a6b90-default-rtdb.firebaseio.com",storageBucket:"megj-a6b90.appspot.com",apiKey:"AIzaSyCZmxufGWYD-B772v3vbac3nIaLnXcEO6k",authDomain:"megj-a6b90.firebaseapp.com",messagingSenderId:"326413185288",measurementId:"G-HPSM5VTXTH"},letextourl:"https://api.letexto.com/v1/campaigns",letextokey:"wnScP3MdEWFYSWOgKKr9KWoLHVytFq",letextosender:"0575806605",message:"Paiement du droit de 5000FCFA par OM ou WAVE au 0787041347.\nPar western,RIA et MoneyGram avec les r\xe9f\xe9rences ci dessous :\nNom: AKE\nPr\xe9noms : AUDREY MANUELA\nPossibilit\xe9 de payer pour le pack Gabaon \xe0 20.000FCFA.\nVeuillez laisser un message sur le num\xe9ro de paiement apr\xe8s que celui ci soit effectif.\nD\xe9lai de Paiement : 12/02/2023 \n    "}},4100:(Xt,Je,j)=>{var p=j(1481),z=j(4650),W=j(433),Te=j(529),Ie=j(7001),Me=j(6895);function ke(U,m){if(1&U&&(z.TgZ(0,"div",2)(1,"div",3),z._UZ(2,"router-outlet"),z.qZA()()),2&U){const E=z.oxw();z.Q6J("ngClass","/login"===E.url?"md:grid-cols-3":"md:grid-cols-4 md:mt-6"),z.xp6(1),z.Q6J("ngClass","/login"===E.url?"md:col-end-3 justify-self-center self-center w-full":"md:col-start-2 md:col-span-2")}}function Pe(U,m){1&U&&(z.TgZ(0,"div",4),z._UZ(1,"router-outlet"),z.qZA())}let Ve=(()=>{class U{constructor(E){this.router=E,this.title="megj"}ngOnInit(){this.router.events.subscribe(E=>{E instanceof Ie.OD&&(this.url=E.url)})}}return U.\u0275fac=function(E){return new(E||U)(z.Y36(Ie.F0))},U.\u0275cmp=z.Xpm({type:U,selectors:[["app-root"]],decls:2,vars:2,consts:[["class","md:grid md:gap-4 min-h-screen px-4 py-2",3,"ngClass",4,"ngIf"],["class","m-10",4,"ngIf"],[1,"md:grid","md:gap-4","min-h-screen","px-4","py-2",3,"ngClass"],[3,"ngClass"],[1,"m-10"]],template:function(E,R){1&E&&(z.YNc(0,ke,3,2,"div",0),z.YNc(1,Pe,2,0,"div",1)),2&E&&(z.Q6J("ngIf","/"===R.url||"/login"===R.url||"/register"===R.url),z.xp6(1),z.Q6J("ngIf","/dashboard"===R.url))},dependencies:[Me.mk,Me.O5,Ie.lC]}),U})();var de=j(2340),he=j(2011),Ce=j(2095);class yt{}const We="*";function Zt(U,m=null){return{type:2,steps:U,options:m}}function Yt(U){return{type:6,styles:U,offset:null}}function De(U){Promise.resolve().then(U)}class pe{constructor(m=0,E=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=m+E}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(m=>m()),this._onDoneFns=[])}onStart(m){this._originalOnStartFns.push(m),this._onStartFns.push(m)}onDone(m){this._originalOnDoneFns.push(m),this._onDoneFns.push(m)}onDestroy(m){this._onDestroyFns.push(m)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){De(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(m=>m()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(m=>m()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(m){this._position=this.totalTime?m*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(m){const E="start"==m?this._onStartFns:this._onDoneFns;E.forEach(R=>R()),E.length=0}}class Re{constructor(m){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=m;let E=0,R=0,G=0;const X=this.players.length;0==X?De(()=>this._onFinish()):this.players.forEach(_e=>{_e.onDone(()=>{++E==X&&this._onFinish()}),_e.onDestroy(()=>{++R==X&&this._onDestroy()}),_e.onStart(()=>{++G==X&&this._onStart()})}),this.totalTime=this.players.reduce((_e,we)=>Math.max(_e,we.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(m=>m()),this._onDoneFns=[])}init(){this.players.forEach(m=>m.init())}onStart(m){this._onStartFns.push(m)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(m=>m()),this._onStartFns=[])}onDone(m){this._onDoneFns.push(m)}onDestroy(m){this._onDestroyFns.push(m)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(m=>m.play())}pause(){this.players.forEach(m=>m.pause())}restart(){this.players.forEach(m=>m.restart())}finish(){this._onFinish(),this.players.forEach(m=>m.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(m=>m.destroy()),this._onDestroyFns.forEach(m=>m()),this._onDestroyFns=[])}reset(){this.players.forEach(m=>m.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(m){const E=m*this.totalTime;this.players.forEach(R=>{const G=R.totalTime?Math.min(1,E/R.totalTime):1;R.setPosition(G)})}getPosition(){const m=this.players.reduce((E,R)=>null===E||R.totalTime>E.totalTime?R:E,null);return null!=m?m.getPosition():0}beforeDestroy(){this.players.forEach(m=>{m.beforeDestroy&&m.beforeDestroy()})}triggerCallback(m){const E="start"==m?this._onStartFns:this._onDoneFns;E.forEach(R=>R()),E.length=0}}function Ct(U){return new z.vHH(3e3,!1)}function Hn(){return typeof window<"u"&&typeof window.document<"u"}function Pr(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Cn(U){switch(U.length){case 0:return new pe;case 1:return U[0];default:return new Re(U)}}function Dn(U,m,E,R,G=new Map,X=new Map){const _e=[],we=[];let Le=-1,st=null;if(R.forEach(Wt=>{const jt=Wt.get("offset"),tr=jt==Le,hr=tr&&st||new Map;Wt.forEach((Xe,ln)=>{let Rn=ln,ur=Xe;if("offset"!==ln)switch(Rn=m.normalizePropertyName(Rn,_e),ur){case"!":ur=G.get(ln);break;case We:ur=X.get(ln);break;default:ur=m.normalizeStyleValue(ln,Rn,ur,_e)}hr.set(Rn,ur)}),tr||we.push(hr),st=hr,Le=jt}),_e.length)throw function si(U){return new z.vHH(3502,!1)}();return we}function Gt(U,m,E,R){switch(m){case"start":U.onStart(()=>R(E&&Ft(E,"start",U)));break;case"done":U.onDone(()=>R(E&&Ft(E,"done",U)));break;case"destroy":U.onDestroy(()=>R(E&&Ft(E,"destroy",U)))}}function Ft(U,m,E){const X=pt(U.element,U.triggerName,U.fromState,U.toState,m||U.phaseName,E.totalTime??U.totalTime,!!E.disabled),_e=U._data;return null!=_e&&(X._data=_e),X}function pt(U,m,E,R,G="",X=0,_e){return{element:U,triggerName:m,fromState:E,toState:R,phaseName:G,totalTime:X,disabled:!!_e}}function Dt(U,m,E){let R=U.get(m);return R||U.set(m,R=E),R}function wn(U){const m=U.indexOf(":");return[U.substring(1,m),U.slice(m+1)]}let yn=(U,m)=>!1,Tn=(U,m,E)=>[],ve=null;function oe(U){const m=U.parentNode||U.host;return m===ve?null:m}(Pr()||typeof Element<"u")&&(Hn()?(ve=(()=>document.documentElement)(),yn=(U,m)=>{for(;m;){if(m===U)return!0;m=oe(m)}return!1}):yn=(U,m)=>U.contains(m),Tn=(U,m,E)=>{if(E)return Array.from(U.querySelectorAll(m));const R=U.querySelector(m);return R?[R]:[]});let xe=null,Ot=!1;const Qn=yn,fe=Tn;let te=(()=>{class U{validateStyleProperty(E){return function dn(U){xe||(xe=function vr(){return typeof document<"u"?document.body:null}()||{},Ot=!!xe.style&&"WebkitAppearance"in xe.style);let m=!0;return xe.style&&!function ot(U){return"ebkit"==U.substring(1,6)}(U)&&(m=U in xe.style,!m&&Ot&&(m="Webkit"+U.charAt(0).toUpperCase()+U.slice(1)in xe.style)),m}(E)}matchesElement(E,R){return!1}containsElement(E,R){return Qn(E,R)}getParentElement(E){return oe(E)}query(E,R,G){return fe(E,R,G)}computeStyle(E,R,G){return G||""}animate(E,R,G,X,_e,we=[],Le){return new pe(G,X)}}return U.\u0275fac=function(E){return new(E||U)},U.\u0275prov=z.Yz7({token:U,factory:U.\u0275fac}),U})(),Ue=(()=>{class U{}return U.NOOP=new te,U})();const un="ng-enter",wr="ng-leave",oi="ng-trigger",xn=".ng-trigger",Mr="ng-animating",ti=".ng-animating";function Ei(U){if("number"==typeof U)return U;const m=U.match(/^(-?[\.\d]+)(m?s)/);return!m||m.length<2?0:Bi(parseFloat(m[1]),m[2])}function Bi(U,m){return"s"===m?1e3*U:U}function kr(U,m,E){return U.hasOwnProperty("duration")?U:function _s(U,m,E){let G,X=0,_e="";if("string"==typeof U){const we=U.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===we)return m.push(Ct()),{duration:0,delay:0,easing:""};G=Bi(parseFloat(we[1]),we[2]);const Le=we[3];null!=Le&&(X=Bi(parseFloat(Le),we[4]));const st=we[5];st&&(_e=st)}else G=U;if(!E){let we=!1,Le=m.length;G<0&&(m.push(function Lt(){return new z.vHH(3100,!1)}()),we=!0),X<0&&(m.push(function Kt(){return new z.vHH(3101,!1)}()),we=!0),we&&m.splice(Le,0,Ct())}return{duration:G,delay:X,easing:_e}}(U,m,E)}function Ri(U,m={}){return Object.keys(U).forEach(E=>{m[E]=U[E]}),m}function Zr(U){const m=new Map;return Object.keys(U).forEach(E=>{m.set(E,U[E])}),m}function qn(U,m=new Map,E){if(E)for(let[R,G]of E)m.set(R,G);for(let[R,G]of U)m.set(R,G);return m}function Js(U,m,E){return E?m+":"+E+";":""}function ls(U){let m="";for(let E=0;E<U.style.length;E++){const R=U.style.item(E);m+=Js(0,R,U.style.getPropertyValue(R))}for(const E in U.style)U.style.hasOwnProperty(E)&&!E.startsWith("_")&&(m+=Js(0,Ji(E),U.style[E]));U.setAttribute("style",m)}function Qr(U,m,E){U.style&&(m.forEach((R,G)=>{const X=Hi(G);E&&!E.has(G)&&E.set(G,U.style[X]),U.style[X]=R}),Pr()&&ls(U))}function Pi(U,m){U.style&&(m.forEach((E,R)=>{const G=Hi(R);U.style[G]=""}),Pr()&&ls(U))}function ai(U){return Array.isArray(U)?1==U.length?U[0]:Zt(U):U}const $i=new RegExp("{{\\s*(.+?)\\s*}}","g");function jr(U){let m=[];if("string"==typeof U){let E;for(;E=$i.exec(U);)m.push(E[1]);$i.lastIndex=0}return m}function hi(U,m,E){const R=U.toString(),G=R.replace($i,(X,_e)=>{let we=m[_e];return null==we&&(E.push(function cn(U){return new z.vHH(3003,!1)}()),we=""),we.toString()});return G==R?U:G}function Jr(U){const m=[];let E=U.next();for(;!E.done;)m.push(E.value),E=U.next();return m}const gi=/-+([a-z0-9])/g;function Hi(U){return U.replace(gi,(...m)=>m[1].toUpperCase())}function Ji(U){return U.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ui(U,m,E){switch(m.type){case 7:return U.visitTrigger(m,E);case 0:return U.visitState(m,E);case 1:return U.visitTransition(m,E);case 2:return U.visitSequence(m,E);case 3:return U.visitGroup(m,E);case 4:return U.visitAnimate(m,E);case 5:return U.visitKeyframes(m,E);case 6:return U.visitStyle(m,E);case 8:return U.visitReference(m,E);case 9:return U.visitAnimateChild(m,E);case 10:return U.visitAnimateRef(m,E);case 11:return U.visitQuery(m,E);case 12:return U.visitStagger(m,E);default:throw function en(U){return new z.vHH(3004,!1)}()}}function cs(U,m){return window.getComputedStyle(U)[m]}function xt(U,m){const E=[];return"string"==typeof U?U.split(/\s*,\s*/).forEach(R=>function Sn(U,m,E){if(":"==U[0]){const Le=function Un(U,m){switch(U){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(E,R)=>parseFloat(R)>parseFloat(E);case":decrement":return(E,R)=>parseFloat(R)<parseFloat(E);default:return m.push(function Tt(U){return new z.vHH(3016,!1)}()),"* => *"}}(U,E);if("function"==typeof Le)return void m.push(Le);U=Le}const R=U.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==R||R.length<4)return E.push(function ir(U){return new z.vHH(3015,!1)}()),m;const G=R[1],X=R[2],_e=R[3];m.push(ws(G,_e));"<"==X[0]&&!("*"==G&&"*"==_e)&&m.push(ws(_e,G))}(R,E,m)):E.push(U),E}const Fr=new Set(["true","1"]),gr=new Set(["false","0"]);function ws(U,m){const E=Fr.has(U)||gr.has(U),R=Fr.has(m)||gr.has(m);return(G,X)=>{let _e="*"==U||U==G,we="*"==m||m==X;return!_e&&E&&"boolean"==typeof G&&(_e=G?Fr.has(U):gr.has(U)),!we&&R&&"boolean"==typeof X&&(we=X?Fr.has(m):gr.has(m)),_e&&we}}const mi=new RegExp("s*:selfs*,?","g");function Ai(U,m,E,R){return new ds(U).build(m,E,R)}class ds{constructor(m){this._driver=m}build(m,E,R){const G=new Xi(E);return this._resetContextStyleTimingState(G),ui(this,ai(m),G)}_resetContextStyleTimingState(m){m.currentQuerySelector="",m.collectedStyles=new Map,m.collectedStyles.set("",new Map),m.currentTime=0}visitTrigger(m,E){let R=E.queryCount=0,G=E.depCount=0;const X=[],_e=[];return"@"==m.name.charAt(0)&&E.errors.push(function Bt(){return new z.vHH(3006,!1)}()),m.definitions.forEach(we=>{if(this._resetContextStyleTimingState(E),0==we.type){const Le=we,st=Le.name;st.toString().split(/\s*,\s*/).forEach(Wt=>{Le.name=Wt,X.push(this.visitState(Le,E))}),Le.name=st}else if(1==we.type){const Le=this.visitTransition(we,E);R+=Le.queryCount,G+=Le.depCount,_e.push(Le)}else E.errors.push(function $n(){return new z.vHH(3007,!1)}())}),{type:7,name:m.name,states:X,transitions:_e,queryCount:R,depCount:G,options:null}}visitState(m,E){const R=this.visitStyle(m.styles,E),G=m.options&&m.options.params||null;if(R.containsDynamicStyles){const X=new Set,_e=G||{};R.styles.forEach(we=>{we instanceof Map&&we.forEach(Le=>{jr(Le).forEach(st=>{_e.hasOwnProperty(st)||X.add(st)})})}),X.size&&(Jr(X.values()),E.errors.push(function In(U,m){return new z.vHH(3008,!1)}()))}return{type:0,name:m.name,style:R,options:G?{params:G}:null}}visitTransition(m,E){E.queryCount=0,E.depCount=0;const R=ui(this,ai(m.animation),E);return{type:1,matchers:xt(m.expr,E.errors),animation:R,queryCount:E.queryCount,depCount:E.depCount,options:wi(m.options)}}visitSequence(m,E){return{type:2,steps:m.steps.map(R=>ui(this,R,E)),options:wi(m.options)}}visitGroup(m,E){const R=E.currentTime;let G=0;const X=m.steps.map(_e=>{E.currentTime=R;const we=ui(this,_e,E);return G=Math.max(G,E.currentTime),we});return E.currentTime=G,{type:3,steps:X,options:wi(m.options)}}visitAnimate(m,E){const R=function Mi(U,m){if(U.hasOwnProperty("duration"))return U;if("number"==typeof U)return oo(kr(U,m).duration,0,"");const E=U;if(E.split(/\s+/).some(X=>"{"==X.charAt(0)&&"{"==X.charAt(1))){const X=oo(0,0,"");return X.dynamic=!0,X.strValue=E,X}const G=kr(E,m);return oo(G.duration,G.delay,G.easing)}(m.timings,E.errors);E.currentAnimateTimings=R;let G,X=m.styles?m.styles:Yt({});if(5==X.type)G=this.visitKeyframes(X,E);else{let _e=m.styles,we=!1;if(!_e){we=!0;const st={};R.easing&&(st.easing=R.easing),_e=Yt(st)}E.currentTime+=R.duration+R.delay;const Le=this.visitStyle(_e,E);Le.isEmptyStep=we,G=Le}return E.currentAnimateTimings=null,{type:4,timings:R,style:G,options:null}}visitStyle(m,E){const R=this._makeStyleAst(m,E);return this._validateStyleAst(R,E),R}_makeStyleAst(m,E){const R=[],G=Array.isArray(m.styles)?m.styles:[m.styles];for(let we of G)"string"==typeof we?we===We?R.push(we):E.errors.push(new z.vHH(3002,!1)):R.push(Zr(we));let X=!1,_e=null;return R.forEach(we=>{if(we instanceof Map&&(we.has("easing")&&(_e=we.get("easing"),we.delete("easing")),!X))for(let Le of we.values())if(Le.toString().indexOf("{{")>=0){X=!0;break}}),{type:6,styles:R,easing:_e,offset:m.offset,containsDynamicStyles:X,options:null}}_validateStyleAst(m,E){const R=E.currentAnimateTimings;let G=E.currentTime,X=E.currentTime;R&&X>0&&(X-=R.duration+R.delay),m.styles.forEach(_e=>{"string"!=typeof _e&&_e.forEach((we,Le)=>{const st=E.collectedStyles.get(E.currentQuerySelector),Wt=st.get(Le);let jt=!0;Wt&&(X!=G&&X>=Wt.startTime&&G<=Wt.endTime&&(E.errors.push(function Kr(U,m,E,R,G){return new z.vHH(3010,!1)}()),jt=!1),X=Wt.startTime),jt&&st.set(Le,{startTime:X,endTime:G}),E.options&&function Qi(U,m,E){const R=m.params||{},G=jr(U);G.length&&G.forEach(X=>{R.hasOwnProperty(X)||E.push(function vt(U){return new z.vHH(3001,!1)}())})}(we,E.options,E.errors)})})}visitKeyframes(m,E){const R={type:5,styles:[],options:null};if(!E.currentAnimateTimings)return E.errors.push(function Kn(){return new z.vHH(3011,!1)}()),R;let X=0;const _e=[];let we=!1,Le=!1,st=0;const Wt=m.steps.map(ur=>{const Pt=this._makeStyleAst(ur,E);let qt=null!=Pt.offset?Pt.offset:function es(U){if("string"==typeof U)return null;let m=null;if(Array.isArray(U))U.forEach(E=>{if(E instanceof Map&&E.has("offset")){const R=E;m=parseFloat(R.get("offset")),R.delete("offset")}});else if(U instanceof Map&&U.has("offset")){const E=U;m=parseFloat(E.get("offset")),E.delete("offset")}return m}(Pt.styles),bi=0;return null!=qt&&(X++,bi=Pt.offset=qt),Le=Le||bi<0||bi>1,we=we||bi<st,st=bi,_e.push(bi),Pt});Le&&E.errors.push(function Or(){return new z.vHH(3012,!1)}()),we&&E.errors.push(function Br(){return new z.vHH(3200,!1)}());const jt=m.steps.length;let tr=0;X>0&&X<jt?E.errors.push(function on(){return new z.vHH(3202,!1)}()):0==X&&(tr=1/(jt-1));const hr=jt-1,Xe=E.currentTime,ln=E.currentAnimateTimings,Rn=ln.duration;return Wt.forEach((ur,Pt)=>{const qt=tr>0?Pt==hr?1:tr*Pt:_e[Pt],bi=qt*Rn;E.currentTime=Xe+ln.delay+bi,ln.duration=bi,this._validateStyleAst(ur,E),ur.offset=qt,R.styles.push(ur)}),R}visitReference(m,E){return{type:8,animation:ui(this,ai(m.animation),E),options:wi(m.options)}}visitAnimateChild(m,E){return E.depCount++,{type:9,options:wi(m.options)}}visitAnimateRef(m,E){return{type:10,animation:this.visitReference(m.animation,E),options:wi(m.options)}}visitQuery(m,E){const R=E.currentQuerySelector,G=m.options||{};E.queryCount++,E.currentQuery=m;const[X,_e]=function Is(U){const m=!!U.split(/\s*,\s*/).find(E=>":self"==E);return m&&(U=U.replace(mi,"")),U=U.replace(/@\*/g,xn).replace(/@\w+/g,E=>xn+"-"+E.slice(1)).replace(/:animating/g,ti),[U,m]}(m.selector);E.currentQuerySelector=R.length?R+" "+X:X,Dt(E.collectedStyles,E.currentQuerySelector,new Map);const we=ui(this,ai(m.animation),E);return E.currentQuery=null,E.currentQuerySelector=R,{type:11,selector:X,limit:G.limit||0,optional:!!G.optional,includeSelf:_e,animation:we,originalSelector:m.selector,options:wi(m.options)}}visitStagger(m,E){E.currentQuery||E.errors.push(function yr(){return new z.vHH(3013,!1)}());const R="full"===m.timings?{duration:0,delay:0,easing:"full"}:kr(m.timings,E.errors,!0);return{type:12,animation:ui(this,ai(m.animation),E),timings:R,options:null}}}class Xi{constructor(m){this.errors=m,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function wi(U){return U?(U=Ri(U)).params&&(U.params=function Do(U){return U?Ri(U):null}(U.params)):U={},U}function oo(U,m,E){return{duration:U,delay:m,easing:E}}function Oi(U,m,E,R,G,X,_e=null,we=!1){return{type:1,element:U,keyframes:m,preStyleProps:E,postStyleProps:R,duration:G,delay:X,totalTime:G+X,easing:_e,subTimeline:we}}class js{constructor(){this._map=new Map}get(m){return this._map.get(m)||[]}append(m,E){let R=this._map.get(m);R||this._map.set(m,R=[]),R.push(...E)}has(m){return this._map.has(m)}clear(){this._map.clear()}}const Ii=new RegExp(":enter","g"),ts=new RegExp(":leave","g");function ki(U,m,E,R,G,X=new Map,_e=new Map,we,Le,st=[]){return(new na).buildKeyframes(U,m,E,R,G,X,_e,we,Le,st)}class na{buildKeyframes(m,E,R,G,X,_e,we,Le,st,Wt=[]){st=st||new js;const jt=new Co(m,E,st,G,X,Wt,[]);jt.options=Le;const tr=Le.delay?Ei(Le.delay):0;jt.currentTimeline.delayNextStep(tr),jt.currentTimeline.setStyles([_e],null,jt.errors,Le),ui(this,R,jt);const hr=jt.timelines.filter(Xe=>Xe.containsAnimation());if(hr.length&&we.size){let Xe;for(let ln=hr.length-1;ln>=0;ln--){const Rn=hr[ln];if(Rn.element===E){Xe=Rn;break}}Xe&&!Xe.allowOnlyTimelineStyles()&&Xe.setStyles([we],null,jt.errors,Le)}return hr.length?hr.map(Xe=>Xe.buildKeyframes()):[Oi(E,[],[],[],0,tr,"",!1)]}visitTrigger(m,E){}visitState(m,E){}visitTransition(m,E){}visitAnimateChild(m,E){const R=E.subInstructions.get(E.element);if(R){const G=E.createSubContext(m.options),X=E.currentTimeline.currentTime,_e=this._visitSubInstructions(R,G,G.options);X!=_e&&E.transformIntoNewTimeline(_e)}E.previousNode=m}visitAnimateRef(m,E){const R=E.createSubContext(m.options);R.transformIntoNewTimeline(),this._applyAnimationRefDelays([m.options,m.animation.options],E,R),this.visitReference(m.animation,R),E.transformIntoNewTimeline(R.currentTimeline.currentTime),E.previousNode=m}_applyAnimationRefDelays(m,E,R){for(const G of m){const X=G?.delay;if(X){const _e="number"==typeof X?X:Ei(hi(X,G?.params??{},E.errors));R.delayNextStep(_e)}}}_visitSubInstructions(m,E,R){let X=E.currentTimeline.currentTime;const _e=null!=R.duration?Ei(R.duration):null,we=null!=R.delay?Ei(R.delay):null;return 0!==_e&&m.forEach(Le=>{const st=E.appendInstructionToTimeline(Le,_e,we);X=Math.max(X,st.duration+st.delay)}),X}visitReference(m,E){E.updateOptions(m.options,!0),ui(this,m.animation,E),E.previousNode=m}visitSequence(m,E){const R=E.subContextCount;let G=E;const X=m.options;if(X&&(X.params||X.delay)&&(G=E.createSubContext(X),G.transformIntoNewTimeline(),null!=X.delay)){6==G.previousNode.type&&(G.currentTimeline.snapshotCurrentStyles(),G.previousNode=fi);const _e=Ei(X.delay);G.delayNextStep(_e)}m.steps.length&&(m.steps.forEach(_e=>ui(this,_e,G)),G.currentTimeline.applyStylesToKeyframe(),G.subContextCount>R&&G.transformIntoNewTimeline()),E.previousNode=m}visitGroup(m,E){const R=[];let G=E.currentTimeline.currentTime;const X=m.options&&m.options.delay?Ei(m.options.delay):0;m.steps.forEach(_e=>{const we=E.createSubContext(m.options);X&&we.delayNextStep(X),ui(this,_e,we),G=Math.max(G,we.currentTimeline.currentTime),R.push(we.currentTimeline)}),R.forEach(_e=>E.currentTimeline.mergeTimelineCollectedStyles(_e)),E.transformIntoNewTimeline(G),E.previousNode=m}_visitTiming(m,E){if(m.dynamic){const R=m.strValue;return kr(E.params?hi(R,E.params,E.errors):R,E.errors)}return{duration:m.duration,delay:m.delay,easing:m.easing}}visitAnimate(m,E){const R=E.currentAnimateTimings=this._visitTiming(m.timings,E),G=E.currentTimeline;R.delay&&(E.incrementTime(R.delay),G.snapshotCurrentStyles());const X=m.style;5==X.type?this.visitKeyframes(X,E):(E.incrementTime(R.duration),this.visitStyle(X,E),G.applyStylesToKeyframe()),E.currentAnimateTimings=null,E.previousNode=m}visitStyle(m,E){const R=E.currentTimeline,G=E.currentAnimateTimings;!G&&R.hasCurrentStyleProperties()&&R.forwardFrame();const X=G&&G.easing||m.easing;m.isEmptyStep?R.applyEmptyStep(X):R.setStyles(m.styles,X,E.errors,E.options),E.previousNode=m}visitKeyframes(m,E){const R=E.currentAnimateTimings,G=E.currentTimeline.duration,X=R.duration,we=E.createSubContext().currentTimeline;we.easing=R.easing,m.styles.forEach(Le=>{we.forwardTime((Le.offset||0)*X),we.setStyles(Le.styles,Le.easing,E.errors,E.options),we.applyStylesToKeyframe()}),E.currentTimeline.mergeTimelineCollectedStyles(we),E.transformIntoNewTimeline(G+X),E.previousNode=m}visitQuery(m,E){const R=E.currentTimeline.currentTime,G=m.options||{},X=G.delay?Ei(G.delay):0;X&&(6===E.previousNode.type||0==R&&E.currentTimeline.hasCurrentStyleProperties())&&(E.currentTimeline.snapshotCurrentStyles(),E.previousNode=fi);let _e=R;const we=E.invokeQuery(m.selector,m.originalSelector,m.limit,m.includeSelf,!!G.optional,E.errors);E.currentQueryTotal=we.length;let Le=null;we.forEach((st,Wt)=>{E.currentQueryIndex=Wt;const jt=E.createSubContext(m.options,st);X&&jt.delayNextStep(X),st===E.element&&(Le=jt.currentTimeline),ui(this,m.animation,jt),jt.currentTimeline.applyStylesToKeyframe(),_e=Math.max(_e,jt.currentTimeline.currentTime)}),E.currentQueryIndex=0,E.currentQueryTotal=0,E.transformIntoNewTimeline(_e),Le&&(E.currentTimeline.mergeTimelineCollectedStyles(Le),E.currentTimeline.snapshotCurrentStyles()),E.previousNode=m}visitStagger(m,E){const R=E.parentContext,G=E.currentTimeline,X=m.timings,_e=Math.abs(X.duration),we=_e*(E.currentQueryTotal-1);let Le=_e*E.currentQueryIndex;switch(X.duration<0?"reverse":X.easing){case"reverse":Le=we-Le;break;case"full":Le=R.currentStaggerTime}const Wt=E.currentTimeline;Le&&Wt.delayNextStep(Le);const jt=Wt.currentTime;ui(this,m.animation,E),E.previousNode=m,R.currentStaggerTime=G.currentTime-jt+(G.startTime-R.currentTimeline.startTime)}}const fi={};class Co{constructor(m,E,R,G,X,_e,we,Le){this._driver=m,this.element=E,this.subInstructions=R,this._enterClassName=G,this._leaveClassName=X,this.errors=_e,this.timelines=we,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Le||new Ds(this._driver,E,0),we.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(m,E){if(!m)return;const R=m;let G=this.options;null!=R.duration&&(G.duration=Ei(R.duration)),null!=R.delay&&(G.delay=Ei(R.delay));const X=R.params;if(X){let _e=G.params;_e||(_e=this.options.params={}),Object.keys(X).forEach(we=>{(!E||!_e.hasOwnProperty(we))&&(_e[we]=hi(X[we],_e,this.errors))})}}_copyOptions(){const m={};if(this.options){const E=this.options.params;if(E){const R=m.params={};Object.keys(E).forEach(G=>{R[G]=E[G]})}}return m}createSubContext(m=null,E,R){const G=E||this.element,X=new Co(this._driver,G,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(G,R||0));return X.previousNode=this.previousNode,X.currentAnimateTimings=this.currentAnimateTimings,X.options=this._copyOptions(),X.updateOptions(m),X.currentQueryIndex=this.currentQueryIndex,X.currentQueryTotal=this.currentQueryTotal,X.parentContext=this,this.subContextCount++,X}transformIntoNewTimeline(m){return this.previousNode=fi,this.currentTimeline=this.currentTimeline.fork(this.element,m),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(m,E,R){const G={duration:E??m.duration,delay:this.currentTimeline.currentTime+(R??0)+m.delay,easing:""},X=new xr(this._driver,m.element,m.keyframes,m.preStyleProps,m.postStyleProps,G,m.stretchStartingKeyframe);return this.timelines.push(X),G}incrementTime(m){this.currentTimeline.forwardTime(this.currentTimeline.duration+m)}delayNextStep(m){m>0&&this.currentTimeline.delayNextStep(m)}invokeQuery(m,E,R,G,X,_e){let we=[];if(G&&we.push(this.element),m.length>0){m=(m=m.replace(Ii,"."+this._enterClassName)).replace(ts,"."+this._leaveClassName);let st=this._driver.query(this.element,m,1!=R);0!==R&&(st=R<0?st.slice(st.length+R,st.length):st.slice(0,R)),we.push(...st)}return!X&&0==we.length&&_e.push(function Rr(U){return new z.vHH(3014,!1)}()),we}}class Ds{constructor(m,E,R,G){this._driver=m,this.element=E,this.startTime=R,this._elementTimelineStylesLookup=G,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(E),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(E,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(m){const E=1===this._keyframes.size&&this._pendingStyles.size;this.duration||E?(this.forwardTime(this.currentTime+m),E&&this.snapshotCurrentStyles()):this.startTime+=m}fork(m,E){return this.applyStylesToKeyframe(),new Ds(this._driver,m,E||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(m){this.applyStylesToKeyframe(),this.duration=m,this._loadKeyframe()}_updateStyle(m,E){this._localTimelineStyles.set(m,E),this._globalTimelineStyles.set(m,E),this._styleSummary.set(m,{time:this.currentTime,value:E})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(m){m&&this._previousKeyframe.set("easing",m);for(let[E,R]of this._globalTimelineStyles)this._backFill.set(E,R||We),this._currentKeyframe.set(E,We);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(m,E,R,G){E&&this._previousKeyframe.set("easing",E);const X=G&&G.params||{},_e=function To(U,m){const E=new Map;let R;return U.forEach(G=>{if("*"===G){R=R||m.keys();for(let X of R)E.set(X,We)}else qn(G,E)}),E}(m,this._globalTimelineStyles);for(let[we,Le]of _e){const st=hi(Le,X,R);this._pendingStyles.set(we,st),this._localTimelineStyles.has(we)||this._backFill.set(we,this._globalTimelineStyles.get(we)??We),this._updateStyle(we,st)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((m,E)=>{this._currentKeyframe.set(E,m)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((m,E)=>{this._currentKeyframe.has(E)||this._currentKeyframe.set(E,m)}))}snapshotCurrentStyles(){for(let[m,E]of this._localTimelineStyles)this._pendingStyles.set(m,E),this._updateStyle(m,E)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const m=[];for(let E in this._currentKeyframe)m.push(E);return m}mergeTimelineCollectedStyles(m){m._styleSummary.forEach((E,R)=>{const G=this._styleSummary.get(R);(!G||E.time>G.time)&&this._updateStyle(R,E.value)})}buildKeyframes(){this.applyStylesToKeyframe();const m=new Set,E=new Set,R=1===this._keyframes.size&&0===this.duration;let G=[];this._keyframes.forEach((we,Le)=>{const st=qn(we,new Map,this._backFill);st.forEach((Wt,jt)=>{"!"===Wt?m.add(jt):Wt===We&&E.add(jt)}),R||st.set("offset",Le/this.duration),G.push(st)});const X=m.size?Jr(m.values()):[],_e=E.size?Jr(E.values()):[];if(R){const we=G[0],Le=new Map(we);we.set("offset",0),Le.set("offset",1),G=[we,Le]}return Oi(this.element,G,X,_e,this.duration,this.startTime,this.easing,!1)}}class xr extends Ds{constructor(m,E,R,G,X,_e,we=!1){super(m,E,_e.delay),this.keyframes=R,this.preStyleProps=G,this.postStyleProps=X,this._stretchStartingKeyframe=we,this.timings={duration:_e.duration,delay:_e.delay,easing:_e.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let m=this.keyframes,{delay:E,duration:R,easing:G}=this.timings;if(this._stretchStartingKeyframe&&E){const X=[],_e=R+E,we=E/_e,Le=qn(m[0]);Le.set("offset",0),X.push(Le);const st=qn(m[0]);st.set("offset",bs(we)),X.push(st);const Wt=m.length-1;for(let jt=1;jt<=Wt;jt++){let tr=qn(m[jt]);const hr=tr.get("offset");tr.set("offset",bs((E+hr*R)/_e)),X.push(tr)}R=_e,E=0,G="",m=X}return Oi(this.element,m,this.preStyleProps,this.postStyleProps,R,E,G,!0)}}function bs(U,m=3){const E=Math.pow(10,m-1);return Math.round(U*E)/E}class jn{}const fs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Gi extends jn{normalizePropertyName(m,E){return Hi(m)}normalizeStyleValue(m,E,R,G){let X="";const _e=R.toString().trim();if(fs.has(E)&&0!==R&&"0"!==R)if("number"==typeof R)X="px";else{const we=R.match(/^[+-]?[\d\.]+([a-z]*)$/);we&&0==we[1].length&&G.push(function fn(U,m){return new z.vHH(3005,!1)}())}return _e+X}}function mr(U,m,E,R,G,X,_e,we,Le,st,Wt,jt,tr){return{type:0,element:U,triggerName:m,isRemovalTransition:G,fromState:E,fromStyles:X,toState:R,toStyles:_e,timelines:we,queriedElements:Le,preStyleProps:st,postStyleProps:Wt,totalTime:jt,errors:tr}}const Rs={};class $s{constructor(m,E,R){this._triggerName=m,this.ast=E,this._stateStyles=R}match(m,E,R,G){return function ps(U,m,E,R,G){return U.some(X=>X(m,E,R,G))}(this.ast.matchers,m,E,R,G)}buildStyles(m,E,R){let G=this._stateStyles.get("*");return void 0!==m&&(G=this._stateStyles.get(m?.toString())||G),G?G.buildStyles(E,R):new Map}build(m,E,R,G,X,_e,we,Le,st,Wt){const jt=[],tr=this.ast.options&&this.ast.options.params||Rs,Xe=this.buildStyles(R,we&&we.params||Rs,jt),ln=Le&&Le.params||Rs,Rn=this.buildStyles(G,ln,jt),ur=new Set,Pt=new Map,qt=new Map,bi="void"===G,Vt={params:ra(ln,tr),delay:this.ast.options?.delay},Ze=Wt?[]:ki(m,E,this.ast.animation,X,_e,Xe,Rn,Vt,st,jt);let ft=0;if(Ze.forEach(rs=>{ft=Math.max(rs.duration+rs.delay,ft)}),jt.length)return mr(E,this._triggerName,R,G,bi,Xe,Rn,[],[],Pt,qt,ft,jt);Ze.forEach(rs=>{const qs=rs.element,po=Dt(Pt,qs,new Set);rs.preStyleProps.forEach(Ko=>po.add(Ko));const Wo=Dt(qt,qs,new Set);rs.postStyleProps.forEach(Ko=>Wo.add(Ko)),qs!==E&&ur.add(qs)});const Lr=Jr(ur.values());return mr(E,this._triggerName,R,G,bi,Xe,Rn,Ze,Lr,Pt,qt,ft)}}function ra(U,m){const E=Ri(m);for(const R in U)U.hasOwnProperty(R)&&null!=U[R]&&(E[R]=U[R]);return E}class $r{constructor(m,E,R){this.styles=m,this.defaultParams=E,this.normalizer=R}buildStyles(m,E){const R=new Map,G=Ri(this.defaultParams);return Object.keys(m).forEach(X=>{const _e=m[X];null!==_e&&(G[X]=_e)}),this.styles.styles.forEach(X=>{"string"!=typeof X&&X.forEach((_e,we)=>{_e&&(_e=hi(_e,G,E));const Le=this.normalizer.normalizePropertyName(we,E);_e=this.normalizer.normalizeStyleValue(we,Le,_e,E),R.set(Le,_e)})}),R}}class Go{constructor(m,E,R){this.name=m,this.ast=E,this._normalizer=R,this.transitionFactories=[],this.states=new Map,E.states.forEach(G=>{this.states.set(G.name,new $r(G.style,G.options&&G.options.params||{},R))}),So(this.states,"true","1"),So(this.states,"false","0"),E.transitions.forEach(G=>{this.transitionFactories.push(new $s(m,G,this.states))}),this.fallbackTransition=function ua(U,m,E){return new $s(U,{type:1,animation:{type:2,steps:[],options:null},matchers:[(_e,we)=>!0],options:null,queryCount:0,depCount:0},m)}(m,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(m,E,R,G){return this.transitionFactories.find(_e=>_e.match(m,E,R,G))||null}matchStyles(m,E,R){return this.fallbackTransition.buildStyles(m,E,R)}}function So(U,m,E){U.has(m)?U.has(E)||U.set(E,U.get(m)):U.has(E)&&U.set(m,U.get(E))}const gs=new js;class zi{constructor(m,E,R){this.bodyNode=m,this._driver=E,this._normalizer=R,this._animations=new Map,this._playersById=new Map,this.players=[]}register(m,E){const R=[],X=Ai(this._driver,E,R,[]);if(R.length)throw function Si(U){return new z.vHH(3503,!1)}();this._animations.set(m,X)}_buildPlayer(m,E,R){const G=m.element,X=Dn(0,this._normalizer,0,m.keyframes,E,R);return this._driver.animate(G,X,m.duration,m.delay,m.easing,[],!0)}create(m,E,R={}){const G=[],X=this._animations.get(m);let _e;const we=new Map;if(X?(_e=ki(this._driver,E,X,un,wr,new Map,new Map,R,gs,G),_e.forEach(Wt=>{const jt=Dt(we,Wt.element,new Map);Wt.postStyleProps.forEach(tr=>jt.set(tr,null))})):(G.push(function qr(){return new z.vHH(3300,!1)}()),_e=[]),G.length)throw function Ye(U){return new z.vHH(3504,!1)}();we.forEach((Wt,jt)=>{Wt.forEach((tr,hr)=>{Wt.set(hr,this._driver.computeStyle(jt,hr,We))})});const st=Cn(_e.map(Wt=>{const jt=we.get(Wt.element);return this._buildPlayer(Wt,new Map,jt)}));return this._playersById.set(m,st),st.onDestroy(()=>this.destroy(m)),this.players.push(st),st}destroy(m){const E=this._getPlayer(m);E.destroy(),this._playersById.delete(m);const R=this.players.indexOf(E);R>=0&&this.players.splice(R,1)}_getPlayer(m){const E=this._playersById.get(m);if(!E)throw function ye(U){return new z.vHH(3301,!1)}();return E}listen(m,E,R,G){const X=pt(E,"","","");return Gt(this._getPlayer(m),R,X,G),()=>{}}command(m,E,R,G){if("register"==R)return void this.register(m,G[0]);if("create"==R)return void this.create(m,E,G[0]||{});const X=this._getPlayer(m);switch(R){case"play":X.play();break;case"pause":X.pause();break;case"reset":X.reset();break;case"restart":X.restart();break;case"finish":X.finish();break;case"init":X.init();break;case"setPosition":X.setPosition(parseFloat(G[0]));break;case"destroy":this.destroy(m)}}}const ms="ng-animate-queued",Ao="ng-animate-disabled",uo=[],Xr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gs={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ni="__ng_removed";class Li{constructor(m,E=""){this.namespaceId=E;const R=m&&m.hasOwnProperty("value");if(this.value=function A(U){return U??null}(R?m.value:m),R){const X=Ri(m);delete X.value,this.options=X}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(m){const E=m.params;if(E){const R=this.options.params;Object.keys(E).forEach(G=>{null==R[G]&&(R[G]=E[G])})}}}const zs="void",Ps=new Li(zs);class Ws{constructor(m,E,R){this.id=m,this.hostElement=E,this._engine=R,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+m,Hr(E,this._hostClassName)}listen(m,E,R,G){if(!this._triggers.has(E))throw function ue(U,m){return new z.vHH(3302,!1)}();if(null==R||0==R.length)throw function ze(U){return new z.vHH(3303,!1)}();if(!function Qe(U){return"start"==U||"done"==U}(R))throw function lt(U,m){return new z.vHH(3400,!1)}();const X=Dt(this._elementListeners,m,[]),_e={name:E,phase:R,callback:G};X.push(_e);const we=Dt(this._engine.statesByElement,m,new Map);return we.has(E)||(Hr(m,oi),Hr(m,oi+"-"+E),we.set(E,Ps)),()=>{this._engine.afterFlush(()=>{const Le=X.indexOf(_e);Le>=0&&X.splice(Le,1),this._triggers.has(E)||we.delete(E)})}}register(m,E){return!this._triggers.has(m)&&(this._triggers.set(m,E),!0)}_getTrigger(m){const E=this._triggers.get(m);if(!E)throw function Qt(U){return new z.vHH(3401,!1)}();return E}trigger(m,E,R,G=!0){const X=this._getTrigger(E),_e=new k(this.id,E,m);let we=this._engine.statesByElement.get(m);we||(Hr(m,oi),Hr(m,oi+"-"+E),this._engine.statesByElement.set(m,we=new Map));let Le=we.get(E);const st=new Li(R,this.id);if(!(R&&R.hasOwnProperty("value"))&&Le&&st.absorbOptions(Le.options),we.set(E,st),Le||(Le=Ps),st.value!==zs&&Le.value===st.value){if(!function ga(U,m){const E=Object.keys(U),R=Object.keys(m);if(E.length!=R.length)return!1;for(let G=0;G<E.length;G++){const X=E[G];if(!m.hasOwnProperty(X)||U[X]!==m[X])return!1}return!0}(Le.params,st.params)){const ln=[],Rn=X.matchStyles(Le.value,Le.params,ln),ur=X.matchStyles(st.value,st.params,ln);ln.length?this._engine.reportError(ln):this._engine.afterFlush(()=>{Pi(m,Rn),Qr(m,ur)})}return}const tr=Dt(this._engine.playersByElement,m,[]);tr.forEach(ln=>{ln.namespaceId==this.id&&ln.triggerName==E&&ln.queued&&ln.destroy()});let hr=X.matchTransition(Le.value,st.value,m,st.params),Xe=!1;if(!hr){if(!G)return;hr=X.fallbackTransition,Xe=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:E,transition:hr,fromState:Le,toState:st,player:_e,isFallbackTransition:Xe}),Xe||(Hr(m,ms),_e.onStart(()=>{Vi(m,ms)})),_e.onDone(()=>{let ln=this.players.indexOf(_e);ln>=0&&this.players.splice(ln,1);const Rn=this._engine.playersByElement.get(m);if(Rn){let ur=Rn.indexOf(_e);ur>=0&&Rn.splice(ur,1)}}),this.players.push(_e),tr.push(_e),_e}deregister(m){this._triggers.delete(m),this._engine.statesByElement.forEach(E=>E.delete(m)),this._elementListeners.forEach((E,R)=>{this._elementListeners.set(R,E.filter(G=>G.name!=m))})}clearElementCache(m){this._engine.statesByElement.delete(m),this._elementListeners.delete(m);const E=this._engine.playersByElement.get(m);E&&(E.forEach(R=>R.destroy()),this._engine.playersByElement.delete(m))}_signalRemovalForInnerTriggers(m,E){const R=this._engine.driver.query(m,xn,!0);R.forEach(G=>{if(G[ni])return;const X=this._engine.fetchNamespacesByElement(G);X.size?X.forEach(_e=>_e.triggerLeaveAnimation(G,E,!1,!0)):this.clearElementCache(G)}),this._engine.afterFlushAnimationsDone(()=>R.forEach(G=>this.clearElementCache(G)))}triggerLeaveAnimation(m,E,R,G){const X=this._engine.statesByElement.get(m),_e=new Map;if(X){const we=[];if(X.forEach((Le,st)=>{if(_e.set(st,Le.value),this._triggers.has(st)){const Wt=this.trigger(m,st,zs,G);Wt&&we.push(Wt)}}),we.length)return this._engine.markElementAsRemoved(this.id,m,!0,E,_e),R&&Cn(we).onDone(()=>this._engine.processLeaveNode(m)),!0}return!1}prepareLeaveAnimationListeners(m){const E=this._elementListeners.get(m),R=this._engine.statesByElement.get(m);if(E&&R){const G=new Set;E.forEach(X=>{const _e=X.name;if(G.has(_e))return;G.add(_e);const Le=this._triggers.get(_e).fallbackTransition,st=R.get(_e)||Ps,Wt=new Li(zs),jt=new k(this.id,_e,m);this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:_e,transition:Le,fromState:st,toState:Wt,player:jt,isFallbackTransition:!0})})}}removeNode(m,E){const R=this._engine;if(m.childElementCount&&this._signalRemovalForInnerTriggers(m,E),this.triggerLeaveAnimation(m,E,!0))return;let G=!1;if(R.totalAnimations){const X=R.players.length?R.playersByQueriedElement.get(m):[];if(X&&X.length)G=!0;else{let _e=m;for(;_e=_e.parentNode;)if(R.statesByElement.get(_e)){G=!0;break}}}if(this.prepareLeaveAnimationListeners(m),G)R.markElementAsRemoved(this.id,m,!1,E);else{const X=m[ni];(!X||X===Xr)&&(R.afterFlush(()=>this.clearElementCache(m)),R.destroyInnerAnimations(m),R._onRemovalComplete(m,E))}}insertNode(m,E){Hr(m,this._hostClassName)}drainQueuedTransitions(m){const E=[];return this._queue.forEach(R=>{const G=R.player;if(G.destroyed)return;const X=R.element,_e=this._elementListeners.get(X);_e&&_e.forEach(we=>{if(we.name==R.triggerName){const Le=pt(X,R.triggerName,R.fromState.value,R.toState.value);Le._data=m,Gt(R.player,we.phase,Le,we.callback)}}),G.markedForDestroy?this._engine.afterFlush(()=>{G.destroy()}):E.push(R)}),this._queue=[],E.sort((R,G)=>{const X=R.transition.ast.depCount,_e=G.transition.ast.depCount;return 0==X||0==_e?X-_e:this._engine.driver.containsElement(R.element,G.element)?1:-1})}destroy(m){this.players.forEach(E=>E.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,m)}elementContainsData(m){let E=!1;return this._elementListeners.has(m)&&(E=!0),E=!!this._queue.find(R=>R.element===m)||E,E}}class Mo{constructor(m,E,R){this.bodyNode=m,this.driver=E,this._normalizer=R,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(G,X)=>{}}_onRemovalComplete(m,E){this.onRemovalComplete(m,E)}get queuedPlayers(){const m=[];return this._namespaceList.forEach(E=>{E.players.forEach(R=>{R.queued&&m.push(R)})}),m}createNamespace(m,E){const R=new Ws(m,E,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,E)?this._balanceNamespaceList(R,E):(this.newHostElements.set(E,R),this.collectEnterElement(E)),this._namespaceLookup[m]=R}_balanceNamespaceList(m,E){const R=this._namespaceList,G=this.namespacesByHostElement;if(R.length-1>=0){let _e=!1,we=this.driver.getParentElement(E);for(;we;){const Le=G.get(we);if(Le){const st=R.indexOf(Le);R.splice(st+1,0,m),_e=!0;break}we=this.driver.getParentElement(we)}_e||R.unshift(m)}else R.push(m);return G.set(E,m),m}register(m,E){let R=this._namespaceLookup[m];return R||(R=this.createNamespace(m,E)),R}registerTrigger(m,E,R){let G=this._namespaceLookup[m];G&&G.register(E,R)&&this.totalAnimations++}destroy(m,E){if(!m)return;const R=this._fetchNamespace(m);this.afterFlush(()=>{this.namespacesByHostElement.delete(R.hostElement),delete this._namespaceLookup[m];const G=this._namespaceList.indexOf(R);G>=0&&this._namespaceList.splice(G,1)}),this.afterFlushAnimationsDone(()=>R.destroy(E))}_fetchNamespace(m){return this._namespaceLookup[m]}fetchNamespacesByElement(m){const E=new Set,R=this.statesByElement.get(m);if(R)for(let G of R.values())if(G.namespaceId){const X=this._fetchNamespace(G.namespaceId);X&&E.add(X)}return E}trigger(m,E,R,G){if(Z(E)){const X=this._fetchNamespace(m);if(X)return X.trigger(E,R,G),!0}return!1}insertNode(m,E,R,G){if(!Z(E))return;const X=E[ni];if(X&&X.setForRemoval){X.setForRemoval=!1,X.setForMove=!0;const _e=this.collectedLeaveElements.indexOf(E);_e>=0&&this.collectedLeaveElements.splice(_e,1)}if(m){const _e=this._fetchNamespace(m);_e&&_e.insertNode(E,R)}G&&this.collectEnterElement(E)}collectEnterElement(m){this.collectedEnterElements.push(m)}markElementAsDisabled(m,E){E?this.disabledNodes.has(m)||(this.disabledNodes.add(m),Hr(m,Ao)):this.disabledNodes.has(m)&&(this.disabledNodes.delete(m),Vi(m,Ao))}removeNode(m,E,R,G){if(Z(E)){const X=m?this._fetchNamespace(m):null;if(X?X.removeNode(E,G):this.markElementAsRemoved(m,E,!1,G),R){const _e=this.namespacesByHostElement.get(E);_e&&_e.id!==m&&_e.removeNode(E,G)}}else this._onRemovalComplete(E,G)}markElementAsRemoved(m,E,R,G,X){this.collectedLeaveElements.push(E),E[ni]={namespaceId:m,setForRemoval:G,hasAnimation:R,removedBeforeQueried:!1,previousTriggersValues:X}}listen(m,E,R,G,X){return Z(E)?this._fetchNamespace(m).listen(E,R,G,X):()=>{}}_buildInstruction(m,E,R,G,X){return m.transition.build(this.driver,m.element,m.fromState.value,m.toState.value,R,G,m.fromState.options,m.toState.options,E,X)}destroyInnerAnimations(m){let E=this.driver.query(m,xn,!0);E.forEach(R=>this.destroyActiveAnimationsForElement(R)),0!=this.playersByQueriedElement.size&&(E=this.driver.query(m,ti,!0),E.forEach(R=>this.finishActiveQueriedAnimationOnElement(R)))}destroyActiveAnimationsForElement(m){const E=this.playersByElement.get(m);E&&E.forEach(R=>{R.queued?R.markedForDestroy=!0:R.destroy()})}finishActiveQueriedAnimationOnElement(m){const E=this.playersByQueriedElement.get(m);E&&E.forEach(R=>R.finish())}whenRenderingDone(){return new Promise(m=>{if(this.players.length)return Cn(this.players).onDone(()=>m());m()})}processLeaveNode(m){const E=m[ni];if(E&&E.setForRemoval){if(m[ni]=Xr,E.namespaceId){this.destroyInnerAnimations(m);const R=this._fetchNamespace(E.namespaceId);R&&R.clearElementCache(m)}this._onRemovalComplete(m,E.setForRemoval)}m.classList?.contains(Ao)&&this.markElementAsDisabled(m,!1),this.driver.query(m,".ng-animate-disabled",!0).forEach(R=>{this.markElementAsDisabled(R,!1)})}flush(m=-1){let E=[];if(this.newHostElements.size&&(this.newHostElements.forEach((R,G)=>this._balanceNamespaceList(R,G)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let R=0;R<this.collectedEnterElements.length;R++)Hr(this.collectedEnterElements[R],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const R=[];try{E=this._flushAnimations(R,m)}finally{for(let G=0;G<R.length;G++)R[G]()}}else for(let R=0;R<this.collectedLeaveElements.length;R++)this.processLeaveNode(this.collectedLeaveElements[R]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(R=>R()),this._flushFns=[],this._whenQuietFns.length){const R=this._whenQuietFns;this._whenQuietFns=[],E.length?Cn(E).onDone(()=>{R.forEach(G=>G())}):R.forEach(G=>G())}}reportError(m){throw function En(U){return new z.vHH(3402,!1)}()}_flushAnimations(m,E){const R=new js,G=[],X=new Map,_e=[],we=new Map,Le=new Map,st=new Map,Wt=new Set;this.disabledNodes.forEach(gn=>{Wt.add(gn);const Pn=this.driver.query(gn,".ng-animate-queued",!0);for(let On=0;On<Pn.length;On++)Wt.add(Pn[On])});const jt=this.bodyNode,tr=Array.from(this.statesByElement.keys()),hr=Wi(tr,this.collectedEnterElements),Xe=new Map;let ln=0;hr.forEach((gn,Pn)=>{const On=un+ln++;Xe.set(Pn,On),gn.forEach(or=>Hr(or,On))});const Rn=[],ur=new Set,Pt=new Set;for(let gn=0;gn<this.collectedLeaveElements.length;gn++){const Pn=this.collectedLeaveElements[gn],On=Pn[ni];On&&On.setForRemoval&&(Rn.push(Pn),ur.add(Pn),On.hasAnimation?this.driver.query(Pn,".ng-star-inserted",!0).forEach(or=>ur.add(or)):Pt.add(Pn))}const qt=new Map,bi=Wi(tr,Array.from(ur));bi.forEach((gn,Pn)=>{const On=wr+ln++;qt.set(Pn,On),gn.forEach(or=>Hr(or,On))}),m.push(()=>{hr.forEach((gn,Pn)=>{const On=Xe.get(Pn);gn.forEach(or=>Vi(or,On))}),bi.forEach((gn,Pn)=>{const On=qt.get(Pn);gn.forEach(or=>Vi(or,On))}),Rn.forEach(gn=>{this.processLeaveNode(gn)})});const Vt=[],Ze=[];for(let gn=this._namespaceList.length-1;gn>=0;gn--)this._namespaceList[gn].drainQueuedTransitions(E).forEach(On=>{const or=On.player,mn=On.element;if(Vt.push(or),this.collectedEnterElements.length){const li=mn[ni];if(li&&li.setForMove){if(li.previousTriggersValues&&li.previousTriggersValues.has(On.triggerName)){const br=li.previousTriggersValues.get(On.triggerName),Nt=this.statesByElement.get(On.element);if(Nt&&Nt.has(On.triggerName)){const Fo=Nt.get(On.triggerName);Fo.value=br,Nt.set(On.triggerName,Fo)}}return void or.destroy()}}const Nr=!jt||!this.driver.containsElement(jt,mn),is=qt.get(mn),Er=Xe.get(mn),Ut=this._buildInstruction(On,R,Er,is,Nr);if(Ut.errors&&Ut.errors.length)return void Ze.push(Ut);if(Nr)return or.onStart(()=>Pi(mn,Ut.fromStyles)),or.onDestroy(()=>Qr(mn,Ut.toStyles)),void G.push(or);if(On.isFallbackTransition)return or.onStart(()=>Pi(mn,Ut.fromStyles)),or.onDestroy(()=>Qr(mn,Ut.toStyles)),void G.push(or);const ko=[];Ut.timelines.forEach(li=>{li.stretchStartingKeyframe=!0,this.disabledNodes.has(li.element)||ko.push(li)}),Ut.timelines=ko,R.append(mn,Ut.timelines),_e.push({instruction:Ut,player:or,element:mn}),Ut.queriedElements.forEach(li=>Dt(we,li,[]).push(or)),Ut.preStyleProps.forEach((li,br)=>{if(li.size){let Nt=Le.get(br);Nt||Le.set(br,Nt=new Set),li.forEach((Fo,go)=>Nt.add(go))}}),Ut.postStyleProps.forEach((li,br)=>{let Nt=st.get(br);Nt||st.set(br,Nt=new Set),li.forEach((Fo,go)=>Nt.add(go))})});if(Ze.length){const gn=[];Ze.forEach(Pn=>{gn.push(function Rt(U,m){return new z.vHH(3505,!1)}())}),Vt.forEach(Pn=>Pn.destroy()),this.reportError(gn)}const ft=new Map,Lr=new Map;_e.forEach(gn=>{const Pn=gn.element;R.has(Pn)&&(Lr.set(Pn,Pn),this._beforeAnimationBuild(gn.player.namespaceId,gn.instruction,ft))}),G.forEach(gn=>{const Pn=gn.element;this._getPreviousPlayers(Pn,!1,gn.namespaceId,gn.triggerName,null).forEach(or=>{Dt(ft,Pn,[]).push(or),or.destroy()})});const rs=Rn.filter(gn=>ho(gn,Le,st)),qs=new Map;Mn(qs,this.driver,Pt,st,We).forEach(gn=>{ho(gn,Le,st)&&rs.push(gn)});const Wo=new Map;hr.forEach((gn,Pn)=>{Mn(Wo,this.driver,new Set(gn),Le,"!")}),rs.forEach(gn=>{const Pn=qs.get(gn),On=Wo.get(gn);qs.set(gn,new Map([...Array.from(Pn?.entries()??[]),...Array.from(On?.entries()??[])]))});const Ko=[],Po=[],Oo={};_e.forEach(gn=>{const{element:Pn,player:On,instruction:or}=gn;if(R.has(Pn)){if(Wt.has(Pn))return On.onDestroy(()=>Qr(Pn,or.toStyles)),On.disabled=!0,On.overrideTotalTime(or.totalTime),void G.push(On);let mn=Oo;if(Lr.size>1){let is=Pn;const Er=[];for(;is=is.parentNode;){const Ut=Lr.get(is);if(Ut){mn=Ut;break}Er.push(is)}Er.forEach(Ut=>Lr.set(Ut,mn))}const Nr=this._buildAnimation(On.namespaceId,or,ft,X,Wo,qs);if(On.setRealPlayer(Nr),mn===Oo)Ko.push(On);else{const is=this.playersByElement.get(mn);is&&is.length&&(On.parentPlayer=Cn(is)),G.push(On)}}else Pi(Pn,or.fromStyles),On.onDestroy(()=>Qr(Pn,or.toStyles)),Po.push(On),Wt.has(Pn)&&G.push(On)}),Po.forEach(gn=>{const Pn=X.get(gn.element);if(Pn&&Pn.length){const On=Cn(Pn);gn.setRealPlayer(On)}}),G.forEach(gn=>{gn.parentPlayer?gn.syncPlayerEvents(gn.parentPlayer):gn.destroy()});for(let gn=0;gn<Rn.length;gn++){const Pn=Rn[gn],On=Pn[ni];if(Vi(Pn,wr),On&&On.hasAnimation)continue;let or=[];if(we.size){let Nr=we.get(Pn);Nr&&Nr.length&&or.push(...Nr);let is=this.driver.query(Pn,ti,!0);for(let Er=0;Er<is.length;Er++){let Ut=we.get(is[Er]);Ut&&Ut.length&&or.push(...Ut)}}const mn=or.filter(Nr=>!Nr.destroyed);mn.length?xo(this,Pn,mn):this.processLeaveNode(Pn)}return Rn.length=0,Ko.forEach(gn=>{this.players.push(gn),gn.onDone(()=>{gn.destroy();const Pn=this.players.indexOf(gn);this.players.splice(Pn,1)}),gn.play()}),Ko}elementContainsData(m,E){let R=!1;const G=E[ni];return G&&G.setForRemoval&&(R=!0),this.playersByElement.has(E)&&(R=!0),this.playersByQueriedElement.has(E)&&(R=!0),this.statesByElement.has(E)&&(R=!0),this._fetchNamespace(m).elementContainsData(E)||R}afterFlush(m){this._flushFns.push(m)}afterFlushAnimationsDone(m){this._whenQuietFns.push(m)}_getPreviousPlayers(m,E,R,G,X){let _e=[];if(E){const we=this.playersByQueriedElement.get(m);we&&(_e=we)}else{const we=this.playersByElement.get(m);if(we){const Le=!X||X==zs;we.forEach(st=>{st.queued||!Le&&st.triggerName!=G||_e.push(st)})}}return(R||G)&&(_e=_e.filter(we=>!(R&&R!=we.namespaceId||G&&G!=we.triggerName))),_e}_beforeAnimationBuild(m,E,R){const X=E.element,_e=E.isRemovalTransition?void 0:m,we=E.isRemovalTransition?void 0:E.triggerName;for(const Le of E.timelines){const st=Le.element,Wt=st!==X,jt=Dt(R,st,[]);this._getPreviousPlayers(st,Wt,_e,we,E.toState).forEach(hr=>{const Xe=hr.getRealPlayer();Xe.beforeDestroy&&Xe.beforeDestroy(),hr.destroy(),jt.push(hr)})}Pi(X,E.fromStyles)}_buildAnimation(m,E,R,G,X,_e){const we=E.triggerName,Le=E.element,st=[],Wt=new Set,jt=new Set,tr=E.timelines.map(Xe=>{const ln=Xe.element;Wt.add(ln);const Rn=ln[ni];if(Rn&&Rn.removedBeforeQueried)return new pe(Xe.duration,Xe.delay);const ur=ln!==Le,Pt=function lo(U){const m=[];return co(U,m),m}((R.get(ln)||uo).map(ft=>ft.getRealPlayer())).filter(ft=>!!ft.element&&ft.element===ln),qt=X.get(ln),bi=_e.get(ln),Vt=Dn(0,this._normalizer,0,Xe.keyframes,qt,bi),Ze=this._buildPlayer(Xe,Vt,Pt);if(Xe.subTimeline&&G&&jt.add(ln),ur){const ft=new k(m,we,ln);ft.setRealPlayer(Ze),st.push(ft)}return Ze});st.forEach(Xe=>{Dt(this.playersByQueriedElement,Xe.element,[]).push(Xe),Xe.onDone(()=>function O(U,m,E){let R=U.get(m);if(R){if(R.length){const G=R.indexOf(E);R.splice(G,1)}0==R.length&&U.delete(m)}return R}(this.playersByQueriedElement,Xe.element,Xe))}),Wt.forEach(Xe=>Hr(Xe,Mr));const hr=Cn(tr);return hr.onDestroy(()=>{Wt.forEach(Xe=>Vi(Xe,Mr)),Qr(Le,E.toStyles)}),jt.forEach(Xe=>{Dt(G,Xe,[]).push(hr)}),hr}_buildPlayer(m,E,R){return E.length>0?this.driver.animate(m.element,E,m.duration,m.delay,m.easing,R):new pe(m.duration,m.delay)}}class k{constructor(m,E,R){this.namespaceId=m,this.triggerName=E,this.element=R,this._player=new pe,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(m){this._containsRealPlayer||(this._player=m,this._queuedCallbacks.forEach((E,R)=>{E.forEach(G=>Gt(m,R,void 0,G))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(m.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(m){this.totalTime=m}syncPlayerEvents(m){const E=this._player;E.triggerCallback&&m.onStart(()=>E.triggerCallback("start")),m.onDone(()=>this.finish()),m.onDestroy(()=>this.destroy())}_queueEvent(m,E){Dt(this._queuedCallbacks,m,[]).push(E)}onDone(m){this.queued&&this._queueEvent("done",m),this._player.onDone(m)}onStart(m){this.queued&&this._queueEvent("start",m),this._player.onStart(m)}onDestroy(m){this.queued&&this._queueEvent("destroy",m),this._player.onDestroy(m)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(m){this.queued||this._player.setPosition(m)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(m){const E=this._player;E.triggerCallback&&E.triggerCallback(m)}}function Z(U){return U&&1===U.nodeType}function Jt(U,m){const E=U.style.display;return U.style.display=m??"none",E}function Mn(U,m,E,R,G){const X=[];E.forEach(Le=>X.push(Jt(Le)));const _e=[];R.forEach((Le,st)=>{const Wt=new Map;Le.forEach(jt=>{const tr=m.computeStyle(st,jt,G);Wt.set(jt,tr),(!tr||0==tr.length)&&(st[ni]=Gs,_e.push(st))}),U.set(st,Wt)});let we=0;return E.forEach(Le=>Jt(Le,X[we++])),_e}function Wi(U,m){const E=new Map;if(U.forEach(we=>E.set(we,[])),0==m.length)return E;const G=new Set(m),X=new Map;function _e(we){if(!we)return 1;let Le=X.get(we);if(Le)return Le;const st=we.parentNode;return Le=E.has(st)?st:G.has(st)?1:_e(st),X.set(we,Le),Le}return m.forEach(we=>{const Le=_e(we);1!==Le&&E.get(Le).push(we)}),E}function Hr(U,m){U.classList?.add(m)}function Vi(U,m){U.classList?.remove(m)}function xo(U,m,E){Cn(E).onDone(()=>U.processLeaveNode(m))}function co(U,m){for(let E=0;E<U.length;E++){const R=U[E];R instanceof Re?co(R.players,m):m.push(R)}}function ho(U,m,E){const R=E.get(U);if(!R)return!1;let G=m.get(U);return G?R.forEach(X=>G.add(X)):m.set(U,R),E.delete(U),!0}class zo{constructor(m,E,R){this.bodyNode=m,this._driver=E,this._normalizer=R,this._triggerCache={},this.onRemovalComplete=(G,X)=>{},this._transitionEngine=new Mo(m,E,R),this._timelineEngine=new zi(m,E,R),this._transitionEngine.onRemovalComplete=(G,X)=>this.onRemovalComplete(G,X)}registerTrigger(m,E,R,G,X){const _e=m+"-"+G;let we=this._triggerCache[_e];if(!we){const Le=[],Wt=Ai(this._driver,X,Le,[]);if(Le.length)throw function ar(U,m){return new z.vHH(3404,!1)}();we=function bn(U,m,E){return new Go(U,m,E)}(G,Wt,this._normalizer),this._triggerCache[_e]=we}this._transitionEngine.registerTrigger(E,G,we)}register(m,E){this._transitionEngine.register(m,E)}destroy(m,E){this._transitionEngine.destroy(m,E)}onInsert(m,E,R,G){this._transitionEngine.insertNode(m,E,R,G)}onRemove(m,E,R,G){this._transitionEngine.removeNode(m,E,G||!1,R)}disableAnimations(m,E){this._transitionEngine.markElementAsDisabled(m,E)}process(m,E,R,G){if("@"==R.charAt(0)){const[X,_e]=wn(R);this._timelineEngine.command(X,E,_e,G)}else this._transitionEngine.trigger(m,E,R,G)}listen(m,E,R,G,X){if("@"==R.charAt(0)){const[_e,we]=wn(R);return this._timelineEngine.listen(_e,E,we,X)}return this._transitionEngine.listen(m,E,R,G,X)}flush(m=-1){this._transitionEngine.flush(m)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let la=(()=>{class U{constructor(E,R,G){this._element=E,this._startStyles=R,this._endStyles=G,this._state=0;let X=U.initialStylesByElement.get(E);X||U.initialStylesByElement.set(E,X=new Map),this._initialStyles=X}start(){this._state<1&&(this._startStyles&&Qr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qr(this._element,this._initialStyles),this._endStyles&&(Qr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(U.initialStylesByElement.delete(this._element),this._startStyles&&(Pi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pi(this._element,this._endStyles),this._endStyles=null),Qr(this._element,this._initialStyles),this._state=3)}}return U.initialStylesByElement=new WeakMap,U})();function ia(U){let m=null;return U.forEach((E,R)=>{(function sa(U){return"display"===U||"position"===U})(R)&&(m=m||new Map,m.set(R,E))}),m}class No{constructor(m,E,R,G){this.element=m,this.keyframes=E,this.options=R,this._specialStyles=G,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=R.duration,this._delay=R.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(m=>m()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const m=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,m,this.options),this._finalKeyframe=m.length?m[m.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(m){const E=[];return m.forEach(R=>{E.push(Object.fromEntries(R))}),E}_triggerWebAnimation(m,E,R){return m.animate(this._convertKeyframesToObject(E),R)}onStart(m){this._originalOnStartFns.push(m),this._onStartFns.push(m)}onDone(m){this._originalOnDoneFns.push(m),this._onDoneFns.push(m)}onDestroy(m){this._onDestroyFns.push(m)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(m=>m()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(m=>m()),this._onDestroyFns=[])}setPosition(m){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=m*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const m=new Map;this.hasStarted()&&this._finalKeyframe.forEach((R,G)=>{"offset"!==G&&m.set(G,this._finished?R:cs(this.element,G))}),this.currentSnapshot=m}triggerCallback(m){const E="start"===m?this._onStartFns:this._onDoneFns;E.forEach(R=>R()),E.length=0}}class S{validateStyleProperty(m){return!0}validateAnimatableStyleProperty(m){return!0}matchesElement(m,E){return!1}containsElement(m,E){return Qn(m,E)}getParentElement(m){return oe(m)}query(m,E,R){return fe(m,E,R)}computeStyle(m,E,R){return window.getComputedStyle(m)[E]}animate(m,E,R,G,X,_e=[]){const Le={duration:R,delay:G,fill:0==G?"both":"forwards"};X&&(Le.easing=X);const st=new Map,Wt=_e.filter(hr=>hr instanceof No);(function ea(U,m){return 0===U||0===m})(R,G)&&Wt.forEach(hr=>{hr.currentSnapshot.forEach((Xe,ln)=>st.set(ln,Xe))});let jt=function Yr(U){return U.length?U[0]instanceof Map?U:U.map(m=>Zr(m)):[]}(E).map(hr=>qn(hr));jt=function Sr(U,m,E){if(E.size&&m.length){let R=m[0],G=[];if(E.forEach((X,_e)=>{R.has(_e)||G.push(_e),R.set(_e,X)}),G.length)for(let X=1;X<m.length;X++){let _e=m[X];G.forEach(we=>_e.set(we,cs(U,we)))}}return m}(m,jt,st);const tr=function Os(U,m){let E=null,R=null;return Array.isArray(m)&&m.length?(E=ia(m[0]),m.length>1&&(R=ia(m[m.length-1]))):m instanceof Map&&(E=ia(m)),E||R?new la(U,E,R):null}(m,jt);return new No(m,jt,Le,tr)}}let $=(()=>{class U extends yt{constructor(E,R){super(),this._nextAnimationId=0,this._renderer=E.createRenderer(R.body,{id:"0",encapsulation:z.ifc.None,styles:[],data:{animation:[]}})}build(E){const R=this._nextAnimationId.toString();this._nextAnimationId++;const G=Array.isArray(E)?Zt(E):E;return ge(this._renderer,null,R,"register",[G]),new N(R,this._renderer)}}return U.\u0275fac=function(E){return new(E||U)(z.LFG(z.FYo),z.LFG(Me.K0))},U.\u0275prov=z.Yz7({token:U,factory:U.\u0275fac}),U})();class N extends class ht{}{constructor(m,E){super(),this._id=m,this._renderer=E}create(m,E){return new Y(this._id,m,E||{},this._renderer)}}class Y{constructor(m,E,R,G){this.id=m,this.element=E,this._renderer=G,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",R)}_listen(m,E){return this._renderer.listen(this.element,`@@${this.id}:${m}`,E)}_command(m,...E){return ge(this._renderer,this.element,this.id,m,E)}onDone(m){this._listen("done",m)}onStart(m){this._listen("start",m)}onDestroy(m){this._listen("destroy",m)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(m){this._command("setPosition",m)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ge(U,m,E,R,G){return U.setProperty(m,`@@${E}:${R}`,G)}const at="@.disabled";let nn=(()=>{class U{constructor(E,R,G){this.delegate=E,this.engine=R,this._zone=G,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),R.onRemovalComplete=(X,_e)=>{const we=_e?.parentNode(X);we&&_e.removeChild(we,X)}}createRenderer(E,R){const X=this.delegate.createRenderer(E,R);if(!(E&&R&&R.data&&R.data.animation)){let Wt=this._rendererCache.get(X);return Wt||(Wt=new dr("",X,this.engine,()=>this._rendererCache.delete(X)),this._rendererCache.set(X,Wt)),Wt}const _e=R.id,we=R.id+"-"+this._currentId;this._currentId++,this.engine.register(we,E);const Le=Wt=>{Array.isArray(Wt)?Wt.forEach(Le):this.engine.registerTrigger(_e,we,E,Wt.name,Wt)};return R.data.animation.forEach(Le),new Dr(this,we,X,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(E,R,G){E>=0&&E<this._microtaskId?this._zone.run(()=>R(G)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(X=>{const[_e,we]=X;_e(we)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([R,G]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return U.\u0275fac=function(E){return new(E||U)(z.LFG(z.FYo),z.LFG(zo),z.LFG(z.R0b))},U.\u0275prov=z.Yz7({token:U,factory:U.\u0275fac}),U})();class dr{constructor(m,E,R,G){this.namespaceId=m,this.delegate=E,this.engine=R,this._onDestroy=G,this.destroyNode=this.delegate.destroyNode?X=>E.destroyNode(X):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(m,E){return this.delegate.createElement(m,E)}createComment(m){return this.delegate.createComment(m)}createText(m){return this.delegate.createText(m)}appendChild(m,E){this.delegate.appendChild(m,E),this.engine.onInsert(this.namespaceId,E,m,!1)}insertBefore(m,E,R,G=!0){this.delegate.insertBefore(m,E,R),this.engine.onInsert(this.namespaceId,E,m,G)}removeChild(m,E,R){this.engine.onRemove(this.namespaceId,E,this.delegate,R)}selectRootElement(m,E){return this.delegate.selectRootElement(m,E)}parentNode(m){return this.delegate.parentNode(m)}nextSibling(m){return this.delegate.nextSibling(m)}setAttribute(m,E,R,G){this.delegate.setAttribute(m,E,R,G)}removeAttribute(m,E,R){this.delegate.removeAttribute(m,E,R)}addClass(m,E){this.delegate.addClass(m,E)}removeClass(m,E){this.delegate.removeClass(m,E)}setStyle(m,E,R,G){this.delegate.setStyle(m,E,R,G)}removeStyle(m,E,R){this.delegate.removeStyle(m,E,R)}setProperty(m,E,R){"@"==E.charAt(0)&&E==at?this.disableAnimations(m,!!R):this.delegate.setProperty(m,E,R)}setValue(m,E){this.delegate.setValue(m,E)}listen(m,E,R){return this.delegate.listen(m,E,R)}disableAnimations(m,E){this.engine.disableAnimations(m,E)}}class Dr extends dr{constructor(m,E,R,G,X){super(E,R,G,X),this.factory=m,this.namespaceId=E}setProperty(m,E,R){"@"==E.charAt(0)?"."==E.charAt(1)&&E==at?this.disableAnimations(m,R=void 0===R||!!R):this.engine.process(this.namespaceId,m,E.slice(1),R):this.delegate.setProperty(m,E,R)}listen(m,E,R){if("@"==E.charAt(0)){const G=function Ir(U){switch(U){case"body":return document.body;case"document":return document;case"window":return window;default:return U}}(m);let X=E.slice(1),_e="";return"@"!=X.charAt(0)&&([X,_e]=function rr(U){const m=U.indexOf(".");return[U.substring(0,m),U.slice(m+1)]}(X)),this.engine.listen(this.namespaceId,G,X,_e,we=>{this.factory.scheduleListenerCallback(we._data||-1,R,we)})}return this.delegate.listen(m,E,R)}}const Ks=[{provide:yt,useClass:$},{provide:jn,useFactory:function Ar(){return new Gi}},{provide:zo,useClass:(()=>{class U extends zo{constructor(E,R,G,X){super(E.body,R,G)}ngOnDestroy(){this.flush()}}return U.\u0275fac=function(E){return new(E||U)(z.LFG(Me.K0),z.LFG(Ue),z.LFG(jn),z.LFG(z.z2F))},U.\u0275prov=z.Yz7({token:U,factory:U.\u0275fac}),U})()},{provide:z.FYo,useFactory:function Gr(U,m,E){return new nn(U,m,E)},deps:[p.se,zo,z.R0b]}],xi=[{provide:Ue,useFactory:()=>new S},{provide:z.QbO,useValue:"BrowserAnimations"},...Ks],ks=[{provide:Ue,useClass:te},{provide:z.QbO,useValue:"NoopAnimations"},...Ks];let Ro=(()=>{class U{static withConfig(E){return{ngModule:U,providers:E.disableAnimations?ks:xi}}}return U.\u0275fac=function(E){return new(E||U)},U.\u0275mod=z.oAB({type:U}),U.\u0275inj=z.cJS({providers:xi,imports:[p.b2]}),U})();const yi=[{path:"",pathMatch:"full",redirectTo:"register"},{path:"register",loadChildren:()=>Promise.all([j.e(235),j.e(783)]).then(j.bind(j,6783)).then(U=>U.RegisterModule)},{path:"login",loadChildren:()=>Promise.all([j.e(235),j.e(740)]).then(j.bind(j,1740)).then(U=>U.LoginModule)},{path:"dashboard",canActivate:[(()=>{class U{constructor(E){this.router=E}canActivate(){return!!JSON.parse(JSON.stringify(localStorage.getItem("user")))||this.router.navigate(["/login"])}}return U.\u0275fac=function(E){return new(E||U)(z.LFG(Ie.F0))},U.\u0275prov=z.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})()],loadChildren:()=>j.e(301).then(j.bind(j,1301)).then(U=>U.DashboardModule)}];let Ca=(()=>{class U{}return U.\u0275fac=function(E){return new(E||U)},U.\u0275mod=z.oAB({type:U}),U.\u0275inj=z.cJS({imports:[Ie.Bz.forRoot(yi),Ie.Bz]}),U})();var ma=j(1205);let Ru=(()=>{class U{}return U.\u0275fac=function(E){return new(E||U)},U.\u0275mod=z.oAB({type:U,bootstrap:[Ve]}),U.\u0275inj=z.cJS({imports:[p.b2,W.u5,W.UX,Ro,Te.JF,he.hO.initializeApp(de.N.firebase),ma.ww,Ce.yb,Ca]}),U})();de.N.production&&(0,z.G48)(),p.q6().bootstrapModule(Ru).catch(U=>console.error(U))},9751:(Xt,Je,j)=>{j.d(Je,{y:()=>Pe});var p=j(2961),z=j(727),W=j(8822),Te=j(9635),Ie=j(2416),Me=j(576),ke=j(2806);let Pe=(()=>{class Ce{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const We=new Ce;return We.source=this,We.operator=ht,We}subscribe(ht,We,Ht){const tt=function he(Ce){return Ce&&Ce instanceof p.Lv||function de(Ce){return Ce&&(0,Me.m)(Ce.next)&&(0,Me.m)(Ce.error)&&(0,Me.m)(Ce.complete)}(Ce)&&(0,z.Nn)(Ce)}(ht)?ht:new p.Hp(ht,We,Ht);return(0,ke.x)(()=>{const{operator:qe,source:Zt}=this;tt.add(qe?qe.call(tt,Zt):Zt?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(ht){try{return this._subscribe(ht)}catch(We){ht.error(We)}}forEach(ht,We){return new(We=Ve(We))((Ht,tt)=>{const qe=new p.Hp({next:Zt=>{try{ht(Zt)}catch(Yt){tt(Yt),qe.unsubscribe()}},error:tt,complete:Ht});this.subscribe(qe)})}_subscribe(ht){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(ht)}[W.L](){return this}pipe(...ht){return(0,Te.U)(ht)(this)}toPromise(ht){return new(ht=Ve(ht))((We,Ht)=>{let tt;this.subscribe(qe=>tt=qe,qe=>Ht(qe),()=>We(tt))})}}return Ce.create=yt=>new Ce(yt),Ce})();function Ve(Ce){var yt;return null!==(yt=Ce??Ie.v.Promise)&&void 0!==yt?yt:Promise}},7579:(Xt,Je,j)=>{j.d(Je,{x:()=>ke});var p=j(9751),z=j(727);const Te=(0,j(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=j(8737),Me=j(2806);let ke=(()=>{class Ve extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const Ce=new Pe(this,this);return Ce.operator=he,Ce}_throwIfClosed(){if(this.closed)throw new Te}next(he){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(he)}})}error(he){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(he)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:Ce,isStopped:yt,observers:ht}=this;return Ce||yt?z.Lc:(this.currentObservers=null,ht.push(he),new z.w0(()=>{this.currentObservers=null,(0,Ie.P)(ht,he)}))}_checkFinalizedStatuses(he){const{hasError:Ce,thrownError:yt,isStopped:ht}=this;Ce?he.error(yt):ht&&he.complete()}asObservable(){const he=new p.y;return he.source=this,he}}return Ve.create=(de,he)=>new Pe(de,he),Ve})();class Pe extends ke{constructor(de,he){super(),this.destination=de,this.source=he}next(de){var he,Ce;null===(Ce=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===Ce||Ce.call(he,de)}error(de){var he,Ce;null===(Ce=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===Ce||Ce.call(he,de)}complete(){var de,he;null===(he=null===(de=this.destination)||void 0===de?void 0:de.complete)||void 0===he||he.call(de)}_subscribe(de){var he,Ce;return null!==(Ce=null===(he=this.source)||void 0===he?void 0:he.subscribe(de))&&void 0!==Ce?Ce:z.Lc}}},2961:(Xt,Je,j)=>{j.d(Je,{Hp:()=>Ht,Lv:()=>Ce});var p=j(576),z=j(727),W=j(2416),Te=j(7849);function Ie(){}const Me=Ve("C",void 0,void 0);function Ve(me,it,rt){return{kind:me,value:it,error:rt}}var de=j(3410),he=j(2806);class Ce extends z.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,z.Nn)(it)&&it.add(this)):this.destination=Yt}static create(it,rt,It){return new Ht(it,rt,It)}next(it){this.isStopped?Zt(function Pe(me){return Ve("N",me,void 0)}(it),this):this._next(it)}error(it){this.isStopped?Zt(function ke(me){return Ve("E",void 0,me)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?Zt(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function ht(me,it){return yt.call(me,it)}class We{constructor(it){this.partialObserver=it}next(it){const{partialObserver:rt}=this;if(rt.next)try{rt.next(it)}catch(It){tt(It)}}error(it){const{partialObserver:rt}=this;if(rt.error)try{rt.error(it)}catch(It){tt(It)}else tt(it)}complete(){const{partialObserver:it}=this;if(it.complete)try{it.complete()}catch(rt){tt(rt)}}}class Ht extends Ce{constructor(it,rt,It){let ut;if(super(),(0,p.m)(it)||!it)ut={next:it??void 0,error:rt??void 0,complete:It??void 0};else{let ce;this&&W.v.useDeprecatedNextContext?(ce=Object.create(it),ce.unsubscribe=()=>this.unsubscribe(),ut={next:it.next&&ht(it.next,ce),error:it.error&&ht(it.error,ce),complete:it.complete&&ht(it.complete,ce)}):ut=it}this.destination=new We(ut)}}function tt(me){W.v.useDeprecatedSynchronousErrorHandling?(0,he.O)(me):(0,Te.h)(me)}function Zt(me,it){const{onStoppedNotification:rt}=W.v;rt&&de.z.setTimeout(()=>rt(me,it))}const Yt={closed:!0,next:Ie,error:function qe(me){throw me},complete:Ie}},727:(Xt,Je,j)=>{j.d(Je,{Lc:()=>Me,w0:()=>Ie,Nn:()=>ke});var p=j(576);const W=(0,j(3888).d)(Ve=>function(he){Ve(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((Ce,yt)=>`${yt+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var Te=j(8737);class Ie{constructor(de){this.initialTeardown=de,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let de;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const ht of he)ht.remove(this);else he.remove(this);const{initialTeardown:Ce}=this;if((0,p.m)(Ce))try{Ce()}catch(ht){de=ht instanceof W?ht.errors:[ht]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const ht of yt)try{Pe(ht)}catch(We){de=de??[],We instanceof W?de=[...de,...We.errors]:de.push(We)}}if(de)throw new W(de)}}add(de){var he;if(de&&de!==this)if(this.closed)Pe(de);else{if(de instanceof Ie){if(de.closed||de._hasParent(this))return;de._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(de)}}_hasParent(de){const{_parentage:he}=this;return he===de||Array.isArray(he)&&he.includes(de)}_addParent(de){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(de),he):he?[he,de]:de}_removeParent(de){const{_parentage:he}=this;he===de?this._parentage=null:Array.isArray(he)&&(0,Te.P)(he,de)}remove(de){const{_finalizers:he}=this;he&&(0,Te.P)(he,de),de instanceof Ie&&de._removeParent(this)}}Ie.EMPTY=(()=>{const Ve=new Ie;return Ve.closed=!0,Ve})();const Me=Ie.EMPTY;function ke(Ve){return Ve instanceof Ie||Ve&&"closed"in Ve&&(0,p.m)(Ve.remove)&&(0,p.m)(Ve.add)&&(0,p.m)(Ve.unsubscribe)}function Pe(Ve){(0,p.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(Xt,Je,j)=>{j.d(Je,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Xt,Je,j)=>{j.d(Je,{z:()=>Ie});var p=j(8189),W=j(7669),Te=j(8996);function Ie(...Me){return function z(){return(0,p.J)(1)}()((0,Te.D)(Me,(0,W.yG)(Me)))}},515:(Xt,Je,j)=>{j.d(Je,{E:()=>z});const z=new(j(9751).y)(Ie=>Ie.complete())},8996:(Xt,Je,j)=>{j.d(Je,{D:()=>it});var p=j(8421),z=j(5363),W=j(9468),Me=j(9751),Pe=j(2202),Ve=j(576),de=j(9672);function Ce(rt,It){if(!rt)throw new Error("Iterable cannot be null");return new Me.y(ut=>{(0,de.f)(ut,It,()=>{const ce=rt[Symbol.asyncIterator]();(0,de.f)(ut,It,()=>{ce.next().then(je=>{je.done?ut.complete():ut.next(je.value)})},0,!0)})})}var yt=j(3670),ht=j(8239),We=j(1144),Ht=j(6495),tt=j(2206),qe=j(4532),Zt=j(3260);function it(rt,It){return It?function me(rt,It){if(null!=rt){if((0,yt.c)(rt))return function Te(rt,It){return(0,p.Xf)(rt).pipe((0,W.R)(It),(0,z.Q)(It))}(rt,It);if((0,We.z)(rt))return function ke(rt,It){return new Me.y(ut=>{let ce=0;return It.schedule(function(){ce===rt.length?ut.complete():(ut.next(rt[ce++]),ut.closed||this.schedule())})})}(rt,It);if((0,ht.t)(rt))return function Ie(rt,It){return(0,p.Xf)(rt).pipe((0,W.R)(It),(0,z.Q)(It))}(rt,It);if((0,tt.D)(rt))return Ce(rt,It);if((0,Ht.T)(rt))return function he(rt,It){return new Me.y(ut=>{let ce;return(0,de.f)(ut,It,()=>{ce=rt[Pe.h](),(0,de.f)(ut,It,()=>{let je,se;try{({value:je,done:se}=ce.next())}catch(De){return void ut.error(De)}se?ut.complete():ut.next(je)},0,!0)}),()=>(0,Ve.m)(ce?.return)&&ce.return()})}(rt,It);if((0,Zt.L)(rt))return function Yt(rt,It){return Ce((0,Zt.Q)(rt),It)}(rt,It)}throw(0,qe.z)(rt)}(rt,It):(0,p.Xf)(rt)}},8421:(Xt,Je,j)=>{j.d(Je,{Xf:()=>yt});var p=j(655),z=j(1144),W=j(8239),Te=j(9751),Ie=j(3670),Me=j(2206),ke=j(4532),Pe=j(6495),Ve=j(3260),de=j(576),he=j(7849),Ce=j(8822);function yt(me){if(me instanceof Te.y)return me;if(null!=me){if((0,Ie.c)(me))return function ht(me){return new Te.y(it=>{const rt=me[Ce.L]();if((0,de.m)(rt.subscribe))return rt.subscribe(it);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,z.z)(me))return function We(me){return new Te.y(it=>{for(let rt=0;rt<me.length&&!it.closed;rt++)it.next(me[rt]);it.complete()})}(me);if((0,W.t)(me))return function Ht(me){return new Te.y(it=>{me.then(rt=>{it.closed||(it.next(rt),it.complete())},rt=>it.error(rt)).then(null,he.h)})}(me);if((0,Me.D)(me))return qe(me);if((0,Pe.T)(me))return function tt(me){return new Te.y(it=>{for(const rt of me)if(it.next(rt),it.closed)return;it.complete()})}(me);if((0,Ve.L)(me))return function Zt(me){return qe((0,Ve.Q)(me))}(me)}throw(0,ke.z)(me)}function qe(me){return new Te.y(it=>{(function Yt(me,it){var rt,It,ut,ce;return(0,p.mG)(this,void 0,void 0,function*(){try{for(rt=(0,p.KL)(me);!(It=yield rt.next()).done;)if(it.next(It.value),it.closed)return}catch(je){ut={error:je}}finally{try{It&&!It.done&&(ce=rt.return)&&(yield ce.call(rt))}finally{if(ut)throw ut.error}}it.complete()})})(me,it).catch(rt=>it.error(rt))})}},6451:(Xt,Je,j)=>{j.d(Je,{T:()=>Me});var p=j(8189),z=j(8421),W=j(515),Te=j(7669),Ie=j(8996);function Me(...ke){const Pe=(0,Te.yG)(ke),Ve=(0,Te._6)(ke,1/0),de=ke;return de.length?1===de.length?(0,z.Xf)(de[0]):(0,p.J)(Ve)((0,Ie.D)(de,Pe)):W.E}},9646:(Xt,Je,j)=>{j.d(Je,{of:()=>W});var p=j(7669),z=j(8996);function W(...Te){const Ie=(0,p.yG)(Te);return(0,z.D)(Te,Ie)}},5403:(Xt,Je,j)=>{j.d(Je,{x:()=>z});var p=j(2961);function z(Te,Ie,Me,ke,Pe){return new W(Te,Ie,Me,ke,Pe)}class W extends p.Lv{constructor(Ie,Me,ke,Pe,Ve,de){super(Ie),this.onFinalize=Ve,this.shouldUnsubscribe=de,this._next=Me?function(he){try{Me(he)}catch(Ce){Ie.error(Ce)}}:super._next,this._error=Pe?function(he){try{Pe(he)}catch(Ce){Ie.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=ke?function(){try{ke()}catch(he){Ie.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(Ie=this.onFinalize)||void 0===Ie||Ie.call(this))}}}},4351:(Xt,Je,j)=>{j.d(Je,{b:()=>W});var p=j(5577),z=j(576);function W(Te,Ie){return(0,z.m)(Ie)?(0,p.z)(Te,Ie,1):(0,p.z)(Te,1)}},6590:(Xt,Je,j)=>{j.d(Je,{d:()=>W});var p=j(4482),z=j(5403);function W(Te){return(0,p.e)((Ie,Me)=>{let ke=!1;Ie.subscribe((0,z.x)(Me,Pe=>{ke=!0,Me.next(Pe)},()=>{ke||Me.next(Te),Me.complete()}))})}},9300:(Xt,Je,j)=>{j.d(Je,{h:()=>W});var p=j(4482),z=j(5403);function W(Te,Ie){return(0,p.e)((Me,ke)=>{let Pe=0;Me.subscribe((0,z.x)(ke,Ve=>Te.call(Ie,Ve,Pe++)&&ke.next(Ve)))})}},590:(Xt,Je,j)=>{j.d(Je,{P:()=>ke});var p=j(6805),z=j(9300),W=j(5698),Te=j(6590),Ie=j(8068),Me=j(4671);function ke(Pe,Ve){const de=arguments.length>=2;return he=>he.pipe(Pe?(0,z.h)((Ce,yt)=>Pe(Ce,yt,he)):Me.y,(0,W.q)(1),de?(0,Te.d)(Ve):(0,Ie.T)(()=>new p.K))}},4004:(Xt,Je,j)=>{j.d(Je,{U:()=>W});var p=j(4482),z=j(5403);function W(Te,Ie){return(0,p.e)((Me,ke)=>{let Pe=0;Me.subscribe((0,z.x)(ke,Ve=>{ke.next(Te.call(Ie,Ve,Pe++))}))})}},8189:(Xt,Je,j)=>{j.d(Je,{J:()=>W});var p=j(5577),z=j(4671);function W(Te=1/0){return(0,p.z)(z.y,Te)}},5577:(Xt,Je,j)=>{j.d(Je,{z:()=>Pe});var p=j(4004),z=j(8421),W=j(4482),Te=j(9672),Ie=j(5403),ke=j(576);function Pe(Ve,de,he=1/0){return(0,ke.m)(de)?Pe((Ce,yt)=>(0,p.U)((ht,We)=>de(Ce,ht,yt,We))((0,z.Xf)(Ve(Ce,yt))),he):("number"==typeof de&&(he=de),(0,W.e)((Ce,yt)=>function Me(Ve,de,he,Ce,yt,ht,We,Ht){const tt=[];let qe=0,Zt=0,Yt=!1;const me=()=>{Yt&&!tt.length&&!qe&&de.complete()},it=It=>qe<Ce?rt(It):tt.push(It),rt=It=>{ht&&de.next(It),qe++;let ut=!1;(0,z.Xf)(he(It,Zt++)).subscribe((0,Ie.x)(de,ce=>{yt?.(ce),ht?it(ce):de.next(ce)},()=>{ut=!0},void 0,()=>{if(ut)try{for(qe--;tt.length&&qe<Ce;){const ce=tt.shift();We?(0,Te.f)(de,We,()=>rt(ce)):rt(ce)}me()}catch(ce){de.error(ce)}}))};return Ve.subscribe((0,Ie.x)(de,it,()=>{Yt=!0,me()})),()=>{Ht?.()}}(Ce,yt,Ve,he)))}},5363:(Xt,Je,j)=>{j.d(Je,{Q:()=>Te});var p=j(9672),z=j(4482),W=j(5403);function Te(Ie,Me=0){return(0,z.e)((ke,Pe)=>{ke.subscribe((0,W.x)(Pe,Ve=>(0,p.f)(Pe,Ie,()=>Pe.next(Ve),Me),()=>(0,p.f)(Pe,Ie,()=>Pe.complete(),Me),Ve=>(0,p.f)(Pe,Ie,()=>Pe.error(Ve),Me)))})}},5026:(Xt,Je,j)=>{j.d(Je,{R:()=>Te});var p=j(4482),z=j(5403);function W(Ie,Me,ke,Pe,Ve){return(de,he)=>{let Ce=ke,yt=Me,ht=0;de.subscribe((0,z.x)(he,We=>{const Ht=ht++;yt=Ce?Ie(yt,We,Ht):(Ce=!0,We),Pe&&he.next(yt)},Ve&&(()=>{Ce&&he.next(yt),he.complete()})))}}function Te(Ie,Me){return(0,p.e)(W(Ie,Me,arguments.length>=2,!0))}},3099:(Xt,Je,j)=>{j.d(Je,{B:()=>Ie});var p=j(8421),z=j(7579),W=j(2961),Te=j(4482);function Ie(ke={}){const{connector:Pe=(()=>new z.x),resetOnError:Ve=!0,resetOnComplete:de=!0,resetOnRefCountZero:he=!0}=ke;return Ce=>{let yt,ht,We,Ht=0,tt=!1,qe=!1;const Zt=()=>{ht?.unsubscribe(),ht=void 0},Yt=()=>{Zt(),yt=We=void 0,tt=qe=!1},me=()=>{const it=yt;Yt(),it?.unsubscribe()};return(0,Te.e)((it,rt)=>{Ht++,!qe&&!tt&&Zt();const It=We=We??Pe();rt.add(()=>{Ht--,0===Ht&&!qe&&!tt&&(ht=Me(me,he))}),It.subscribe(rt),!yt&&Ht>0&&(yt=new W.Hp({next:ut=>It.next(ut),error:ut=>{qe=!0,Zt(),ht=Me(Yt,Ve,ut),It.error(ut)},complete:()=>{tt=!0,Zt(),ht=Me(Yt,de),It.complete()}}),(0,p.Xf)(it).subscribe(yt))})(Ce)}}function Me(ke,Pe,...Ve){if(!0===Pe)return void ke();if(!1===Pe)return;const de=new W.Hp({next:()=>{de.unsubscribe(),ke()}});return Pe(...Ve).subscribe(de)}},8675:(Xt,Je,j)=>{j.d(Je,{O:()=>Te});var p=j(7272),z=j(7669),W=j(4482);function Te(...Ie){const Me=(0,z.yG)(Ie);return(0,W.e)((ke,Pe)=>{(Me?(0,p.z)(Ie,ke,Me):(0,p.z)(Ie,ke)).subscribe(Pe)})}},9468:(Xt,Je,j)=>{j.d(Je,{R:()=>z});var p=j(4482);function z(W,Te=0){return(0,p.e)((Ie,Me)=>{Me.add(W.schedule(()=>Ie.subscribe(Me),Te))})}},3900:(Xt,Je,j)=>{j.d(Je,{w:()=>Te});var p=j(8421),z=j(4482),W=j(5403);function Te(Ie,Me){return(0,z.e)((ke,Pe)=>{let Ve=null,de=0,he=!1;const Ce=()=>he&&!Ve&&Pe.complete();ke.subscribe((0,W.x)(Pe,yt=>{Ve?.unsubscribe();let ht=0;const We=de++;(0,p.Xf)(Ie(yt,We)).subscribe(Ve=(0,W.x)(Pe,Ht=>Pe.next(Me?Me(yt,Ht,We,ht++):Ht),()=>{Ve=null,Ce()}))},()=>{he=!0,Ce()}))})}},5698:(Xt,Je,j)=>{j.d(Je,{q:()=>Te});var p=j(515),z=j(4482),W=j(5403);function Te(Ie){return Ie<=0?()=>p.E:(0,z.e)((Me,ke)=>{let Pe=0;Me.subscribe((0,W.x)(ke,Ve=>{++Pe<=Ie&&(ke.next(Ve),Ie<=Pe&&ke.complete())}))})}},8505:(Xt,Je,j)=>{j.d(Je,{b:()=>Ie});var p=j(576),z=j(4482),W=j(5403),Te=j(4671);function Ie(Me,ke,Pe){const Ve=(0,p.m)(Me)||ke||Pe?{next:Me,error:ke,complete:Pe}:Me;return Ve?(0,z.e)((de,he)=>{var Ce;null===(Ce=Ve.subscribe)||void 0===Ce||Ce.call(Ve);let yt=!0;de.subscribe((0,W.x)(he,ht=>{var We;null===(We=Ve.next)||void 0===We||We.call(Ve,ht),he.next(ht)},()=>{var ht;yt=!1,null===(ht=Ve.complete)||void 0===ht||ht.call(Ve),he.complete()},ht=>{var We;yt=!1,null===(We=Ve.error)||void 0===We||We.call(Ve,ht),he.error(ht)},()=>{var ht,We;yt&&(null===(ht=Ve.unsubscribe)||void 0===ht||ht.call(Ve)),null===(We=Ve.finalize)||void 0===We||We.call(Ve)}))}):Te.y}},8068:(Xt,Je,j)=>{j.d(Je,{T:()=>Te});var p=j(6805),z=j(4482),W=j(5403);function Te(Me=Ie){return(0,z.e)((ke,Pe)=>{let Ve=!1;ke.subscribe((0,W.x)(Pe,de=>{Ve=!0,Pe.next(de)},()=>Ve?Pe.complete():Pe.error(Me())))})}function Ie(){return new p.K}},4408:(Xt,Je,j)=>{j.d(Je,{o:()=>Ie});var p=j(727);class z extends p.w0{constructor(ke,Pe){super()}schedule(ke,Pe=0){return this}}const W={setInterval(Me,ke,...Pe){const{delegate:Ve}=W;return Ve?.setInterval?Ve.setInterval(Me,ke,...Pe):setInterval(Me,ke,...Pe)},clearInterval(Me){const{delegate:ke}=W;return(ke?.clearInterval||clearInterval)(Me)},delegate:void 0};var Te=j(8737);class Ie extends z{constructor(ke,Pe){super(ke,Pe),this.scheduler=ke,this.work=Pe,this.pending=!1}schedule(ke,Pe=0){var Ve;if(this.closed)return this;this.state=ke;const de=this.id,he=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(he,de,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(he,this.id,Pe),this}requestAsyncId(ke,Pe,Ve=0){return W.setInterval(ke.flush.bind(ke,this),Ve)}recycleAsyncId(ke,Pe,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Pe;null!=Pe&&W.clearInterval(Pe)}execute(ke,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(ke,Pe);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ke,Pe){let de,Ve=!1;try{this.work(ke)}catch(he){Ve=!0,de=he||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),de}unsubscribe(){if(!this.closed){const{id:ke,scheduler:Pe}=this,{actions:Ve}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(Ve,this),null!=ke&&(this.id=this.recycleAsyncId(Pe,ke,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xt,Je,j)=>{j.d(Je,{v:()=>W});var p=j(6063);class z{constructor(Ie,Me=z.now){this.schedulerActionCtor=Ie,this.now=Me}schedule(Ie,Me=0,ke){return new this.schedulerActionCtor(this,Ie).schedule(ke,Me)}}z.now=p.l.now;class W extends z{constructor(Ie,Me=z.now){super(Ie,Me),this.actions=[],this._active=!1}flush(Ie){const{actions:Me}=this;if(this._active)return void Me.push(Ie);let ke;this._active=!0;do{if(ke=Ie.execute(Ie.state,Ie.delay))break}while(Ie=Me.shift());if(this._active=!1,ke){for(;Ie=Me.shift();)Ie.unsubscribe();throw ke}}}},4986:(Xt,Je,j)=>{j.d(Je,{z:()=>W});var p=j(4408);const W=new(j(7565).v)(p.o)},6063:(Xt,Je,j)=>{j.d(Je,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Xt,Je,j)=>{j.d(Je,{z:()=>p});const p={setTimeout(z,W,...Te){const{delegate:Ie}=p;return Ie?.setTimeout?Ie.setTimeout(z,W,...Te):setTimeout(z,W,...Te)},clearTimeout(z){const{delegate:W}=p;return(W?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(Xt,Je,j)=>{j.d(Je,{h:()=>z});const z=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xt,Je,j)=>{j.d(Je,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Xt,Je,j)=>{j.d(Je,{K:()=>z});const z=(0,j(3888).d)(W=>function(){W(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Xt,Je,j)=>{j.d(Je,{_6:()=>Me,jO:()=>Te,yG:()=>Ie});var p=j(576);function W(ke){return ke[ke.length-1]}function Te(ke){return(0,p.m)(W(ke))?ke.pop():void 0}function Ie(ke){return function z(ke){return ke&&(0,p.m)(ke.schedule)}(W(ke))?ke.pop():void 0}function Me(ke,Pe){return"number"==typeof W(ke)?ke.pop():Pe}},4742:(Xt,Je,j)=>{j.d(Je,{D:()=>Ie});const{isArray:p}=Array,{getPrototypeOf:z,prototype:W,keys:Te}=Object;function Ie(ke){if(1===ke.length){const Pe=ke[0];if(p(Pe))return{args:Pe,keys:null};if(function Me(ke){return ke&&"object"==typeof ke&&z(ke)===W}(Pe)){const Ve=Te(Pe);return{args:Ve.map(de=>Pe[de]),keys:Ve}}}return{args:ke,keys:null}}},8737:(Xt,Je,j)=>{function p(z,W){if(z){const Te=z.indexOf(W);0<=Te&&z.splice(Te,1)}}j.d(Je,{P:()=>p})},3888:(Xt,Je,j)=>{function p(z){const Te=z(Ie=>{Error.call(Ie),Ie.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}j.d(Je,{d:()=>p})},1810:(Xt,Je,j)=>{function p(z,W){return z.reduce((Te,Ie,Me)=>(Te[Ie]=W[Me],Te),{})}j.d(Je,{n:()=>p})},2806:(Xt,Je,j)=>{j.d(Je,{O:()=>Te,x:()=>W});var p=j(2416);let z=null;function W(Ie){if(p.v.useDeprecatedSynchronousErrorHandling){const Me=!z;if(Me&&(z={errorThrown:!1,error:null}),Ie(),Me){const{errorThrown:ke,error:Pe}=z;if(z=null,ke)throw Pe}}else Ie()}function Te(Ie){p.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=Ie)}},9672:(Xt,Je,j)=>{function p(z,W,Te,Ie=0,Me=!1){const ke=W.schedule(function(){Te(),Me?z.add(this.schedule(null,Ie)):this.unsubscribe()},Ie);if(z.add(ke),!Me)return ke}j.d(Je,{f:()=>p})},4671:(Xt,Je,j)=>{function p(z){return z}j.d(Je,{y:()=>p})},1144:(Xt,Je,j)=>{j.d(Je,{z:()=>p});const p=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(Xt,Je,j)=>{j.d(Je,{D:()=>z});var p=j(576);function z(W){return Symbol.asyncIterator&&(0,p.m)(W?.[Symbol.asyncIterator])}},576:(Xt,Je,j)=>{function p(z){return"function"==typeof z}j.d(Je,{m:()=>p})},3670:(Xt,Je,j)=>{j.d(Je,{c:()=>W});var p=j(8822),z=j(576);function W(Te){return(0,z.m)(Te[p.L])}},6495:(Xt,Je,j)=>{j.d(Je,{T:()=>W});var p=j(2202),z=j(576);function W(Te){return(0,z.m)(Te?.[p.h])}},8239:(Xt,Je,j)=>{j.d(Je,{t:()=>z});var p=j(576);function z(W){return(0,p.m)(W?.then)}},3260:(Xt,Je,j)=>{j.d(Je,{L:()=>Te,Q:()=>W});var p=j(655),z=j(576);function W(Ie){return(0,p.FC)(this,arguments,function*(){const ke=Ie.getReader();try{for(;;){const{value:Pe,done:Ve}=yield(0,p.qq)(ke.read());if(Ve)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Pe)}}finally{ke.releaseLock()}})}function Te(Ie){return(0,z.m)(Ie?.getReader)}},4482:(Xt,Je,j)=>{j.d(Je,{A:()=>z,e:()=>W});var p=j(576);function z(Te){return(0,p.m)(Te?.lift)}function W(Te){return Ie=>{if(z(Ie))return Ie.lift(function(Me){try{return Te(Me,this)}catch(ke){this.error(ke)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Xt,Je,j)=>{j.d(Je,{Z:()=>Te});var p=j(4004);const{isArray:z}=Array;function Te(Ie){return(0,p.U)(Me=>function W(Ie,Me){return z(Me)?Ie(...Me):Ie(Me)}(Ie,Me))}},9635:(Xt,Je,j)=>{j.d(Je,{U:()=>W,z:()=>z});var p=j(4671);function z(...Te){return W(Te)}function W(Te){return 0===Te.length?p.y:1===Te.length?Te[0]:function(Me){return Te.reduce((ke,Pe)=>Pe(ke),Me)}}},7849:(Xt,Je,j)=>{j.d(Je,{h:()=>W});var p=j(2416),z=j(3410);function W(Te){z.z.setTimeout(()=>{const{onUnhandledError:Ie}=p.v;if(!Ie)throw Te;Ie(Te)})}},4532:(Xt,Je,j)=>{function p(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Je,{z:()=>p})},655:(Xt,Je,j)=>{function Te(se,De){var pe={};for(var Re in se)Object.prototype.hasOwnProperty.call(se,Re)&&De.indexOf(Re)<0&&(pe[Re]=se[Re]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var mt=0;for(Re=Object.getOwnPropertySymbols(se);mt<Re.length;mt++)De.indexOf(Re[mt])<0&&Object.prototype.propertyIsEnumerable.call(se,Re[mt])&&(pe[Re[mt]]=se[Re[mt]])}return pe}function Pe(se,De,pe,Re){return new(pe||(pe=Promise))(function(bt,Ct){function Lt(cn){try{vt(Re.next(cn))}catch(en){Ct(en)}}function Kt(cn){try{vt(Re.throw(cn))}catch(en){Ct(en)}}function vt(cn){cn.done?bt(cn.value):function mt(bt){return bt instanceof pe?bt:new pe(function(Ct){Ct(bt)})}(cn.value).then(Lt,Kt)}vt((Re=Re.apply(se,De||[])).next())})}function tt(se){return this instanceof tt?(this.v=se,this):new tt(se)}function qe(se,De,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mt,Re=pe.apply(se,De||[]),bt=[];return mt={},Ct("next"),Ct("throw"),Ct("return"),mt[Symbol.asyncIterator]=function(){return this},mt;function Ct(fn){Re[fn]&&(mt[fn]=function(Bt){return new Promise(function($n,In){bt.push([fn,Bt,$n,In])>1||Lt(fn,Bt)})})}function Lt(fn,Bt){try{!function Kt(fn){fn.value instanceof tt?Promise.resolve(fn.value.v).then(vt,cn):en(bt[0][2],fn)}(Re[fn](Bt))}catch($n){en(bt[0][3],$n)}}function vt(fn){Lt("next",fn)}function cn(fn){Lt("throw",fn)}function en(fn,Bt){fn(Bt),bt.shift(),bt.length&&Lt(bt[0][0],bt[0][1])}}function Yt(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,De=se[Symbol.asyncIterator];return De?De.call(se):(se=function Ce(se){var De="function"==typeof Symbol&&Symbol.iterator,pe=De&&se[De],Re=0;if(pe)return pe.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Re>=se.length&&(se=void 0),{value:se&&se[Re++],done:!se}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),pe={},Re("next"),Re("throw"),Re("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function Re(bt){pe[bt]=se[bt]&&function(Ct){return new Promise(function(Lt,Kt){!function mt(bt,Ct,Lt,Kt){Promise.resolve(Kt).then(function(vt){bt({value:vt,done:Lt})},Ct)}(Lt,Kt,(Ct=se[bt](Ct)).done,Ct.value)})}}}j.d(Je,{FC:()=>qe,KL:()=>Yt,_T:()=>Te,mG:()=>Pe,qq:()=>tt})},6895:(Xt,Je,j)=>{j.d(Je,{Do:()=>Yt,EM:()=>bs,HT:()=>Ie,JF:()=>fs,K0:()=>ke,Mx:()=>ji,O5:()=>jr,Ov:()=>xt,PM:()=>fi,S$:()=>tt,V_:()=>de,Ye:()=>me,b0:()=>Zt,bD:()=>Ii,ez:()=>hs,mk:()=>qn,q:()=>W,sg:()=>ai,w_:()=>Me});var p=j(4650);let z=null;function W(){return z}function Ie(S){z||(z=S)}class Me{}const ke=new p.OlP("DocumentToken");let Pe=(()=>{class S{historyGo(N){throw new Error("Not implemented")}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275prov=p.Yz7({token:S,factory:function(){return function Ve(){return(0,p.LFG)(he)}()},providedIn:"platform"}),S})();const de=new p.OlP("Location Initialized");let he=(()=>{class S extends Pe{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(N){const Y=W().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",N,!1),()=>Y.removeEventListener("popstate",N)}onHashChange(N){const Y=W().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",N,!1),()=>Y.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,Y,ge){Ce()?this._history.pushState(N,Y,ge):this.location.hash=ge}replaceState(N,Y,ge){Ce()?this._history.replaceState(N,Y,ge):this.location.hash=ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return S.\u0275fac=function(N){return new(N||S)(p.LFG(ke))},S.\u0275prov=p.Yz7({token:S,factory:function(){return function yt(){return new he((0,p.LFG)(ke))}()},providedIn:"platform"}),S})();function Ce(){return!!window.history.pushState}function ht(S,$){if(0==S.length)return $;if(0==$.length)return S;let N=0;return S.endsWith("/")&&N++,$.startsWith("/")&&N++,2==N?S+$.substring(1):1==N?S+$:S+"/"+$}function We(S){const $=S.match(/#|\?|$/),N=$&&$.index||S.length;return S.slice(0,N-("/"===S[N-1]?1:0))+S.slice(N)}function Ht(S){return S&&"?"!==S[0]?"?"+S:S}let tt=(()=>{class S{historyGo(N){throw new Error("Not implemented")}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275prov=p.Yz7({token:S,factory:function(){return(0,p.f3M)(Zt)},providedIn:"root"}),S})();const qe=new p.OlP("appBaseHref");let Zt=(()=>{class S extends tt{constructor(N,Y){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=Y??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return ht(this._baseHref,N)}path(N=!1){const Y=this._platformLocation.pathname+Ht(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&N?`${Y}${ge}`:Y}pushState(N,Y,ge,Ke){const at=this.prepareExternalUrl(ge+Ht(Ke));this._platformLocation.pushState(N,Y,at)}replaceState(N,Y,ge,Ke){const at=this.prepareExternalUrl(ge+Ht(Ke));this._platformLocation.replaceState(N,Y,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return S.\u0275fac=function(N){return new(N||S)(p.LFG(Pe),p.LFG(qe,8))},S.\u0275prov=p.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Yt=(()=>{class S extends tt{constructor(N,Y){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(N){const Y=ht(this._baseHref,N);return Y.length>0?"#"+Y:Y}pushState(N,Y,ge,Ke){let at=this.prepareExternalUrl(ge+Ht(Ke));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.pushState(N,Y,at)}replaceState(N,Y,ge,Ke){let at=this.prepareExternalUrl(ge+Ht(Ke));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.replaceState(N,Y,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return S.\u0275fac=function(N){return new(N||S)(p.LFG(Pe),p.LFG(qe,8))},S.\u0275prov=p.Yz7({token:S,factory:S.\u0275fac}),S})(),me=(()=>{class S{constructor(N){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const Y=this._locationStrategy.getBaseHref();this._baseHref=We(It(Y)),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,Y=""){return this.path()==this.normalize(N+Ht(Y))}normalize(N){return S.stripTrailingSlash(function rt(S,$){return S&&$.startsWith(S)?$.substring(S.length):$}(this._baseHref,It(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,Y="",ge=null){this._locationStrategy.pushState(ge,"",N,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Ht(Y)),ge)}replaceState(N,Y="",ge=null){this._locationStrategy.replaceState(ge,"",N,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Ht(Y)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)})),()=>{const Y=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(Y,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",Y){this._urlChangeListeners.forEach(ge=>ge(N,Y))}subscribe(N,Y,ge){return this._subject.subscribe({next:N,error:Y,complete:ge})}}return S.normalizeQueryParams=Ht,S.joinWithSlash=ht,S.stripTrailingSlash=We,S.\u0275fac=function(N){return new(N||S)(p.LFG(tt))},S.\u0275prov=p.Yz7({token:S,factory:function(){return function it(){return new me((0,p.LFG)(tt))}()},providedIn:"root"}),S})();function It(S){return S.replace(/\/index.html$/,"")}function ji(S,$){$=encodeURIComponent($);for(const N of S.split(";")){const Y=N.indexOf("="),[ge,Ke]=-1==Y?[N,""]:[N.slice(0,Y),N.slice(Y+1)];if(ge.trim()===$)return decodeURIComponent(Ke)}return null}let qn=(()=>{class S{constructor(N,Y,ge,Ke){this._iterableDiffers=N,this._keyValueDiffers=Y,this._ngEl=ge,this._renderer=Ke,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(N){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof N?N.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(N){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof N?N.split(/\s+/):N,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const N=this._iterableDiffer.diff(this._rawClass);N&&this._applyIterableChanges(N)}else if(this._keyValueDiffer){const N=this._keyValueDiffer.diff(this._rawClass);N&&this._applyKeyValueChanges(N)}}_applyKeyValueChanges(N){N.forEachAddedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),N.forEachChangedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),N.forEachRemovedItem(Y=>{Y.previousValue&&this._toggleClass(Y.key,!1)})}_applyIterableChanges(N){N.forEachAddedItem(Y=>{if("string"!=typeof Y.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Y.item)}`);this._toggleClass(Y.item,!0)}),N.forEachRemovedItem(Y=>this._toggleClass(Y.item,!1))}_applyClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(Y=>this._toggleClass(Y,!0)):Object.keys(N).forEach(Y=>this._toggleClass(Y,!!N[Y])))}_removeClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(Y=>this._toggleClass(Y,!1)):Object.keys(N).forEach(Y=>this._toggleClass(Y,!1)))}_toggleClass(N,Y){(N=N.trim())&&N.split(/\s+/g).forEach(ge=>{Y?this._renderer.addClass(this._ngEl.nativeElement,ge):this._renderer.removeClass(this._ngEl.nativeElement,ge)})}}return S.\u0275fac=function(N){return new(N||S)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),S})();class Pi{constructor($,N,Y,ge){this.$implicit=$,this.ngForOf=N,this.index=Y,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{class S{constructor(N,Y,ge){this._viewContainer=N,this._template=Y,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const Y=this._viewContainer;N.forEachOperation((ge,Ke,at)=>{if(null==ge.previousIndex)Y.createEmbeddedView(this._template,new Pi(ge.item,this._ngForOf,-1,-1),null===at?void 0:at);else if(null==at)Y.remove(null===Ke?void 0:Ke);else if(null!==Ke){const nn=Y.get(Ke);Y.move(nn,at),Qi(nn,ge)}});for(let ge=0,Ke=Y.length;ge<Ke;ge++){const nn=Y.get(ge).context;nn.index=ge,nn.count=Ke,nn.ngForOf=this._ngForOf}N.forEachIdentityChange(ge=>{Qi(Y.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(N,Y){return!0}}return S.\u0275fac=function(N){return new(N||S)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),S})();function Qi(S,$){S.context.$implicit=$.item}let jr=(()=>{class S{constructor(N,Y){this._viewContainer=N,this._context=new hi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Jr("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Jr("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,Y){return!0}}return S.\u0275fac=function(N){return new(N||S)(p.Y36(p.s_b),p.Y36(p.Rgc))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),S})();class hi{constructor(){this.$implicit=null,this.ngIf=null}}function Jr(S,$){if($&&!$.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,p.AaK)($)}'.`)}class Oe{createSubscription($,N){return $.subscribe({next:N,error:Y=>{throw Y}})}dispose($){$.unsubscribe()}}class Ae{createSubscription($,N){return $.then(N,Y=>{throw Y})}dispose($){}}const Be=new Ae,gt=new Oe;let xt=(()=>{class S{constructor(N){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){return this._obj?N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue:(N&&this._subscribe(N),this._latestValue)}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,Y=>this._updateLatestValue(N,Y))}_selectStrategy(N){if((0,p.QGY)(N))return Be;if((0,p.F4k)(N))return gt;throw function _r(S,$){return new p.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,Y){N===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return S.\u0275fac=function(N){return new(N||S)(p.Y36(p.sBO,16))},S.\u0275pipe=p.Yjl({name:"async",type:S,pure:!1,standalone:!0}),S})(),hs=(()=>{class S{}return S.\u0275fac=function(N){return new(N||S)},S.\u0275mod=p.oAB({type:S}),S.\u0275inj=p.cJS({}),S})();const Ii="browser";function fi(S){return"server"===S}let bs=(()=>{class S{}return S.\u0275prov=(0,p.Yz7)({token:S,providedIn:"root",factory:()=>new To((0,p.LFG)(ke),window)}),S})();class To{constructor($,N){this.document=$,this.window=N,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const N=function jn(S,$){const N=S.getElementById($)||S.getElementsByName($)[0];if(N)return N;if("function"==typeof S.createTreeWalker&&S.body&&(S.body.createShadowRoot||S.body.attachShadow)){const Y=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let ge=Y.currentNode;for(;ge;){const Ke=ge.shadowRoot;if(Ke){const at=Ke.getElementById($)||Ke.querySelector(`[name="${$}"]`);if(at)return at}ge=Y.nextNode()}}return null}(this.document,$);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=$)}}scrollToElement($){const N=$.getBoundingClientRect(),Y=N.left+this.window.pageXOffset,ge=N.top+this.window.pageYOffset,Ke=this.offset();this.window.scrollTo(Y-Ke[0],ge-Ke[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=ns(this.window.history)||ns(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ns(S){return Object.getOwnPropertyDescriptor(S,"scrollRestoration")}class fs{}},529:(Xt,Je,j)=>{j.d(Je,{JF:()=>si,LE:()=>qe,WM:()=>de,eN:()=>bt});var p=j(6895),z=j(4650),W=j(9646),Te=j(9751),Ie=j(4351),Me=j(9300),ke=j(4004);class Pe{}class Ve{}class de{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(ue=>{const ze=ue.indexOf(":");if(ze>0){const lt=ue.slice(0,ze),Qt=lt.toLowerCase(),En=ue.slice(ze+1).trim();this.maybeSetNormalizedName(lt,Qt),this.headers.has(Qt)?this.headers.get(Qt).push(En):this.headers.set(Qt,[En])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(ue=>{let ze=ye[ue];const lt=ue.toLowerCase();"string"==typeof ze&&(ze=[ze]),ze.length>0&&(this.headers.set(lt,ze),this.maybeSetNormalizedName(ue,lt))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const ue=this.headers.get(ye.toLowerCase());return ue&&ue.length>0?ue[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,ue){return this.clone({name:ye,value:ue,op:"a"})}set(ye,ue){return this.clone({name:ye,value:ue,op:"s"})}delete(ye,ue){return this.clone({name:ye,value:ue,op:"d"})}maybeSetNormalizedName(ye,ue){this.normalizedNames.has(ue)||this.normalizedNames.set(ue,ye)}init(){this.lazyInit&&(this.lazyInit instanceof de?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(ue=>{this.headers.set(ue,ye.headers.get(ue)),this.normalizedNames.set(ue,ye.normalizedNames.get(ue))})}clone(ye){const ue=new de;return ue.lazyInit=this.lazyInit&&this.lazyInit instanceof de?this.lazyInit:this,ue.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),ue}applyUpdate(ye){const ue=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let ze=ye.value;if("string"==typeof ze&&(ze=[ze]),0===ze.length)return;this.maybeSetNormalizedName(ye.name,ue);const lt=("a"===ye.op?this.headers.get(ue):void 0)||[];lt.push(...ze),this.headers.set(ue,lt);break;case"d":const Qt=ye.value;if(Qt){let En=this.headers.get(ue);if(!En)return;En=En.filter(sr=>-1===Qt.indexOf(sr)),0===En.length?(this.headers.delete(ue),this.normalizedNames.delete(ue)):this.headers.set(ue,En)}else this.headers.delete(ue),this.normalizedNames.delete(ue)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(ue=>ye(this.normalizedNames.get(ue),this.headers.get(ue)))}}class Ce{encodeKey(ye){return Ht(ye)}encodeValue(ye){return Ht(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const ht=/%(\d[a-f0-9])/gi,We={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ht(Ye){return encodeURIComponent(Ye).replace(ht,(ye,ue)=>We[ue]??ye)}function tt(Ye){return`${Ye}`}class qe{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new Ce,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yt(Ye,ye){const ue=new Map;return Ye.length>0&&Ye.replace(/^\?/,"").split("&").forEach(lt=>{const Qt=lt.indexOf("="),[En,sr]=-1==Qt?[ye.decodeKey(lt),""]:[ye.decodeKey(lt.slice(0,Qt)),ye.decodeValue(lt.slice(Qt+1))],Rt=ue.get(En)||[];Rt.push(sr),ue.set(En,Rt)}),ue}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(ue=>{const ze=ye.fromObject[ue],lt=Array.isArray(ze)?ze.map(tt):[tt(ze)];this.map.set(ue,lt)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const ue=this.map.get(ye);return ue?ue[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,ue){return this.clone({param:ye,value:ue,op:"a"})}appendAll(ye){const ue=[];return Object.keys(ye).forEach(ze=>{const lt=ye[ze];Array.isArray(lt)?lt.forEach(Qt=>{ue.push({param:ze,value:Qt,op:"a"})}):ue.push({param:ze,value:lt,op:"a"})}),this.clone(ue)}set(ye,ue){return this.clone({param:ye,value:ue,op:"s"})}delete(ye,ue){return this.clone({param:ye,value:ue,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const ue=this.encoder.encodeKey(ye);return this.map.get(ye).map(ze=>ue+"="+this.encoder.encodeValue(ze)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const ue=new qe({encoder:this.encoder});return ue.cloneFrom=this.cloneFrom||this,ue.updates=(this.updates||[]).concat(ye),ue}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const ue=("a"===ye.op?this.map.get(ye.param):void 0)||[];ue.push(tt(ye.value)),this.map.set(ye.param,ue);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let ze=this.map.get(ye.param)||[];const lt=ze.indexOf(tt(ye.value));-1!==lt&&ze.splice(lt,1),ze.length>0?this.map.set(ye.param,ze):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Yt{constructor(){this.map=new Map}set(ye,ue){return this.map.set(ye,ue),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function it(Ye){return typeof ArrayBuffer<"u"&&Ye instanceof ArrayBuffer}function rt(Ye){return typeof Blob<"u"&&Ye instanceof Blob}function It(Ye){return typeof FormData<"u"&&Ye instanceof FormData}class ce{constructor(ye,ue,ze,lt){let Qt;if(this.url=ue,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function me(Ye){switch(Ye){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||lt?(this.body=void 0!==ze?ze:null,Qt=lt):Qt=ze,Qt&&(this.reportProgress=!!Qt.reportProgress,this.withCredentials=!!Qt.withCredentials,Qt.responseType&&(this.responseType=Qt.responseType),Qt.headers&&(this.headers=Qt.headers),Qt.context&&(this.context=Qt.context),Qt.params&&(this.params=Qt.params)),this.headers||(this.headers=new de),this.context||(this.context=new Yt),this.params){const En=this.params.toString();if(0===En.length)this.urlWithParams=ue;else{const sr=ue.indexOf("?");this.urlWithParams=ue+(-1===sr?"?":sr<ue.length-1?"&":"")+En}}else this.params=new qe,this.urlWithParams=ue}serializeBody(){return null===this.body?null:it(this.body)||rt(this.body)||It(this.body)||function ut(Ye){return typeof URLSearchParams<"u"&&Ye instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||It(this.body)?null:rt(this.body)?this.body.type||null:it(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const ue=ye.method||this.method,ze=ye.url||this.url,lt=ye.responseType||this.responseType,Qt=void 0!==ye.body?ye.body:this.body,En=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,sr=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let Rt=ye.headers||this.headers,Tr=ye.params||this.params;const Hn=ye.context??this.context;return void 0!==ye.setHeaders&&(Rt=Object.keys(ye.setHeaders).reduce((Pr,Cn)=>Pr.set(Cn,ye.setHeaders[Cn]),Rt)),ye.setParams&&(Tr=Object.keys(ye.setParams).reduce((Pr,Cn)=>Pr.set(Cn,ye.setParams[Cn]),Tr)),new ce(ue,ze,Qt,{params:Tr,headers:Rt,context:Hn,reportProgress:sr,responseType:lt,withCredentials:En})}}var je=(()=>((je=je||{})[je.Sent=0]="Sent",je[je.UploadProgress=1]="UploadProgress",je[je.ResponseHeader=2]="ResponseHeader",je[je.DownloadProgress=3]="DownloadProgress",je[je.Response=4]="Response",je[je.User=5]="User",je))();class se{constructor(ye,ue=200,ze="OK"){this.headers=ye.headers||new de,this.status=void 0!==ye.status?ye.status:ue,this.statusText=ye.statusText||ze,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class De extends se{constructor(ye={}){super(ye),this.type=je.ResponseHeader}clone(ye={}){return new De({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class pe extends se{constructor(ye={}){super(ye),this.type=je.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new pe({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Re extends se{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function mt(Ye,ye){return{body:ye,headers:Ye.headers,context:Ye.context,observe:Ye.observe,params:Ye.params,reportProgress:Ye.reportProgress,responseType:Ye.responseType,withCredentials:Ye.withCredentials}}let bt=(()=>{class Ye{constructor(ue){this.handler=ue}request(ue,ze,lt={}){let Qt;if(ue instanceof ce)Qt=ue;else{let Rt,Tr;Rt=lt.headers instanceof de?lt.headers:new de(lt.headers),lt.params&&(Tr=lt.params instanceof qe?lt.params:new qe({fromObject:lt.params})),Qt=new ce(ue,ze,void 0!==lt.body?lt.body:null,{headers:Rt,context:lt.context,params:Tr,reportProgress:lt.reportProgress,responseType:lt.responseType||"json",withCredentials:lt.withCredentials})}const En=(0,W.of)(Qt).pipe((0,Ie.b)(Rt=>this.handler.handle(Rt)));if(ue instanceof ce||"events"===lt.observe)return En;const sr=En.pipe((0,Me.h)(Rt=>Rt instanceof pe));switch(lt.observe||"body"){case"body":switch(Qt.responseType){case"arraybuffer":return sr.pipe((0,ke.U)(Rt=>{if(null!==Rt.body&&!(Rt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Rt.body}));case"blob":return sr.pipe((0,ke.U)(Rt=>{if(null!==Rt.body&&!(Rt.body instanceof Blob))throw new Error("Response is not a Blob.");return Rt.body}));case"text":return sr.pipe((0,ke.U)(Rt=>{if(null!==Rt.body&&"string"!=typeof Rt.body)throw new Error("Response is not a string.");return Rt.body}));default:return sr.pipe((0,ke.U)(Rt=>Rt.body))}case"response":return sr;default:throw new Error(`Unreachable: unhandled observe type ${lt.observe}}`)}}delete(ue,ze={}){return this.request("DELETE",ue,ze)}get(ue,ze={}){return this.request("GET",ue,ze)}head(ue,ze={}){return this.request("HEAD",ue,ze)}jsonp(ue,ze){return this.request("JSONP",ue,{params:(new qe).append(ze,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ue,ze={}){return this.request("OPTIONS",ue,ze)}patch(ue,ze,lt={}){return this.request("PATCH",ue,mt(lt,ze))}post(ue,ze,lt={}){return this.request("POST",ue,mt(lt,ze))}put(ue,ze,lt={}){return this.request("PUT",ue,mt(lt,ze))}}return Ye.\u0275fac=function(ue){return new(ue||Ye)(z.LFG(Pe))},Ye.\u0275prov=z.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();class Ct{constructor(ye,ue){this.next=ye,this.interceptor=ue}handle(ye){return this.interceptor.intercept(ye,this.next)}}const Lt=new z.OlP("HTTP_INTERCEPTORS");let Kt=(()=>{class Ye{intercept(ue,ze){return ze.handle(ue)}}return Ye.\u0275fac=function(ue){return new(ue||Ye)},Ye.\u0275prov=z.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const Kr=/^\)\]\}',?\n/;let Or=(()=>{class Ye{constructor(ue){this.xhrFactory=ue}handle(ue){if("JSONP"===ue.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Te.y(ze=>{const lt=this.xhrFactory.build();if(lt.open(ue.method,ue.urlWithParams),ue.withCredentials&&(lt.withCredentials=!0),ue.headers.forEach((Dn,Gt)=>lt.setRequestHeader(Dn,Gt.join(","))),ue.headers.has("Accept")||lt.setRequestHeader("Accept","application/json, text/plain, */*"),!ue.headers.has("Content-Type")){const Dn=ue.detectContentTypeHeader();null!==Dn&&lt.setRequestHeader("Content-Type",Dn)}if(ue.responseType){const Dn=ue.responseType.toLowerCase();lt.responseType="json"!==Dn?Dn:"text"}const Qt=ue.serializeBody();let En=null;const sr=()=>{if(null!==En)return En;const Dn=lt.statusText||"OK",Gt=new de(lt.getAllResponseHeaders()),Ft=function Kn(Ye){return"responseURL"in Ye&&Ye.responseURL?Ye.responseURL:/^X-Request-URL:/m.test(Ye.getAllResponseHeaders())?Ye.getResponseHeader("X-Request-URL"):null}(lt)||ue.url;return En=new De({headers:Gt,status:lt.status,statusText:Dn,url:Ft}),En},Rt=()=>{let{headers:Dn,status:Gt,statusText:Ft,url:pt}=sr(),Dt=null;204!==Gt&&(Dt=typeof lt.response>"u"?lt.responseText:lt.response),0===Gt&&(Gt=Dt?200:0);let wn=Gt>=200&&Gt<300;if("json"===ue.responseType&&"string"==typeof Dt){const yn=Dt;Dt=Dt.replace(Kr,"");try{Dt=""!==Dt?JSON.parse(Dt):null}catch(Tn){Dt=yn,wn&&(wn=!1,Dt={error:Tn,text:Dt})}}wn?(ze.next(new pe({body:Dt,headers:Dn,status:Gt,statusText:Ft,url:pt||void 0})),ze.complete()):ze.error(new Re({error:Dt,headers:Dn,status:Gt,statusText:Ft,url:pt||void 0}))},Tr=Dn=>{const{url:Gt}=sr(),Ft=new Re({error:Dn,status:lt.status||0,statusText:lt.statusText||"Unknown Error",url:Gt||void 0});ze.error(Ft)};let Hn=!1;const Pr=Dn=>{Hn||(ze.next(sr()),Hn=!0);let Gt={type:je.DownloadProgress,loaded:Dn.loaded};Dn.lengthComputable&&(Gt.total=Dn.total),"text"===ue.responseType&&!!lt.responseText&&(Gt.partialText=lt.responseText),ze.next(Gt)},Cn=Dn=>{let Gt={type:je.UploadProgress,loaded:Dn.loaded};Dn.lengthComputable&&(Gt.total=Dn.total),ze.next(Gt)};return lt.addEventListener("load",Rt),lt.addEventListener("error",Tr),lt.addEventListener("timeout",Tr),lt.addEventListener("abort",Tr),ue.reportProgress&&(lt.addEventListener("progress",Pr),null!==Qt&&lt.upload&&lt.upload.addEventListener("progress",Cn)),lt.send(Qt),ze.next({type:je.Sent}),()=>{lt.removeEventListener("error",Tr),lt.removeEventListener("abort",Tr),lt.removeEventListener("load",Rt),lt.removeEventListener("timeout",Tr),ue.reportProgress&&(lt.removeEventListener("progress",Pr),null!==Qt&&lt.upload&&lt.upload.removeEventListener("progress",Cn)),lt.readyState!==lt.DONE&&lt.abort()}})}}return Ye.\u0275fac=function(ue){return new(ue||Ye)(z.LFG(p.JF))},Ye.\u0275prov=z.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const Br=new z.OlP("XSRF_COOKIE_NAME"),on=new z.OlP("XSRF_HEADER_NAME");class yr{}let Rr=(()=>{class Ye{constructor(ue,ze,lt){this.doc=ue,this.platform=ze,this.cookieName=lt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ue=this.doc.cookie||"";return ue!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,p.Mx)(ue,this.cookieName),this.lastCookieString=ue),this.lastToken}}return Ye.\u0275fac=function(ue){return new(ue||Ye)(z.LFG(p.K0),z.LFG(z.Lbi),z.LFG(Br))},Ye.\u0275prov=z.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),ir=(()=>{class Ye{constructor(ue,ze){this.tokenService=ue,this.headerName=ze}intercept(ue,ze){const lt=ue.url.toLowerCase();if("GET"===ue.method||"HEAD"===ue.method||lt.startsWith("http://")||lt.startsWith("https://"))return ze.handle(ue);const Qt=this.tokenService.getToken();return null!==Qt&&!ue.headers.has(this.headerName)&&(ue=ue.clone({headers:ue.headers.set(this.headerName,Qt)})),ze.handle(ue)}}return Ye.\u0275fac=function(ue){return new(ue||Ye)(z.LFG(yr),z.LFG(on))},Ye.\u0275prov=z.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),Tt=(()=>{class Ye{constructor(ue,ze){this.backend=ue,this.injector=ze,this.chain=null}handle(ue){if(null===this.chain){const ze=this.injector.get(Lt,[]);this.chain=ze.reduceRight((lt,Qt)=>new Ct(lt,Qt),this.backend)}return this.chain.handle(ue)}}return Ye.\u0275fac=function(ue){return new(ue||Ye)(z.LFG(Ve),z.LFG(z.zs3))},Ye.\u0275prov=z.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),ar=(()=>{class Ye{static disable(){return{ngModule:Ye,providers:[{provide:ir,useClass:Kt}]}}static withOptions(ue={}){return{ngModule:Ye,providers:[ue.cookieName?{provide:Br,useValue:ue.cookieName}:[],ue.headerName?{provide:on,useValue:ue.headerName}:[]]}}}return Ye.\u0275fac=function(ue){return new(ue||Ye)},Ye.\u0275mod=z.oAB({type:Ye}),Ye.\u0275inj=z.cJS({providers:[ir,{provide:Lt,useExisting:ir,multi:!0},{provide:yr,useClass:Rr},{provide:Br,useValue:"XSRF-TOKEN"},{provide:on,useValue:"X-XSRF-TOKEN"}]}),Ye})(),si=(()=>{class Ye{}return Ye.\u0275fac=function(ue){return new(ue||Ye)},Ye.\u0275mod=z.oAB({type:Ye}),Ye.\u0275inj=z.cJS({providers:[bt,{provide:Pe,useClass:Tt},Or,{provide:Ve,useExisting:Or}],imports:[ar.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Ye})()},4650:(Xt,Je,j)=>{j.d(Je,{$8M:()=>ko,$Z:()=>mm,AFp:()=>BE,ALo:()=>aE,AaK:()=>Pe,AsE:()=>kf,CHM:()=>Hs,CRH:()=>yE,CZH:()=>Gy,CqO:()=>pu,D6c:()=>OD,DdM:()=>X0,EJc:()=>ZI,EpF:()=>Qm,F4k:()=>pg,FYo:()=>Ad,FiY:()=>pn,G48:()=>mD,Gf:()=>gE,GfV:()=>Kl,Gpc:()=>he,JOm:()=>to,KtG:()=>uo,LFG:()=>Ki,LSH:()=>Cd,Lbi:()=>zI,Lck:()=>jw,MAs:()=>Qv,MMx:()=>O_,NdJ:()=>gu,O4$:()=>nn,OlP:()=>Vr,Oqu:()=>Mu,PXZ:()=>cD,Q6J:()=>Ns,QGY:()=>fg,QP$:()=>Yn,QbO:()=>WI,Qsj:()=>Ph,R0b:()=>Nu,RDi:()=>y,Rgc:()=>Fg,SBq:()=>Oc,Sil:()=>QI,Suo:()=>mE,TTD:()=>Mi,TgZ:()=>Df,VKq:()=>eE,WLB:()=>tE,X6Q:()=>gD,XFs:()=>Tt,Xpm:()=>pt,Xts:()=>zu,Y36:()=>Bc,YKP:()=>G0,YNc:()=>Yi,Yjl:()=>ot,Yz7:()=>Bt,Z0I:()=>ii,ZZ4:()=>o0,_Bn:()=>H0,_UZ:()=>cg,_Vd:()=>fl,_c5:()=>RD,_uU:()=>rd,aQg:()=>a0,c2e:()=>KI,cJS:()=>In,cg1:()=>Ag,dDg:()=>oD,dqk:()=>lt,eFA:()=>XE,ekj:()=>uy,eoX:()=>YE,f3M:()=>x,g9A:()=>$E,h0i:()=>$f,hGG:()=>PD,iGM:()=>pE,ifc:()=>ze,ip1:()=>UE,jDz:()=>W0,kL8:()=>Mg,kcU:()=>Dr,lG2:()=>be,lcZ:()=>uE,lqb:()=>Ia,lri:()=>qE,n5z:()=>Nr,oAB:()=>Tn,oxw:()=>gg,q4F:()=>Ep,qLn:()=>Ga,qOj:()=>wo,qZA:()=>Wd,rWj:()=>ZE,sBO:()=>yD,sIi:()=>Gd,s_b:()=>jy,soG:()=>zy,tb:()=>HE,tp0:()=>vn,uIk:()=>zd,vHH:()=>We,vpe:()=>Ml,wAp:()=>An,xp6:()=>Uh,z2F:()=>Wy,zSh:()=>gp,zs3:()=>za});var p=j(7579),z=j(727),W=j(9751),Te=j(6451),Ie=j(3099);function Me(n){for(let r in n)if(n[r]===Me)return r;throw Error("Could not find renamed property on target object.")}function ke(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ve(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const de=Me({__forward_ref__:Me});function he(n){return n.__forward_ref__=he,n.toString=function(){return Pe(this())},n}function Ce(n){return yt(n)?n():n}function yt(n){return"function"==typeof n&&n.hasOwnProperty(de)&&n.__forward_ref__===he}class We extends Error{constructor(r,o){super(function Ht(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function tt(n){return"string"==typeof n?n:null==n?"":String(n)}function it(n,r){throw new We(-201,!1)}function Kt(n,r){null==n&&function vt(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Bt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function In(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zn(n){return Kr(n,on)||Kr(n,Rr)}function ii(n){return null!==Zn(n)}function Kr(n,r){return n.hasOwnProperty(r)?n[r]:null}function Br(n){return n&&(n.hasOwnProperty(yr)||n.hasOwnProperty(ir))?n[yr]:null}const on=Me({\u0275prov:Me}),yr=Me({\u0275inj:Me}),Rr=Me({ngInjectableDef:Me}),ir=Me({ngInjectorDef:Me});var Tt=(()=>((Tt=Tt||{})[Tt.Default=0]="Default",Tt[Tt.Host=1]="Host",Tt[Tt.Self=2]="Self",Tt[Tt.SkipSelf=4]="SkipSelf",Tt[Tt.Optional=8]="Optional",Tt))();let cr;function ar(n){const r=cr;return cr=n,r}function si(n,r,o){const a=Zn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Tt.Optional?null:void 0!==r?r:void it(Pe(n))}function qr(n){return{toString:n}.toString()}var Ye=(()=>((Ye=Ye||{})[Ye.OnPush=0]="OnPush",Ye[Ye.Default=1]="Default",Ye))(),ze=(()=>{return(n=ze||(ze={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ze;var n})();const lt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),sr={},Rt=[],Tr=Me({\u0275cmp:Me}),Hn=Me({\u0275dir:Me}),Pr=Me({\u0275pipe:Me}),Cn=Me({\u0275mod:Me}),Dn=Me({\u0275fac:Me}),Gt=Me({__NG_ELEMENT_ID__:Me});let Ft=0;function pt(n){return qr(()=>{const o=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ye.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ze.Emulated,id:"c"+Ft++,styles:n.styles||Rt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=oe(n.inputs,a),l.outputs=oe(n.outputs),v&&v.forEach(C=>C(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(wn).filter(yn):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(dn).filter(yn):null,l})}function wn(n){return xe(n)||Ot(n)}function yn(n){return null!==n}function Tn(n){return qr(()=>({type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function oe(n,r){if(null==n)return sr;const o={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=a,r&&(r[l]=h)}return o}const be=pt;function ot(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function xe(n){return n[Tr]||null}function Ot(n){return n[Hn]||null}function dn(n){return n[Pr]||null}function Yn(n){const r=xe(n)||Ot(n)||dn(n);return null!==r&&r.standalone}function vr(n,r){const o=n[Cn]||null;if(!o&&!0===r)throw new Error(`Type ${Pe(n)} does not have '\u0275mod' property.`);return o}function Jr(n){return Array.isArray(n)&&"object"==typeof n[1]}function gi(n){return Array.isArray(n)&&!0===n[1]}function Hi(n){return 0!=(8&n.flags)}function Ji(n){return 2==(2&n.flags)}function ea(n){return 1==(1&n.flags)}function Sr(n){return null!==n.template}function ui(n){return 0!=(256&n[2])}function Xi(n,r){return n.hasOwnProperty(Dn)?n[Dn]:null}class es{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Mi(){return wi}function wi(n){return n.type.prototype.ngOnChanges&&(n.setInput=Oi),oo}function oo(){const n=bo(this),r=n?.current;if(r){const o=n.previous;if(o===sr)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Oi(n,r,o,a){const l=bo(n)||function hs(n,r){return n[js]=r}(n,{previous:sr,current:null}),h=l.current||(l.current={}),v=l.previous,C=this.declaredInputs[o],M=v[C];h[C]=new es(M&&M.currentValue,r,v===sr),n[a]=r}Mi.ngInherit=!0;const js="__ngSimpleChanges__";function bo(n){return n[js]||null}function xr(n){for(;Array.isArray(n);)n=n[0];return n}function ns(n,r){return xr(r[n])}function jn(n,r){return xr(r[n.index])}function fs(n,r){return n.data[r]}function Gi(n,r){return n[r]}function mr(n,r){const o=r[n];return Jr(o)?o:o[0]}function $s(n){return 64==(64&n[2])}function ps(n,r){return null==r?null:n[r]}function ra(n){n[18]=0}function $r(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const bn={lFrame:sa(null),bindingsEnabled:!0};function ms(){return bn.bindingsEnabled}function _t(){return bn.lFrame.lView}function er(){return bn.lFrame.tView}function Hs(n){return bn.lFrame.contextLView=n,n[8]}function uo(n){return bn.lFrame.contextLView=null,n}function Xr(){let n=Gs();for(;null!==n&&64===n.type;)n=n.parent;return n}function Gs(){return bn.lFrame.currentTNode}function Li(n,r){const o=bn.lFrame;o.currentTNode=n,o.isParent=r}function zs(){return bn.lFrame.isParent}function A(){const n=bn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Jt(){return bn.lFrame.bindingIndex++}function Mn(n){const r=bn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Vi(n,r){const o=bn.lFrame;o.bindingIndex=o.bindingRootIndex=n,lo(r)}function lo(n){bn.lFrame.currentDirectiveIndex=n}function ga(){return bn.lFrame.currentQueryIndex}function ho(n){bn.lFrame.currentQueryIndex=n}function zo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Os(n,r,o){if(o&Tt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||o&Tt.Host||(l=zo(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=bn.lFrame=ia();return a.currentTNode=r,a.lView=n,!0}function la(n){const r=ia(),o=n[1];bn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function ia(){const n=bn.lFrame,r=null===n?null:n.child;return null===r?sa(n):r}function sa(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function No(){const n=bn.lFrame;return bn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const S=No;function $(){const n=No();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ge(){return bn.lFrame.selectedIndex}function Ke(n){bn.lFrame.selectedIndex=n}function at(){const n=bn.lFrame;return fs(n.tView,n.selectedIndex)}function nn(){bn.lFrame.currentNamespace="svg"}function Dr(){!function Ir(){bn.lFrame.currentNamespace=null}()}function Ar(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const h=n.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:M,ngAfterViewChecked:V,ngOnDestroy:Q}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-o,v),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),M&&(n.viewHooks||(n.viewHooks=[])).push(-o,M),V&&((n.viewHooks||(n.viewHooks=[])).push(o,V),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,V)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Q)}}function Gr(n,r,o){ks(n,r,3,o)}function Ks(n,r,o,a){(3&n[2])===o&&ks(n,r,o,a)}function xi(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function ks(n,r,o,a){const h=a??-1,v=r.length-1;let C=0;for(let M=void 0!==a?65535&n[18]:0;M<v;M++)if("number"==typeof r[M+1]){if(C=r[M],null!=a&&C>=a)break}else r[M]<0&&(n[18]+=65536),(C<h||-1==h)&&(Ro(n,o,r,M),n[18]=(4294901760&n[18])+M+2),M++}function Ro(n,r,o,a){const l=o[a]<0,h=o[a+1],C=n[l?-o[a]:o[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class fo{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function E(n,r,o){let a=0;for(;a<o.length;){const l=o[a];if("number"==typeof l){if(0!==l)break;a++;const h=o[a++],v=o[a++],C=o[a++];n.setAttribute(r,v,C,h)}else{const h=l,v=o[++a];G(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function R(n){return 3===n||4===n||6===n}function G(n){return 64===n.charCodeAt(0)}function X(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?o=l:0===o||_e(n,o,l,null,-1===o||2===o?r[++a]:null)}}return n}function _e(n,r,o,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){v=-1;break}if(C>r){v=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===o){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,o),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function we(n){return-1!==n}function Le(n){return 32767&n}function Wt(n,r){let o=function st(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let jt=!0;function tr(n){const r=jt;return jt=n,r}let Rn=0;const ur={};function qt(n,r){const o=Vt(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,bi(a.data,n),bi(r,null),bi(a.blueprint,null));const l=Ze(n,r),h=n.injectorIndex;if(we(l)){const v=Le(l),C=Wt(l,r),M=C[1].data;for(let V=0;V<8;V++)r[h+V]=C[v+V]|M[v+V]}return r[h+8]=l,h}function bi(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Vt(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ze(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,l=r;for(;null!==l;){if(a=Ut(l),null===a)return-1;if(o++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function ft(n,r,o){!function Pt(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Gt)&&(a=o[Gt]),null==a&&(a=o[Gt]=Rn++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,o)}function rs(n,r,o){if(o&Tt.Optional||void 0!==n)return n;it()}function qs(n,r,o,a){if(o&Tt.Optional&&void 0===a&&(a=null),0==(o&(Tt.Self|Tt.Host))){const l=n[9],h=ar(void 0);try{return l?l.get(r,a,o&Tt.Optional):si(r,a,o&Tt.Optional)}finally{ar(h)}}return rs(a,0,o)}function po(n,r,o,a=Tt.Default,l){if(null!==n){if(1024&r[2]){const v=function Er(n,r,o,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=Wo(h,v,o,a|Tt.Self,ur);if(C!==ur)return C;let M=h.parent;if(!M){const V=v[21];if(V){const Q=V.get(o,ur,a);if(Q!==ur)return Q}M=Ut(v),v=v[15]}h=M}return l}(n,r,o,a,ur);if(v!==ur)return v}const h=Wo(n,r,o,a,ur);if(h!==ur)return h}return qs(r,o,a,l)}function Wo(n,r,o,a,l){const h=function gn(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Gt)?n[Gt]:void 0;return"number"==typeof r?r>=0?255&r:mn:r}(o);if("function"==typeof h){if(!Os(r,n,a))return a&Tt.Host?rs(l,0,a):qs(r,o,a,l);try{const v=h(a);if(null!=v||a&Tt.Optional)return v;it()}finally{S()}}else if("number"==typeof h){let v=null,C=Vt(n,r),M=-1,V=a&Tt.Host?r[16][6]:null;for((-1===C||a&Tt.SkipSelf)&&(M=-1===C?Ze(n,r):r[C+8],-1!==M&&On(a,!1)?(v=r[1],C=Le(M),r=Wt(M,r)):C=-1);-1!==C;){const Q=r[1];if(Pn(h,C,Q.data)){const ne=Ko(C,r,o,v,a,V);if(ne!==ur)return ne}M=r[C+8],-1!==M&&On(a,r[1].data[C+8]===V)&&Pn(h,C,r)?(v=Q,C=Le(M),r=Wt(M,r)):C=-1}}return l}function Ko(n,r,o,a,l,h){const v=r[1],C=v.data[n+8],Q=Po(C,v,o,null==a?Ji(C)&&jt:a!=v&&0!=(3&C.type),l&Tt.Host&&h===C);return null!==Q?Oo(r,v,Q,C):ur}function Po(n,r,o,a,l){const h=n.providerIndexes,v=r.data,C=1048575&h,M=n.directiveStart,Q=h>>20,Se=l?C+Q:n.directiveEnd;for(let Ge=a?C:C+Q;Ge<Se;Ge++){const Et=v[Ge];if(Ge<M&&o===Et||Ge>=M&&Et.type===o)return Ge}if(l){const Ge=v[M];if(Ge&&Sr(Ge)&&Ge.type===o)return M}return null}function Oo(n,r,o,a){let l=n[o];const h=r.data;if(function Cs(n){return n instanceof fo}(l)){const v=l;v.resolving&&function Zt(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new We(-200,`Circular dependency in DI detected for ${n}${o}`)}(function qe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tt(n)}(h[o]));const C=tr(v.canSeeViewProviders);v.resolving=!0;const M=v.injectImpl?ar(v.injectImpl):null;Os(n,a,Tt.Default);try{l=n[o]=v.factory(void 0,h,n,a),r.firstCreatePass&&o>=a.directiveStart&&function pi(n,r,o){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=wi(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,v)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,h))}(o,h[o],r)}finally{null!==M&&ar(M),tr(C),v.resolving=!1,S()}}return l}function Pn(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function On(n,r){return!(n&Tt.Self||n&Tt.Host&&r)}class or{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return po(this._tNode,this._lView,r,a,o)}}function mn(){return new or(Xr(),_t())}function Nr(n){return qr(()=>{const r=n.prototype.constructor,o=r[Dn]||is(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Dn]||is(l);if(h&&h!==o)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function is(n){return yt(n)?()=>{const r=is(Ce(n));return r&&r()}:Xi(n)}function Ut(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function ko(n){return function Lr(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let l=0;for(;l<a;){const h=o[l];if(R(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof o[l];)l++;else{if(h===r)return o[l+1];l+=2}}}return null}(Xr(),n)}const li="__parameters__";function go(n,r,o){return qr(()=>{const a=function Fo(n){return function(...o){if(n){const a=n(...o);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return C.annotation=v,C;function C(M,V,Q){const ne=M.hasOwnProperty(li)?M[li]:Object.defineProperty(M,li,{value:[]})[li];for(;ne.length<=Q;)ne.push(null);return(ne[Q]=ne[Q]||[]).push(v),M}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Vr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Bt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ss(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),ss(a,r)):r!==n&&r.push(a)}return r}function Lo(n,r){n.forEach(o=>Array.isArray(o)?Lo(o,r):r(o))}function ya(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Na(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function os(n,r,o){let a=w(n,r);return a>=0?n[1|a]=o:(a=~a,function Zs(n,r,o,a){let l=n.length;if(l==r)n.push(o,a);else if(1===l)n.push(a,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function Ja(n,r){const o=w(n,r);if(o>=0)return n[1|o]}function w(n,r){return function _(n,r,o){let a=0,l=n.length>>o;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<o];if(r===v)return h<<o;v>r?l=h:a=h+1}return~(l<<o)}(n,r,1)}const nr={},as="__NG_DI_FLAG__",ys="ngTempTokenPath",Ss=/\n/gm,Fa="__source";let Yo;function va(n){const r=Yo;return Yo=n,r}function La(n,r=Tt.Default){if(void 0===Yo)throw new We(-203,!1);return null===Yo?si(n,void 0,r):Yo.get(n,r&Tt.Optional?null:void 0,r)}function Ki(n,r=Tt.Default){return(function Bn(){return cr}()||La)(Ce(n),r)}function x(n,r=Tt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Ki(n,r)}function F(n){const r=[];for(let o=0;o<n.length;o++){const a=Ce(n[o]);if(Array.isArray(a)){if(0===a.length)throw new We(900,!1);let l,h=Tt.Default;for(let v=0;v<a.length;v++){const C=a[v],M=le(C);"number"==typeof M?-1===M?l=C.token:h|=M:l=C}r.push(Ki(l,h))}else r.push(Ki(a))}return r}function q(n,r){return n[as]=r,n.prototype[as]=r,n}function le(n){return n[as]}const pn=q(go("Optional"),8),vn=q(go("SkipSelf"),4);var to=(()=>((to=to||{})[to.Important=1]="Important",to[to.DashCase=2]="DashCase",to))();const Vu=new Map;let hc=0;const Ua="__ngContext__";function _o(n,r){Jr(r)?(n[Ua]=r[20],function Jo(n){Vu.set(n[20],n)}(r)):n[Ua]=r}function yc(n,r){return undefined(n,r)}function Pa(n){const r=n[3];return gi(r)?r[3]:r}function _i(n){return Bl(n[13])}function Eu(n){return Bl(n[4])}function Bl(n){for(;null!==n&&!gi(n);)n=n[4];return n}function tu(n,r,o,a,l){if(null!=a){let h,v=!1;gi(a)?h=a:Jr(a)&&(v=!0,a=a[0]);const C=xr(a);0===n&&null!==o?null==l?sl(r,o,C):su(r,o,C,l||null,!0):1===n&&null!==o?su(r,o,C,l||null,!0):2===n?function Dc(n,r,o){const a=_a(n,r);a&&function ja(n,r,o,a){n.removeChild(r,o,a)}(n,a,r,o)}(r,C,v):3===n&&r.destroyNode(C),null!=h&&function Id(n,r,o,a,l){const h=o[7];h!==xr(o)&&tu(r,n,a,h,l);for(let C=10;C<o.length;C++){const M=o[C];Hu(M[1],M,n,r,a,h)}}(r,n,h,o,l)}}function nu(n,r,o){return n.createElement(r,o)}function Ed(n,r){const o=n[9],a=o.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,$r(l,-1)),o.splice(a,1)}function vs(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const l=a[17];null!==l&&l!==n&&Ed(l,a),r>0&&(n[o-1][4]=a[4]);const h=Na(n,10+r);!function ru(n,r){Hu(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function zr(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Hu(n,r,o,3,null,null),function vh(n){let r=n[13];if(!r)return vc(n[1],n);for(;r;){let o=null;if(Jr(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)Jr(r)&&vc(r[1],r),r=r[3];null===r&&(r=n),Jr(r)&&vc(r[1],r),o=r&&r[4]}r=o}}(r)}}function vc(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function iu(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const l=r[o[a]];if(!(l instanceof fo)){const h=o[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const C=l[h[v]],M=h[v+1];try{M.call(C)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function _h(n,r){const o=n.cleanup,a=r[7];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const v=o[h+1],C="function"==typeof v?v(r):xr(r[v]),M=a[l=o[h+2]],V=o[h+3];"boolean"==typeof V?C.removeEventListener(o[h],M,V):V>=0?a[l=V]():a[l=-V].unsubscribe(),h+=2}else{const v=a[l=o[h+1]];o[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&gi(r[3])){o!==r[3]&&Ed(o,r);const a=r[19];null!==a&&a.detachView(n)}!function pc(n){Vu.delete(n[20])}(r)}}function _c(n,r,o){return function Eo(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===ze.None||l===ze.Emulated)return null}return jn(a,o)}(n,r.parent,o)}function su(n,r,o,a,l){n.insertBefore(r,o,a,l)}function sl(n,r,o){n.appendChild(r,o)}function jl(n,r,o,a,l){null!==a?su(n,r,o,a,l):sl(n,r,o)}function _a(n,r){return n.parentNode(r)}let Hl,Ec=function fr(n,r,o){return 40&n.type?jn(n,o):null};function wu(n,r,o,a){const l=_c(n,a,r),h=r[11],C=function wh(n,r,o){return Ec(n,r,o)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(o))for(let M=0;M<o.length;M++)jl(h,l,o[M],C,!1);else jl(h,l,o,C,!1)}function aa(n,r){if(null!==r){const o=r.type;if(3&o)return jn(r,n);if(4&o)return Ic(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return aa(n,a);{const l=n[r.index];return gi(l)?Ic(-1,l):xr(l)}}if(32&o)return yc(r,n)()||xr(n[r.index]);{const a=wc(n,r);return null!==a?Array.isArray(a)?a[0]:aa(Pa(n[16]),a):aa(n,r.next)}}return null}function wc(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Ic(n,r){const o=10+n+1;if(o<r.length){const a=r[o],l=a[1].firstChild;if(null!==l)return aa(a,l)}return r[7]}function wd(n,r,o,a,l,h,v){for(;null!=o;){const C=a[o.index],M=o.type;if(v&&0===r&&(C&&_o(xr(C),a),o.flags|=4),64!=(64&o.flags))if(8&M)wd(n,r,o.child,a,l,h,!1),tu(r,n,l,C,h);else if(32&M){const V=yc(o,a);let Q;for(;Q=V();)tu(r,n,l,Q,h);tu(r,n,l,C,h)}else 16&M?bc(n,r,a,o,l,h):tu(r,n,l,C,h);o=v?o.projectionNext:o.next}}function Hu(n,r,o,a,l,h){wd(o,a,n.firstChild,r,l,h,!1)}function bc(n,r,o,a,l,h){const v=o[16],M=v[6].projection[a.projection];if(Array.isArray(M))for(let V=0;V<M.length;V++)tu(r,n,l,M[V],h);else wd(n,r,M,v[3],l,h,!0)}function $a(n,r,o){n.setAttribute(r,"style",o)}function Ea(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function y(n){Hl=n}class ct{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function no(n){return n instanceof ct?n.changingThisBreaksApplicationSecurity:n}const Ac=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ro=(()=>((ro=ro||{})[ro.NONE=0]="NONE",ro[ro.HTML=1]="HTML",ro[ro.STYLE=2]="STYLE",ro[ro.SCRIPT=3]="SCRIPT",ro[ro.URL=4]="URL",ro[ro.RESOURCE_URL=5]="RESOURCE_URL",ro))();function Cd(n){const r=function au(){const n=_t();return n&&n[12]}();return r?r.sanitize(ro.URL,n)||"":function ou(n,r){const o=function Dh(n){return n instanceof ct&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?no(n):function wa(n){return(n=String(n)).match(Ac)?n:"unsafe:"+n}(tt(n))}const zu=new Vr("ENVIRONMENT_INITIALIZER"),xc=new Vr("INJECTOR",-1),cp=new Vr("INJECTOR_DEF_TYPES");class Ah{get(r,o=nr){if(o===nr){const a=new Error(`NullInjectorError: No provider for ${Pe(r)}!`);throw a.name="NullInjectorError",a}return o}}function dp(...n){return{\u0275providers:hp(0,n)}}function hp(n,...r){const o=[],a=new Set;let l;return Lo(r,h=>{const v=h;pp(v,o,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&fp(l,o),o}function fp(n,r){for(let o=0;o<n.length;o++){const{providers:l}=n[o];Lo(l,h=>{r.push(h)})}}function pp(n,r,o,a){if(!(n=Ce(n)))return!1;let l=null,h=Br(n);const v=!h&&xe(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const M=n.ngModule;if(h=Br(M),!h)return!1;l=M}const C=a.has(l);if(v){if(C)return!1;if(a.add(l),v.dependencies){const M="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const V of M)pp(V,r,o,a)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let V;a.add(l);try{Lo(h.imports,Q=>{pp(Q,r,o,a)&&(V||(V=[]),V.push(Q))})}finally{}void 0!==V&&fp(V,r)}if(!C){const V=Xi(l)||(()=>new l);r.push({provide:l,useFactory:V,deps:Rt},{provide:cp,useValue:l,multi:!0},{provide:zu,useValue:()=>Ki(l),multi:!0})}const M=h.providers;null==M||C||Lo(M,Q=>{r.push(Q)})}}return l!==n&&void 0!==n.providers}const zg=Me({provide:String,useValue:Me});function Nc(n){return null!==n&&"object"==typeof n&&zg in n}function Gl(n){return"function"==typeof n}const gp=new Vr("Set Injector scope."),Mh={},rv={};let zl;function Du(){return void 0===zl&&(zl=new Ah),zl}class Ia{}class mp extends Ia{constructor(r,o,a,l){super(),this.parent=o,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pc(r,v=>this.processProvider(v)),this.records.set(xc,hl(void 0,this)),l.has("environment")&&this.records.set(Ia,hl(void 0,this));const h=this.records.get(gp);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(cp.multi,Rt,Tt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=va(this),a=ar(void 0);try{return r()}finally{va(o),ar(a)}}get(r,o=nr,a=Tt.Default){this.assertNotDestroyed();const l=va(this),h=ar(void 0);try{if(!(a&Tt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const M=function _p(n){return"function"==typeof n||"object"==typeof n&&n instanceof Vr}(r)&&Zn(r);C=M&&this.injectableDefInScope(M)?hl(yp(r),Mh):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&Tt.Self?Du():this.parent).get(r,o=a&Tt.Optional&&o===nr?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[ys]=v[ys]||[]).unshift(Pe(r)),l)throw v;return function Fe(n,r,o,a){const l=n[ys];throw r[Fa]&&l.unshift(r[Fa]),n.message=function et(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=Pe(r);if(Array.isArray(r))l=r.map(Pe).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let C=r[v];h.push(v+":"+("string"==typeof C?JSON.stringify(C):Pe(C)))}l=`{${h.join(", ")}}`}return`${o}${a?"("+a+")":""}[${l}]: ${n.replace(Ss,"\n  ")}`}("\n"+n.message,l,o,a),n.ngTokenPath=l,n[ys]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{ar(h),va(l)}}resolveInjectorInitializers(){const r=va(this),o=ar(void 0);try{const a=this.get(zu.multi,Rt,Tt.Self);for(const l of a)l()}finally{va(r),ar(o)}}toString(){const r=[],o=this.records;for(const a of o.keys())r.push(Pe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new We(205,!1)}processProvider(r){let o=Gl(r=Ce(r))?r:Ce(r&&r.provide);const a=function iv(n){return Nc(n)?hl(void 0,n.useValue):hl(xh(n),Mh)}(r);if(Gl(r)||!0!==r.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=hl(void 0,Mh,!0),l.factory=()=>F(l.multi),this.records.set(o,l)),o=r,l.multi.push(r)}this.records.set(o,a)}hydrate(r,o){return o.value===Mh&&(o.value=rv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function vp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ce(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function yp(n){const r=Zn(n),o=null!==r?r.factory:Xi(n);if(null!==o)return o;if(n instanceof Vr)throw new We(204,!1);if(n instanceof Function)return function Kg(n){const r=n.length;if(r>0)throw function oa(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}(r,"?"),new We(204,!1);const o=function Kn(n){const r=n&&(n[on]||n[Rr]);if(r){const o=function Or(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new We(204,!1)}function xh(n,r,o){let a;if(Gl(n)){const l=Ce(n);return Xi(l)||yp(l)}if(Nc(n))a=()=>Ce(n.useValue);else if(function dl(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...F(n.deps||[]));else if(function Rc(n){return!(!n||!n.useExisting)}(n))a=()=>Ki(Ce(n.useExisting));else{const l=Ce(n&&(n.useClass||n.provide));if(!function qg(n){return!!n.deps}(n))return Xi(l)||yp(l);a=()=>new l(...F(n.deps))}return a}function hl(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Zg(n){return!!n.\u0275providers}function Pc(n,r){for(const o of n)Array.isArray(o)?Pc(o,r):Zg(o)?Pc(o.\u0275providers,r):r(o)}class Nh{}class Td{resolveComponentFactory(r){throw function Rh(n){const r=Error(`No component factory found for ${Pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let fl=(()=>{class n{}return n.NULL=new Td,n})();function Sd(){return Wl(Xr(),_t())}function Wl(n,r){return new Oc(jn(n,r))}let Oc=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Sd,n})();function Da(n){return n instanceof Oc?n.nativeElement:n}class Ad{}let Ph=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Qg(){const n=_t(),o=mr(Xr().index,n);return(Jr(o)?o:n)[11]}(),n})(),pl=(()=>{class n{}return n.\u0275prov=Bt({token:n,providedIn:"root",factory:()=>null}),n})();class Kl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ep=new Kl("14.2.12"),Wu={};function Oh(n){return n.ngOriginalError}class Ga{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&Oh(r);for(;o&&Oh(o);)o=Oh(o);return o||null}}function bu(n){return n instanceof Function?n():n}function tm(n,r,o){let a=n.length;for(;;){const l=n.indexOf(r,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}o=l+1}}const nm="ng-template";function gv(n,r,o){let a=0;for(;a<n.length;){let l=n[a++];if(o&&"class"===l){if(l=n[a],-1!==tm(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Lh(n){return 4===n.type&&n.value!==nm}function $o(n,r,o){return r===(4!==n.type||o?n.value:nm)}function mv(n,r,o){let a=4;const l=n.attrs||[],h=function vv(n){for(let r=0;r<n.length;r++)if(R(n[r]))return r;return n.length}(l);let v=!1;for(let C=0;C<r.length;C++){const M=r[C];if("number"!=typeof M){if(!v)if(4&a){if(a=2|1&a,""!==M&&!$o(n,M,o)||""===M&&1===r.length){if(uu(a))return!1;v=!0}}else{const V=8&a?M:r[++C];if(8&a&&null!==n.attrs){if(!gv(n.attrs,V,o)){if(uu(a))return!1;v=!0}continue}const ne=yv(8&a?"class":M,l,Lh(n),o);if(-1===ne){if(uu(a))return!1;v=!0;continue}if(""!==V){let Se;Se=ne>h?"":l[ne+1].toLowerCase();const Ge=8&a?Se:null;if(Ge&&-1!==tm(Ge,V,0)||2&a&&V!==Se){if(uu(a))return!1;v=!0}}}}else{if(!v&&!uu(a)&&!uu(M))return!1;if(v&&uu(M))continue;v=!1,a=M|1&a}}return uu(a)||v}function uu(n){return 0==(1&n)}function yv(n,r,o,a){if(null===r)return-1;let l=0;if(a||!o){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function Vh(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function rm(n,r,o=!1){for(let a=0;a<r.length;a++)if(mv(n,r[a],o))return!0;return!1}function Dp(n,r){return n?":not("+r.trim()+")":r}function bp(n){let r=n[0],o=1,a=2,l="",h=!1;for(;o<n.length;){let v=n[o];if("string"==typeof v)if(2&a){const C=n[++o];l+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!uu(v)&&(r+=Dp(h,l),l=""),a=v,h=h||!uu(a);o++}return""!==l&&(r+=Dp(h,l)),r}const pr={};function Uh(n){Bh(er(),_t(),ge()+n,!1)}function Bh(n,r,o,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Gr(r,h,o)}else{const h=n.preOrderHooks;null!==h&&Ks(r,h,0,o)}Ke(o)}function um(n,r=null,o=null,a){const l=ql(n,r,o,a);return l.resolveInjectorInitializers(),l}function ql(n,r=null,o=null,a,l=new Set){const h=[o||Rt,dp(n)];return a=a||("object"==typeof n?void 0:Pe(n)),new mp(h,r||Du(),a||null,l)}let za=(()=>{class n{static create(o,a){if(Array.isArray(o))return um({name:""},a,o,"");{const l=o.name??"";return um({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=nr,n.NULL=new Ah,n.\u0275prov=Bt({token:n,providedIn:"any",factory:()=>Ki(xc)}),n.__NG_ELEMENT_ID__=-1,n})();function Bc(n,r=Tt.Default){const o=_t();return null===o?Ki(n,r):po(Xr(),o,Ce(n),r)}function mm(){throw new Error("invalid")}function Kh(n,r){return n<<17|r<<2}function lu(n){return n>>17&32767}function ml(n){return 2|n}function cu(n){return(131068&n)>>2}function $c(n,r){return-131069&n|r<<2}function Nd(n){return 1|n}function Jh(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const l=o[a],h=o[a+1];if(-1!==h){const v=n.data[h];ho(l),v.contentQueries(2,r[h],h)}}}function Xh(n,r,o,a,l,h,v,C,M,V,Q){const ne=r.blueprint.slice();return ne[0]=l,ne[2]=76|a,(null!==Q||n&&1024&n[2])&&(ne[2]|=1024),ra(ne),ne[3]=ne[15]=n,ne[8]=o,ne[10]=v||n&&n[10],ne[11]=C||n&&n[11],ne[12]=M||n&&n[12]||null,ne[9]=V||n&&n[9]||null,ne[6]=h,ne[20]=function Uu(){return hc++}(),ne[21]=Q,ne[16]=2==r.type?n[16]:ne,ne}function wl(n,r,o,a,l){let h=n.data[r];if(null===h)h=function kd(n,r,o,a,l){const h=Gs(),v=zs(),M=n.data[r]=function Zp(n,r,o,a,l,h){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,o,r,a,l);return null===n.firstChild&&(n.firstChild=M),null!==h&&(v?null==h.child&&null!==M.parent&&(h.child=M):null===h.next&&(h.next=M)),M}(n,r,o,a,l),function Wi(){return bn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=a,h.attrs=l;const v=function ni(){const n=bn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Li(h,!0),h}function zc(n,r,o,a){if(0===o)return-1;const l=r.length;for(let h=0;h<o;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function ef(n,r,o){la(r);try{const a=n.viewQuery;null!==a&&df(1,a,o);const l=n.template;null!==l&&zp(n,r,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Jh(n,r),n.staticViewQueries&&df(2,n.viewQuery,o);const h=n.components;null!==h&&function Pv(n,r){for(let o=0;o<r.length;o++)Hv(n,r[o])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,$()}}function tf(n,r,o,a){const l=r[2];if(128!=(128&l)){la(r);try{ra(r),function Qe(n){return bn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&zp(n,r,o,2,a);const v=3==(3&l);if(v){const V=n.preOrderCheckHooks;null!==V&&Gr(r,V,null)}else{const V=n.preOrderHooks;null!==V&&Ks(r,V,0,null),xi(r,0)}if(function ig(n){for(let r=_i(n);null!==r;r=Eu(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const l=o[a],h=l[3];0==(512&l[2])&&$r(h,1),l[2]|=512}}}(r),function jv(n){for(let r=_i(n);null!==r;r=Eu(r))for(let o=10;o<r.length;o++){const a=r[o],l=a[1];$s(a)&&tf(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Jh(n,r),v){const V=n.contentCheckHooks;null!==V&&Gr(r,V)}else{const V=n.contentHooks;null!==V&&Ks(r,V,1),xi(r,1)}!function Hp(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const l=o[a];if(l<0)Ke(~l);else{const h=l,v=o[++a],C=o[++a];Vi(v,h),C(2,r[h])}}}finally{Ke(-1)}}(n,r);const C=n.components;null!==C&&function Gp(n,r){for(let o=0;o<r.length;o++)$v(n,r[o])}(r,C);const M=n.viewQuery;if(null!==M&&df(2,M,a),v){const V=n.viewCheckHooks;null!==V&&Gr(r,V)}else{const V=n.viewHooks;null!==V&&Ks(r,V,2),xi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,$r(r[3],-1))}finally{$()}}}function zp(n,r,o,a,l){const h=ge(),v=2&a;try{Ke(-1),v&&r.length>22&&Bh(n,r,22,!1),o(a,l)}finally{Ke(h)}}function nf(n,r,o){!ms()||(function Vv(n,r,o,a){const l=o.directiveStart,h=o.directiveEnd;n.firstCreatePass||qt(o,r),_o(a,r);const v=o.initialInputs;for(let C=l;C<h;C++){const M=n.data[C],V=Sr(M);V&&Uv(r,o,M);const Q=Oo(r,n,C,o);_o(Q,r),null!==v&&rg(0,C-l,Q,M,0,v),V&&(mr(o.index,r)[8]=Q)}}(n,r,o,jn(o,r)),128==(128&o.flags)&&function Xp(n,r,o){const a=o.directiveStart,l=o.directiveEnd,h=o.index,v=function xo(){return bn.lFrame.currentDirectiveIndex}();try{Ke(h);for(let C=a;C<l;C++){const M=n.data[C],V=r[C];lo(C),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Nm(M,V)}}finally{Ke(-1),lo(v)}}(n,r,o))}function rf(n,r,o=jn){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],C=-1===v?o(r,n):n[v];n[l++]=C}}}function Am(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Kp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Kp(n,r,o,a,l,h,v,C,M,V){const Q=22+a,ne=Q+l,Se=function Ov(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:pr);return o}(Q,ne),Ge="function"==typeof V?V():V;return Se[1]={type:n,blueprint:Se,template:o,queries:null,viewQuery:C,declTNode:r,data:Se.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:M,consts:Ge,incompleteFirstPass:!1}}function sf(n,r,o,a){const l=km(r);null===o?l.push(a):(l.push(o),n.firstCreatePass&&hf(n).push(a,l.length-1))}function Mm(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,l):o[a]=[r,l]}return o}function af(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let C=null,M=null;for(let V=r.directiveStart;V<a;V++){const Q=l[V],ne=Q.inputs,Se=null===h||Lh(r)?null:Bv(ne,h);v.push(Se),C=Mm(ne,V,C),M=Mm(Q.outputs,V,M)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=C,r.outputs=M}function Yp(n,r){const o=mr(r,n);16&o[2]||(o[2]|=32)}function Fd(n,r,o,a){let l=!1;if(ms()){const h=function eg(n,r,o){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];rm(o,v.selectors,!1)&&(l||(l=[]),ft(qt(o,r),n,v.type),Sr(v)?(uf(n,o),l.unshift(v)):l.push(v))}return l}(n,r,o),v=null===a?null:{"":-1};if(null!==h){l=!0,ng(o,n.data.length,h.length);for(let Q=0;Q<h.length;Q++){const ne=h[Q];ne.providersResolver&&ne.providersResolver(ne)}let C=!1,M=!1,V=zc(n,r,h.length,null);for(let Q=0;Q<h.length;Q++){const ne=h[Q];o.mergedAttrs=X(o.mergedAttrs,ne.hostAttrs),lf(n,o,r,V,ne),Wc(V,ne,v),null!==ne.contentQueries&&(o.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(o.flags|=128);const Se=ne.type.prototype;!C&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!M&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),M=!0),V++}af(n,o)}v&&function tg(n,r,o){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=o[r[l+1]];if(null==h)throw new We(-301,!1);a.push(r[l],h)}}}(o,a,v)}return o.mergedAttrs=X(o.mergedAttrs,o.attrs),l}function xm(n,r,o,a,l,h){const v=h.hostBindings;if(v){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const M=~r.index;(function Jp(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(C)!=M&&C.push(M),C.push(a,l,v)}}function Nm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function uf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Wc(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;Sr(r)&&(o[""]=n)}}function ng(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function lf(n,r,o,a,l){n.data[a]=l;const h=l.factory||(l.factory=Xi(l.type)),v=new fo(h,Sr(l),Bc);n.blueprint[a]=v,o[a]=v,xm(n,r,0,a,zc(n,o,l.hostVars,pr),l)}function Uv(n,r,o){const a=jn(r,n),l=Am(o),h=n[10],v=cf(n,Xh(n,l,null,o.onPush?32:16,a,r,h,h.createRenderer(a,o),null,null,null));n[r.index]=v}function Ka(n,r,o,a,l,h){const v=jn(n,r);!function du(n,r,o,a,l,h,v){if(null==h)n.removeAttribute(r,l,o);else{const C=null==v?tt(h):v(h,a||"",l);n.setAttribute(r,l,C,o)}}(r[11],v,h,n.value,o,a,l)}function rg(n,r,o,a,l,h){const v=h[r];if(null!==v){const C=a.setInput;for(let M=0;M<v.length;){const V=v[M++],Q=v[M++],ne=v[M++];null!==C?a.setInput(o,ne,V,Q):o[Q]=ne}}}function Bv(n,r){let o=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return o}function Pm(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function $v(n,r){const o=mr(r,n);if($s(o)){const a=o[1];48&o[2]?tf(a,o,a.template,o[8]):o[5]>0&&Ld(o)}}function Ld(n){for(let a=_i(n);null!==a;a=Eu(a))for(let l=10;l<a.length;l++){const h=a[l];if($s(h))if(512&h[2]){const v=h[1];tf(v,h,v.template,h[8])}else h[5]>0&&Ld(h)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const l=mr(o[a],n);$s(l)&&l[5]>0&&Ld(l)}}function Hv(n,r){const o=mr(r,n),a=o[1];(function sg(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),ef(a,o,o[8])}function cf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Vd(n){for(;n;){n[2]|=32;const r=Pa(n);if(ui(n)&&!r)return n;n=r}return null}function Ud(n,r,o,a=!0){const l=r[10];l.begin&&l.begin();try{tf(n,r,n.template,o)}catch(v){throw a&&ff(r,v),v}finally{l.end&&l.end()}}function df(n,r,o){ho(0),r(n,o)}function km(n){return n[7]||(n[7]=[])}function hf(n){return n.cleanup||(n.cleanup=[])}function ff(n,r){const o=n[9],a=o?o.get(Ga,null):null;a&&a.handleError(r)}function Bd(n,r,o,a,l){for(let h=0;h<o.length;){const v=o[h++],C=o[h++],M=r[v],V=n.data[v];null!==V.setInput?V.setInput(M,l,a,C):M[C]=l}}function hu(n,r,o){const a=ns(r,n);!function ph(n,r,o){n.setValue(r,o)}(n[11],a,o)}function pf(n,r,o){let a=o?n.styles:null,l=o?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const C=r[v];"number"==typeof C?h=C:1==h?l=Ve(l,C):2==h&&(a=Ve(a,C+": "+r[++v]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=l:n.classesWithoutHost=l}function jd(n,r,o,a,l=!1){for(;null!==o;){const h=r[o.index];if(null!==h&&a.push(xr(h)),gi(h))for(let C=10;C<h.length;C++){const M=h[C],V=M[1].firstChild;null!==V&&jd(M[1],M,V,a)}const v=o.type;if(8&v)jd(n,r,o.child,a);else if(32&v){const C=yc(o,r);let M;for(;M=C();)a.push(M)}else if(16&v){const C=wc(r,o);if(Array.isArray(C))a.push(...C);else{const M=Pa(r[16]);jd(M[1],M,C,a,!0)}}o=l?o.projectionNext:o.next}return a}class Kc{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return jd(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(gi(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(vs(r,a),Na(o,a))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}onDestroy(r){sf(this._lView[1],this._lView,null,r)}markForCheck(){Vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ud(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new We(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yh(n,r){Hu(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new We(902,!1);this._appRef=r}}class Gv extends Kc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ud(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class $d extends fl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=xe(r);return new qc(o,this.ngModule)}}function gf(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Vm{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,a){const l=this.injector.get(r,Wu,a);return l!==Wu||o===Wu?l:this.parentInjector.get(r,o,a)}}class qc extends Nh{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Cp(n){return n.map(bp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return gf(this.componentDef.inputs)}get outputs(){return gf(this.componentDef.outputs)}create(r,o,a,l){let h=(l=l||this.ngModule)instanceof Ia?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new Vm(r,h):r,C=v.get(Ad,null);if(null===C)throw new We(407,!1);const M=v.get(pl,null),V=C.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",ne=a?function qp(n,r,o){return n.selectRootElement(r,o===ze.ShadowDom)}(V,a,this.componentDef.encapsulation):nu(V,Q,function Lm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Q)),Se=this.componentDef.onPush?288:272,Ge=Kp(0,null,null,1,0,null,null,null,null,null),Et=Xh(null,Ge,null,Se,null,null,C,V,M,v,null);let $t,sn;la(Et);try{const kn=function Bm(n,r,o,a,l,h){const v=o[1];o[22]=n;const M=wl(v,22,2,"#host",null),V=M.mergedAttrs=r.hostAttrs;null!==V&&(pf(M,V,!0),null!==n&&(E(l,n,V),null!==M.classes&&Ea(l,n,M.classes),null!==M.styles&&$a(l,n,M.styles)));const Q=a.createRenderer(n,r),ne=Xh(o,Am(r),null,r.onPush?32:16,o[22],M,a,Q,h||null,null,null);return v.firstCreatePass&&(ft(qt(M,o),v,r.type),uf(v,M),ng(M,o.length,1)),cf(o,ne),o[22]=ne}(ne,this.componentDef,Et,C,V);if(ne)if(a)E(V,ne,["ng-version",Ep.full]);else{const{attrs:Xn,classes:At}=function Md(n){const r=[],o=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&o.push(h);else{if(!uu(l))break;l=h}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Xn&&E(V,ne,Xn),At&&At.length>0&&Ea(V,ne,At.join(" "))}if(sn=fs(Ge,22),void 0!==o){const Xn=sn.projection=[];for(let At=0;At<this.ngContentSelectors.length;At++){const lr=o[At];Xn.push(null!=lr?Array.from(lr):null)}}$t=function Hd(n,r,o,a){const l=o[1],h=function Lv(n,r,o){const a=Xr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),lf(n,a,r,zc(n,r,1,null),o),af(n,a));const l=Oo(r,n,a.directiveStart,a);_o(l,r);const h=jn(a,r);return h&&_o(h,r),l}(l,o,r);if(n[8]=o[8]=h,null!==a)for(const C of a)C(h,r);if(r.contentQueries){const C=Xr();r.contentQueries(1,h,C.directiveStart)}const v=Xr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ke(v.index),xm(o[1],v,0,v.directiveStart,v.directiveEnd,r),Nm(r,h)),h}(kn,this.componentDef,Et,[jm]),ef(Ge,Et,null)}finally{$()}return new Um(this.componentType,$t,Wl(sn,Et),Et,sn)}}class Um extends class sv{}{constructor(r,o,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Gv(l),this.componentType=r}setInput(r,o){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Bd(h[1],h,l,r,o),Yp(h,this._tNode.index)}}get injector(){return new or(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function jm(){const n=Xr();Ar(_t()[1],n)}function wo(n){let r=function Zi(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let l;if(Sr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new We(903,!1);l=r.\u0275dir}if(l){if(o){a.push(l);const v=n;v.inputs=yf(n.inputs),v.declaredInputs=yf(n.declaredInputs),v.outputs=yf(n.outputs);const C=l.hostBindings;C&&$m(n,C);const M=l.viewQuery,V=l.contentQueries;if(M&&Wv(n,M),V&&vf(n,V),ke(n.inputs,l.inputs),ke(n.declaredInputs,l.declaredInputs),ke(n.outputs,l.outputs),Sr(l)&&l.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const C=h[v];C&&C.ngInherit&&C(n),C===wo&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Tu(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=X(l.hostAttrs,o=X(o,l.hostAttrs))}}(a)}function yf(n){return n===sr?{}:n===Rt?[]:n}function Wv(n,r){const o=n.viewQuery;n.viewQuery=o?(a,l)=>{r(a,l),o(a,l)}:r}function vf(n,r){const o=n.contentQueries;n.contentQueries=o?(a,l,h)=>{r(a,l,h),o(a,l,h)}:r}function $m(n,r){const o=n.hostBindings;n.hostBindings=o?(a,l)=>{r(a,l),o(a,l)}:r}let Ef=null;function Zc(){if(!Ef){const n=lt.Symbol;if(n&&n.iterator)Ef=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ef=a)}}}return Ef}function Gd(n){return!!ag(n)&&(Array.isArray(n)||!(n instanceof Map)&&Zc()in n)}function ag(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qa(n,r,o){return n[r]=o}function Ho(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Ku(n,r,o,a){const l=Ho(n,r,o);return Ho(n,r+1,a)||l}function zd(n,r,o,a){const l=_t();return Ho(l,Jt(),r)&&(er(),Ka(at(),l,n,r,o,a)),zd}function Il(n,r,o,a,l,h){const C=Ku(n,function Z(){return bn.lFrame.bindingIndex}(),o,l);return Mn(2),C?r+tt(o)+a+tt(l)+h:pr}function Yi(n,r,o,a,l,h,v,C){const M=_t(),V=er(),Q=n+22,ne=V.firstCreatePass?function Yv(n,r,o,a,l,h,v,C,M){const V=r.consts,Q=wl(r,n,4,v||null,ps(V,C));Fd(r,o,Q,ps(V,M)),Ar(r,Q);const ne=Q.tViews=Kp(2,Q,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,V);return null!==r.queries&&(r.queries.template(r,Q),ne.queries=r.queries.embeddedTView(Q)),Q}(Q,V,M,r,o,a,l,h,v):V.data[Q];Li(ne,!1);const Se=M[11].createComment("");wu(V,M,Se,ne),_o(Se,M),cf(M,M[Q]=Pm(Se,M,Se,ne)),ea(ne)&&nf(V,M,ne),null!=v&&rf(M,ne,C)}function Qv(n){return Gi(function Mo(){return bn.lFrame.contextLView}(),22+n)}function Ns(n,r,o){const a=_t();return Ho(a,Jt(),r)&&function da(n,r,o,a,l,h,v,C){const M=jn(r,o);let Q,V=r.inputs;!C&&null!=V&&(Q=V[a])?(Bd(n,o,Q,a,l),Ji(r)&&Yp(o,r.index)):3&r.type&&(a=function kv(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(M,a,l))}(er(),at(),a,n,r,a[11],o,!1),Ns}function If(n,r,o,a,l){const v=l?"class":"style";Bd(n,o,r.inputs[v],v,a)}function Df(n,r,o,a){const l=_t(),h=er(),v=22+n,C=l[11],M=l[v]=nu(C,r,function rr(){return bn.lFrame.currentNamespace}()),V=h.firstCreatePass?function Jv(n,r,o,a,l,h,v){const C=r.consts,V=wl(r,n,2,l,ps(C,h));return Fd(r,o,V,ps(C,v)),null!==V.attrs&&pf(V,V.attrs,!1),null!==V.mergedAttrs&&pf(V,V.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,V),V}(v,h,l,0,r,o,a):h.data[v];Li(V,!0);const Q=V.mergedAttrs;null!==Q&&E(C,M,Q);const ne=V.classes;null!==ne&&Ea(C,M,ne);const Se=V.styles;return null!==Se&&$a(C,M,Se),64!=(64&V.flags)&&wu(h,l,M,V),0===function So(){return bn.lFrame.elementDepthCount}()&&_o(M,l),function gs(){bn.lFrame.elementDepthCount++}(),ea(V)&&(nf(h,l,V),function Wp(n,r,o){if(Hi(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,o[h],h)}}}(h,V,l)),null!==a&&rf(l,V),Df}function Wd(){let n=Xr();zs()?function Ps(){bn.lFrame.isParent=!1}():(n=n.parent,Li(n,!1));const r=n;!function zi(){bn.lFrame.elementDepthCount--}();const o=er();return o.firstCreatePass&&(Ar(o,n),Hi(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ma(n){return 0!=(16&n.flags)}(r)&&If(o,r,_t(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ru(n){return 0!=(32&n.flags)}(r)&&If(o,r,_t(),r.stylesWithoutHost,!1),Wd}function cg(n,r,o,a){return Df(n,r,o,a),Wd(),cg}function Qm(){return _t()}function fg(n){return!!n&&"function"==typeof n.then}function pg(n){return!!n&&"function"==typeof n.subscribe}const pu=pg;function gu(n,r,o,a){const l=_t(),h=er(),v=Xr();return function Kd(n,r,o,a,l,h,v,C){const M=ea(a),Q=n.firstCreatePass&&hf(n),ne=r[8],Se=km(r);let Ge=!0;if(3&a.type||C){const sn=jn(a,r),kn=C?C(sn):sn,Xn=Se.length,At=C?Ti=>C(xr(Ti[a.index])):a.index;let lr=null;if(!C&&M&&(lr=function ec(n,r,o,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===o&&l[h+1]===a){const C=r[7],M=l[h+2];return C.length>M?C[M]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==lr)(lr.__ngLastListenerFn__||lr).__ngNextListenerFn__=h,lr.__ngLastListenerFn__=h,Ge=!1;else{h=Xm(a,r,ne,h,!1);const Ti=o.listen(kn,l,h);Se.push(h,Ti),Q&&Q.push(l,At,Xn,Xn+1)}}else h=Xm(a,r,ne,h,!1);const Et=a.outputs;let $t;if(Ge&&null!==Et&&($t=Et[l])){const sn=$t.length;if(sn)for(let kn=0;kn<sn;kn+=2){const Bs=r[$t[kn]][$t[kn+1]].subscribe(h),sh=Se.length;Se.push(h,Bs),Q&&Q.push(l,a.index,sh,-(sh+1))}}}(h,l,l[11],v,n,r,0,a),gu}function Jm(n,r,o,a){try{return!1!==o(a)}catch(l){return ff(n,l),!1}}function Xm(n,r,o,a,l){return function h(v){if(v===Function)return a;Vd(2&n.flags?mr(n.index,r):r);let M=Jm(r,0,a,v),V=h.__ngNextListenerFn__;for(;V;)M=Jm(r,0,V,v)&&M,V=V.__ngNextListenerFn__;return l&&!1===M&&(v.preventDefault(),v.returnValue=!1),M}}function gg(n=1){return function N(n){return(bn.lFrame.contextLView=function Y(n,r){for(;n>0;)r=r[15],n--;return r}(n,bn.lFrame.contextLView))[8]}(n)}function yg(n,r,o,a,l){const h=n[o+1],v=null===r;let C=a?lu(h):cu(h),M=!1;for(;0!==C&&(!1===M||v);){const Q=n[C+1];vg(n[C],r)&&(M=!0,n[C+1]=a?Nd(Q):ml(Q)),C=a?lu(Q):cu(Q)}M&&(n[o+1]=a?ml(h):Nd(h))}function vg(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&w(n,r)>=0}function uy(n,r){return function mu(n,r,o,a){const l=_t(),h=er(),v=Mn(2);h.firstUpdatePass&&function cy(n,r,o,a){const l=n.data;if(null===l[o+1]){const h=l[ge()],v=function ly(n,r){return r>=n.expandoStartIndex}(n,o);(function Au(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!v&&(r=!1),r=function Nf(n,r,o,a){const l=function co(n){const r=bn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(o=nd(o=Rf(null,n,r,o,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(o=Rf(l,n,r,o,a),null===h){let M=function o_(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==cu(a))return n[lu(a)]}(n,r,a);void 0!==M&&Array.isArray(M)&&(M=Rf(null,n,r,M[1],a),M=nd(M,r.attrs,a),function a_(n,r,o,a){n[lu(o?r.classBindings:r.styleBindings)]=a}(n,r,a,M))}else h=function dy(n,r,o){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=nd(a,n[h].hostAttrs,o);return nd(a,r.attrs,o)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),o}(l,h,r,a),function tc(n,r,o,a,l,h){let v=h?r.classBindings:r.styleBindings,C=lu(v),M=cu(v);n[a]=o;let Q,V=!1;if(Array.isArray(o)){const ne=o;Q=ne[1],(null===Q||w(ne,Q)>0)&&(V=!0)}else Q=o;if(l)if(0!==M){const Se=lu(n[C+1]);n[a+1]=Kh(Se,C),0!==Se&&(n[Se+1]=$c(n[Se+1],a)),n[C+1]=function Pp(n,r){return 131071&n|r<<17}(n[C+1],a)}else n[a+1]=Kh(C,0),0!==C&&(n[C+1]=$c(n[C+1],a)),C=a;else n[a+1]=Kh(M,0),0===C?C=a:n[M+1]=$c(n[M+1],a),M=a;V&&(n[a+1]=ml(n[a+1])),yg(n,Q,a,!0),yg(n,Q,a,!1),function iy(n,r,o,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&w(h,r)>=0&&(o[a+1]=Nd(o[a+1]))}(r,Q,n,a,h),v=Kh(C,M),h?r.classBindings=v:r.styleBindings=v}(l,h,r,o,v,a)}}(h,n,v,a),r!==pr&&Ho(l,v,r)&&function Pf(n,r,o,a,l,h,v,C){if(!(3&r.type))return;const M=n.data,V=M[C+1];Of(function Hc(n){return 1==(1&n)}(V)?Xd(M,r,o,l,cu(V),v):void 0)||(Of(h)||function jc(n){return 2==(2&n)}(V)&&(h=Xd(M,null,o,l,C,v)),function tp(n,r,o,a,l){if(r)l?n.addClass(o,a):n.removeClass(o,a);else{let h=-1===a.indexOf("-")?void 0:to.DashCase;null==l?n.removeStyle(o,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=to.Important),n.setStyle(o,a,l,h))}}(a,v,ns(ge(),o),l,h))}(h,h.data[ge()],l,l[11],n,l[v+1]=function rc(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Pe(no(n)))),n}(r,o),a,v)}(n,r,null,!0),uy}function Rf(n,r,o,a,l){let h=null;const v=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<v&&(h=r[C],a=nd(a,h.hostAttrs,l),h!==n);)C++;return null!==n&&(o.directiveStylingLast=C),a}function nd(n,r,o){const a=o?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),os(n,v,!!o||r[++h]))}return void 0===n?null:n}function Xd(n,r,o,a,l,h){const v=null===r;let C;for(;l>0;){const M=n[l],V=Array.isArray(M),Q=V?M[1]:M,ne=null===Q;let Se=o[l+1];Se===pr&&(Se=ne?Rt:void 0);let Ge=ne?Ja(Se,a):Q===a?Se:void 0;if(V&&!Of(Ge)&&(Ge=Ja(M,a)),Of(Ge)&&(C=Ge,v))return C;const Et=n[l+1];l=v?lu(Et):cu(Et)}if(null!==r){let M=h?r.residualClasses:r.residualStyles;null!=M&&(C=Ja(M,a))}return C}function Of(n){return void 0!==n}function rd(n,r=""){const o=_t(),a=er(),l=n+22,h=a.firstCreatePass?wl(a,l,1,r,null):a.data[l],v=o[l]=function ju(n,r){return n.createText(r)}(o[11],r);wu(a,o,v,h),Li(h,!1)}function Mu(n){return Ig("",n,""),Mu}function Ig(n,r,o){const a=_t(),l=function qu(n,r,o,a){return Ho(n,Jt(),o)?r+tt(o)+a:pr}(a,n,r,o);return l!==pr&&hu(a,ge(),l),Ig}function kf(n,r,o,a,l){const h=_t(),v=Il(h,n,r,o,a,l);return v!==pr&&hu(h,ge(),v),kf}const Qu=void 0;var E_=["en",[["a","p"],["AM","PM"],Qu],[["AM","PM"],Qu,Qu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qu,"{1} 'at' {0}",Qu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function __(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let ic={};function Ag(n){const r=function Ay(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Sl(r);if(o)return o;const a=r.split("-")[0];if(o=Sl(a),o)return o;if("en"===a)return E_;throw new We(701,!1)}function Mg(n){return Ag(n)[An.PluralCase]}function Sl(n){return n in ic||(ic[n]=lt.ng&&lt.ng.common&&lt.ng.common.locales&&lt.ng.common.locales[n]),ic[n]}var An=(()=>((An=An||{})[An.LocaleId=0]="LocaleId",An[An.DayPeriodsFormat=1]="DayPeriodsFormat",An[An.DayPeriodsStandalone=2]="DayPeriodsStandalone",An[An.DaysFormat=3]="DaysFormat",An[An.DaysStandalone=4]="DaysStandalone",An[An.MonthsFormat=5]="MonthsFormat",An[An.MonthsStandalone=6]="MonthsStandalone",An[An.Eras=7]="Eras",An[An.FirstDayOfWeek=8]="FirstDayOfWeek",An[An.WeekendRange=9]="WeekendRange",An[An.DateFormat=10]="DateFormat",An[An.TimeFormat=11]="TimeFormat",An[An.DateTimeFormat=12]="DateTimeFormat",An[An.NumberSymbols=13]="NumberSymbols",An[An.NumberFormats=14]="NumberFormats",An[An.CurrencyCode=15]="CurrencyCode",An[An.CurrencySymbol=16]="CurrencySymbol",An[An.CurrencyName=17]="CurrencyName",An[An.Currencies=18]="Currencies",An[An.Directionality=19]="Directionality",An[An.PluralCase=20]="PluralCase",An[An.ExtraData=21]="ExtraData",An))();const xu="en-US";let Vf=xu;function M_(n,r,o,a,l){if(n=Ce(n),Array.isArray(n))for(let h=0;h<n.length;h++)M_(n[h],r,o,a,l);else{const h=er(),v=_t();let C=Gl(n)?n:Ce(n.provide),M=xh(n);const V=Xr(),Q=1048575&V.providerIndexes,ne=V.directiveStart,Se=V.providerIndexes>>20;if(Gl(n)||!n.multi){const Ge=new fo(M,l,Bc),Et=N_(C,r,l?Q:Q+Se,ne);-1===Et?(ft(qt(V,v),h,C),x_(h,n,r.length),r.push(C),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),o.push(Ge),v.push(Ge)):(o[Et]=Ge,v[Et]=Ge)}else{const Ge=N_(C,r,Q+Se,ne),Et=N_(C,r,Q,Q+Se),$t=Ge>=0&&o[Ge],sn=Et>=0&&o[Et];if(l&&!sn||!l&&!$t){ft(qt(V,v),h,C);const kn=function Bw(n,r,o,a,l){const h=new fo(n,o,Bc);return h.multi=[],h.index=r,h.componentProviders=0,$0(h,l,a&&!o),h}(l?Uw:Vw,o.length,l,a,M);!l&&sn&&(o[Et].providerFactory=kn),x_(h,n,r.length,0),r.push(C),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),o.push(kn),v.push(kn)}else x_(h,n,Ge>-1?Ge:Et,$0(o[l?Et:Ge],M,!l&&a));!l&&a&&sn&&o[Et].componentProviders++}}}function x_(n,r,o,a){const l=Gl(r),h=function Wg(n){return!!n.useClass}(r);if(l||h){const M=(h?Ce(r.useClass):r).prototype.ngOnDestroy;if(M){const V=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Q=V.indexOf(o);-1===Q?V.push(o,[a,M]):V[Q+1].push(a,M)}else V.push(o,M)}}}function $0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function N_(n,r,o,a){for(let l=o;l<a;l++)if(r[l]===n)return l;return-1}function Vw(n,r,o,a){return R_(this.multi,[])}function Uw(n,r,o,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Oo(o,o[1],this.providerFactory.index,a);h=C.slice(0,v),R_(l,h);for(let M=v;M<C.length;M++)h.push(C[M])}else h=[],R_(l,h);return h}function R_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function H0(n,r=[]){return o=>{o.providersResolver=(a,l)=>function Lw(n,r,o){const a=er();if(a.firstCreatePass){const l=Sr(n);M_(o,a.data,a.blueprint,l,!0),M_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class $f{}class G0{}function jw(n,r){return new z0(n,r??null)}class z0 extends $f{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $d(this);const a=vr(r);this._bootstrapComponents=bu(a.bootstrap),this._r3Injector=ql(r,o,[{provide:$f,useValue:this},{provide:fl,useValue:this.componentFactoryResolver}],Pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class P_ extends G0{constructor(r){super(),this.moduleType=r}create(r){return new z0(this.moduleType,r)}}class $w extends $f{constructor(r,o,a){super(),this.componentFactoryResolver=new $d(this),this.instance=null;const l=new mp([...r,{provide:$f,useValue:this},{provide:fl,useValue:this.componentFactoryResolver}],o||Du(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function O_(n,r,o=null){return new $w(n,r,o).injector}let Hw=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const a=hp(0,o.type),l=a.length>0?O_([a],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Bt({token:n,providedIn:"environment",factory:()=>new n(Ki(Ia))}),n})();function W0(n){n.getStandaloneInjector=r=>r.get(Hw).getOrCreateStandaloneInjector(n)}function X0(n,r,o){const a=A()+n,l=_t();return l[a]===pr?qa(l,a,o?r.call(o):r()):function Yc(n,r){return n[r]}(l,a)}function eE(n,r,o,a){return nE(_t(),A(),n,r,o,a)}function tE(n,r,o,a,l){return function rE(n,r,o,a,l,h,v){const C=r+o;return Ku(n,C,l,h)?qa(n,C+2,v?a.call(v,l,h):a(l,h)):Og(n,C+2)}(_t(),A(),n,r,o,a,l)}function Og(n,r){const o=n[r];return o===pr?void 0:o}function nE(n,r,o,a,l,h){const v=r+o;return Ho(n,v,l)?qa(n,v+1,h?a.call(h,l):a(l)):Og(n,v+1)}function aE(n,r){const o=er();let a;const l=n+22;o.firstCreatePass?(a=function sI(n,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(n===a.name)return a}}(r,o.pipeRegistry),o.data[l]=a,a.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,a.onDestroy)):a=o.data[l];const h=a.factory||(a.factory=Xi(a.type)),v=ar(Bc);try{const C=tr(!1),M=h();return tr(C),function N0(n,r,o,a){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=a}(o,_t(),l,M),M}finally{ar(v)}}function uE(n,r,o){const a=n+22,l=_t(),h=Gi(l,a);return function kg(n,r){return n[1].data[r].pure}(l,a)?nE(l,A(),r,h.transform,o,h):h.transform(o)}function F_(n){return r=>{setTimeout(n,void 0,r)}}const Ml=class cI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){let l=r,h=o||(()=>null),v=a;if(r&&"object"==typeof r){const M=r;l=M.next?.bind(M),h=M.error?.bind(M),v=M.complete?.bind(M)}this.__isAsync&&(h=F_(h),l&&(l=F_(l)),v&&(v=F_(v)));const C=super.subscribe({next:l,error:h,complete:v});return r instanceof z.w0&&r.add(C),C}};function dI(){return this._results[Zc()]()}class L_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Zc(),a=L_.prototype;a[o]||(a[o]=dI)}get changes(){return this._changes||(this._changes=new Ml)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const l=ss(r);(this._changesDetected=!function Zo(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(o&&(l=o(l),h=o(h)),h!==l)return!1}return!0}(a._results,l,o))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Fg=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=Fg,fI=class extends hI{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r,o){const a=this._declarationTContainer.tViews,l=Xh(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),ef(a,l,r),new Kc(l)}};function pI(){return By(Xr(),_t())}function By(n,r){return 4&n.type?new fI(r,n,Wl(n,r)):null}let jy=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return dE(Xr(),_t())}const mI=jy,lE=class extends mI{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Wl(this._hostTNode,this._hostLView)}get injector(){return new or(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ze(this._hostTNode,this._hostLView);if(we(r)){const o=Wt(r,this._hostLView),a=Le(r);return new or(o[1].data[a+8],o)}return new or(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=cE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(o||{},h);return this.insert(v,l),v}createComponent(r,o,a,l,h){const v=r&&!function Ls(n){return"function"==typeof n}(r);let C;if(v)C=o;else{const ne=o||{};C=ne.index,a=ne.injector,l=ne.projectableNodes,h=ne.environmentInjector||ne.ngModuleRef}const M=v?r:new qc(xe(r)),V=a||this.parentInjector;if(!h&&null==M.ngModule){const Se=(v?V:this.parentInjector).get(Ia,null);Se&&(h=Se)}const Q=M.create(V,l,void 0,h);return this.insert(Q.hostView,C),Q}insert(r,o){const a=r._lView,l=a[1];if(function pa(n){return gi(n[3])}(a)){const Q=this.indexOf(r);if(-1!==Q)this.detach(Q);else{const ne=a[3],Se=new lE(ne,ne[6],ne[3]);Se.detach(Se.indexOf(r))}}const h=this._adjustIndex(o),v=this._lContainer;!function Ba(n,r,o,a){const l=10+a,h=o.length;a>0&&(o[l-1][4]=r),a<h-10?(r[4]=o[l],ya(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const v=r[17];null!==v&&o!==v&&function _d(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(v,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,a,v,h);const C=Ic(h,v),M=a[11],V=_a(M,v[7]);return null!==V&&function mh(n,r,o,a,l,h){a[0]=l,a[6]=r,Hu(n,a,o,1,l,h)}(l,v[6],M,a,V,C),r.attachToViewContainerRef(),ya(V_(v),h,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=cE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=vs(this._lContainer,o);a&&(Na(V_(this._lContainer),o),zr(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=vs(this._lContainer,o);return a&&null!=Na(V_(this._lContainer),o)?new Kc(a):null}_adjustIndex(r,o=0){return r??this.length+o}};function cE(n){return n[8]}function V_(n){return n[8]||(n[8]=[])}function dE(n,r){let o;const a=r[n.index];if(gi(a))o=a;else{let l;if(8&n.type)l=xr(a);else{const h=r[11];l=h.createComment("");const v=jn(n,r);su(h,_a(h,v),l,function Eh(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=o=Pm(a,r,l,n),cf(r,o)}return new lE(o,n,r)}class U_{constructor(r){this.queryList=r,this.matches=null}clone(){return new U_(this.queryList)}setDirty(){this.queryList.setDirty()}}class B_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,l=[];for(let h=0;h<a;h++){const v=o.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new B_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==EE(r,o).matches&&this.queries[o].setDirty()}}class hE{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class j_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const l=null!==o?o.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==o?o.push(h):o=[h])}return null!==o?new j_(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class $_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new $_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,o,_I(o,h)),this.matchTNodeWithReadOption(r,o,Po(o,r,h,!1,!1))}else a===Fg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Po(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Oc||l===jy||l===Fg&&4&o.type)this.addMatch(o.index,-2);else{const h=Po(o,r,l,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function _I(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function wI(n,r,o,a){return-1===o?function EI(n,r){return 11&n.type?Wl(n,r):4&n.type?By(n,r):null}(r,n):-2===o?function II(n,r,o){return o===Oc?Wl(r,n):o===Fg?By(r,n):o===jy?dE(r,n):void 0}(n,r,a):Oo(n,n[1],o,r)}function fE(n,r,o,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=o.matches,C=[];for(let M=0;M<v.length;M+=2){const V=v[M];C.push(V<0?null:wI(r,h[V],v[M+1],o.metadata.read))}l.matches=C}return l.matches}function H_(n,r,o,a){const l=n.queries.getByIndex(o),h=l.matches;if(null!==h){const v=fE(n,r,l,o);for(let C=0;C<h.length;C+=2){const M=h[C];if(M>0)a.push(v[C/2]);else{const V=h[C+1],Q=r[-M];for(let ne=10;ne<Q.length;ne++){const Se=Q[ne];Se[17]===Se[3]&&H_(Se[1],Se,V,a)}if(null!==Q[9]){const ne=Q[9];for(let Se=0;Se<ne.length;Se++){const Ge=ne[Se];H_(Ge[1],Ge,V,a)}}}}}return a}function pE(n){const r=_t(),o=er(),a=ga();ho(a+1);const l=EE(o,a);if(n.dirty&&function Rs(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?H_(o,r,a,[]):fE(o,r,l,a);n.reset(h,Da),n.notifyOnChanges()}return!0}return!1}function gE(n,r,o){const a=er();a.firstCreatePass&&(_E(a,new hE(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),vE(a,_t(),r)}function mE(n,r,o,a){const l=er();if(l.firstCreatePass){const h=Xr();_E(l,new hE(r,o,a),h.index),function bI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}vE(l,_t(),o)}function yE(){return function DI(n,r){return n[19].queries[r].queryList}(_t(),ga())}function vE(n,r,o){const a=new L_(4==(4&o));sf(n,r,a,a.destroy),null===r[19]&&(r[19]=new B_),r[19].queries.push(new U_(a))}function _E(n,r,o){null===n.queries&&(n.queries=new j_),n.queries.track(new $_(r,o))}function EE(n,r){return n.queries.getByIndex(r)}function Hy(...n){}const UE=new Vr("Application Initializer");let Gy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Hy,this.reject=Hy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(fg(h))o.push(h);else if(pu(h)){const v=new Promise((C,M)=>{h.subscribe({complete:C,error:M})});o.push(v)}}Promise.all(o).then(()=>{a()}).catch(l=>{this.reject(l)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Ki(UE,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BE=new Vr("AppId",{providedIn:"root",factory:function jE(){return`${q_()}${q_()}${q_()}`}});function q_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $E=new Vr("Platform Initializer"),zI=new Vr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),HE=new Vr("appBootstrapListener"),WI=new Vr("AnimationModuleType");let KI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const zy=new Vr("LocaleId",{providedIn:"root",factory:()=>x(zy,Tt.Optional|Tt.SkipSelf)||function qI(){return typeof $localize<"u"&&$localize.locale||xu}()}),ZI=new Vr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class YI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let QI=(()=>{class n{compileModuleSync(o){return new P_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),h=bu(vr(o).declarations).reduce((v,C)=>{const M=xe(C);return M&&v.push(new qc(M)),v},[]);return new YI(a,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eD=(()=>Promise.resolve(0))();function Z_(n){typeof Zone>"u"?eD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Nu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ml(!1),this.onMicrotaskEmpty=new Ml(!1),this.onStable=new Ml(!1),this.onError=new Ml(!1),typeof Zone>"u")throw new We(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&o,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function tD(){let n=lt.requestAnimationFrame,r=lt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function iD(n){const r=()=>{!function rD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(lt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Q_(n),n.isCheckStableRunning=!0,Y_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Q_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,l,h,v,C)=>{try{return WE(n),o.invokeTask(l,h,v,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),KE(n)}},onInvoke:(o,a,l,h,v,C,M)=>{try{return WE(n),o.invoke(l,h,v,C,M)}finally{n.shouldCoalesceRunChangeDetection&&r(),KE(n)}},onHasTask:(o,a,l,h)=>{o.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Q_(n),Y_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,a,l,h)=>(o.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nu.isInAngularZone())throw new We(909,!1)}static assertNotInAngularZone(){if(Nu.isInAngularZone())throw new We(909,!1)}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,nD,Hy,Hy);try{return h.runTask(v,o,a)}finally{h.cancelTask(v)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const nD={};function Y_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Q_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KE(n){n._nesting--,Y_(n)}class sD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ml,this.onMicrotaskEmpty=new Ml,this.onStable=new Ml,this.onError=new Ml}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,l){return r.apply(o,a)}}const qE=new Vr(""),ZE=new Vr("");let J_,oD=(()=>{class n{constructor(o,a,l){this._ngZone=o,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,J_||(function aD(n){J_=n}(l),l.addToWindow(a)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nu.assertNotInAngularZone(),Z_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Z_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,a,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(Ki(Nu),Ki(YE),Ki(ZE))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),YE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return J_?.findTestabilityInTree(this,o,a)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ld=null;const QE=new Vr("AllowMultipleToken"),X_=new Vr("PlatformDestroyListeners");class cD{constructor(r,o){this.name=r,this.token=o}}function XE(n,r,o=[]){const a=`Platform: ${r}`,l=new Vr(a);return(h=[])=>{let v=e0();if(!v||v.injector.get(QE,!1)){const C=[...o,...h,{provide:l,useValue:!0}];n?n(C):function dD(n){if(ld&&!ld.get(QE,!1))throw new We(400,!1);ld=n;const r=n.get(tw);(function JE(n){const r=n.get($E,null);r&&r.forEach(o=>o())})(n)}(function ew(n=[],r){return za.create({name:r,providers:[{provide:gp,useValue:"platform"},{provide:X_,useValue:new Set([()=>ld=null])},...n]})}(C,a))}return function fD(n){const r=e0();if(!r)throw new We(401,!1);return r}()}}function e0(){return ld?.get(tw)??null}let tw=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const l=function rw(n,r){let o;return o="noop"===n?new sD:("zone.js"===n?void 0:n)||new Nu(r),o}(a?.ngZone,function nw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:Nu,useValue:l}];return l.run(()=>{const v=za.create({providers:h,parent:this.injector,name:o.moduleType.name}),C=o.create(v),M=C.injector.get(Ga,null);if(!M)throw new We(402,!1);return l.runOutsideAngular(()=>{const V=l.onError.subscribe({next:Q=>{M.handleError(Q)}});C.onDestroy(()=>{Ky(this._modules,C),V.unsubscribe()})}),function iw(n,r,o){try{const a=o();return fg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(M,l,()=>{const V=C.injector.get(Gy);return V.runInitializers(),V.donePromise.then(()=>(function Al(n){Kt(n,"Expected localeId to be defined"),"string"==typeof n&&(Vf=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(zy,xu)||xu),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,a=[]){const l=sw({},a);return function uD(n,r,o){const a=new P_(o);return Promise.resolve(a)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const a=o.injector.get(Wy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new We(403,!1);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new We(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(X_,null);o&&(o.forEach(a=>a()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Ki(za))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function sw(n,r){return Array.isArray(r)?r.reduce(sw,n):{...n,...r}}let Wy=(()=>{class n{constructor(o,a,l){this._zone=o,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new W.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new W.y(C=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Nu.assertNotInAngularZone(),Z_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{M.unsubscribe(),V.unsubscribe()}});this.isStable=(0,Te.T)(h,v.pipe((0,Ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,a){const l=o instanceof Nh;if(!this._injector.get(Gy).done)throw!l&&Yn(o),new We(405,false);let v;v=l?o:this._injector.get(fl).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const C=function lD(n){return n.isBoundToModule}(v)?void 0:this._injector.get($f),V=v.create(za.NULL,[],a||v.selector,C),Q=V.location.nativeElement,ne=V.injector.get(qE,null);return ne?.registerApplication(Q),V.onDestroy(()=>{this.detachView(V.hostView),Ky(this.components,V),ne?.unregisterApplication(Q)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new We(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;Ky(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(HE,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ky(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new We(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Ki(Nu),Ki(Ia),Ki(Ga))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ky(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let aw=!0,uw=!1;function gD(){return uw=!0,aw}function mD(){if(uw)throw new Error("Cannot enable prod mode after platform setup.");aw=!1}let yD=(()=>{class n{}return n.__NG_ELEMENT_ID__=vD,n})();function vD(n){return function _D(n,r,o){if(Ji(n)&&!o){const a=mr(n.index,r);return new Kc(a,a)}return 47&n.type?new Kc(r[16],r):null}(Xr(),_t(),16==(16&n))}class hw{constructor(){}supports(r){return Gd(r)}create(r){return new CD(r)}}const bD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||bD}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,l=0,h=null;for(;o||a;){const v=!a||o&&o.currentIndex<pw(a,l,h)?o:a,C=pw(v,l,h),M=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(o=o._next,null==v.previousIndex)l++;else{h||(h=[]);const V=C-l,Q=M-l;if(V!=Q){for(let Se=0;Se<V;Se++){const Ge=Se<h.length?h[Se]:h[Se]=0,Et=Ge+Se;Q<=Et&&Et<V&&(h[Se]=Ge+1)}h[v.previousIndex]=Q-V}}C!==M&&r(v,C,M)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Gd(r))throw new We(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],v=this._trackByFn(C,h),null!==o&&Object.is(o.trackById,v)?(a&&(o=this._verifyReinsertion(o,h,v,C)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,v,C),a=!0),o=o._next}else l=0,function qv(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Zc()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,C=>{v=this._trackByFn(l,C),null!==o&&Object.is(o.trackById,v)?(a&&(o=this._verifyReinsertion(o,C,v,l)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,v,l),a=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,l)):r=this._addAfter(new TD(o,a),h,l),r}_verifyReinsertion(r,o,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const l=null===o?this._itHead:o._next;return r._next=l,r._prev=o,null===l?this._itTail=r:l._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new fw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class TD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class fw{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new SD,this.map.set(o,a)),a.add(r)}get(r,o){const l=this.map.get(r);return l?l.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pw(n,r,o){const a=n.previousIndex;if(null===a)return a;let l=0;return o&&a<o.length&&(l=o[a]),a+r+l}class gw{constructor(){}supports(r){return r instanceof Map||ag(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||ag(r)))throw new We(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,a);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,o);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new MD(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class MD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mw(){return new o0([new hw])}let o0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const l=a.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||mw()),deps:[[n,new vn,new pn]]}}find(o){const a=this.factories.find(l=>l.supports(o));if(null!=a)return a;throw new We(901,!1)}}return n.\u0275prov=Bt({token:n,providedIn:"root",factory:mw}),n})();function yw(){return new a0([new gw])}let a0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const l=a.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||yw()),deps:[[n,new vn,new pn]]}}find(o){const a=this.factories.find(l=>l.supports(o));if(a)return a;throw new We(901,!1)}}return n.\u0275prov=Bt({token:n,providedIn:"root",factory:yw}),n})();const RD=XE(null,"core",[]);let PD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Ki(Wy))},n.\u0275mod=Tn({type:n}),n.\u0275inj=In({}),n})();function OD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Xt,Je,j)=>{j.d(Je,{Fj:()=>me,qu:()=>zs,NI:()=>Ji,u:()=>hs,cw:()=>re,sg:()=>es,u5:()=>Hs,JJ:()=>Ye,JL:()=>ye,YN:()=>na,UX:()=>uo,EJ:()=>ki,kI:()=>se,_Y:()=>xt,Kr:()=>To});var p=j(4650),z=j(6895),W=j(8996),Te=j(9751),Ie=j(4742),Me=j(8421),ke=j(7669),Pe=j(5403),Ve=j(3268),de=j(1810),Ce=j(4004);let yt=(()=>{class k{constructor(A,Z){this._renderer=A,this._elementRef=Z,this.onChange=Qe=>{},this.onTouched=()=>{}}setProperty(A,Z){this._renderer.setProperty(this._elementRef.nativeElement,A,Z)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),ht=(()=>{class k extends yt{}return k.\u0275fac=function(){let O;return function(Z){return(O||(O=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const We=new p.OlP("NgValueAccessor"),qe={provide:We,useExisting:(0,p.Gpc)(()=>me),multi:!0},Yt=new p.OlP("CompositionEventMode");let me=(()=>{class k extends yt{constructor(A,Z,Qe){super(A,Z),this._compositionMode=Qe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Zt(){const k=(0,z.q)()?(0,z.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Yt,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,Z){1&A&&p.NdJ("input",function(Jt){return Z._handleInput(Jt.target.value)})("blur",function(){return Z.onTouched()})("compositionstart",function(){return Z._compositionStart()})("compositionend",function(Jt){return Z._compositionEnd(Jt.target.value)})},features:[p._Bn([qe]),p.qOj]}),k})();function rt(k){return null==k||("string"==typeof k||Array.isArray(k))&&0===k.length}function It(k){return null!=k&&"number"==typeof k.length}const ut=new p.OlP("NgValidators"),ce=new p.OlP("NgAsyncValidators"),je=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class se{static min(O){return function De(k){return O=>{if(rt(O.value)||rt(k))return null;const A=parseFloat(O.value);return!isNaN(A)&&A<k?{min:{min:k,actual:O.value}}:null}}(O)}static max(O){return function pe(k){return O=>{if(rt(O.value)||rt(k))return null;const A=parseFloat(O.value);return!isNaN(A)&&A>k?{max:{max:k,actual:O.value}}:null}}(O)}static required(O){return function Re(k){return rt(k.value)?{required:!0}:null}(O)}static requiredTrue(O){return function mt(k){return!0===k.value?null:{required:!0}}(O)}static email(O){return function bt(k){return rt(k.value)||je.test(k.value)?null:{email:!0}}(O)}static minLength(O){return function Ct(k){return O=>rt(O.value)||!It(O.value)?null:O.value.length<k?{minlength:{requiredLength:k,actualLength:O.value.length}}:null}(O)}static maxLength(O){return function Lt(k){return O=>It(O.value)&&O.value.length>k?{maxlength:{requiredLength:k,actualLength:O.value.length}}:null}(O)}static pattern(O){return function Kt(k){if(!k)return vt;let O,A;return"string"==typeof k?(A="","^"!==k.charAt(0)&&(A+="^"),A+=k,"$"!==k.charAt(k.length-1)&&(A+="$"),O=new RegExp(A)):(A=k.toString(),O=k),Z=>{if(rt(Z.value))return null;const Qe=Z.value;return O.test(Qe)?null:{pattern:{requiredPattern:A,actualValue:Qe}}}}(O)}static nullValidator(O){return null}static compose(O){return Zn(O)}static composeAsync(O){return Kr(O)}}function vt(k){return null}function cn(k){return null!=k}function en(k){return(0,p.QGY)(k)?(0,W.D)(k):k}function fn(k){let O={};return k.forEach(A=>{O=null!=A?{...O,...A}:O}),0===Object.keys(O).length?null:O}function Bt(k,O){return O.map(A=>A(k))}function In(k){return k.map(O=>function $n(k){return!k.validate}(O)?O:A=>O.validate(A))}function Zn(k){if(!k)return null;const O=k.filter(cn);return 0==O.length?null:function(A){return fn(Bt(A,O))}}function ii(k){return null!=k?Zn(In(k)):null}function Kr(k){if(!k)return null;const O=k.filter(cn);return 0==O.length?null:function(A){return function he(...k){const O=(0,ke.jO)(k),{args:A,keys:Z}=(0,Ie.D)(k),Qe=new Te.y(Jt=>{const{length:Mn}=A;if(!Mn)return void Jt.complete();const Wi=new Array(Mn);let Hr=Mn,Vi=Mn;for(let xo=0;xo<Mn;xo++){let lo=!1;(0,Me.Xf)(A[xo]).subscribe((0,Pe.x)(Jt,co=>{lo||(lo=!0,Vi--),Wi[xo]=co},()=>Hr--,void 0,()=>{(!Hr||!lo)&&(Vi||Jt.next(Z?(0,de.n)(Z,Wi):Wi),Jt.complete())}))}});return O?Qe.pipe((0,Ve.Z)(O)):Qe}(Bt(A,O).map(en)).pipe((0,Ce.U)(fn))}}function Kn(k){return null!=k?Kr(In(k)):null}function Or(k,O){return null===k?[O]:Array.isArray(k)?[...k,O]:[k,O]}function Br(k){return k._rawValidators}function on(k){return k._rawAsyncValidators}function yr(k){return k?Array.isArray(k)?k:[k]:[]}function Rr(k,O){return Array.isArray(k)?k.includes(O):k===O}function ir(k,O){const A=yr(O);return yr(k).forEach(Qe=>{Rr(A,Qe)||A.push(Qe)}),A}function Tt(k,O){return yr(O).filter(A=>!Rr(k,A))}class cr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=ii(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,A){return!!this.control&&this.control.hasError(O,A)}getError(O,A){return this.control?this.control.getError(O,A):null}}class Bn extends cr{get formDirective(){return null}get path(){return null}}class ar extends cr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class si{constructor(O){this._cd=O}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ye=(()=>{class k extends si{constructor(A){super(A)}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(ar,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,Z){2&A&&p.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)},features:[p.qOj]}),k})(),ye=(()=>{class k extends si{constructor(A){super(A)}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(Bn,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,Z){2&A&&p.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)("ng-submitted",Z.isSubmitted)},features:[p.qOj]}),k})();const Tn="VALID",ve="INVALID",oe="PENDING",be="DISABLED";function ot(k){return(Yn(k)?k.validators:k)||null}function xe(k){return Array.isArray(k)?ii(k):k||null}function Ot(k,O){return(Yn(O)?O.asyncValidators:k)||null}function dn(k){return Array.isArray(k)?Kn(k):k||null}function Yn(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}function vr(k,O,A){const Z=k.controls;if(!(O?Object.keys(Z):Z).length)throw new p.vHH(1e3,"");if(!Z[A])throw new p.vHH(1001,"")}function Qn(k,O,A){k._forEachChild((Z,Qe)=>{if(void 0===A[Qe])throw new p.vHH(1002,"")})}class fe{constructor(O,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=O,this._rawAsyncValidators=A,this._composedValidatorFn=xe(this._rawValidators),this._composedAsyncValidatorFn=dn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===Tn}get invalid(){return this.status===ve}get pending(){return this.status==oe}get disabled(){return this.status===be}get enabled(){return this.status!==be}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._rawValidators=O,this._composedValidatorFn=xe(O)}setAsyncValidators(O){this._rawAsyncValidators=O,this._composedAsyncValidatorFn=dn(O)}addValidators(O){this.setValidators(ir(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(ir(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(Tt(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(Tt(O,this._rawAsyncValidators))}hasValidator(O){return Rr(this._rawValidators,O)}hasAsyncValidator(O){return Rr(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=oe,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const A=this._parentMarkedDirty(O.onlySelf);this.status=be,this.errors=null,this._forEachChild(Z=>{Z.disable({...O,onlySelf:!0})}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...O,skipPristineCheck:A}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(O={}){const A=this._parentMarkedDirty(O.onlySelf);this.status=Tn,this._forEachChild(Z=>{Z.enable({...O,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors({...O,skipPristineCheck:A}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}getRawValue(){return this.value}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tn||this.status===oe)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?be:Tn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=oe,this._hasOwnPendingAsyncValidator=!0;const A=en(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,A={}){this.errors=O,this._updateControlsErrors(!1!==A.emitEvent)}get(O){let A=O;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((Z,Qe)=>Z&&Z._find(Qe),this)}getError(O,A){const Z=A?this.get(A):this;return Z&&Z.errors?Z.errors[O]:null}hasError(O,A){return!!this.getError(O,A)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?be:this.errors?ve:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oe)?oe:this._anyControlsHaveStatus(ve)?ve:Tn}_anyControlsHaveStatus(O){return this._anyControls(A=>A.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){Yn(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(O){return null}}class re extends fe{constructor(O,A,Z){super(ot(A),Ot(Z,A)),this.controls=O,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,A){return this.controls[O]?this.controls[O]:(this.controls[O]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(O,A,Z={}){this.registerControl(O,A),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(O,A={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(O,A,Z={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],A&&this.registerControl(O,A),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,A={}){Qn(this,0,O),Object.keys(O).forEach(Z=>{vr(this,!0,Z),this.controls[Z].setValue(O[Z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(O,A={}){null!=O&&(Object.keys(O).forEach(Z=>{const Qe=this.controls[Z];Qe&&Qe.patchValue(O[Z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(O={},A={}){this._forEachChild((Z,Qe)=>{Z.reset(O[Qe],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(O,A,Z)=>(O[Z]=A.getRawValue(),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(A,Z)=>!!Z._syncPendingControls()||A);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){Object.keys(this.controls).forEach(A=>{const Z=this.controls[A];Z&&O(Z,A)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const[A,Z]of Object.entries(this.controls))if(this.contains(A)&&O(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,Z,Qe)=>((Z.enabled||this.disabled)&&(A[Qe]=Z.value),A))}_reduceChildren(O,A){let Z=O;return this._forEachChild((Qe,Jt)=>{Z=A(Z,Qe,Jt)}),Z}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(O){return this.controls.hasOwnProperty(O)?this.controls[O]:null}}class dt extends re{}function un(k,O){Mr(k,O),O.valueAccessor.writeValue(k.value),k.disabled&&O.valueAccessor.setDisabledState?.(!0),function Ei(k,O){O.valueAccessor.registerOnChange(A=>{k._pendingValue=A,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&kr(k,O)})}(k,O),function _s(k,O){const A=(Z,Qe)=>{O.valueAccessor.writeValue(Z),Qe&&O.viewToModelUpdate(Z)};k.registerOnChange(A),O._registerOnDestroy(()=>{k._unregisterOnChange(A)})}(k,O),function Bi(k,O){O.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&kr(k,O),"submit"!==k.updateOn&&k.markAsTouched()})}(k,O),function xn(k,O){if(O.valueAccessor.setDisabledState){const A=Z=>{O.valueAccessor.setDisabledState(Z)};k.registerOnDisabledChange(A),O._registerOnDestroy(()=>{k._unregisterOnDisabledChange(A)})}}(k,O)}function wr(k,O,A=!0){const Z=()=>{};O.valueAccessor&&(O.valueAccessor.registerOnChange(Z),O.valueAccessor.registerOnTouched(Z)),ti(k,O),k&&(O._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function oi(k,O){k.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(O)})}function Mr(k,O){const A=Br(k);null!==O.validator?k.setValidators(Or(A,O.validator)):"function"==typeof A&&k.setValidators([A]);const Z=on(k);null!==O.asyncValidator?k.setAsyncValidators(Or(Z,O.asyncValidator)):"function"==typeof Z&&k.setAsyncValidators([Z]);const Qe=()=>k.updateValueAndValidity();oi(O._rawValidators,Qe),oi(O._rawAsyncValidators,Qe)}function ti(k,O){let A=!1;if(null!==k){if(null!==O.validator){const Qe=Br(k);if(Array.isArray(Qe)&&Qe.length>0){const Jt=Qe.filter(Mn=>Mn!==O.validator);Jt.length!==Qe.length&&(A=!0,k.setValidators(Jt))}}if(null!==O.asyncValidator){const Qe=on(k);if(Array.isArray(Qe)&&Qe.length>0){const Jt=Qe.filter(Mn=>Mn!==O.asyncValidator);Jt.length!==Qe.length&&(A=!0,k.setAsyncValidators(Jt))}}}const Z=()=>{};return oi(O._rawValidators,Z),oi(O._rawAsyncValidators,Z),A}function kr(k,O){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function gi(k,O){const A=k.indexOf(O);A>-1&&k.splice(A,1)}function Hi(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}const Ji=class extends fe{constructor(O=null,A,Z){super(ot(A),Ot(Z,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(O),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yn(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Hi(O)?O.value:O)}setValue(O,A={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(O,A={}){this.setValue(O,A)}reset(O=this.defaultValue,A={}){this._applyFormState(O),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){gi(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){gi(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){Hi(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}};let xt=(()=>{class k{}return k.\u0275fac=function(A){return new(A||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})(),ws=(()=>{class k{}return k.\u0275fac=function(A){return new(A||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const ds=new p.OlP("NgModelWithFormControlWarning"),Xi={provide:Bn,useExisting:(0,p.Gpc)(()=>es)};let es=(()=>{class k extends Bn{constructor(A,Z){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(A),this._setAsyncValidators(Z)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ti(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const Z=this.form.get(A.path);return un(Z,A),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),Z}getControl(A){return this.form.get(A.path)}removeControl(A){wr(A.control||null,A,!1),function Qi(k,O){const A=k.indexOf(O);A>-1&&k.splice(A,1)}(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,Z){this.form.get(A.path).setValue(Z)}onSubmit(A){return this.submitted=!0,function Pi(k,O){k._syncPendingControls(),O.forEach(A=>{const Z=A.control;"submit"===Z.updateOn&&Z._pendingChange&&(A.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const Z=A.control,Qe=this.form.get(A.path);Z!==Qe&&(wr(Z||null,A),(k=>k instanceof Ji)(Qe)&&(un(Qe,A),A.control=Qe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const Z=this.form.get(A.path);(function Ri(k,O){Mr(k,O)})(Z,A),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const Z=this.form.get(A.path);Z&&function Zr(k,O){return ti(k,O)}(Z,A)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mr(this.form,this),this._oldForm&&ti(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(ut,10),p.Y36(ce,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(A,Z){1&A&&p.NdJ("submit",function(Jt){return Z.onSubmit(Jt)})("reset",function(){return Z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Xi]),p.qOj,p.TTD]}),k})();const bo={provide:ar,useExisting:(0,p.Gpc)(()=>hs)};let hs=(()=>{class k extends ar{constructor(A,Z,Qe,Jt,Mn){super(),this._ngModelWarningConfig=Mn,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(Z),this._setAsyncValidators(Qe),this.valueAccessor=function ai(k,O){if(!O)return null;let A,Z,Qe;return Array.isArray(O),O.forEach(Jt=>{Jt.constructor===me?A=Jt:function Qr(k){return Object.getPrototypeOf(k.constructor)===ht}(Jt)?Z=Jt:Qe=Jt}),Qe||Z||A||null}(0,Jt)}set isDisabled(A){}ngOnChanges(A){this._added||this._setUpControl(),function ls(k,O){if(!k.hasOwnProperty("model"))return!1;const A=k.model;return!!A.isFirstChange()||!Object.is(O,A.currentValue)}(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return function an(k,O){return[...O.path,k]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(A){return new(A||k)(p.Y36(Bn,13),p.Y36(ut,10),p.Y36(ce,10),p.Y36(We,10),p.Y36(ds,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([bo]),p.qOj,p.TTD]}),k})();const Ii={provide:We,useExisting:(0,p.Gpc)(()=>ki),multi:!0};function Di(k,O){return null==k?`${O}`:(O&&"object"==typeof O&&(O="Object"),`${k}: ${O}`.slice(0,50))}let ki=(()=>{class k extends ht{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){this.value=A;const Qe=Di(this._getOptionId(A),A);this.setProperty("value",Qe)}registerOnChange(A){this.onChange=Z=>{this.value=this._getOptionValue(Z),A(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(A){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z),A))return Z;return null}_getOptionValue(A){const Z=function ts(k){return k.split(":")[0]}(A);return this._optionMap.has(Z)?this._optionMap.get(Z):A}}return k.\u0275fac=function(){let O;return function(Z){return(O||(O=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(A,Z){1&A&&p.NdJ("change",function(Jt){return Z.onChange(Jt.target.value)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Ii]),p.qOj]}),k})(),na=(()=>{class k{constructor(A,Z,Qe){this._element=A,this._renderer=Z,this._select=Qe,this._select&&(this.id=this._select._registerOption())}set ngValue(A){null!=this._select&&(this._select._optionMap.set(this.id,A),this._setElementValue(Di(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._setElementValue(A),this._select&&this._select.writeValue(this._select.value)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(ki,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const fi={provide:We,useExisting:(0,p.Gpc)(()=>bs),multi:!0};function Co(k,O){return null==k?`${O}`:("string"==typeof O&&(O=`'${O}'`),O&&"object"==typeof O&&(O="Object"),`${k}: ${O}`.slice(0,50))}let bs=(()=>{class k extends ht{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){let Z;if(this.value=A,Array.isArray(A)){const Qe=A.map(Jt=>this._getOptionId(Jt));Z=(Jt,Mn)=>{Jt._setSelected(Qe.indexOf(Mn.toString())>-1)}}else Z=(Qe,Jt)=>{Qe._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(A){this.onChange=Z=>{const Qe=[],Jt=Z.selectedOptions;if(void 0!==Jt){const Mn=Jt;for(let Wi=0;Wi<Mn.length;Wi++){const Vi=this._getOptionValue(Mn[Wi].value);Qe.push(Vi)}}else{const Mn=Z.options;for(let Wi=0;Wi<Mn.length;Wi++){const Hr=Mn[Wi];if(Hr.selected){const Vi=this._getOptionValue(Hr.value);Qe.push(Vi)}}}this.value=Qe,A(Qe)}}_registerOption(A){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,A),Z}_getOptionId(A){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z)._value,A))return Z;return null}_getOptionValue(A){const Z=function Ds(k){return k.split(":")[0]}(A);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:A}}return k.\u0275fac=function(){let O;return function(Z){return(O||(O=p.n5z(k)))(Z||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(A,Z){1&A&&p.NdJ("change",function(Jt){return Z.onChange(Jt.target)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([fi]),p.qOj]}),k})(),To=(()=>{class k{constructor(A,Z,Qe){this._element=A,this._renderer=Z,this._select=Qe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(A){null!=this._select&&(this._value=A,this._setElementValue(Co(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._select?(this._value=A,this._setElementValue(Co(this.id,A)),this._select.writeValue(this._select.value)):this._setElementValue(A)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}_setSelected(A){this._renderer.setProperty(this._element.nativeElement,"selected",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(A){return new(A||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(bs,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})(),er=(()=>{class k{}return k.\u0275fac=function(A){return new(A||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[ws]}),k})(),Hs=(()=>{class k{}return k.\u0275fac=function(A){return new(A||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[er]}),k})(),uo=(()=>{class k{static withConfig(A){return{ngModule:k,providers:[{provide:ds,useValue:A.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(A){return new(A||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[er]}),k})();class Xr extends fe{constructor(O,A,Z){super(ot(A),Ot(Z,A)),this.controls=O,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[this._adjustIndex(O)]}push(O,A={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(O,A,Z={}){this.controls.splice(O,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(O,A={}){let Z=this._adjustIndex(O);Z<0&&(Z=0),this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),this.controls.splice(Z,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(O,A,Z={}){let Qe=this._adjustIndex(O);Qe<0&&(Qe=0),this.controls[Qe]&&this.controls[Qe]._registerOnCollectionChange(()=>{}),this.controls.splice(Qe,1),A&&(this.controls.splice(Qe,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,A={}){Qn(this,0,O),O.forEach((Z,Qe)=>{vr(this,!1,Qe),this.at(Qe).setValue(Z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(O,A={}){null!=O&&(O.forEach((Z,Qe)=>{this.at(Qe)&&this.at(Qe).patchValue(Z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(O=[],A={}){this._forEachChild((Z,Qe)=>{Z.reset(O[Qe],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(O=>O.getRawValue())}clear(O={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_adjustIndex(O){return O<0?O+this.length:O}_syncPendingControls(){let O=this.controls.reduce((A,Z)=>!!Z._syncPendingControls()||A,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){this.controls.forEach((A,Z)=>{O(A,Z)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(A=>A.enabled&&O(A))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}_find(O){return this.at(O)??null}}function Li(k){return!!k&&(void 0!==k.asyncValidators||void 0!==k.validators||void 0!==k.updateOn)}let zs=(()=>{class k{constructor(){this.useNonNullable=!1}get nonNullable(){const A=new k;return A.useNonNullable=!0,A}group(A,Z=null){const Qe=this._reduceControls(A);let Jt={};return Li(Z)?Jt=Z:null!==Z&&(Jt.validators=Z.validator,Jt.asyncValidators=Z.asyncValidator),new re(Qe,Jt)}record(A,Z=null){const Qe=this._reduceControls(A);return new dt(Qe,Z)}control(A,Z,Qe){let Jt={};return this.useNonNullable?(Li(Z)?Jt=Z:(Jt.validators=Z,Jt.asyncValidators=Qe),new Ji(A,{...Jt,nonNullable:!0})):new Ji(A,Z,Qe)}array(A,Z,Qe){const Jt=A.map(Mn=>this._createControl(Mn));return new Xr(Jt,Z,Qe)}_reduceControls(A){const Z={};return Object.keys(A).forEach(Qe=>{Z[Qe]=this._createControl(A[Qe])}),Z}_createControl(A){return A instanceof Ji||A instanceof fe?A:Array.isArray(A)?this.control(A[0],A.length>1?A[1]:null,A.length>2?A[2]:null):this.control(A)}}return k.\u0275fac=function(A){return new(A||k)},k.\u0275prov=p.Yz7({token:k,factory:k.\u0275fac,providedIn:uo}),k})()},1481:(Xt,Je,j)=>{j.d(Je,{Dx:()=>Ye,b2:()=>Bn,q6:()=>Rr,se:()=>Re});var p=j(6895),z=j(4650);class W extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Te extends W{static makeCurrent(){(0,p.HT)(new Te)}onAndCancel(re,te,Ue){return re.addEventListener(te,Ue,!1),()=>{re.removeEventListener(te,Ue,!1)}}dispatchEvent(re,te){re.dispatchEvent(te)}remove(re){re.parentNode&&re.parentNode.removeChild(re)}createElement(re,te){return(te=te||this.getDefaultDocument()).createElement(re)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(re){return re.nodeType===Node.ELEMENT_NODE}isShadowRoot(re){return re instanceof DocumentFragment}getGlobalEventTarget(re,te){return"window"===te?window:"document"===te?re:"body"===te?re.body:null}getBaseHref(re){const te=function Me(){return Ie=Ie||document.querySelector("base"),Ie?Ie.getAttribute("href"):null}();return null==te?null:function Pe(fe){ke=ke||document.createElement("a"),ke.setAttribute("href",fe);const re=ke.pathname;return"/"===re.charAt(0)?re:`/${re}`}(te)}resetBaseElement(){Ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(re){return(0,p.Mx)(document.cookie,re)}}let ke,Ie=null;const Ve=new z.OlP("TRANSITION_ID"),he=[{provide:z.ip1,useFactory:function de(fe,re,te){return()=>{te.get(z.CZH).donePromise.then(()=>{const Ue=(0,p.q)(),dt=re.querySelectorAll(`style[ng-transition="${fe}"]`);for(let tn=0;tn<dt.length;tn++)Ue.remove(dt[tn])})}},deps:[Ve,p.K0,z.zs3],multi:!0}];let yt=(()=>{class fe{build(){return new XMLHttpRequest}}return fe.\u0275fac=function(te){return new(te||fe)},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const ht=new z.OlP("EventManagerPlugins");let We=(()=>{class fe{constructor(te,Ue){this._zone=Ue,this._eventNameToPlugin=new Map,te.forEach(dt=>dt.manager=this),this._plugins=te.slice().reverse()}addEventListener(te,Ue,dt){return this._findPluginFor(Ue).addEventListener(te,Ue,dt)}addGlobalEventListener(te,Ue,dt){return this._findPluginFor(Ue).addGlobalEventListener(te,Ue,dt)}getZone(){return this._zone}_findPluginFor(te){const Ue=this._eventNameToPlugin.get(te);if(Ue)return Ue;const dt=this._plugins;for(let tn=0;tn<dt.length;tn++){const an=dt[tn];if(an.supports(te))return this._eventNameToPlugin.set(te,an),an}throw new Error(`No event manager plugin found for event ${te}`)}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(ht),z.LFG(z.R0b))},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class Ht{constructor(re){this._doc=re}addGlobalEventListener(re,te,Ue){const dt=(0,p.q)().getGlobalEventTarget(this._doc,re);if(!dt)throw new Error(`Unsupported event target ${dt} for event ${te}`);return this.addEventListener(dt,te,Ue)}}let tt=(()=>{class fe{constructor(){this._stylesSet=new Set}addStyles(te){const Ue=new Set;te.forEach(dt=>{this._stylesSet.has(dt)||(this._stylesSet.add(dt),Ue.add(dt))}),this.onStylesAdded(Ue)}onStylesAdded(te){}getAllStyles(){return Array.from(this._stylesSet)}}return fe.\u0275fac=function(te){return new(te||fe)},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})(),qe=(()=>{class fe extends tt{constructor(te){super(),this._doc=te,this._hostNodes=new Map,this._hostNodes.set(te.head,[])}_addStylesToHost(te,Ue,dt){te.forEach(tn=>{const an=this._doc.createElement("style");an.textContent=tn,dt.push(Ue.appendChild(an))})}addHost(te){const Ue=[];this._addStylesToHost(this._stylesSet,te,Ue),this._hostNodes.set(te,Ue)}removeHost(te){const Ue=this._hostNodes.get(te);Ue&&Ue.forEach(Zt),this._hostNodes.delete(te)}onStylesAdded(te){this._hostNodes.forEach((Ue,dt)=>{this._addStylesToHost(te,dt,Ue)})}ngOnDestroy(){this._hostNodes.forEach(te=>te.forEach(Zt))}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(p.K0))},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})();function Zt(fe){(0,p.q)().remove(fe)}const Yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},me=/%COMP%/g;function se(fe,re,te){for(let Ue=0;Ue<re.length;Ue++){let dt=re[Ue];Array.isArray(dt)?se(fe,dt,te):(dt=dt.replace(me,fe),te.push(dt))}return te}function De(fe){return re=>{if("__ngUnwrap__"===re)return fe;!1===fe(re)&&(re.preventDefault(),re.returnValue=!1)}}let Re=(()=>{class fe{constructor(te,Ue,dt){this.eventManager=te,this.sharedStylesHost=Ue,this.appId=dt,this.rendererByCompId=new Map,this.defaultRenderer=new mt(te)}createRenderer(te,Ue){if(!te||!Ue)return this.defaultRenderer;switch(Ue.encapsulation){case z.ifc.Emulated:{let dt=this.rendererByCompId.get(Ue.id);return dt||(dt=new Kt(this.eventManager,this.sharedStylesHost,Ue,this.appId),this.rendererByCompId.set(Ue.id,dt)),dt.applyToHost(te),dt}case 1:case z.ifc.ShadowDom:return new vt(this.eventManager,this.sharedStylesHost,te,Ue);default:if(!this.rendererByCompId.has(Ue.id)){const dt=se(Ue.id,Ue.styles,[]);this.sharedStylesHost.addStyles(dt),this.rendererByCompId.set(Ue.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(We),z.LFG(qe),z.LFG(z.AFp))},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class mt{constructor(re){this.eventManager=re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(re,te){return te?document.createElementNS(Yt[te]||te,re):document.createElement(re)}createComment(re){return document.createComment(re)}createText(re){return document.createTextNode(re)}appendChild(re,te){(Lt(re)?re.content:re).appendChild(te)}insertBefore(re,te,Ue){re&&(Lt(re)?re.content:re).insertBefore(te,Ue)}removeChild(re,te){re&&re.removeChild(te)}selectRootElement(re,te){let Ue="string"==typeof re?document.querySelector(re):re;if(!Ue)throw new Error(`The selector "${re}" did not match any elements`);return te||(Ue.textContent=""),Ue}parentNode(re){return re.parentNode}nextSibling(re){return re.nextSibling}setAttribute(re,te,Ue,dt){if(dt){te=dt+":"+te;const tn=Yt[dt];tn?re.setAttributeNS(tn,te,Ue):re.setAttribute(te,Ue)}else re.setAttribute(te,Ue)}removeAttribute(re,te,Ue){if(Ue){const dt=Yt[Ue];dt?re.removeAttributeNS(dt,te):re.removeAttribute(`${Ue}:${te}`)}else re.removeAttribute(te)}addClass(re,te){re.classList.add(te)}removeClass(re,te){re.classList.remove(te)}setStyle(re,te,Ue,dt){dt&(z.JOm.DashCase|z.JOm.Important)?re.style.setProperty(te,Ue,dt&z.JOm.Important?"important":""):re.style[te]=Ue}removeStyle(re,te,Ue){Ue&z.JOm.DashCase?re.style.removeProperty(te):re.style[te]=""}setProperty(re,te,Ue){re[te]=Ue}setValue(re,te){re.nodeValue=te}listen(re,te,Ue){return"string"==typeof re?this.eventManager.addGlobalEventListener(re,te,De(Ue)):this.eventManager.addEventListener(re,te,De(Ue))}}function Lt(fe){return"TEMPLATE"===fe.tagName&&void 0!==fe.content}class Kt extends mt{constructor(re,te,Ue,dt){super(re),this.component=Ue;const tn=se(dt+"-"+Ue.id,Ue.styles,[]);te.addStyles(tn),this.contentAttr=function ce(fe){return"_ngcontent-%COMP%".replace(me,fe)}(dt+"-"+Ue.id),this.hostAttr=function je(fe){return"_nghost-%COMP%".replace(me,fe)}(dt+"-"+Ue.id)}applyToHost(re){super.setAttribute(re,this.hostAttr,"")}createElement(re,te){const Ue=super.createElement(re,te);return super.setAttribute(Ue,this.contentAttr,""),Ue}}class vt extends mt{constructor(re,te,Ue,dt){super(re),this.sharedStylesHost=te,this.hostEl=Ue,this.shadowRoot=Ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const tn=se(dt.id,dt.styles,[]);for(let an=0;an<tn.length;an++){const un=document.createElement("style");un.textContent=tn[an],this.shadowRoot.appendChild(un)}}nodeOrShadowRoot(re){return re===this.hostEl?this.shadowRoot:re}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(re,te){return super.appendChild(this.nodeOrShadowRoot(re),te)}insertBefore(re,te,Ue){return super.insertBefore(this.nodeOrShadowRoot(re),te,Ue)}removeChild(re,te){return super.removeChild(this.nodeOrShadowRoot(re),te)}parentNode(re){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(re)))}}let cn=(()=>{class fe extends Ht{constructor(te){super(te)}supports(te){return!0}addEventListener(te,Ue,dt){return te.addEventListener(Ue,dt,!1),()=>this.removeEventListener(te,Ue,dt)}removeEventListener(te,Ue,dt){return te.removeEventListener(Ue,dt)}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(p.K0))},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const en=["alt","control","meta","shift"],fn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bt={alt:fe=>fe.altKey,control:fe=>fe.ctrlKey,meta:fe=>fe.metaKey,shift:fe=>fe.shiftKey};let $n=(()=>{class fe extends Ht{constructor(te){super(te)}supports(te){return null!=fe.parseEventName(te)}addEventListener(te,Ue,dt){const tn=fe.parseEventName(Ue),an=fe.eventCallback(tn.fullKey,dt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(te,tn.domEventName,an))}static parseEventName(te){const Ue=te.toLowerCase().split("."),dt=Ue.shift();if(0===Ue.length||"keydown"!==dt&&"keyup"!==dt)return null;const tn=fe._normalizeKey(Ue.pop());let an="",un=Ue.indexOf("code");if(un>-1&&(Ue.splice(un,1),an="code."),en.forEach(oi=>{const xn=Ue.indexOf(oi);xn>-1&&(Ue.splice(xn,1),an+=oi+".")}),an+=tn,0!=Ue.length||0===tn.length)return null;const wr={};return wr.domEventName=dt,wr.fullKey=an,wr}static matchEventFullKeyCode(te,Ue){let dt=fn[te.key]||te.key,tn="";return Ue.indexOf("code.")>-1&&(dt=te.code,tn="code."),!(null==dt||!dt)&&(dt=dt.toLowerCase()," "===dt?dt="space":"."===dt&&(dt="dot"),en.forEach(an=>{an!==dt&&(0,Bt[an])(te)&&(tn+=an+".")}),tn+=dt,tn===Ue)}static eventCallback(te,Ue,dt){return tn=>{fe.matchEventFullKeyCode(tn,te)&&dt.runGuarded(()=>Ue(tn))}}static _normalizeKey(te){return"esc"===te?"escape":te}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(p.K0))},fe.\u0275prov=z.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const Rr=(0,z.eFA)(z._c5,"browser",[{provide:z.Lbi,useValue:p.bD},{provide:z.g9A,useValue:function Or(){Te.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function on(){return(0,z.RDi)(document),document},deps:[]}]),ir=new z.OlP(""),Tt=[{provide:z.rWj,useClass:class Ce{addToWindow(re){z.dqk.getAngularTestability=(Ue,dt=!0)=>{const tn=re.findTestabilityInTree(Ue,dt);if(null==tn)throw new Error("Could not find testability for element.");return tn},z.dqk.getAllAngularTestabilities=()=>re.getAllTestabilities(),z.dqk.getAllAngularRootElements=()=>re.getAllRootElements(),z.dqk.frameworkStabilizers||(z.dqk.frameworkStabilizers=[]),z.dqk.frameworkStabilizers.push(Ue=>{const dt=z.dqk.getAllAngularTestabilities();let tn=dt.length,an=!1;const un=function(wr){an=an||wr,tn--,0==tn&&Ue(an)};dt.forEach(function(wr){wr.whenStable(un)})})}findTestabilityInTree(re,te,Ue){return null==te?null:re.getTestability(te)??(Ue?(0,p.q)().isShadowRoot(te)?this.findTestabilityInTree(re,te.host,!0):this.findTestabilityInTree(re,te.parentElement,!0):null)}},deps:[]},{provide:z.lri,useClass:z.dDg,deps:[z.R0b,z.eoX,z.rWj]},{provide:z.dDg,useClass:z.dDg,deps:[z.R0b,z.eoX,z.rWj]}],cr=[{provide:z.zSh,useValue:"root"},{provide:z.qLn,useFactory:function Br(){return new z.qLn},deps:[]},{provide:ht,useClass:cn,multi:!0,deps:[p.K0,z.R0b,z.Lbi]},{provide:ht,useClass:$n,multi:!0,deps:[p.K0]},{provide:Re,useClass:Re,deps:[We,qe,z.AFp]},{provide:z.FYo,useExisting:Re},{provide:tt,useExisting:qe},{provide:qe,useClass:qe,deps:[p.K0]},{provide:We,useClass:We,deps:[ht,z.R0b]},{provide:p.JF,useClass:yt,deps:[]},[]];let Bn=(()=>{class fe{constructor(te){}static withServerTransition(te){return{ngModule:fe,providers:[{provide:z.AFp,useValue:te.appId},{provide:Ve,useExisting:z.AFp},he]}}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(ir,12))},fe.\u0275mod=z.oAB({type:fe}),fe.\u0275inj=z.cJS({providers:[...cr,...Tt],imports:[p.ez,z.hGG]}),fe})(),Ye=(()=>{class fe{constructor(te){this._doc=te}getTitle(){return this._doc.title}setTitle(te){this._doc.title=te||""}}return fe.\u0275fac=function(te){return new(te||fe)(z.LFG(p.K0))},fe.\u0275prov=z.Yz7({token:fe,factory:function(te){let Ue=null;return Ue=te?new te:function qr(){return new Ye((0,z.LFG)(p.K0))}(),Ue},providedIn:"root"}),fe})();typeof window<"u"&&window},7001:(Xt,Je,j)=>{j.d(Je,{OD:()=>ui,F0:()=>Nr,Bz:()=>oa,lC:()=>fs});var p=j(4650),z=j(8996),W=j(9646),Te=j(7579);class Ie extends Te.x{constructor(D){super(),this._value=D}get value(){return this.getValue()}_subscribe(D){const _=super._subscribe(D);return!_.closed&&D.next(this._value),_}getValue(){const{hasError:D,thrownError:_,_value:T}=this;if(D)throw _;return this._throwIfClosed(),T}next(D){super.next(this._value=D)}}var Me=j(6805),ke=j(9751),Pe=j(4742),Ve=j(4671),de=j(3268),he=j(7669),Ce=j(1810),yt=j(5403),ht=j(9672);function We(...w){const D=(0,he.yG)(w),_=(0,he.jO)(w),{args:T,keys:P}=(0,Pe.D)(w);if(0===T.length)return(0,z.D)([],D);const K=new ke.y(function Ht(w,D,_=Ve.y){return T=>{tt(D,()=>{const{length:P}=w,K=new Array(P);let ie=P,ae=P;for(let nt=0;nt<P;nt++)tt(D,()=>{const kt=(0,z.D)(w[nt],D);let zn=!1;kt.subscribe((0,yt.x)(T,rn=>{K[nt]=rn,zn||(zn=!0,ae--),ae||T.next(_(K.slice()))},()=>{--ie||T.complete()}))},T)},T)}}(T,D,P?ie=>(0,Ce.n)(P,ie):Ve.y));return _?K.pipe((0,de.Z)(_)):K}function tt(w,D,_){w?(0,ht.f)(_,w,D):D()}var qe=j(7272),Zt=j(8421);function Yt(w){return new ke.y(D=>{(0,Zt.Xf)(w()).subscribe(D)})}var me=j(9635),it=j(576);function rt(w,D){const _=(0,it.m)(w)?w:()=>w,T=P=>P.error(_());return new ke.y(D?P=>D.schedule(T,0,P):T)}var It=j(515),ut=j(727),ce=j(4482);function je(){return(0,ce.e)((w,D)=>{let _=null;w._refCount++;const T=(0,yt.x)(D,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(_=null);const P=w._connection,K=_;_=null,P&&(!K||P===K)&&P.unsubscribe(),D.unsubscribe()});w.subscribe(T),T.closed||(_=w.connect())})}class se extends ke.y{constructor(D,_){super(),this.source=D,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,ce.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new ut.w0;const _=this.getSubject();D.add(this.source.subscribe((0,yt.x)(_,void 0,()=>{this._teardown(),_.complete()},T=>{this._teardown(),_.error(T)},()=>this._teardown()))),D.closed&&(this._connection=null,D=ut.w0.EMPTY)}return D}refCount(){return je()(this)}}var De=j(6895),pe=j(4004),Re=j(3900),mt=j(5698),bt=j(8675),Ct=j(9300),Lt=j(5577),Kt=j(590),vt=j(4351),cn=j(8505);function en(w){return(0,ce.e)((D,_)=>{let K,T=null,P=!1;T=D.subscribe((0,yt.x)(_,void 0,void 0,ie=>{K=(0,Zt.Xf)(w(ie,en(w)(D))),T?(T.unsubscribe(),T=null,K.subscribe(_)):P=!0})),P&&(T.unsubscribe(),T=null,K.subscribe(_))})}var fn=j(5026);function Bt(w){return w<=0?()=>It.E:(0,ce.e)((D,_)=>{let T=[];D.subscribe((0,yt.x)(_,P=>{T.push(P),w<T.length&&T.shift()},()=>{for(const P of T)_.next(P);_.complete()},void 0,()=>{T=null}))})}var $n=j(8068),In=j(6590);function Zn(w,D){const _=arguments.length>=2;return T=>T.pipe(w?(0,Ct.h)((P,K)=>w(P,K,T)):Ve.y,Bt(1),_?(0,In.d)(D):(0,$n.T)(()=>new Me.K))}function Kn(w){return(0,ce.e)((D,_)=>{try{D.subscribe(_)}finally{_.add(w)}})}var Or=j(8189),Br=j(1481);const on="primary",yr=Symbol("RouteTitle");class Rr{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const _=this.params[D];return Array.isArray(_)?_[0]:_}return null}getAll(D){if(this.has(D)){const _=this.params[D];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function ir(w){return new Rr(w)}function Tt(w,D,_){const T=_.path.split("/");if(T.length>w.length||"full"===_.pathMatch&&(D.hasChildren()||T.length<w.length))return null;const P={};for(let K=0;K<T.length;K++){const ie=T[K],ae=w[K];if(ie.startsWith(":"))P[ie.substring(1)]=ae;else if(ie!==ae.path)return null}return{consumed:w.slice(0,T.length),posParams:P}}function Bn(w,D){const _=w?Object.keys(w):void 0,T=D?Object.keys(D):void 0;if(!_||!T||_.length!=T.length)return!1;let P;for(let K=0;K<_.length;K++)if(P=_[K],!ar(w[P],D[P]))return!1;return!0}function ar(w,D){if(Array.isArray(w)&&Array.isArray(D)){if(w.length!==D.length)return!1;const _=[...w].sort(),T=[...D].sort();return _.every((P,K)=>T[K]===P)}return w===D}function si(w){return Array.prototype.concat.apply([],w)}function Si(w){return w.length>0?w[w.length-1]:null}function Ye(w,D){for(const _ in w)w.hasOwnProperty(_)&&D(w[_],_)}function ye(w){return(0,p.CqO)(w)?w:(0,p.QGY)(w)?(0,z.D)(Promise.resolve(w)):(0,W.of)(w)}const lt={exact:function Rt(w,D,_){if(!Dt(w.segments,D.segments)||!Cn(w.segments,D.segments,_)||w.numberOfChildren!==D.numberOfChildren)return!1;for(const T in D.children)if(!w.children[T]||!Rt(w.children[T],D.children[T],_))return!1;return!0},subset:Hn},Qt={exact:function sr(w,D){return Bn(w,D)},subset:function Tr(w,D){return Object.keys(D).length<=Object.keys(w).length&&Object.keys(D).every(_=>ar(w[_],D[_]))},ignored:()=>!0};function En(w,D,_){return lt[_.paths](w.root,D.root,_.matrixParams)&&Qt[_.queryParams](w.queryParams,D.queryParams)&&!("exact"===_.fragment&&w.fragment!==D.fragment)}function Hn(w,D,_){return Pr(w,D,D.segments,_)}function Pr(w,D,_,T){if(w.segments.length>_.length){const P=w.segments.slice(0,_.length);return!(!Dt(P,_)||D.hasChildren()||!Cn(P,_,T))}if(w.segments.length===_.length){if(!Dt(w.segments,_)||!Cn(w.segments,_,T))return!1;for(const P in D.children)if(!w.children[P]||!Hn(w.children[P],D.children[P],T))return!1;return!0}{const P=_.slice(0,w.segments.length),K=_.slice(w.segments.length);return!!(Dt(w.segments,P)&&Cn(w.segments,P,T)&&w.children[on])&&Pr(w.children[on],D,K,T)}}function Cn(w,D,_){return D.every((T,P)=>Qt[_](w[P].parameters,T.parameters))}class Dn{constructor(D,_,T){this.root=D,this.queryParams=_,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ir(this.queryParams)),this._queryParamMap}toString(){return ve.serialize(this)}}class Gt{constructor(D,_){this.segments=D,this.children=_,this.parent=null,Ye(_,(T,P)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oe(this)}}class Ft{constructor(D,_){this.path=D,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=ir(this.parameters)),this._parameterMap}toString(){return Qn(this)}}function Dt(w,D){return w.length===D.length&&w.every((_,T)=>_.path===D[T].path)}let yn=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=p.Yz7({token:w,factory:function(){return new Tn},providedIn:"root"}),w})();class Tn{parse(D){const _=new wr(D);return new Dn(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(D){const _=`/${be(D.root,!0)}`,T=function re(w){const D=Object.keys(w).map(_=>{const T=w[_];return Array.isArray(T)?T.map(P=>`${xe(_)}=${xe(P)}`).join("&"):`${xe(_)}=${xe(T)}`}).filter(_=>!!_);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${_}${T}${"string"==typeof D.fragment?`#${function Ot(w){return encodeURI(w)}(D.fragment)}`:""}`}}const ve=new Tn;function oe(w){return w.segments.map(D=>Qn(D)).join("/")}function be(w,D){if(!w.hasChildren())return oe(w);if(D){const _=w.children[on]?be(w.children[on],!1):"",T=[];return Ye(w.children,(P,K)=>{K!==on&&T.push(`${K}:${be(P,!1)}`)}),T.length>0?`${_}(${T.join("//")})`:_}{const _=function wn(w,D){let _=[];return Ye(w.children,(T,P)=>{P===on&&(_=_.concat(D(T,P)))}),Ye(w.children,(T,P)=>{P!==on&&(_=_.concat(D(T,P)))}),_}(w,(T,P)=>P===on?[be(w.children[on],!1)]:[`${P}:${be(T,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[on]?`${oe(w)}/${_[0]}`:`${oe(w)}/(${_.join("//")})`}}function ot(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xe(w){return ot(w).replace(/%3B/gi,";")}function dn(w){return ot(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yn(w){return decodeURIComponent(w)}function vr(w){return Yn(w.replace(/\+/g,"%20"))}function Qn(w){return`${dn(w.path)}${function fe(w){return Object.keys(w).map(D=>`;${dn(D)}=${dn(w[D])}`).join("")}(w.parameters)}`}const te=/^[^\/()?;=#]+/;function Ue(w){const D=w.match(te);return D?D[0]:""}const dt=/^[^=?&#]+/,an=/^[^&#]+/;class wr{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(D.length>0||Object.keys(_).length>0)&&(T[on]=new Gt(D,_)),T}parseSegment(){const D=Ue(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(D),new Ft(Yn(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const _=Ue(this.remaining);if(!_)return;this.capture(_);let T="";if(this.consumeOptional("=")){const P=Ue(this.remaining);P&&(T=P,this.capture(T))}D[Yn(_)]=Yn(T)}parseQueryParam(D){const _=function tn(w){const D=w.match(dt);return D?D[0]:""}(this.remaining);if(!_)return;this.capture(_);let T="";if(this.consumeOptional("=")){const ie=function un(w){const D=w.match(an);return D?D[0]:""}(this.remaining);ie&&(T=ie,this.capture(T))}const P=vr(_),K=vr(T);if(D.hasOwnProperty(P)){let ie=D[P];Array.isArray(ie)||(ie=[ie],D[P]=ie),ie.push(K)}else D[P]=K}parseParens(D){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=Ue(this.remaining),P=this.remaining[T.length];if("/"!==P&&")"!==P&&";"!==P)throw new p.vHH(4010,!1);let K;T.indexOf(":")>-1?(K=T.slice(0,T.indexOf(":")),this.capture(K),this.capture(":")):D&&(K=on);const ie=this.parseChildren();_[K]=1===Object.keys(ie).length?ie[on]:new Gt([],ie),this.consumeOptional("//")}return _}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new p.vHH(4011,!1)}}function oi(w){return w.segments.length>0?new Gt([],{[on]:w}):w}function xn(w){const D={};for(const T of Object.keys(w.children)){const K=xn(w.children[T]);(K.segments.length>0||K.hasChildren())&&(D[T]=K)}return function Mr(w){if(1===w.numberOfChildren&&w.children[on]){const D=w.children[on];return new Gt(w.segments.concat(D.segments),D.children)}return w}(new Gt(w.segments,D))}function ti(w){return w instanceof Dn}function Ri(w,D,_,T,P){if(0===_.length)return ji(D.root,D.root,D.root,T,P);const K=function ls(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Js(!0,0,w);let D=0,_=!1;const T=w.reduce((P,K,ie)=>{if("object"==typeof K&&null!=K){if(K.outlets){const ae={};return Ye(K.outlets,(nt,kt)=>{ae[kt]="string"==typeof nt?nt.split("/"):nt}),[...P,{outlets:ae}]}if(K.segmentPath)return[...P,K.segmentPath]}return"string"!=typeof K?[...P,K]:0===ie?(K.split("/").forEach((ae,nt)=>{0==nt&&"."===ae||(0==nt&&""===ae?_=!0:".."===ae?D++:""!=ae&&P.push(ae))}),P):[...P,K]},[]);return new Js(_,D,T)}(_);return K.toRoot()?ji(D.root,D.root,new Gt([],{}),T,P):function ie(nt){const kt=function ai(w,D,_,T){if(w.isAbsolute)return new Qr(D.root,!0,0);if(-1===T)return new Qr(_,_===D.root,0);return function Qi(w,D,_){let T=w,P=D,K=_;for(;K>P;){if(K-=P,T=T.parent,!T)throw new p.vHH(4005,!1);P=T.segments.length}return new Qr(T,!1,P-K)}(_,T+(Zr(w.commands[0])?0:1),w.numberOfDoubleDots)}(K,D,w.snapshot?._urlSegment,nt),zn=kt.processChildren?hi(kt.segmentGroup,kt.index,K.commands):jr(kt.segmentGroup,kt.index,K.commands);return ji(D.root,kt.segmentGroup,zn,T,P)}(w.snapshot?._lastPathIndex)}function Zr(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Yr(w){return"object"==typeof w&&null!=w&&w.outlets}function ji(w,D,_,T,P){let ie,K={};T&&Ye(T,(nt,kt)=>{K[kt]=Array.isArray(nt)?nt.map(zn=>`${zn}`):`${nt}`}),ie=w===D?_:qn(w,D,_);const ae=oi(xn(ie));return new Dn(ae,K,P)}function qn(w,D,_){const T={};return Ye(w.children,(P,K)=>{T[K]=P===D?_:qn(P,D,_)}),new Gt(w.segments,T)}class Js{constructor(D,_,T){if(this.isAbsolute=D,this.numberOfDoubleDots=_,this.commands=T,D&&T.length>0&&Zr(T[0]))throw new p.vHH(4003,!1);const P=T.find(Yr);if(P&&P!==Si(T))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qr{constructor(D,_,T){this.segmentGroup=D,this.processChildren=_,this.index=T}}function jr(w,D,_){if(w||(w=new Gt([],{})),0===w.segments.length&&w.hasChildren())return hi(w,D,_);const T=function Jr(w,D,_){let T=0,P=D;const K={match:!1,pathIndex:0,commandIndex:0};for(;P<w.segments.length;){if(T>=_.length)return K;const ie=w.segments[P],ae=_[T];if(Yr(ae))break;const nt=`${ae}`,kt=T<_.length-1?_[T+1]:null;if(P>0&&void 0===nt)break;if(nt&&kt&&"object"==typeof kt&&void 0===kt.outlets){if(!ea(nt,kt,ie))return K;T+=2}else{if(!ea(nt,{},ie))return K;T++}P++}return{match:!0,pathIndex:P,commandIndex:T}}(w,D,_),P=_.slice(T.commandIndex);if(T.match&&T.pathIndex<w.segments.length){const K=new Gt(w.segments.slice(0,T.pathIndex),{});return K.children[on]=new Gt(w.segments.slice(T.pathIndex),w.children),hi(K,0,P)}return T.match&&0===P.length?new Gt(w.segments,{}):T.match&&!w.hasChildren()?gi(w,D,_):T.match?hi(w,0,P):gi(w,D,_)}function hi(w,D,_){if(0===_.length)return new Gt(w.segments,{});{const T=function $i(w){return Yr(w[0])?w[0].outlets:{[on]:w}}(_),P={};return Ye(T,(K,ie)=>{"string"==typeof K&&(K=[K]),null!==K&&(P[ie]=jr(w.children[ie],D,K))}),Ye(w.children,(K,ie)=>{void 0===T[ie]&&(P[ie]=K)}),new Gt(w.segments,P)}}function gi(w,D,_){const T=w.segments.slice(0,D);let P=0;for(;P<_.length;){const K=_[P];if(Yr(K)){const nt=Hi(K.outlets);return new Gt(T,nt)}if(0===P&&Zr(_[0])){T.push(new Ft(w.segments[D].path,Ji(_[0]))),P++;continue}const ie=Yr(K)?K.outlets[on]:`${K}`,ae=P<_.length-1?_[P+1]:null;ie&&ae&&Zr(ae)?(T.push(new Ft(ie,Ji(ae))),P+=2):(T.push(new Ft(ie,{})),P++)}return new Gt(T,{})}function Hi(w){const D={};return Ye(w,(_,T)=>{"string"==typeof _&&(_=[_]),null!==_&&(D[T]=gi(new Gt([],{}),0,_))}),D}function Ji(w){const D={};return Ye(w,(_,T)=>D[T]=`${_}`),D}function ea(w,D,_){return w==_.path&&Bn(D,_.parameters)}class Sr{constructor(D,_){this.id=D,this.url=_}}class ui extends Sr{constructor(D,_,T="imperative",P=null){super(D,_),this.type=0,this.navigationTrigger=T,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cs extends Sr{constructor(D,_,T){super(D,_),this.urlAfterRedirects=T,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xs extends Sr{constructor(D,_,T,P){super(D,_),this.reason=T,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Es extends Sr{constructor(D,_,T,P){super(D,_),this.error=T,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ta extends Sr{constructor(D,_,T,P){super(D,_),this.urlAfterRedirects=T,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _r extends Sr{constructor(D,_,T,P){super(D,_),this.urlAfterRedirects=T,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oe extends Sr{constructor(D,_,T,P,K){super(D,_),this.urlAfterRedirects=T,this.state=P,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ae extends Sr{constructor(D,_,T,P){super(D,_),this.urlAfterRedirects=T,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Be extends Sr{constructor(D,_,T,P){super(D,_),this.urlAfterRedirects=T,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gt{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xt{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sn{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Un{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fr{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gr{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ws{constructor(D,_,T){this.routerEvent=D,this.position=_,this.anchor=T,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class mi{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const _=this.pathFromRoot(D);return _.length>1?_[_.length-2]:null}children(D){const _=Ai(D,this._root);return _?_.children.map(T=>T.value):[]}firstChild(D){const _=Ai(D,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(D){const _=so(D,this._root);return _.length<2?[]:_[_.length-2].children.map(P=>P.value).filter(P=>P!==D)}pathFromRoot(D){return so(D,this._root).map(_=>_.value)}}function Ai(w,D){if(w===D.value)return D;for(const _ of D.children){const T=Ai(w,_);if(T)return T}return null}function so(w,D){if(w===D.value)return[D];for(const _ of D.children){const T=so(w,_);if(T.length)return T.unshift(D),T}return[]}class ds{constructor(D,_){this.value=D,this.children=_}toString(){return`TreeNode(${this.value})`}}function Is(w){const D={};return w&&w.children.forEach(_=>D[_.value.outlet]=_),D}class Do extends mi{constructor(D,_){super(D),this.snapshot=_,bo(this,D)}toString(){return this.snapshot.toString()}}function Xi(w,D){const _=function es(w,D){const ie=new Oi([],{},{},"",{},on,D,null,w.root,-1,{});return new js("",new ds(ie,[]))}(w,D),T=new Ie([new Ft("",{})]),P=new Ie({}),K=new Ie({}),ie=new Ie({}),ae=new Ie(""),nt=new Mi(T,P,ie,ae,K,on,D,_.root);return nt.snapshot=_.root,new Do(new ds(nt,[]),_)}class Mi{constructor(D,_,T,P,K,ie,ae,nt){this.url=D,this.params=_,this.queryParams=T,this.fragment=P,this.data=K,this.outlet=ie,this.component=ae,this.title=this.data?.pipe((0,pe.U)(kt=>kt[yr]))??(0,W.of)(void 0),this._futureSnapshot=nt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pe.U)(D=>ir(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pe.U)(D=>ir(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wi(w,D="emptyOnly"){const _=w.pathFromRoot;let T=0;if("always"!==D)for(T=_.length-1;T>=1;){const P=_[T],K=_[T-1];if(P.routeConfig&&""===P.routeConfig.path)T--;else{if(K.component)break;T--}}return function oo(w){return w.reduce((D,_)=>({params:{...D.params,..._.params},data:{...D.data,..._.data},resolve:{..._.data,...D.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(T))}class Oi{constructor(D,_,T,P,K,ie,ae,nt,kt,zn,rn,nr){this.url=D,this.params=_,this.queryParams=T,this.fragment=P,this.data=K,this.outlet=ie,this.component=ae,this.title=this.data?.[yr],this.routeConfig=nt,this._urlSegment=kt,this._lastPathIndex=zn,this._correctedLastPathIndex=nr??zn,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ir(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ir(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class js extends mi{constructor(D,_){super(_),this.url=D,bo(this,_)}toString(){return hs(this._root)}}function bo(w,D){D.value._routerState=w,D.children.forEach(_=>bo(w,_))}function hs(w){const D=w.children.length>0?` { ${w.children.map(hs).join(", ")} } `:"";return`${w.value}${D}`}function Ii(w){if(w.snapshot){const D=w.snapshot,_=w._futureSnapshot;w.snapshot=_,Bn(D.queryParams,_.queryParams)||w.queryParams.next(_.queryParams),D.fragment!==_.fragment&&w.fragment.next(_.fragment),Bn(D.params,_.params)||w.params.next(_.params),function cr(w,D){if(w.length!==D.length)return!1;for(let _=0;_<w.length;++_)if(!Bn(w[_],D[_]))return!1;return!0}(D.url,_.url)||w.url.next(_.url),Bn(D.data,_.data)||w.data.next(_.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function Di(w,D){const _=Bn(w.params,D.params)&&function pt(w,D){return Dt(w,D)&&w.every((_,T)=>Bn(_.parameters,D[T].parameters))}(w.url,D.url);return _&&!(!w.parent!=!D.parent)&&(!w.parent||Di(w.parent,D.parent))}function ki(w,D,_){if(_&&w.shouldReuseRoute(D.value,_.value.snapshot)){const T=_.value;T._futureSnapshot=D.value;const P=function na(w,D,_){return D.children.map(T=>{for(const P of _.children)if(w.shouldReuseRoute(T.value,P.value.snapshot))return ki(w,T,P);return ki(w,T)})}(w,D,_);return new ds(T,P)}{if(w.shouldAttach(D.value)){const K=w.retrieve(D.value);if(null!==K){const ie=K.route;return ie.value._futureSnapshot=D.value,ie.children=D.children.map(ae=>ki(w,ae)),ie}}const T=function fi(w){return new Mi(new Ie(w.url),new Ie(w.params),new Ie(w.queryParams),new Ie(w.fragment),new Ie(w.data),w.outlet,w.component,w)}(D.value),P=D.children.map(K=>ki(w,K));return new ds(T,P)}}const Co="ngNavigationCancelingError";function Ds(w,D){const{redirectTo:_,navigationBehaviorOptions:T}=ti(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,P=xr(!1,0,D);return P.url=_,P.navigationBehaviorOptions=T,P}function xr(w,D,_){const T=new Error("NavigationCancelingError: "+(w||""));return T[Co]=!0,T.cancellationCode=D,_&&(T.url=_),T}function bs(w){return To(w)&&ti(w.url)}function To(w){return w&&w[Co]}class ns{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jn,this.attachRef=null}}let jn=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(_,T){const P=this.getOrCreateContext(_);P.outlet=T,this.contexts.set(_,P)}onChildOutletDestroyed(_){const T=this.getContext(_);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let T=this.getContext(_);return T||(T=new ns,this.contexts.set(_,T)),T}getContext(_){return this.contexts.get(_)||null}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Fi=!1;let fs=(()=>{class w{constructor(_,T,P,K,ie){this.parentContexts=_,this.location=T,this.changeDetector=K,this.environmentInjector=ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=P||on,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Fi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Fi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Fi);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,T){this.activated=_,this._activatedRoute=T,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,T){if(this.isActivated)throw new p.vHH(4013,Fi);this._activatedRoute=_;const P=this.location,ie=_._futureSnapshot.component,ae=this.parentContexts.getOrCreateContext(this.name).children,nt=new Gi(_,ae,P.injector);if(T&&function mr(w){return!!w.resolveComponentFactory}(T)){const kt=T.resolveComponentFactory(ie);this.activated=P.createComponent(kt,P.length,nt)}else this.activated=P.createComponent(ie,{index:P.length,injector:nt,environmentInjector:T??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(_){return new(_||w)(p.Y36(jn),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},w.\u0275dir=p.lG2({type:w,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),w})();class Gi{constructor(D,_,T){this.route=D,this.childContexts=_,this.parent=T}get(D,_){return D===Mi?this.route:D===jn?this.childContexts:this.parent.get(D,_)}}let Rs=(()=>{class w{}return w.\u0275fac=function(_){return new(_||w)},w.\u0275cmp=p.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(_,T){1&_&&p._UZ(0,"router-outlet")},dependencies:[fs],encapsulation:2}),w})();function $s(w,D){return w.providers&&!w._injector&&(w._injector=(0,p.MMx)(w.providers,D,`Route: ${w.path}`)),w._injector??D}function gs(w){const D=w.children&&w.children.map(gs),_=D?{...w,children:D}:{...w};return!_.component&&!_.loadComponent&&(D||_.loadChildren)&&_.outlet&&_.outlet!==on&&(_.component=Rs),_}function zi(w){return w.outlet||on}function ms(w,D){const _=w.filter(T=>zi(T)===D);return _.push(...w.filter(T=>zi(T)!==D)),_}function ao(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let D=w.parent;D;D=D.parent){const _=D.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class _t{constructor(D,_,T,P){this.routeReuseStrategy=D,this.futureState=_,this.currState=T,this.forwardEvent=P}activate(D){const _=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,T,D),Ii(this.futureState.root),this.activateChildRoutes(_,T,D)}deactivateChildRoutes(D,_,T){const P=Is(_);D.children.forEach(K=>{const ie=K.value.outlet;this.deactivateRoutes(K,P[ie],T),delete P[ie]}),Ye(P,(K,ie)=>{this.deactivateRouteAndItsChildren(K,T)})}deactivateRoutes(D,_,T){const P=D.value,K=_?_.value:null;if(P===K)if(P.component){const ie=T.getContext(P.outlet);ie&&this.deactivateChildRoutes(D,_,ie.children)}else this.deactivateChildRoutes(D,_,T);else K&&this.deactivateRouteAndItsChildren(_,T)}deactivateRouteAndItsChildren(D,_){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,_):this.deactivateRouteAndOutlet(D,_)}detachAndStoreRouteSubtree(D,_){const T=_.getContext(D.value.outlet),P=T&&D.value.component?T.children:_,K=Is(D);for(const ie of Object.keys(K))this.deactivateRouteAndItsChildren(K[ie],P);if(T&&T.outlet){const ie=T.outlet.detach(),ae=T.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:ie,route:D,contexts:ae})}}deactivateRouteAndOutlet(D,_){const T=_.getContext(D.value.outlet),P=T&&D.value.component?T.children:_,K=Is(D);for(const ie of Object.keys(K))this.deactivateRouteAndItsChildren(K[ie],P);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(D,_,T){const P=Is(_);D.children.forEach(K=>{this.activateRoutes(K,P[K.value.outlet],T),this.forwardEvent(new gr(K.value.snapshot))}),D.children.length&&this.forwardEvent(new Un(D.value.snapshot))}activateRoutes(D,_,T){const P=D.value,K=_?_.value:null;if(Ii(P),P===K)if(P.component){const ie=T.getOrCreateContext(P.outlet);this.activateChildRoutes(D,_,ie.children)}else this.activateChildRoutes(D,_,T);else if(P.component){const ie=T.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const ae=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),ie.children.onOutletReAttached(ae.contexts),ie.attachRef=ae.componentRef,ie.route=ae.route.value,ie.outlet&&ie.outlet.attach(ae.componentRef,ae.route.value),Ii(ae.route.value),this.activateChildRoutes(D,null,ie.children)}else{const ae=ao(P.snapshot),nt=ae?.get(p._Vd)??null;ie.attachRef=null,ie.route=P,ie.resolver=nt,ie.injector=ae,ie.outlet&&ie.outlet.activateWith(P,ie.injector),this.activateChildRoutes(D,null,ie.children)}}else this.activateChildRoutes(D,null,T)}}class er{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Hs{constructor(D,_){this.component=D,this.route=_}}function uo(w,D,_){const T=w._root;return ni(T,D?D._root:null,_,[T.value])}function Gs(w,D){const _=Symbol(),T=D.get(w,_);return T===_?"function"!=typeof w||(0,p.Z0I)(w)?D.get(w):w:T}function ni(w,D,_,T,P={canDeactivateChecks:[],canActivateChecks:[]}){const K=Is(D);return w.children.forEach(ie=>{(function Li(w,D,_,T,P={canDeactivateChecks:[],canActivateChecks:[]}){const K=w.value,ie=D?D.value:null,ae=_?_.getContext(w.value.outlet):null;if(ie&&K.routeConfig===ie.routeConfig){const nt=function zs(w,D,_){if("function"==typeof _)return _(w,D);switch(_){case"pathParamsChange":return!Dt(w.url,D.url);case"pathParamsOrQueryParamsChange":return!Dt(w.url,D.url)||!Bn(w.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Di(w,D)||!Bn(w.queryParams,D.queryParams);default:return!Di(w,D)}}(ie,K,K.routeConfig.runGuardsAndResolvers);nt?P.canActivateChecks.push(new er(T)):(K.data=ie.data,K._resolvedData=ie._resolvedData),ni(w,D,K.component?ae?ae.children:null:_,T,P),nt&&ae&&ae.outlet&&ae.outlet.isActivated&&P.canDeactivateChecks.push(new Hs(ae.outlet.component,ie))}else ie&&Ps(D,ae,P),P.canActivateChecks.push(new er(T)),ni(w,null,K.component?ae?ae.children:null:_,T,P)})(ie,K[ie.value.outlet],_,T.concat([ie.value]),P),delete K[ie.value.outlet]}),Ye(K,(ie,ae)=>Ps(ie,_.getContext(ae),P)),P}function Ps(w,D,_){const T=Is(w),P=w.value;Ye(T,(K,ie)=>{Ps(K,P.component?D?D.children.getContext(ie):null:D,_)}),_.canDeactivateChecks.push(new Hs(P.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,P))}function Ws(w){return"function"==typeof w}function Wi(w){return w instanceof Me.K||"EmptyError"===w?.name}const Hr=Symbol("INITIAL_VALUE");function Vi(){return(0,Re.w)(w=>We(w.map(D=>D.pipe((0,mt.q)(1),(0,bt.O)(Hr)))).pipe((0,pe.U)(D=>{for(const _ of D)if(!0!==_){if(_===Hr)return Hr;if(!1===_||_ instanceof Dn)return _}return!0}),(0,Ct.h)(D=>D!==Hr),(0,mt.q)(1)))}function sa(w){return(0,me.z)((0,cn.b)(D=>{if(ti(D))throw Ds(0,D)}),(0,pe.U)(D=>!0===D))}const S={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $(w,D,_,T,P){const K=N(w,D,_);return K.matched?function No(w,D,_,T){const P=D.canMatch;if(!P||0===P.length)return(0,W.of)(!0);const K=P.map(ie=>{const ae=Gs(ie,w);return ye(function Qe(w){return w&&Ws(w.canMatch)}(ae)?ae.canMatch(D,_):w.runInContext(()=>ae(D,_)))});return(0,W.of)(K).pipe(Vi(),sa())}(T=$s(D,T),D,_).pipe((0,pe.U)(ie=>!0===ie?K:{...S})):(0,W.of)(K)}function N(w,D,_){if(""===D.path)return"full"===D.pathMatch&&(w.hasChildren()||_.length>0)?{...S}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const P=(D.matcher||Tt)(_,w,D);if(!P)return{...S};const K={};Ye(P.posParams,(ae,nt)=>{K[nt]=ae.path});const ie=P.consumed.length>0?{...K,...P.consumed[P.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:P.consumed,remainingSegments:_.slice(P.consumed.length),parameters:ie,positionalParamSegments:P.posParams??{}}}function Y(w,D,_,T,P="corrected"){if(_.length>0&&function at(w,D,_){return _.some(T=>dr(w,D,T)&&zi(T)!==on)}(w,_,T)){const ie=new Gt(D,function Ke(w,D,_,T){const P={};P[on]=T,T._sourceSegment=w,T._segmentIndexShift=D.length;for(const K of _)if(""===K.path&&zi(K)!==on){const ie=new Gt([],{});ie._sourceSegment=w,ie._segmentIndexShift=D.length,P[zi(K)]=ie}return P}(w,D,T,new Gt(_,w.children)));return ie._sourceSegment=w,ie._segmentIndexShift=D.length,{segmentGroup:ie,slicedSegments:[]}}if(0===_.length&&function nn(w,D,_){return _.some(T=>dr(w,D,T))}(w,_,T)){const ie=new Gt(w.segments,function ge(w,D,_,T,P,K){const ie={};for(const ae of T)if(dr(w,_,ae)&&!P[zi(ae)]){const nt=new Gt([],{});nt._sourceSegment=w,nt._segmentIndexShift="legacy"===K?w.segments.length:D.length,ie[zi(ae)]=nt}return{...P,...ie}}(w,D,_,T,w.children,P));return ie._sourceSegment=w,ie._segmentIndexShift=D.length,{segmentGroup:ie,slicedSegments:_}}const K=new Gt(w.segments,w.children);return K._sourceSegment=w,K._segmentIndexShift=D.length,{segmentGroup:K,slicedSegments:_}}function dr(w,D,_){return(!(w.hasChildren()||D.length>0)||"full"!==_.pathMatch)&&""===_.path}function Dr(w,D,_,T){return!!(zi(w)===T||T!==on&&dr(D,_,w))&&("**"===w.path||N(D,w,_).matched)}function Ir(w,D,_){return 0===D.length&&!w.children[_]}const rr=!1;class pi{constructor(D){this.segmentGroup=D||null}}class Ar{constructor(D){this.urlTree=D}}function Gr(w){return rt(new pi(w))}function Ks(w){return rt(new Ar(w))}class eo{constructor(D,_,T,P,K){this.injector=D,this.configLoader=_,this.urlSerializer=T,this.urlTree=P,this.config=K,this.allowRedirects=!0}apply(){const D=Y(this.urlTree.root,[],[],this.config).segmentGroup,_=new Gt(D.segments,D.children);return this.expandSegmentGroup(this.injector,this.config,_,on).pipe((0,pe.U)(K=>this.createUrlTree(xn(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(en(K=>{if(K instanceof Ar)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof pi?this.noMatchError(K):K}))}match(D){return this.expandSegmentGroup(this.injector,this.config,D.root,on).pipe((0,pe.U)(P=>this.createUrlTree(xn(P),D.queryParams,D.fragment))).pipe(en(P=>{throw P instanceof pi?this.noMatchError(P):P}))}noMatchError(D){return new p.vHH(4002,rr)}createUrlTree(D,_,T){const P=oi(D);return new Dn(P,_,T)}expandSegmentGroup(D,_,T,P){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(D,_,T).pipe((0,pe.U)(K=>new Gt([],K))):this.expandSegment(D,T,_,T.segments,P,!0)}expandChildren(D,_,T){const P=[];for(const K of Object.keys(T.children))"primary"===K?P.unshift(K):P.push(K);return(0,z.D)(P).pipe((0,vt.b)(K=>{const ie=T.children[K],ae=ms(_,K);return this.expandSegmentGroup(D,ae,ie,K).pipe((0,pe.U)(nt=>({segment:nt,outlet:K})))}),(0,fn.R)((K,ie)=>(K[ie.outlet]=ie.segment,K),{}),Zn())}expandSegment(D,_,T,P,K,ie){return(0,z.D)(T).pipe((0,vt.b)(ae=>this.expandSegmentAgainstRoute(D,_,T,ae,P,K,ie).pipe(en(kt=>{if(kt instanceof pi)return(0,W.of)(null);throw kt}))),(0,Kt.P)(ae=>!!ae),en((ae,nt)=>{if(Wi(ae))return Ir(_,P,K)?(0,W.of)(new Gt([],{})):Gr(_);throw ae}))}expandSegmentAgainstRoute(D,_,T,P,K,ie,ae){return Dr(P,_,K,ie)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(D,_,P,K,ie):ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,_,T,P,K,ie):Gr(_):Gr(_)}expandSegmentAgainstRouteUsingRedirect(D,_,T,P,K,ie){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,T,P,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(D,_,T,P,K,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,_,T,P){const K=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Ks(K):this.lineralizeSegments(T,K).pipe((0,Lt.z)(ie=>{const ae=new Gt(ie,{});return this.expandSegment(D,ae,_,ie,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,_,T,P,K,ie){const{matched:ae,consumedSegments:nt,remainingSegments:kt,positionalParamSegments:zn}=N(_,P,K);if(!ae)return Gr(_);const rn=this.applyRedirectCommands(nt,P.redirectTo,zn);return P.redirectTo.startsWith("/")?Ks(rn):this.lineralizeSegments(P,rn).pipe((0,Lt.z)(nr=>this.expandSegment(D,_,T,nr.concat(kt),ie,!1)))}matchSegmentAgainstRoute(D,_,T,P,K){return"**"===T.path?(D=$s(T,D),T.loadChildren?(T._loadedRoutes?(0,W.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):this.configLoader.loadChildren(D,T)).pipe((0,pe.U)(ae=>(T._loadedRoutes=ae.routes,T._loadedInjector=ae.injector,new Gt(P,{})))):(0,W.of)(new Gt(P,{}))):$(_,T,P,D).pipe((0,Re.w)(({matched:ie,consumedSegments:ae,remainingSegments:nt})=>ie?this.getChildConfig(D=T._injector??D,T,P).pipe((0,Lt.z)(zn=>{const rn=zn.injector??D,nr=zn.routes,{segmentGroup:as,slicedSegments:ys}=Y(_,ae,nt,nr),vi=new Gt(as.segments,as.children);if(0===ys.length&&vi.hasChildren())return this.expandChildren(rn,nr,vi).pipe((0,pe.U)(Yo=>new Gt(ae,Yo)));if(0===nr.length&&0===ys.length)return(0,W.of)(new Gt(ae,{}));const Ss=zi(T)===K;return this.expandSegment(rn,vi,nr,ys,Ss?on:K,!0).pipe((0,pe.U)(Fa=>new Gt(ae.concat(Fa.segments),Fa.children)))})):Gr(_)))}getChildConfig(D,_,T){return _.children?(0,W.of)({routes:_.children,injector:D}):_.loadChildren?void 0!==_._loadedRoutes?(0,W.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function ia(w,D,_,T){const P=D.canLoad;if(void 0===P||0===P.length)return(0,W.of)(!0);const K=P.map(ie=>{const ae=Gs(ie,w);return ye(function k(w){return w&&Ws(w.canLoad)}(ae)?ae.canLoad(D,_):w.runInContext(()=>ae(D,_)))});return(0,W.of)(K).pipe(Vi(),sa())}(D,_,T).pipe((0,Lt.z)(P=>P?this.configLoader.loadChildren(D,_).pipe((0,cn.b)(K=>{_._loadedRoutes=K.routes,_._loadedInjector=K.injector})):function ks(w){return rt(xr(rr,3))}())):(0,W.of)({routes:[],injector:D})}lineralizeSegments(D,_){let T=[],P=_.root;for(;;){if(T=T.concat(P.segments),0===P.numberOfChildren)return(0,W.of)(T);if(P.numberOfChildren>1||!P.children[on])return rt(new p.vHH(4e3,rr));P=P.children[on]}}applyRedirectCommands(D,_,T){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),D,T)}applyRedirectCreateUrlTree(D,_,T,P){const K=this.createSegmentGroup(D,_.root,T,P);return new Dn(K,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(D,_){const T={};return Ye(D,(P,K)=>{if("string"==typeof P&&P.startsWith(":")){const ae=P.substring(1);T[K]=_[ae]}else T[K]=P}),T}createSegmentGroup(D,_,T,P){const K=this.createSegments(D,_.segments,T,P);let ie={};return Ye(_.children,(ae,nt)=>{ie[nt]=this.createSegmentGroup(D,ae,T,P)}),new Gt(K,ie)}createSegments(D,_,T,P){return _.map(K=>K.path.startsWith(":")?this.findPosParam(D,K,P):this.findOrReturn(K,T))}findPosParam(D,_,T){const P=T[_.path.substring(1)];if(!P)throw new p.vHH(4001,rr);return P}findOrReturn(D,_){let T=0;for(const P of _){if(P.path===D.path)return _.splice(T),P;T++}return D}}class Ts{}class ma{constructor(D,_,T,P,K,ie,ae,nt){this.injector=D,this.rootComponentType=_,this.config=T,this.urlTree=P,this.url=K,this.paramsInheritanceStrategy=ie,this.relativeLinkResolution=ae,this.urlSerializer=nt}recognize(){const D=Y(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,on).pipe((0,pe.U)(_=>{if(null===_)return null;const T=new Oi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},on,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new ds(T,_),K=new js(this.url,P);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(D){const _=D.value,T=wi(_,this.paramsInheritanceStrategy);_.params=Object.freeze(T.params),_.data=Object.freeze(T.data),D.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(D,_,T,P){return 0===T.segments.length&&T.hasChildren()?this.processChildren(D,_,T):this.processSegment(D,_,T,T.segments,P)}processChildren(D,_,T){return(0,z.D)(Object.keys(T.children)).pipe((0,vt.b)(P=>{const K=T.children[P],ie=ms(_,P);return this.processSegmentGroup(D,ie,K,P)}),(0,fn.R)((P,K)=>P&&K?(P.push(...K),P):null),function ii(w,D=!1){return(0,ce.e)((_,T)=>{let P=0;_.subscribe((0,yt.x)(T,K=>{const ie=w(K,P++);(ie||D)&&T.next(K),!ie&&T.complete()}))})}(P=>null!==P),(0,In.d)(null),Zn(),(0,pe.U)(P=>{if(null===P)return null;const K=E(P);return function Ru(w){w.sort((D,_)=>D.value.outlet===on?-1:_.value.outlet===on?1:D.value.outlet.localeCompare(_.value.outlet))}(K),K}))}processSegment(D,_,T,P,K){return(0,z.D)(_).pipe((0,vt.b)(ie=>this.processSegmentAgainstRoute(ie._injector??D,ie,T,P,K)),(0,Kt.P)(ie=>!!ie),en(ie=>{if(Wi(ie))return Ir(T,P,K)?(0,W.of)([]):(0,W.of)(null);throw ie}))}processSegmentAgainstRoute(D,_,T,P,K){if(_.redirectTo||!Dr(_,T,P,K))return(0,W.of)(null);let ie;if("**"===_.path){const ae=P.length>0?Si(P).parameters:{},nt=X(T)+P.length,kt=new Oi(P,ae,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,we(_),zi(_),_.component??_._loadedComponent??null,_,G(T),nt,Le(_),nt);ie=(0,W.of)({snapshot:kt,consumedSegments:[],remainingSegments:[]})}else ie=$(T,_,P,D).pipe((0,pe.U)(({matched:ae,consumedSegments:nt,remainingSegments:kt,parameters:zn})=>{if(!ae)return null;const rn=X(T)+nt.length;return{snapshot:new Oi(nt,zn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,we(_),zi(_),_.component??_._loadedComponent??null,_,G(T),rn,Le(_),rn),consumedSegments:nt,remainingSegments:kt}}));return ie.pipe((0,Re.w)(ae=>{if(null===ae)return(0,W.of)(null);const{snapshot:nt,consumedSegments:kt,remainingSegments:zn}=ae;D=_._injector??D;const rn=_._loadedInjector??D,nr=function U(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(_),{segmentGroup:as,slicedSegments:ys}=Y(T,kt,zn,nr.filter(Ss=>void 0===Ss.redirectTo),this.relativeLinkResolution);if(0===ys.length&&as.hasChildren())return this.processChildren(rn,nr,as).pipe((0,pe.U)(Ss=>null===Ss?null:[new ds(nt,Ss)]));if(0===nr.length&&0===ys.length)return(0,W.of)([new ds(nt,[])]);const vi=zi(_)===K;return this.processSegment(rn,nr,as,ys,vi?on:K).pipe((0,pe.U)(Ss=>null===Ss?null:[new ds(nt,Ss)]))}))}}function m(w){const D=w.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function E(w){const D=[],_=new Set;for(const T of w){if(!m(T)){D.push(T);continue}const P=D.find(K=>T.value.routeConfig===K.value.routeConfig);void 0!==P?(P.children.push(...T.children),_.add(P)):D.push(T)}for(const T of _){const P=E(T.children);D.push(new ds(T.value,P))}return D.filter(T=>!_.has(T))}function G(w){let D=w;for(;D._sourceSegment;)D=D._sourceSegment;return D}function X(w){let D=w,_=D._segmentIndexShift??0;for(;D._sourceSegment;)D=D._sourceSegment,_+=D._segmentIndexShift??0;return _-1}function we(w){return w.data||{}}function Le(w){return w.resolve||{}}function ln(w){return"string"==typeof w.title||null===w.title}function Rn(w){return(0,Re.w)(D=>{const _=w(D);return _?(0,z.D)(_).pipe((0,pe.U)(()=>D)):(0,W.of)(D)})}let ur=(()=>{class w{buildTitle(_){let T,P=_.root;for(;void 0!==P;)T=this.getResolvedTitleForRoute(P)??T,P=P.children.find(K=>K.outlet===on);return T}getResolvedTitleForRoute(_){return _.data[yr]}}return w.\u0275fac=function(_){return new(_||w)},w.\u0275prov=p.Yz7({token:w,factory:function(){return(0,p.f3M)(Pt)},providedIn:"root"}),w})(),Pt=(()=>{class w extends ur{constructor(_){super(),this.title=_}updateTitle(_){const T=this.buildTitle(_);void 0!==T&&this.title.setTitle(T)}}return w.\u0275fac=function(_){return new(_||w)(p.LFG(Br.Dx))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class bi{}class Ze extends class Vt{shouldDetach(D){return!1}store(D,_){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,_){return D.routeConfig===_.routeConfig}}{}const Lr=new p.OlP("",{providedIn:"root",factory:()=>({})}),qs=new p.OlP("ROUTES");let po=(()=>{class w{constructor(_,T){this.injector=_,this.compiler=T,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,W.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const T=ye(_.loadComponent()).pipe((0,cn.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=K}),Kn(()=>{this.componentLoaders.delete(_)})),P=new se(T,()=>new Te.x).pipe(je());return this.componentLoaders.set(_,P),P}loadChildren(_,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return(0,W.of)({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const K=this.loadModuleFactoryOrRoutes(T.loadChildren).pipe((0,pe.U)(ae=>{this.onLoadEndListener&&this.onLoadEndListener(T);let nt,kt,zn=!1;Array.isArray(ae)?kt=ae:(nt=ae.create(_).injector,kt=si(nt.get(qs,[],p.XFs.Self|p.XFs.Optional)));return{routes:kt.map(gs),injector:nt}}),Kn(()=>{this.childrenLoaders.delete(T)})),ie=new se(K,()=>new Te.x).pipe(je());return this.childrenLoaders.set(T,ie),ie}loadModuleFactoryOrRoutes(_){return ye(_()).pipe((0,Lt.z)(T=>T instanceof p.YKP||Array.isArray(T)?(0,W.of)(T):(0,z.D)(this.compiler.compileModuleAsync(T))))}}return w.\u0275fac=function(_){return new(_||w)(p.LFG(p.zs3),p.LFG(p.Sil))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class Wo{}class Ko{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,_){return D}}function Oo(w){throw w}function gn(w,D,_){return D.parse("/")}const Pn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},On={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function mn(){const w=(0,p.f3M)(yn),D=(0,p.f3M)(jn),_=(0,p.f3M)(De.Ye),T=(0,p.f3M)(p.zs3),P=(0,p.f3M)(p.Sil),K=(0,p.f3M)(qs,{optional:!0})??[],ie=(0,p.f3M)(Lr,{optional:!0})??{},ae=(0,p.f3M)(Pt),nt=(0,p.f3M)(ur,{optional:!0}),kt=(0,p.f3M)(Wo,{optional:!0}),zn=(0,p.f3M)(bi,{optional:!0}),rn=new Nr(null,w,D,_,T,P,si(K));return kt&&(rn.urlHandlingStrategy=kt),zn&&(rn.routeReuseStrategy=zn),rn.titleStrategy=nt??ae,function or(w,D){w.errorHandler&&(D.errorHandler=w.errorHandler),w.malformedUriErrorHandler&&(D.malformedUriErrorHandler=w.malformedUriErrorHandler),w.onSameUrlNavigation&&(D.onSameUrlNavigation=w.onSameUrlNavigation),w.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=w.paramsInheritanceStrategy),w.relativeLinkResolution&&(D.relativeLinkResolution=w.relativeLinkResolution),w.urlUpdateStrategy&&(D.urlUpdateStrategy=w.urlUpdateStrategy),w.canceledNavigationResolution&&(D.canceledNavigationResolution=w.canceledNavigationResolution)}(ie,rn),rn}let Nr=(()=>{class w{constructor(_,T,P,K,ie,ae,nt){this.rootComponentType=_,this.urlSerializer=T,this.rootContexts=P,this.location=K,this.config=nt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Te.x,this.errorHandler=Oo,this.malformedUriErrorHandler=gn,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,W.of)(void 0),this.urlHandlingStrategy=new Ko,this.routeReuseStrategy=new Ze,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ie.get(po),this.configLoader.onLoadEndListener=nr=>this.triggerEvent(new xt(nr)),this.configLoader.onLoadStartListener=nr=>this.triggerEvent(new gt(nr)),this.ngModule=ie.get(p.h0i),this.console=ie.get(p.c2e);const rn=ie.get(p.R0b);this.isNgZoneEnabled=rn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(nt),this.currentUrlTree=function ze(){return new Dn(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xi(this.currentUrlTree,this.rootComponentType),this.transitions=new Ie({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const T=this.events;return _.pipe((0,Ct.h)(P=>0!==P.id),(0,pe.U)(P=>({...P,extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,Re.w)(P=>{let K=!1,ie=!1;return(0,W.of)(P).pipe((0,cn.b)(ae=>{this.currentNavigation={id:ae.id,initialUrl:ae.rawUrl,extractedUrl:ae.extractedUrl,trigger:ae.source,extras:ae.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Re.w)(ae=>{const nt=this.browserUrlTree.toString(),kt=!this.navigated||ae.extractedUrl.toString()!==nt||nt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||kt)&&this.urlHandlingStrategy.shouldProcessUrl(ae.rawUrl))return Er(ae.source)&&(this.browserUrlTree=ae.extractedUrl),(0,W.of)(ae).pipe((0,Re.w)(rn=>{const nr=this.transitions.getValue();return T.next(new ui(rn.id,this.serializeUrl(rn.extractedUrl),rn.source,rn.restoredState)),nr!==this.transitions.getValue()?It.E:Promise.resolve(rn)}),function fo(w,D,_,T){return(0,Re.w)(P=>function Ro(w,D,_,T,P){return new eo(w,D,_,T,P).apply()}(w,D,_,P.extractedUrl,T).pipe((0,pe.U)(K=>({...P,urlAfterRedirects:K}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,cn.b)(rn=>{this.currentNavigation={...this.currentNavigation,finalUrl:rn.urlAfterRedirects},P.urlAfterRedirects=rn.urlAfterRedirects}),function st(w,D,_,T,P,K){return(0,Lt.z)(ie=>function Ca(w,D,_,T,P,K,ie="emptyOnly",ae="legacy"){return new ma(w,D,_,T,P,ie,ae,K).recognize().pipe((0,Re.w)(nt=>null===nt?function yi(w){return new ke.y(D=>D.error(w))}(new Ts):(0,W.of)(nt)))}(w,D,_,ie.urlAfterRedirects,T.serialize(ie.urlAfterRedirects),T,P,K).pipe((0,pe.U)(ae=>({...ie,targetSnapshot:ae}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,cn.b)(rn=>{if(P.targetSnapshot=rn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const as=this.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);this.setBrowserUrl(as,rn)}this.browserUrlTree=rn.urlAfterRedirects}const nr=new ta(rn.id,this.serializeUrl(rn.extractedUrl),this.serializeUrl(rn.urlAfterRedirects),rn.targetSnapshot);T.next(nr)}));if(kt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:nr,extractedUrl:as,source:ys,restoredState:vi,extras:Ss}=ae,As=new ui(nr,this.serializeUrl(as),ys,vi);T.next(As);const Fa=Xi(as,this.rootComponentType).snapshot;return P={...ae,targetSnapshot:Fa,urlAfterRedirects:as,extras:{...Ss,skipLocationChange:!1,replaceUrl:!1}},(0,W.of)(P)}return this.rawUrlTree=ae.rawUrl,ae.resolve(null),It.E}),(0,cn.b)(ae=>{const nt=new _r(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot);this.triggerEvent(nt)}),(0,pe.U)(ae=>P={...ae,guards:uo(ae.targetSnapshot,ae.currentSnapshot,this.rootContexts)}),function xo(w,D){return(0,Lt.z)(_=>{const{targetSnapshot:T,currentSnapshot:P,guards:{canActivateChecks:K,canDeactivateChecks:ie}}=_;return 0===ie.length&&0===K.length?(0,W.of)({..._,guardsResult:!0}):function lo(w,D,_,T){return(0,z.D)(w).pipe((0,Lt.z)(P=>function la(w,D,_,T,P){const K=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,W.of)(!0);const ie=K.map(ae=>{const nt=ao(D)??P,kt=Gs(ae,nt);return ye(function Z(w){return w&&Ws(w.canDeactivate)}(kt)?kt.canDeactivate(w,D,_,T):nt.runInContext(()=>kt(w,D,_,T))).pipe((0,Kt.P)())});return(0,W.of)(ie).pipe(Vi())}(P.component,P.route,_,D,T)),(0,Kt.P)(P=>!0!==P,!0))}(ie,T,P,w).pipe((0,Lt.z)(ae=>ae&&function Mo(w){return"boolean"==typeof w}(ae)?function co(w,D,_,T){return(0,z.D)(D).pipe((0,vt.b)(P=>(0,qe.z)(function ho(w,D){return null!==w&&D&&D(new Sn(w)),(0,W.of)(!0)}(P.route.parent,T),function ga(w,D){return null!==w&&D&&D(new Fr(w)),(0,W.of)(!0)}(P.route,T),function Os(w,D,_){const T=D[D.length-1],K=D.slice(0,D.length-1).reverse().map(ie=>function Xr(w){const D=w.routeConfig?w.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:w,guards:D}:null}(ie)).filter(ie=>null!==ie).map(ie=>Yt(()=>{const ae=ie.guards.map(nt=>{const kt=ao(ie.node)??_,zn=Gs(nt,kt);return ye(function A(w){return w&&Ws(w.canActivateChild)}(zn)?zn.canActivateChild(T,w):kt.runInContext(()=>zn(T,w))).pipe((0,Kt.P)())});return(0,W.of)(ae).pipe(Vi())}));return(0,W.of)(K).pipe(Vi())}(w,P.path,_),function zo(w,D,_){const T=D.routeConfig?D.routeConfig.canActivate:null;if(!T||0===T.length)return(0,W.of)(!0);const P=T.map(K=>Yt(()=>{const ie=ao(D)??_,ae=Gs(K,ie);return ye(function O(w){return w&&Ws(w.canActivate)}(ae)?ae.canActivate(D,w):ie.runInContext(()=>ae(D,w))).pipe((0,Kt.P)())}));return(0,W.of)(P).pipe(Vi())}(w,P.route,_))),(0,Kt.P)(P=>!0!==P,!0))}(T,K,w,D):(0,W.of)(ae)),(0,pe.U)(ae=>({..._,guardsResult:ae})))})}(this.ngModule.injector,ae=>this.triggerEvent(ae)),(0,cn.b)(ae=>{if(P.guardsResult=ae.guardsResult,ti(ae.guardsResult))throw Ds(0,ae.guardsResult);const nt=new Oe(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot,!!ae.guardsResult);this.triggerEvent(nt)}),(0,Ct.h)(ae=>!!ae.guardsResult||(this.restoreHistory(ae),this.cancelNavigationTransition(ae,"",3),!1)),Rn(ae=>{if(ae.guards.canActivateChecks.length)return(0,W.of)(ae).pipe((0,cn.b)(nt=>{const kt=new Ae(nt.id,this.serializeUrl(nt.extractedUrl),this.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.triggerEvent(kt)}),(0,Re.w)(nt=>{let kt=!1;return(0,W.of)(nt).pipe(function Wt(w,D){return(0,Lt.z)(_=>{const{targetSnapshot:T,guards:{canActivateChecks:P}}=_;if(!P.length)return(0,W.of)(_);let K=0;return(0,z.D)(P).pipe((0,vt.b)(ie=>function jt(w,D,_,T){const P=w.routeConfig,K=w._resolve;return void 0!==P?.title&&!ln(P)&&(K[yr]=P.title),function tr(w,D,_,T){const P=function hr(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===P.length)return(0,W.of)({});const K={};return(0,z.D)(P).pipe((0,Lt.z)(ie=>function Xe(w,D,_,T){const P=ao(D)??T,K=Gs(w,P);return ye(K.resolve?K.resolve(D,_):P.runInContext(()=>K(D,_)))}(w[ie],D,_,T).pipe((0,Kt.P)(),(0,cn.b)(ae=>{K[ie]=ae}))),Bt(1),function Kr(w){return(0,pe.U)(()=>w)}(K),en(ie=>Wi(ie)?It.E:rt(ie)))}(K,w,D,T).pipe((0,pe.U)(ie=>(w._resolvedData=ie,w.data=wi(w,_).resolve,P&&ln(P)&&(w.data[yr]=P.title),null)))}(ie.route,T,w,D)),(0,cn.b)(()=>K++),Bt(1),(0,Lt.z)(ie=>K===P.length?(0,W.of)(_):It.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,cn.b)({next:()=>kt=!0,complete:()=>{kt||(this.restoreHistory(nt),this.cancelNavigationTransition(nt,"",2))}}))}),(0,cn.b)(nt=>{const kt=new Be(nt.id,this.serializeUrl(nt.extractedUrl),this.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.triggerEvent(kt)}))}),Rn(ae=>{const nt=kt=>{const zn=[];kt.routeConfig?.loadComponent&&!kt.routeConfig._loadedComponent&&zn.push(this.configLoader.loadComponent(kt.routeConfig).pipe((0,cn.b)(rn=>{kt.component=rn}),(0,pe.U)(()=>{})));for(const rn of kt.children)zn.push(...nt(rn));return zn};return We(nt(ae.targetSnapshot.root)).pipe((0,In.d)(),(0,mt.q)(1))}),Rn(()=>this.afterPreactivation()),(0,pe.U)(ae=>{const nt=function ts(w,D,_){const T=ki(w,D._root,_?_._root:void 0);return new Do(T,D)}(this.routeReuseStrategy,ae.targetSnapshot,ae.currentRouterState);return P={...ae,targetRouterState:nt}}),(0,cn.b)(ae=>{this.currentUrlTree=ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ae.urlAfterRedirects,ae.rawUrl),this.routerState=ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ae),this.browserUrlTree=ae.urlAfterRedirects)}),((w,D,_)=>(0,pe.U)(T=>(new _t(D,T.targetRouterState,T.currentRouterState,_).activate(w),T)))(this.rootContexts,this.routeReuseStrategy,ae=>this.triggerEvent(ae)),(0,cn.b)({next(){K=!0},complete(){K=!0}}),Kn(()=>{K||ie||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),en(ae=>{if(ie=!0,To(ae)){bs(ae)||(this.navigated=!0,this.restoreHistory(P,!0));const nt=new Xs(P.id,this.serializeUrl(P.extractedUrl),ae.message,ae.cancellationCode);if(T.next(nt),bs(ae)){const kt=this.urlHandlingStrategy.merge(ae.url,this.rawUrlTree),zn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Er(P.source)};this.scheduleNavigation(kt,"imperative",null,zn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{this.restoreHistory(P,!0);const nt=new Es(P.id,this.serializeUrl(P.extractedUrl),ae,P.targetSnapshot??void 0);T.next(nt);try{P.resolve(this.errorHandler(ae))}catch(kt){P.reject(kt)}}return It.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const T="popstate"===_.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{const P={replaceUrl:!0},K=_.state?.navigationId?_.state:null;if(K){const ae={...K};delete ae.navigationId,delete ae.\u0275routerPageId,0!==Object.keys(ae).length&&(P.state=ae)}const ie=this.parseUrl(_.url);this.scheduleNavigation(ie,T,K,P)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(gs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,T={}){const{relativeTo:P,queryParams:K,fragment:ie,queryParamsHandling:ae,preserveFragment:nt}=T,kt=P||this.routerState.root,zn=nt?this.currentUrlTree.fragment:ie;let rn=null;switch(ae){case"merge":rn={...this.currentUrlTree.queryParams,...K};break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=K||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),Ri(kt,this.currentUrlTree,_,rn,zn??null)}navigateByUrl(_,T={skipLocationChange:!1}){const P=ti(_)?_:this.parseUrl(_),K=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(K,"imperative",null,T)}navigate(_,T={skipLocationChange:!1}){return function is(w){for(let D=0;D<w.length;D++){if(null==w[D])throw new p.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,T),T)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let T;try{T=this.urlSerializer.parse(_)}catch(P){T=this.malformedUriErrorHandler(P,this.urlSerializer,_)}return T}isActive(_,T){let P;if(P=!0===T?{...Pn}:!1===T?{...On}:T,ti(_))return En(this.currentUrlTree,_,P);const K=this.parseUrl(_);return En(this.currentUrlTree,K,P)}removeEmptyProps(_){return Object.keys(_).reduce((T,P)=>{const K=_[P];return null!=K&&(T[P]=K),T},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new cs(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,T,P,K,ie){if(this.disposed)return Promise.resolve(!1);let ae,nt,kt;ie?(ae=ie.resolve,nt=ie.reject,kt=ie.promise):kt=new Promise((nr,as)=>{ae=nr,nt=as});const zn=++this.navigationId;let rn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),rn=P&&P.\u0275routerPageId?P.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):rn=0,this.setTransition({id:zn,targetPageId:rn,source:T,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:K,resolve:ae,reject:nt,promise:kt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),kt.catch(nr=>Promise.reject(nr))}setBrowserUrl(_,T){const P=this.urlSerializer.serialize(_),K={...T.extras.state,...this.generateNgRouterState(T.id,T.targetPageId)};this.location.isCurrentPathEqualTo(P)||T.extras.replaceUrl?this.location.replaceState(P,"",K):this.location.go(P,"",K)}restoreHistory(_,T=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===P?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===P&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,T,P){const K=new Xs(_.id,this.serializeUrl(_.extractedUrl),T,P);this.triggerEvent(K),_.resolve(!1)}generateNgRouterState(_,T){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:T}:{navigationId:_}}}return w.\u0275fac=function(_){p.$Z()},w.\u0275prov=p.Yz7({token:w,factory:function(){return mn()},providedIn:"root"}),w})();function Er(w){return"imperative"!==w}class br{}let go=(()=>{class w{constructor(_,T,P,K,ie){this.router=_,this.injector=P,this.preloadingStrategy=K,this.loader=ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ct.h)(_=>_ instanceof cs),(0,vt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,T){const P=[];for(const K of T){K.providers&&!K._injector&&(K._injector=(0,p.MMx)(K.providers,_,`Route: ${K.path}`));const ie=K._injector??_,ae=K._loadedInjector??ie;K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent?P.push(this.preloadConfig(ie,K)):(K.children||K._loadedRoutes)&&P.push(this.processRoutes(ae,K.children??K._loadedRoutes))}return(0,z.D)(P).pipe((0,Or.J)())}preloadConfig(_,T){return this.preloadingStrategy.preload(T,()=>{let P;P=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(_,T):(0,W.of)(null);const K=P.pipe((0,Lt.z)(ie=>null===ie?(0,W.of)(void 0):(T._loadedRoutes=ie.routes,T._loadedInjector=ie.injector,this.processRoutes(ie.injector??_,ie.routes))));if(T.loadComponent&&!T._loadedComponent){const ie=this.loader.loadComponent(T);return(0,z.D)([K,ie]).pipe((0,Or.J)())}return K})}}return w.\u0275fac=function(_){return new(_||w)(p.LFG(Nr),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(br),p.LFG(po))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Fs=new p.OlP("");let Ta=(()=>{class w{constructor(_,T,P={}){this.router=_,this.viewportScroller=T,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof ui?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof cs&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof ws&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,T){this.router.triggerEvent(new ws(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return w.\u0275fac=function(_){p.$Z()},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac}),w})();function Sa(w,D){return{\u0275kind:w,\u0275providers:D}}function Pu(w){return[{provide:qs,multi:!0,useValue:w}]}function Qa(){const w=(0,p.f3M)(p.zs3);return D=>{const _=w.get(p.z2F);if(D!==_.components[0])return;const T=w.get(Nr),P=w.get(xl);1===w.get(Aa)&&T.initialNavigation(),w.get(xa,null,p.XFs.Optional)?.setUpPreloading(),w.get(Fs,null,p.XFs.Optional)?.init(),T.resetRootComponentType(_.componentTypes[0]),P.closed||(P.next(),P.unsubscribe())}}const xl=new p.OlP("",{factory:()=>new Te.x}),Aa=new p.OlP("",{providedIn:"root",factory:()=>1});const xa=new p.OlP("");function Ls(w){return Sa(0,[{provide:xa,useExisting:go},{provide:br,useExisting:w}])}const Lo=new p.OlP("ROUTER_FORROOT_GUARD"),ya=[De.Ye,{provide:yn,useClass:Tn},{provide:Nr,useFactory:mn},jn,{provide:Mi,useFactory:function Ya(w){return w.routerState.root},deps:[Nr]},po];function Na(){return new p.PXZ("Router",Nr)}let oa=(()=>{class w{constructor(_){}static forRoot(_,T){return{ngModule:w,providers:[ya,[],Pu(_),{provide:Lo,useFactory:_u,deps:[[Nr,new p.FiY,new p.tp0]]},{provide:Lr,useValue:T||{}},T?.useHash?{provide:De.S$,useClass:De.Do}:{provide:De.S$,useClass:De.b0},{provide:Fs,useFactory:()=>{const w=(0,p.f3M)(Nr),D=(0,p.f3M)(De.EM),_=(0,p.f3M)(Lr);return _.scrollOffset&&D.setOffset(_.scrollOffset),new Ta(w,D,_)}},T?.preloadingStrategy?Ls(T.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Na},T?.initialNavigation?mo(T):[],[{provide:ka,useFactory:Qa},{provide:p.tb,multi:!0,useExisting:ka}]]}}static forChild(_){return{ngModule:w,providers:[Pu(_)]}}}return w.\u0275fac=function(_){return new(_||w)(p.LFG(Lo,8))},w.\u0275mod=p.oAB({type:w}),w.\u0275inj=p.cJS({imports:[Rs]}),w})();function _u(w){return"guarded"}function mo(w){return["disabled"===w.initialNavigation?Sa(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const D=(0,p.f3M)(Nr);return()=>{D.setUpLocationChangeListener()}}},{provide:Aa,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?Sa(2,[{provide:Aa,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:D=>{const _=D.get(De.V_,Promise.resolve());let T=!1;return()=>_.then(()=>new Promise(K=>{const ie=D.get(Nr),ae=D.get(xl);(function P(K){D.get(Nr).events.pipe((0,Ct.h)(ae=>ae instanceof cs||ae instanceof Xs||ae instanceof Es),(0,pe.U)(ae=>ae instanceof cs||ae instanceof Xs&&(0===ae.code||1===ae.code)&&null),(0,Ct.h)(ae=>null!==ae),(0,mt.q)(1)).subscribe(()=>{K()})})(()=>{K(!0),T=!0}),ie.afterPreactivation=()=>(K(!0),T||ae.closed?(0,W.of)(void 0):ae),ie.initialNavigation()}))}}]).\u0275providers:[]]}const ka=new p.OlP("")},3942:(Xt,Je,j)=>{j.d(Je,{Z:()=>We});var p=j(2090),z=j(4859),W=j(9681),Te=j(1877);class Ie{constructor(tt,qe){this._delegate=tt,this.firebase=qe,(0,W._addComponent)(tt,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(tt,qe=W._DEFAULT_ENTRY_NAME){var Zt;this._delegate.checkDestroyed();const Yt=this._delegate.container.getProvider(tt);return!Yt.isInitialized()&&"EXPLICIT"===(null===(Zt=Yt.getComponent())||void 0===Zt?void 0:Zt.instantiationMode)&&Yt.initialize(),Yt.getImmediate({identifier:qe})}_removeServiceInstance(tt,qe=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(qe)}_addComponent(tt){(0,W._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,W._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ke=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function Ve(){const Ht=function Pe(Ht){const tt={},qe={__esModule:!0,initializeApp:function me(ut,ce={}){const je=W.initializeApp(ut,ce);if((0,p.r3)(tt,je.name))return tt[je.name];const se=new Ht(je,qe);return tt[je.name]=se,se},app:Yt,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function rt(ut){const ce=ut.name,je=ce.replace("-compat","");if(W._registerComponent(ut)&&"PUBLIC"===ut.type){const se=(De=Yt())=>{if("function"!=typeof De[je])throw ke.create("invalid-app-argument",{appName:ce});return De[je]()};void 0!==ut.serviceProps&&(0,p.ZB)(se,ut.serviceProps),qe[je]=se,Ht.prototype[je]=function(...De){return this._getService.bind(this,ce).apply(this,ut.multipleInstances?De:[])}}return"PUBLIC"===ut.type?qe[je]:null},removeApp:function Zt(ut){delete tt[ut]},useAsService:function It(ut,ce){return"serverAuth"===ce?null:ce},modularAPIs:W}};function Yt(ut){if(!(0,p.r3)(tt,ut=ut||W._DEFAULT_ENTRY_NAME))throw ke.create("no-app",{appName:ut});return tt[ut]}return qe.default=qe,Object.defineProperty(qe,"apps",{get:function it(){return Object.keys(tt).map(ut=>tt[ut])}}),Yt.App=Ht,qe}(Ie);return Ht.INTERNAL=Object.assign(Object.assign({},Ht.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function tt(qe){(0,p.ZB)(Ht,qe)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ht}(),he=new Te.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ht=self.firebase.SDK_VERSION;Ht&&Ht.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=de;!function ht(Ht){(0,W.registerVersion)("@firebase/app-compat","0.2.0",Ht)}()},9681:(Xt,Je,j)=>{j.r(Je),j.d(Je,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>Br,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>fn,_addOrOverwriteComponent:()=>Bt,_apps:()=>cn,_clearComponents:()=>ii,_components:()=>en,_getProvider:()=>In,_registerComponent:()=>$n,_removeServiceInstance:()=>Zn,deleteApp:()=>ir,getApp:()=>yr,getApps:()=>Rr,initializeApp:()=>on,onLog:()=>Bn,registerVersion:()=>cr,setLogLevel:()=>ar});var p=j(5861),z=j(4859),W=j(1877),Te=j(2090),Ie=j(8766);class Me{constructor(pt){this.container=pt}getPlatformInfoString(){return this.container.getProviders().map(Dt=>{if(function ke(Ft){return"VERSION"===Ft.getComponent()?.type}(Dt)){const wn=Dt.getImmediate();return`${wn.library}/${wn.version}`}return null}).filter(Dt=>Dt).join(" ")}}const Pe="@firebase/app",de=new W.Yd("@firebase/app"),Kt="[DEFAULT]",vt={[Pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,en=new Map;function fn(Ft,pt){try{Ft.container.addComponent(pt)}catch(Dt){de.debug(`Component ${pt.name} failed to register with FirebaseApp ${Ft.name}`,Dt)}}function Bt(Ft,pt){Ft.container.addOrOverwriteComponent(pt)}function $n(Ft){const pt=Ft.name;if(en.has(pt))return de.debug(`There were multiple attempts to register component ${pt}.`),!1;en.set(pt,Ft);for(const Dt of cn.values())fn(Dt,Ft);return!0}function In(Ft,pt){const Dt=Ft.container.getProvider("heartbeat").getImmediate({optional:!0});return Dt&&Dt.triggerHeartbeat(),Ft.container.getProvider(pt)}function Zn(Ft,pt,Dt=Kt){In(Ft,pt).clearInstance(Dt)}function ii(){en.clear()}const Kn=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Or{constructor(pt,Dt,wn){this._isDeleted=!1,this._options=Object.assign({},pt),this._config=Object.assign({},Dt),this._name=Dt.name,this._automaticDataCollectionEnabled=Dt.automaticDataCollectionEnabled,this._container=wn,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this.checkDestroyed(),this._automaticDataCollectionEnabled=pt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pt){this._isDeleted=pt}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}const Br="9.15.0";function on(Ft,pt={}){let Dt=Ft;"object"!=typeof pt&&(pt={name:pt});const wn=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},pt),yn=wn.name;if("string"!=typeof yn||!yn)throw Kn.create("bad-app-name",{appName:String(yn)});if(Dt||(Dt=(0,Te.aH)()),!Dt)throw Kn.create("no-options");const Tn=cn.get(yn);if(Tn){if((0,Te.vZ)(Dt,Tn.options)&&(0,Te.vZ)(wn,Tn.config))return Tn;throw Kn.create("duplicate-app",{appName:yn})}const ve=new z.H0(yn);for(const be of en.values())ve.addComponent(be);const oe=new Or(Dt,wn,ve);return cn.set(yn,oe),oe}function yr(Ft=Kt){const pt=cn.get(Ft);if(!pt&&Ft===Kt)return on();if(!pt)throw Kn.create("no-app",{appName:Ft});return pt}function Rr(){return Array.from(cn.values())}function ir(Ft){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*(Ft){const pt=Ft.name;cn.has(pt)&&(cn.delete(pt),yield Promise.all(Ft.container.getProviders().map(Dt=>Dt.delete())),Ft.isDeleted=!0)})).apply(this,arguments)}function cr(Ft,pt,Dt){var wn;let yn=null!==(wn=vt[Ft])&&void 0!==wn?wn:Ft;Dt&&(yn+=`-${Dt}`);const Tn=yn.match(/\s|\//),ve=pt.match(/\s|\//);if(Tn||ve){const oe=[`Unable to register library "${yn}" with version "${pt}":`];return Tn&&oe.push(`library name "${yn}" contains illegal characters (whitespace or "/")`),Tn&&ve&&oe.push("and"),ve&&oe.push(`version name "${pt}" contains illegal characters (whitespace or "/")`),void de.warn(oe.join(" "))}$n(new z.wA(`${yn}-version`,()=>({library:yn,version:pt}),"VERSION"))}function Bn(Ft,pt){if(null!==Ft&&"function"!=typeof Ft)throw Kn.create("invalid-log-argument");(0,W.Am)(Ft,pt)}function ar(Ft){(0,W.Ub)(Ft)}const qr="firebase-heartbeat-store";let Ye=null;function ye(){return Ye||(Ye=(0,Ie.X3)("firebase-heartbeat-database",1,{upgrade:(Ft,pt)=>{0===pt&&Ft.createObjectStore(qr)}}).catch(Ft=>{throw Kn.create("idb-open",{originalErrorMessage:Ft.message})})),Ye}function ze(){return(ze=(0,p.Z)(function*(Ft){try{return(yield ye()).transaction(qr).objectStore(qr).get(En(Ft))}catch(pt){if(pt instanceof Te.ZR)de.warn(pt.message);else{const Dt=Kn.create("idb-get",{originalErrorMessage:pt?.message});de.warn(Dt.message)}}})).apply(this,arguments)}function lt(Ft,pt){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(Ft,pt){try{const wn=(yield ye()).transaction(qr,"readwrite");return yield wn.objectStore(qr).put(pt,En(Ft)),wn.done}catch(Dt){if(Dt instanceof Te.ZR)de.warn(Dt.message);else{const wn=Kn.create("idb-set",{originalErrorMessage:Dt?.message});de.warn(wn.message)}}})).apply(this,arguments)}function En(Ft){return`${Ft.name}!${Ft.options.appId}`}class Tr{constructor(pt){this.container=pt,this._heartbeatsCache=null;const Dt=this.container.getProvider("app").getImmediate();this._storage=new Cn(Dt),this._heartbeatsCachePromise=this._storage.read().then(wn=>(this._heartbeatsCache=wn,wn))}triggerHeartbeat(){var pt=this;return(0,p.Z)(function*(){const wn=pt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yn=Hn();if(null===pt._heartbeatsCache&&(pt._heartbeatsCache=yield pt._heartbeatsCachePromise),pt._heartbeatsCache.lastSentHeartbeatDate!==yn&&!pt._heartbeatsCache.heartbeats.some(Tn=>Tn.date===yn))return pt._heartbeatsCache.heartbeats.push({date:yn,agent:wn}),pt._heartbeatsCache.heartbeats=pt._heartbeatsCache.heartbeats.filter(Tn=>{const ve=new Date(Tn.date).valueOf();return Date.now()-ve<=2592e6}),pt._storage.overwrite(pt._heartbeatsCache)})()}getHeartbeatsHeader(){var pt=this;return(0,p.Z)(function*(){if(null===pt._heartbeatsCache&&(yield pt._heartbeatsCachePromise),null===pt._heartbeatsCache||0===pt._heartbeatsCache.heartbeats.length)return"";const Dt=Hn(),{heartbeatsToSend:wn,unsentEntries:yn}=function Pr(Ft,pt=1024){const Dt=[];let wn=Ft.slice();for(const yn of Ft){const Tn=Dt.find(ve=>ve.agent===yn.agent);if(Tn){if(Tn.dates.push(yn.date),Dn(Dt)>pt){Tn.dates.pop();break}}else if(Dt.push({agent:yn.agent,dates:[yn.date]}),Dn(Dt)>pt){Dt.pop();break}wn=wn.slice(1)}return{heartbeatsToSend:Dt,unsentEntries:wn}}(pt._heartbeatsCache.heartbeats),Tn=(0,Te.L)(JSON.stringify({version:2,heartbeats:wn}));return pt._heartbeatsCache.lastSentHeartbeatDate=Dt,yn.length>0?(pt._heartbeatsCache.heartbeats=yn,yield pt._storage.overwrite(pt._heartbeatsCache)):(pt._heartbeatsCache.heartbeats=[],pt._storage.overwrite(pt._heartbeatsCache)),Tn})()}}function Hn(){return(new Date).toISOString().substring(0,10)}class Cn{constructor(pt){this.app=pt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pt=this;return(0,p.Z)(function*(){return(yield pt._canUseIndexedDBPromise)&&(yield function ue(Ft){return ze.apply(this,arguments)}(pt.app))||{heartbeats:[]}})()}overwrite(pt){var Dt=this;return(0,p.Z)(function*(){var wn;if(yield Dt._canUseIndexedDBPromise){const Tn=yield Dt.read();return lt(Dt.app,{lastSentHeartbeatDate:null!==(wn=pt.lastSentHeartbeatDate)&&void 0!==wn?wn:Tn.lastSentHeartbeatDate,heartbeats:pt.heartbeats})}})()}add(pt){var Dt=this;return(0,p.Z)(function*(){var wn;if(yield Dt._canUseIndexedDBPromise){const Tn=yield Dt.read();return lt(Dt.app,{lastSentHeartbeatDate:null!==(wn=pt.lastSentHeartbeatDate)&&void 0!==wn?wn:Tn.lastSentHeartbeatDate,heartbeats:[...Tn.heartbeats,...pt.heartbeats]})}})()}}function Dn(Ft){return(0,Te.L)(JSON.stringify({version:2,heartbeats:Ft})).length}!function Gt(Ft){$n(new z.wA("platform-logger",pt=>new Me(pt),"PRIVATE")),$n(new z.wA("heartbeat",pt=>new Tr(pt),"PRIVATE")),cr(Pe,"0.9.0",Ft),cr(Pe,"0.9.0","esm2017"),cr("fire-js","")}("")},4859:(Xt,Je,j)=>{j.d(Je,{H0:()=>Pe,wA:()=>W});var p=j(5861),z=j(2090);class W{constructor(de,he,Ce){this.name=de,this.instanceFactory=he,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const Te="[DEFAULT]";class Ie{constructor(de,he){this.name=de,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const he=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(he)){const Ce=new z.BH;if(this.instancesDeferred.set(he,Ce),this.isInitialized(he)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:he});yt&&Ce.resolve(yt)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(de){var he;const Ce=this.normalizeInstanceIdentifier(de?.identifier),yt=null!==(he=de?.optional)&&void 0!==he&&he;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(ht){if(yt)return null;throw ht}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function ke(Ve){return"EAGER"===Ve.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:Te})}catch{}for(const[he,Ce]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(he);try{const ht=this.getOrInitializeService({instanceIdentifier:yt});Ce.resolve(ht)}catch{}}}}clearInstance(de=Te){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,p.Z)(function*(){const he=Array.from(de.instances.values());yield Promise.all([...he.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...he.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=Te){return this.instances.has(de)}getOptions(de=Te){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:he={}}=de,Ce=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Ce,options:he});for(const[ht,We]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(ht)&&We.resolve(yt);return yt}onInit(de,he){var Ce;const yt=this.normalizeInstanceIdentifier(he),ht=null!==(Ce=this.onInitCallbacks.get(yt))&&void 0!==Ce?Ce:new Set;ht.add(de),this.onInitCallbacks.set(yt,ht);const We=this.instances.get(yt);return We&&de(We,yt),()=>{ht.delete(de)}}invokeOnInitCallbacks(de,he){const Ce=this.onInitCallbacks.get(he);if(Ce)for(const yt of Ce)try{yt(de,he)}catch{}}getOrInitializeService({instanceIdentifier:de,options:he={}}){let Ce=this.instances.get(de);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=de,Ve===Te?void 0:Ve),options:he}),this.instances.set(de,Ce),this.instancesOptions.set(de,he),this.invokeOnInitCallbacks(Ce,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,Ce)}catch{}var Ve;return Ce||null}normalizeInstanceIdentifier(de=Te){return this.component?this.component.multipleInstances?de:Te:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const he=this.getProvider(de.name);if(he.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);he.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const he=new Ie(de,this);return this.providers.set(de,he),he}getProviders(){return Array.from(this.providers.values())}}},1877:(Xt,Je,j)=>{j.d(Je,{Am:()=>Ve,Ub:()=>Pe,Yd:()=>ke,in:()=>z});const p=[];var z=(()=>{return(de=z||(z={}))[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",z;var de})();const W={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},Te=z.INFO,Ie={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Me=(de,he,...Ce)=>{if(he<de.logLevel)return;const yt=(new Date).toISOString(),ht=Ie[he];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[ht](`[${yt}]  ${de.name}:`,...Ce)};class ke{constructor(he){this.name=he,this._logLevel=Te,this._logHandler=Me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in z))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?W[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...he),this._logHandler(this,z.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...he),this._logHandler(this,z.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,z.INFO,...he),this._logHandler(this,z.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,z.WARN,...he),this._logHandler(this,z.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...he),this._logHandler(this,z.ERROR,...he)}}function Pe(de){p.forEach(he=>{he.setLogLevel(de)})}function Ve(de,he){for(const Ce of p){let yt=null;he&&he.level&&(yt=W[he.level]),Ce.userLogHandler=null===de?null:(ht,We,...Ht)=>{const tt=Ht.map(qe=>{if(null==qe)return null;if("string"==typeof qe)return qe;if("number"==typeof qe||"boolean"==typeof qe)return qe.toString();if(qe instanceof Error)return qe.message;try{return JSON.stringify(qe)}catch{return null}}).filter(qe=>qe).join(" ");We>=(yt??ht.logLevel)&&de({level:z[We].toLowerCase(),message:tt,args:Ht,type:ht.name})}}}},259:(Xt,Je,j)=>{j.d(Je,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=j(9681);(0,p.registerVersion)("firebase","9.15.0","app")},9260:(Xt,Je,j)=>{j.d(Je,{Z:()=>p.Z});var p=j(3942);p.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(Xt,Je,j)=>{j.r(Je);var p=j(5861),z=j(3942),W=j(2090),Te=j(9681),Ie=j(1877),Me=j(655),ke=j(4859);const We=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ht=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Zt=new Ie.Yd("@firebase/auth");function Yt(y,...c){Zt.logLevel<=Ie.in.ERROR&&Zt.error(`Auth (${Te.SDK_VERSION}): ${y}`,...c)}function me(y,...c){throw ut(y,...c)}function it(y,...c){return ut(y,...c)}function rt(y,c,f){const I=Object.assign(Object.assign({},Ht()),{[c]:f});return new W.LL("auth","Firebase",I).create(c,{appName:y.name})}function It(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&me(y,"argument-error"),rt(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ut(y,...c){if("string"!=typeof y){const f=c[0],I=[...c.slice(1)];return I[0]&&(I[0].appName=y.name),y._errorFactory.create(f,...I)}return tt.create(y,...c)}function ce(y,c,...f){if(!y)throw ut(c,...f)}function je(y){const c="INTERNAL ASSERTION FAILED: "+y;throw Yt(c),new Error(c)}function se(y,c){y||je(c)}const De=new Map;function pe(y){se(y instanceof Function,"Expected a class definition");let c=De.get(y);return c?(se(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,De.set(y,c),c)}function bt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Ct(){return"http:"===Lt()||"https:"===Lt()}function Lt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class cn{constructor(c,f){this.shortDelay=c,this.longDelay=f,se(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function Kt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ct()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function en(y,c){se(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class fn{static initialize(c,f,I){this.fetchImpl=c,f&&(this.headersImpl=f),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$n=new cn(3e4,6e4);function In(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function Zn(y,c,f,I){return ii.apply(this,arguments)}function ii(){return(ii=(0,p.Z)(function*(y,c,f,I,B={}){return Kr(y,B,(0,p.Z)(function*(){let J={},Ne={};I&&("GET"===c?Ne=I:J={body:JSON.stringify(I)});const ct=(0,W.xO)(Object.assign({key:y.config.apiKey},Ne)).slice(1),zt=yield y._getAdditionalHeaders();return zt["Content-Type"]="application/json",y.languageCode&&(zt["X-Firebase-Locale"]=y.languageCode),fn.fetch()(on(y,y.config.apiHost,f,ct),Object.assign({method:c,headers:zt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function Kr(y,c,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(y,c,f){y._canInitEmulator=!1;const I=Object.assign(Object.assign({},Bt),c);try{const B=new yr(y),J=yield Promise.race([f(),B.promise]);B.clearNetworkTimeout();const Ne=yield J.json();if("needConfirmation"in Ne)throw Rr(y,"account-exists-with-different-credential",Ne);if(J.ok&&!("errorMessage"in Ne))return Ne;{const ct=J.ok?Ne.errorMessage:Ne.error.message,[zt,_n]=ct.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===zt)throw Rr(y,"credential-already-in-use",Ne);if("EMAIL_EXISTS"===zt)throw Rr(y,"email-already-in-use",Ne);if("USER_DISABLED"===zt)throw Rr(y,"user-disabled",Ne);const Wn=I[zt]||zt.toLowerCase().replace(/[_\s]+/g,"-");if(_n)throw rt(y,Wn,_n);me(y,Wn)}}catch(B){if(B instanceof W.ZR)throw B;me(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,c,f,I){return Br.apply(this,arguments)}function Br(){return(Br=(0,p.Z)(function*(y,c,f,I,B={}){const J=yield Zn(y,c,f,I,B);return"mfaPendingCredential"in J&&me(y,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function on(y,c,f,I){const B=`${c}${f}?${I}`;return y.config.emulator?en(y.config,B):`${y.config.apiScheme}://${B}`}class yr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,I)=>{this.timer=setTimeout(()=>I(it(this.auth,"network-request-failed")),$n.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rr(y,c,f){const I={appName:y.name};f.email&&(I.email=f.email),f.phoneNumber&&(I.phoneNumber=f.phoneNumber);const B=it(y,c,I);return B.customData._tokenResponse=f,B}function Tt(){return(Tt=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function cr(y,c){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ar(y,c){return si.apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Si(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ye(){return(ye=(0,p.Z)(function*(y,c=!1){const f=(0,W.m9)(y),I=yield f.getIdToken(c),B=ze(I);ce(B&&B.exp&&B.auth_time&&B.iat,f.auth,"internal-error");const J="object"==typeof B.firebase?B.firebase:void 0,Ne=J?.sign_in_provider;return{claims:B,token:I,authTime:Si(ue(B.auth_time)),issuedAtTime:Si(ue(B.iat)),expirationTime:Si(ue(B.exp)),signInProvider:Ne||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function ue(y){return 1e3*Number(y)}function ze(y){const[c,f,I]=y.split(".");if(void 0===c||void 0===f||void 0===I)return Yt("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,W.tV)(f);return B?JSON.parse(B):(Yt("Failed to decode base64 JWT payload"),null)}catch(B){return Yt("Caught error parsing JWT payload as JSON",B?.toString()),null}}function Qt(y,c){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(I){throw I instanceof W.ZR&&sr(I)&&y.auth.currentUser===y&&(yield y.auth.signOut()),I}})).apply(this,arguments)}function sr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Rt{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const B=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const I=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),I)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&c.schedule(!0))}c.schedule()})()}}class Tr{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hn(y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(y){var c;const f=y.auth,I=yield y.getIdToken(),B=yield Qt(y,ar(f,{idToken:I}));ce(B?.users.length,f,"internal-error");const J=B.users[0];y._notifyReloadListener(J);const Ne=null!==(c=J.providerUserInfo)&&void 0!==c&&c.length?Ft(J.providerUserInfo):[],ct=Gt(y.providerData,Ne),Wn=!!y.isAnonymous&&!(y.email&&J.passwordHash||ct?.length),Vn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:ct,metadata:new Tr(J.createdAt,J.lastLoginAt),isAnonymous:Wn};Object.assign(y,Vn)})).apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(y){const c=(0,W.m9)(y);yield Hn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Gt(y,c){return[...y.filter(I=>!c.some(B=>B.providerId===I.providerId)),...c]}function Ft(y){return y.map(c=>{var{providerId:f}=c,I=(0,Me._T)(c,["providerId"]);return{providerId:f,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Dt(){return(Dt=(0,p.Z)(function*(y,c){const f=yield Kr(y,{},(0,p.Z)(function*(){const I=(0,W.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:B,apiKey:J}=y.config,Ne=on(y,B,"/v1/token",`key=${J}`),ct=yield y._getAdditionalHeaders();return ct["Content-Type"]="application/x-www-form-urlencoded",fn.fetch()(Ne,{method:"POST",headers:ct,body:I})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class wn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ce(c.idToken,"internal-error"),ce(typeof c.idToken<"u","internal-error"),ce(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function lt(y){const c=ze(y);return ce(c,"internal-error"),ce(typeof c.exp<"u","internal-error"),ce(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var I=this;return(0,p.Z)(function*(){return ce(!I.accessToken||I.refreshToken,c,"user-token-expired"),f||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(c,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var I=this;return(0,p.Z)(function*(){const{accessToken:B,refreshToken:J,expiresIn:Ne}=yield function pt(y,c){return Dt.apply(this,arguments)}(c,f);I.updateTokensAndExpiration(B,J,Number(Ne))})()}updateTokensAndExpiration(c,f,I){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(c,f){const{refreshToken:I,accessToken:B,expirationTime:J}=f,Ne=new wn;return I&&(ce("string"==typeof I,"internal-error",{appName:c}),Ne.refreshToken=I),B&&(ce("string"==typeof B,"internal-error",{appName:c}),Ne.accessToken=B),J&&(ce("number"==typeof J,"internal-error",{appName:c}),Ne.expirationTime=J),Ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new wn,this.toJSON())}_performRefresh(){return je("not implemented")}}function yn(y,c){ce("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class Tn{constructor(c){var{uid:f,auth:I,stsTokenManager:B}=c,J=(0,Me._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=I,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new Tr(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const I=yield Qt(f,f.stsTokenManager.getToken(f.auth,c));return ce(I,f.auth,"internal-error"),f.accessToken!==I&&(f.accessToken=I,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),I})()}getIdTokenResult(c){return function Ye(y){return ye.apply(this,arguments)}(this,c)}reload(){return function Cn(y){return Dn.apply(this,arguments)}(this)}_assign(c){this!==c&&(ce(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new Tn(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var I=this;return(0,p.Z)(function*(){let B=!1;c.idToken&&c.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(c),B=!0),f&&(yield Hn(I)),yield I.auth._persistUserIfCurrent(I),B&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Qt(c,function ir(y,c){return Tt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var I,B,J,Ne,ct,zt,_n,Wn;const Vn=null!==(I=f.displayName)&&void 0!==I?I:void 0,Vs=null!==(B=f.email)&&void 0!==B?B:void 0,no=null!==(J=f.phoneNumber)&&void 0!==J?J:void 0,ou=null!==(Ne=f.photoURL)&&void 0!==Ne?Ne:void 0,Dh=null!==(ct=f.tenantId)&&void 0!==ct?ct:void 0,bh=null!==(zt=f._redirectEventId)&&void 0!==zt?zt:void 0,np=null!==(_n=f.createdAt)&&void 0!==_n?_n:void 0,ul=null!==(Wn=f.lastLoginAt)&&void 0!==Wn?Wn:void 0,{uid:Gu,emailVerified:Ch,isAnonymous:Dd,providerData:Sc,stsTokenManager:Bo}=f;ce(Gu&&Bo,c,"internal-error");const rp=wn.fromJSON(this.name,Bo);ce("string"==typeof Gu,c,"internal-error"),yn(Vn,c.name),yn(Vs,c.name),ce("boolean"==typeof Ch,c,"internal-error"),ce("boolean"==typeof Dd,c,"internal-error"),yn(no,c.name),yn(ou,c.name),yn(Dh,c.name),yn(bh,c.name),yn(np,c.name),yn(ul,c.name);const Ac=new Tn({uid:Gu,auth:c,email:Vs,emailVerified:Ch,displayName:Vn,isAnonymous:Dd,photoURL:ou,phoneNumber:no,tenantId:Dh,stsTokenManager:rp,createdAt:np,lastLoginAt:ul});return Sc&&Array.isArray(Sc)&&(Ac.providerData=Sc.map(wa=>Object.assign({},wa))),bh&&(Ac._redirectEventId=bh),Ac}static _fromIdTokenResponse(c,f,I=!1){return(0,p.Z)(function*(){const B=new wn;B.updateFromServerResponse(f);const J=new Tn({uid:f.localId,auth:c,stsTokenManager:B,isAnonymous:I});return yield Hn(J),J})()}}const oe=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,I){var B=this;return(0,p.Z)(function*(){B.storage[f]=I})()}_get(f){var I=this;return(0,p.Z)(function*(){const B=I.storage[f];return void 0===B?null:B})()}_remove(f){var I=this;return(0,p.Z)(function*(){delete I.storage[f]})()}_addListener(f,I){}_removeListener(f,I){}}return y.type="NONE",y})();function be(y,c,f){return`firebase:${y}:${c}:${f}`}class ot{constructor(c,f,I){this.persistence=c,this.auth=f,this.userKey=I;const{config:B,name:J}=this.auth;this.fullUserKey=be(this.userKey,B.apiKey,J),this.fullPersistenceKey=be("persistence",B.apiKey,J),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?Tn._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const I=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,I?f.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,I="authUser"){return(0,p.Z)(function*(){if(!f.length)return new ot(pe(oe),c,I);const B=(yield Promise.all(f.map(function(){var _n=(0,p.Z)(function*(Wn){if(yield Wn._isAvailable())return Wn});return function(Wn){return _n.apply(this,arguments)}}()))).filter(_n=>_n);let J=B[0]||pe(oe);const Ne=be(I,c.config.apiKey,c.name);let ct=null;for(const _n of f)try{const Wn=yield _n._get(Ne);if(Wn){const Vn=Tn._fromJSON(c,Wn);_n!==J&&(ct=Vn),J=_n;break}}catch{}const zt=B.filter(_n=>_n._shouldAllowMigration);return J._shouldAllowMigration&&zt.length?(J=zt[0],ct&&(yield J._set(Ne,ct.toJSON())),yield Promise.all(f.map(function(){var _n=(0,p.Z)(function*(Wn){if(Wn!==J)try{yield Wn._remove(Ne)}catch{}});return function(Wn){return _n.apply(this,arguments)}}())),new ot(J,c,I)):new ot(J,c,I)})()}}function xe(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(vr(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ot(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(fe(c))return"Blackberry";if(re(c))return"Webos";if(dn(c))return"Safari";if((c.includes("chrome/")||Yn(c))&&!c.includes("edge/"))return"Chrome";if(Qn(c))return"Android";{const I=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Ot(y=(0,W.z$)()){return/firefox\//i.test(y)}function dn(y=(0,W.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Yn(y=(0,W.z$)()){return/crios\//i.test(y)}function vr(y=(0,W.z$)()){return/iemobile/i.test(y)}function Qn(y=(0,W.z$)()){return/android/i.test(y)}function fe(y=(0,W.z$)()){return/blackberry/i.test(y)}function re(y=(0,W.z$)()){return/webos/i.test(y)}function te(y=(0,W.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function an(y=(0,W.z$)()){return te(y)||Qn(y)||re(y)||fe(y)||/windows phone/i.test(y)||vr(y)}function wr(y,c=[]){let f;switch(y){case"Browser":f=xe((0,W.z$)());break;case"Worker":f=`${xe((0,W.z$)())}-${y}`;break;default:f=y}const I=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${Te.SDK_VERSION}/${I}`}class oi{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const I=J=>new Promise((Ne,ct)=>{try{Ne(c(J))}catch(zt){ct(zt)}});I.onAbort=f,this.queue.push(I);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,p.Z)(function*(){if(f.auth.currentUser===c)return;const I=[];try{for(const B of f.queue)yield B(c),B.onAbort&&I.push(B.onAbort)}catch(B){I.reverse();for(const J of I)try{J()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:B?.message})}})()}}class xn{constructor(c,f,I){this.app=c,this.heartbeatServiceProvider=f,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ti(this),this.idTokenSubscription=new ti(this),this.beforeStateQueue=new oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(c,f){var I=this;return f&&(this._popupRedirectResolver=pe(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var B,J;if(!I._deleted&&(I.persistenceManager=yield ot.create(I,c),!I._deleted)){if(null!==(B=I._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(f),I.lastNotifiedUid=(null===(J=I.currentUser)||void 0===J?void 0:J.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var I;const B=yield f.assertedPersistence.getCurrentUser();let J=B,Ne=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ct=null===(I=f.redirectUser)||void 0===I?void 0:I._redirectEventId,zt=J?._redirectEventId,_n=yield f.tryRedirectSignIn(c);(!ct||ct===zt)&&_n?.user&&(J=_n.user,Ne=!0)}if(!J)return f.directlySetCurrentUser(null);if(!J._redirectEventId){if(Ne)try{yield f.beforeStateQueue.runMiddleware(J)}catch(ct){J=B,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ct))}return J?f.reloadAndSetCurrentUserOrClear(J):f.directlySetCurrentUser(null)}return ce(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===J._redirectEventId?f.directlySetCurrentUser(J):f.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let I=null;try{I=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield Hn(c)}catch(I){if("auth/network-request-failed"!==I?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function vt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const I=c?(0,W.m9)(c):null;return I&&ce(I.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(I&&I._clone(f))})()}_updateCurrentUser(c,f=!1){var I=this;return(0,p.Z)(function*(){if(!I._deleted)return c&&ce(I.tenantId===c.tenantId,I,"tenant-id-mismatch"),f||(yield I.beforeStateQueue.runMiddleware(c)),I.queue((0,p.Z)(function*(){yield I.directlySetCurrentUser(c),I.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(pe(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new W.LL("auth","Firebase",c())}onAuthStateChanged(c,f,I){return this.registerStateListener(this.authStateSubscription,c,f,I)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,I){return this.registerStateListener(this.idTokenSubscription,c,f,I)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var I=this;return(0,p.Z)(function*(){const B=yield I.getOrInitRedirectPersistenceManager(f);return null===c?B.removeCurrentUser():B.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const I=c&&pe(c)||f._popupRedirectResolver;ce(I,f,"argument-error"),f.redirectPersistenceManager=yield ot.create(f,[pe(I._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var I,B;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(I=f._currentUser)||void 0===I?void 0:I._redirectEventId)===c?f._currentUser:(null===(B=f.redirectUser)||void 0===B?void 0:B._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,I,B){if(this._deleted)return()=>{};const J="function"==typeof f?f:f.next.bind(f),Ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(Ne,this,"internal-error"),Ne.then(()=>J(this.currentUser)),"function"==typeof f?c.addObserver(f,I,B):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=wr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const I={"X-Client-Version":c.clientVersion};c.app.options.appId&&(I["X-Firebase-gmpid"]=c.app.options.appId);const B=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return B&&(I["X-Firebase-Client"]=B),I})()}}function Mr(y){return(0,W.m9)(y)}class ti{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,W.ne)(f=>this.observer=f)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bi(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function _s(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class Zr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return je("not implemented")}_getIdTokenResponse(c){return je("not implemented")}_linkToIdToken(c,f){return je("not implemented")}_getReauthenticationResolver(c){return je("not implemented")}}function Yr(y,c){return ji.apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:resetPassword",In(y,c))})).apply(this,arguments)}function qn(y,c){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ls(y,c){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:update",In(y,c))})).apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithPassword",In(y,c))})).apply(this,arguments)}function Qi(y,c){return $i.apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:sendOobCode",In(y,c))})).apply(this,arguments)}function jr(y,c){return hi.apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(y,c){return Qi(y,c)})).apply(this,arguments)}function Jr(y,c){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(y,c){return Qi(y,c)})).apply(this,arguments)}function Hi(y,c){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(y,c){return Qi(y,c)})).apply(this,arguments)}function ea(y,c){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(y,c){return Qi(y,c)})).apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithEmailLink",In(y,c))})).apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithEmailLink",In(y,c))})).apply(this,arguments)}class ta extends Zr{constructor(c,f,I,B=null){super("password",I),this._email=c,this._password=f,this._tenantId=B}static _fromEmailAndPassword(c,f){return new ta(c,f,"password")}static _fromEmailAndCode(c,f,I=null){return new ta(c,f,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Pi(y,c){return ai.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function ui(y,c){return cs.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:me(c,"internal-error")}})()}_linkToIdToken(c,f){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return qn(c,{idToken:f,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Xs(y,c){return Es.apply(this,arguments)}(c,{idToken:f,email:I._email,oobCode:I._password});default:me(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function _r(y,c){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithIdp",In(y,c))})).apply(this,arguments)}class Be extends Zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Be(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):me("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:I,signInMethod:B}=f,J=(0,Me._T)(f,["providerId","signInMethod"]);if(!I||!B)return null;const Ne=new Be(I,B);return Ne.idToken=J.idToken||void 0,Ne.accessToken=J.accessToken||void 0,Ne.secret=J.secret,Ne.nonce=J.nonce,Ne.pendingToken=J.pendingToken||null,Ne}_getIdTokenResponse(c){return _r(c,this.buildRequest())}_linkToIdToken(c,f){const I=this.buildRequest();return I.idToken=f,_r(c,I)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,_r(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,W.xO)(f)}return c}}function gt(y,c){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:sendVerificationCode",In(y,c))})).apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",In(y,c))})).apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(y,c){const f=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",In(y,c));if(f.temporaryProof)throw Rr(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const ws={USER_NOT_FOUND:"user-not-found"};function mi(){return(mi=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",In(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),ws)})).apply(this,arguments)}class Ai extends Zr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Ai({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Ai({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Sn(y,c){return Un.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Fr(y,c){return gr.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Io(y,c){return mi.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:I,verificationCode:B}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:I,code:B}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:I,phoneNumber:B,temporaryProof:J}=c;return I||f||B||J?new Ai({verificationId:f,verificationCode:I,phoneNumber:B,temporaryProof:J}):null}}class Is{constructor(c){var f,I,B,J,Ne,ct;const zt=(0,W.zd)((0,W.pd)(c)),_n=null!==(f=zt.apiKey)&&void 0!==f?f:null,Wn=null!==(I=zt.oobCode)&&void 0!==I?I:null,Vn=function so(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=zt.mode)&&void 0!==B?B:null);ce(_n&&Wn&&Vn,"argument-error"),this.apiKey=_n,this.operation=Vn,this.code=Wn,this.continueUrl=null!==(J=zt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(Ne=zt.languageCode)&&void 0!==Ne?Ne:null,this.tenantId=null!==(ct=zt.tenantId)&&void 0!==ct?ct:null}static parseLink(c){const f=function ds(y){const c=(0,W.zd)((0,W.pd)(y)).link,f=c?(0,W.zd)((0,W.pd)(c)).deep_link_id:null,I=(0,W.zd)((0,W.pd)(y)).deep_link_id;return(I?(0,W.zd)((0,W.pd)(I)).link:null)||I||f||c||y}(c);try{return new Is(f)}catch{return null}}}let Xi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,I){return ta._fromEmailAndPassword(f,I)}static credentialWithLink(f,I){const B=Is.parseLink(I);return ce(B,"argument-error"),ta._fromEmailAndCode(f,B.code,B.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class es{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Mi extends es{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class wi extends Mi{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ce("providerId"in f&&"signInMethod"in f,"argument-error"),Be._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ce(c.idToken||c.accessToken,"argument-error"),Be._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return wi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return wi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:I,oauthTokenSecret:B,pendingToken:J,nonce:Ne,providerId:ct}=c;if(!I&&!B&&!f&&!J||!ct)return null;try{return new wi(ct)._credential({idToken:f,accessToken:I,nonce:Ne,pendingToken:J})}catch{return null}}}let oo=(()=>{class y extends Mi{constructor(){super("facebook.com")}static credential(f){return Be._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Oi=(()=>{class y extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,I){return Be._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:I})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:I,oauthAccessToken:B}=f;if(!I&&!B)return null;try{return y.credential(I,B)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),js=(()=>{class y extends Mi{constructor(){super("github.com")}static credential(f){return Be._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class hs extends Zr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return _r(c,this.buildRequest())}_linkToIdToken(c,f){const I=this.buildRequest();return I.idToken=f,_r(c,I)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,_r(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:I,signInMethod:B,pendingToken:J}=f;return I&&B&&J&&I===B?new hs(I,J):null}static _create(c,f){return new hs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Di extends es{constructor(c){ce(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Di.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Di.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=hs.fromJSON(c);return ce(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:I}=c;if(!f||!I)return null;try{return hs._create(I,f)}catch{return null}}}let ts=(()=>{class y extends Mi{constructor(){super("twitter.com")}static credential(f,I){return Be._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:I})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:I,oauthTokenSecret:B}=f;if(!I||!B)return null;try{return y.credential(I,B)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ki(y,c){return na.apply(this,arguments)}function na(){return(na=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signUp",In(y,c))})).apply(this,arguments)}class fi{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,I,B=!1){return(0,p.Z)(function*(){const J=yield Tn._fromIdTokenResponse(c,I,B),Ne=Co(I);return new fi({user:J,providerId:Ne,_tokenResponse:I,operationType:f})})()}static _forOperation(c,f,I){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(I,!0);const B=Co(I);return new fi({user:c,providerId:B,_tokenResponse:I,operationType:f})})()}}function Co(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xr(){return(xr=(0,p.Z)(function*(y){var c;const f=Mr(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new fi({user:f.currentUser,providerId:null,operationType:"signIn"});const I=yield ki(f,{returnSecureToken:!0}),B=yield fi._fromIdTokenResponse(f,"signIn",I,!0);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class bs extends W.ZR{constructor(c,f,I,B){var J;super(f.code,f.message),this.operationType=I,this.user=B,Object.setPrototypeOf(this,bs.prototype),this.customData={appName:c.name,tenantId:null!==(J=c.tenantId)&&void 0!==J?J:void 0,_serverResponse:f.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(c,f,I,B){return new bs(c,f,I,B)}}function To(y,c,f,I){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?bs._fromErrorAndOperation(y,J,c,I):J})}function ns(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Fi(){return(Fi=(0,p.Z)(function*(y,c){const f=(0,W.m9)(y);yield mr(!0,f,c);const{providerUserInfo:I}=yield cr(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),B=ns(I||[]);return f.providerData=f.providerData.filter(J=>B.has(J.providerId)),B.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function fs(y,c){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,p.Z)(function*(y,c,f=!1){const I=yield Qt(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return fi._forOperation(y,"link",I)})).apply(this,arguments)}function mr(y,c,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(y,c,f){yield Hn(c);const B=!1===y?"provider-already-linked":"no-such-provider";ce(ns(c.providerData).has(f)===y,c.auth,B)})).apply(this,arguments)}function $s(y,c){return pa.apply(this,arguments)}function pa(){return(pa=(0,p.Z)(function*(y,c,f=!1){const{auth:I}=y,B="reauthenticate";try{const J=yield Qt(y,To(I,B,c,y),f);ce(J.idToken,I,"internal-error");const Ne=ze(J.idToken);ce(Ne,I,"internal-error");const{sub:ct}=Ne;return ce(y.uid===ct,I,"user-mismatch"),fi._forOperation(y,B,J)}catch(J){throw"auth/user-not-found"===J?.code&&me(I,"user-mismatch"),J}})).apply(this,arguments)}function ps(y,c){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(y,c,f=!1){const I="signIn",B=yield To(y,I,c),J=yield fi._fromIdTokenResponse(y,I,B);return f||(yield y._updateCurrentUser(J.user)),J})).apply(this,arguments)}function $r(y,c){return bn.apply(this,arguments)}function bn(){return(bn=(0,p.Z)(function*(y,c){return ps(Mr(y),c)})).apply(this,arguments)}function Go(y,c){return ua.apply(this,arguments)}function ua(){return(ua=(0,p.Z)(function*(y,c){const f=(0,W.m9)(y);return yield mr(!1,f,c.providerId),fs(f,c)})).apply(this,arguments)}function So(y,c){return gs.apply(this,arguments)}function gs(){return(gs=(0,p.Z)(function*(y,c){return $s((0,W.m9)(y),c)})).apply(this,arguments)}function zi(y,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(y,c){return Or(y,"POST","/v1/accounts:signInWithCustomToken",In(y,c))})).apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(y,c){const f=Mr(y),I=yield zi(f,{token:c,returnSecureToken:!0}),B=yield fi._fromIdTokenResponse(f,"signIn",I);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class _t{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?er._fromServerResponse(c,f):me(c,"internal-error")}}class er extends _t{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new er(f)}}function Hs(y,c,f){var I;ce((null===(I=f.url)||void 0===I?void 0:I.length)>0,y,"invalid-continue-uri"),ce(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ce(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ce(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Xr(){return(Xr=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y),B={requestType:"PASSWORD_RESET",email:c};f&&Hs(I,B,f),yield Jr(I,B)})).apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(y,c,f){yield Yr((0,W.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(y,c){yield ls((0,W.m9)(y),{oobCode:c})})).apply(this,arguments)}function Ps(y,c){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(y,c){const f=(0,W.m9)(y),I=yield Yr(f,{oobCode:c}),B=I.requestType;switch(ce(B,f,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(I.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(I.mfaInfo,f,"internal-error");default:ce(I.email,f,"internal-error")}let J=null;return I.mfaInfo&&(J=_t._fromServerResponse(Mr(f),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:J},operation:B}})).apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(y,c){const{data:f}=yield Ps((0,W.m9)(y),c);return f.email})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(y,c,f){const I=Mr(y),B=yield ki(I,{returnSecureToken:!0,email:c,password:f}),J=yield fi._fromIdTokenResponse(I,"signIn",B);return yield I._updateCurrentUser(J.user),J})).apply(this,arguments)}function Jt(){return(Jt=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y),B={requestType:"EMAIL_SIGNIN",email:c};ce(f.handleCodeInApp,I,"argument-error"),f&&Hs(I,B,f),yield Hi(I,B)})).apply(this,arguments)}function Hr(){return(Hr=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y),B=Xi.credentialWithLink(c,f||bt());return ce(B._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),$r(I,B)})).apply(this,arguments)}function Vi(y,c){return xo.apply(this,arguments)}function xo(){return(xo=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:createAuthUri",In(y,c))})).apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(y,c){const I={identifier:c,continueUri:Ct()?bt():"http://localhost"},{signinMethods:B}=yield Vi((0,W.m9)(y),I);return B||[]})).apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(y,c){const f=(0,W.m9)(y),B={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&Hs(f.auth,B,c);const{email:J}=yield jr(f.auth,B);J!==y.email&&(yield y.reload())})).apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&Hs(I.auth,J,f);const{email:Ne}=yield ea(I.auth,J);Ne!==y.email&&(yield y.reload())})).apply(this,arguments)}function la(y,c){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(y,c){return Zn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const I=(0,W.m9)(y),J={idToken:yield I.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Ne=yield Qt(I,la(I.auth,J));I.displayName=Ne.displayName||null,I.photoURL=Ne.photoUrl||null;const ct=I.providerData.find(({providerId:zt})=>"password"===zt);ct&&(ct.displayName=I.displayName,ct.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Ne)})).apply(this,arguments)}function N(y,c,f){return Y.apply(this,arguments)}function Y(){return(Y=(0,p.Z)(function*(y,c,f){const{auth:I}=y,J={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(J.email=c),f&&(J.password=f);const Ne=yield Qt(y,qn(I,J));yield y._updateTokensIfNecessary(Ne,!0)})).apply(this,arguments)}class Ke{constructor(c,f,I={}){this.isNewUser=c,this.providerId=f,this.profile=I}}class at extends Ke{constructor(c,f,I,B){super(c,f,I),this.username=B}}class nn extends Ke{constructor(c,f){super(c,"facebook.com",f)}}class dr extends at{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Dr extends Ke{constructor(c,f){super(c,"google.com",f)}}class Ir extends at{constructor(c,f,I){super(c,"twitter.com",f,I)}}function rr(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ge(y){var c,f;if(!y)return null;const{providerId:I}=y,B=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},J=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!I&&y?.idToken){const Ne=null===(f=null===(c=ze(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ne)return new Ke(J,"anonymous"!==Ne&&"custom"!==Ne?Ne:null)}if(!I)return null;switch(I){case"facebook.com":return new nn(J,B);case"github.com":return new dr(J,B);case"google.com":return new Dr(J,B);case"twitter.com":return new Ir(J,B,y.screenName||null);case"custom":case"anonymous":return new Ke(J,null);default:return new Ke(J,I,B)}}(f)}class Cs{constructor(c,f,I){this.type=c,this.credential=f,this.auth=I}static _fromIdtoken(c,f){return new Cs("enroll",c,f)}static _fromMfaPendingCredential(c){return new Cs("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,I;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Cs._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(I=c.multiFactorSession)&&void 0!==I&&I.idToken)return Cs._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Ts{constructor(c,f,I){this.session=c,this.hints=f,this.signInResolver=I}static _fromError(c,f){const I=Mr(c),B=f.customData._serverResponse,J=(B.mfaInfo||[]).map(ct=>_t._fromServerResponse(I,ct));ce(B.mfaPendingCredential,I,"internal-error");const Ne=Cs._fromMfaPendingCredential(B.mfaPendingCredential);return new Ts(Ne,J,function(){var ct=(0,p.Z)(function*(zt){const _n=yield zt._process(I,Ne);delete B.mfaInfo,delete B.mfaPendingCredential;const Wn=Object.assign(Object.assign({},B),{idToken:_n.idToken,refreshToken:_n.refreshToken});switch(f.operationType){case"signIn":const Vn=yield fi._fromIdTokenResponse(I,f.operationType,Wn);return yield I._updateCurrentUser(Vn.user),Vn;case"reauthenticate":return ce(f.user,I,"internal-error"),fi._forOperation(f.user,f.operationType,Wn);default:me(I,"internal-error")}});return function(zt){return ct.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function Ca(y,c){return Zn(y,"POST","/v2/accounts/mfaEnrollment:start",In(y,c))}class U{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(I=>_t._fromServerResponse(c.auth,I)))})}static _fromUser(c){return new U(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Cs._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var I=this;return(0,p.Z)(function*(){const B=c,J=yield I.getSession(),Ne=yield Qt(I.user,B._process(I.user.auth,J,f));return yield I.user._updateTokensIfNecessary(Ne),I.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const I="string"==typeof c?c:c.uid,B=yield f.user.getIdToken(),J=yield Qt(f.user,function Ru(y,c){return Zn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",In(y,c))}(f.user.auth,{idToken:B,mfaEnrollmentId:I}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Ne})=>Ne!==I),yield f.user._updateTokensIfNecessary(J);try{yield f.user.reload()}catch(Ne){if("auth/user-token-expired"!==Ne?.code)throw Ne}})()}}const m=new WeakMap,R="__sak";class G{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(R,"1"),this.storage.removeItem(R),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const st=(()=>{class y extends G{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,I)=>this.onStorageEvent(f,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function X(){const y=(0,W.z$)();return dn(y)||te(y)}()&&function un(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=an(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const I of Object.keys(this.listeners)){const B=this.storage.getItem(I),J=this.localCache[I];B!==J&&f(I,J,B)}}onStorageEvent(f,I=!1){if(!f.key)return void this.forAllChangedKeys((ct,zt,_n)=>{this.notifyListeners(ct,_n)});const B=f.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ct=this.storage.getItem(B);if(f.newValue!==ct)null!==f.newValue?this.storage.setItem(B,f.newValue):this.storage.removeItem(B);else if(this.localCache[B]===f.newValue&&!I)return}const J=()=>{const ct=this.storage.getItem(B);!I&&this.localCache[B]===ct||this.notifyListeners(B,ct)},Ne=this.storage.getItem(B);!function tn(){return(0,W.w1)()&&10===document.documentMode}()||Ne===f.newValue||f.newValue===f.oldValue?J():setTimeout(J,10)}notifyListeners(f,I){this.localCache[f]=I;const B=this.listeners[f];if(B)for(const J of Array.from(B))J(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,I,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:I,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,I){var B=()=>super._set,J=this;return(0,p.Z)(function*(){yield B().call(J,f,I),J.localCache[f]=JSON.stringify(I)})()}_get(f){var I=()=>super._get,B=this;return(0,p.Z)(function*(){const J=yield I().call(B,f);return B.localCache[f]=JSON.stringify(J),J})()}_remove(f){var I=()=>super._remove,B=this;return(0,p.Z)(function*(){yield I().call(B,f),delete B.localCache[f]})()}}return y.type="LOCAL",y})(),jt=(()=>{class y extends G{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,I){}_removeListener(f,I){}}return y.type="SESSION",y})();let hr=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const I=this.receivers.find(J=>J.isListeningto(f));if(I)return I;const B=new y(f);return this.receivers.push(B),B}isListeningto(f){return this.eventTarget===f}handleEvent(f){var I=this;return(0,p.Z)(function*(){const B=f,{eventId:J,eventType:Ne,data:ct}=B.data,zt=I.handlersMap[Ne];if(!zt?.size)return;B.ports[0].postMessage({status:"ack",eventId:J,eventType:Ne});const _n=Array.from(zt).map(function(){var Vn=(0,p.Z)(function*(Vs){return Vs(B.origin,ct)});return function(Vs){return Vn.apply(this,arguments)}}()),Wn=yield function tr(y){return Promise.all(y.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(I){return{fulfilled:!1,reason:I}}});return function(f){return c.apply(this,arguments)}}()))}(_n);B.ports[0].postMessage({status:"done",eventId:J,eventType:Ne,response:Wn})})()}_subscribe(f,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(I)}_unsubscribe(f,I){this.handlersMap[f]&&I&&this.handlersMap[f].delete(I),(!I||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Xe(y="",c=10){let f="";for(let I=0;I<c;I++)f+=Math.floor(10*Math.random());return y+f}class ln{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,I=50){var B=this;return(0,p.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let Ne,ct;return new Promise((zt,_n)=>{const Wn=Xe("",20);J.port1.start();const Vn=setTimeout(()=>{_n(new Error("unsupported_event"))},I);ct={messageChannel:J,onMessage(Vs){const no=Vs;if(no.data.eventId===Wn)switch(no.data.status){case"ack":clearTimeout(Vn),Ne=setTimeout(()=>{_n(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ne),zt(no.data.response);break;default:clearTimeout(Vn),clearTimeout(Ne),_n(new Error("invalid_response"))}}},B.handlers.add(ct),J.port1.addEventListener("message",ct.onMessage),B.target.postMessage({eventType:c,eventId:Wn,data:f},[J.port2])}).finally(()=>{ct&&B.removeMessageHandler(ct)})})()}}function Rn(){return window}function Pt(){return typeof Rn().WorkerGlobalScope<"u"&&"function"==typeof Rn().importScripts}function bi(){return(bi=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ft="firebaseLocalStorageDb",rs="firebaseLocalStorage",qs="fbase_key";class po{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Wo(y,c){return y.transaction([rs],c?"readwrite":"readonly").objectStore(rs)}function Po(){const y=indexedDB.open(ft,1);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const I=y.result;try{I.createObjectStore(rs,{keyPath:qs})}catch(B){f(B)}}),y.addEventListener("success",(0,p.Z)(function*(){const I=y.result;I.objectStoreNames.contains(rs)?c(I):(I.close(),yield function Ko(){const y=indexedDB.deleteDatabase(ft);return new po(y).toPromise()}(),c(yield Po()))}))})}function Oo(y,c,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(y,c,f){const I=Wo(y,!0).put({[qs]:c,value:f});return new po(I).toPromise()})).apply(this,arguments)}function On(){return(On=(0,p.Z)(function*(y,c){const f=Wo(y,!1).get(c),I=yield new po(f).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function or(y,c){const f=Wo(y,!0).delete(c);return new po(f).toPromise()}const Er=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Po()),f.db})()}_withRetries(f){var I=this;return(0,p.Z)(function*(){let B=0;for(;;)try{const J=yield I._openDb();return yield f(J)}catch(J){if(B++>3)throw J;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return Pt()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=hr._getInstance(function Ze(){return Pt()?self:null}()),f.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*(B,J){return{keyProcessed:(yield f._poll()).includes(J.key)}});return function(B,J){return I.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*(B,J){return["keyChanged"]});return function(B,J){return I.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var I,B;if(f.activeServiceWorker=yield function qt(){return bi.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new ln(f.activeServiceWorker);const J=yield f.sender._send("ping",{},800);!J||(null===(I=J[0])||void 0===I?void 0:I.fulfilled)&&(null===(B=J[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Vt(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:f},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Po();return yield Oo(f,R,"1"),yield or(f,R),!0}catch{}return!1})()}_withPendingWrite(f){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield f()}finally{I.pendingWrites--}})()}_set(f,I){var B=this;return(0,p.Z)(function*(){return B._withPendingWrite((0,p.Z)(function*(){return yield B._withRetries(J=>Oo(J,f,I)),B.localCache[f]=I,B.notifyServiceWorker(f)}))})()}_get(f){var I=this;return(0,p.Z)(function*(){const B=yield I._withRetries(J=>function Pn(y,c){return On.apply(this,arguments)}(J,f));return I.localCache[f]=B,B})()}_remove(f){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries(B=>or(B,f)),delete I.localCache[f],I.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const I=yield f._withRetries(Ne=>{const ct=Wo(Ne,!1).getAll();return new po(ct).toPromise()});if(!I)return[];if(0!==f.pendingWrites)return[];const B=[],J=new Set;for(const{fbase_key:Ne,value:ct}of I)J.add(Ne),JSON.stringify(f.localCache[Ne])!==JSON.stringify(ct)&&(f.notifyListeners(Ne,ct),B.push(Ne));for(const Ne of Object.keys(f.localCache))f.localCache[Ne]&&!J.has(Ne)&&(f.notifyListeners(Ne,null),B.push(Ne));return B})()}notifyListeners(f,I){this.localCache[f]=I;const B=this.listeners[f];if(B)for(const J of Array.from(B))J(I)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(I)}_removeListener(f,I){this.listeners[f]&&(this.listeners[f].delete(I),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ut(y,c){return Zn(y,"POST","/v2/accounts/mfaSignIn:start",In(y,c))}function li(){return(li=(0,p.Z)(function*(y){return(yield Zn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nt(y){return new Promise((c,f)=>{const I=document.createElement("script");I.setAttribute("src",y),I.onload=c,I.onerror=B=>{const J=it("internal-error");J.customData=B,f(J)},I.type="text/javascript",I.charset="UTF-8",function br(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(I)})}function Fo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ta=1e12;class Vr{constructor(c){this.auth=c,this.counter=Ta,this._widgets=new Map}render(c,f){const I=this.counter;return this._widgets.set(I,new cd(c,this.auth.name,f||{})),this.counter++,I}reset(c){var f;const I=c||Ta;null===(f=this._widgets.get(I))||void 0===f||f.delete(),this._widgets.delete(I)}getResponse(c){var f;return(null===(f=this._widgets.get(c||Ta))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var I;return null===(I=f._widgets.get(c||Ta))||void 0===I||I.execute(),""})()}}class cd{constructor(c,f,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof c?document.getElementById(c):c;ce(B,"argument-error",{appName:f}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ya(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<y;I++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sa=Fo("rcb"),Pu=new cn(3e4,6e4);class Qa{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Rn().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ce(function xl(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Rn().grecaptcha):new Promise((I,B)=>{const J=Rn().setTimeout(()=>{B(it(c,"network-request-failed"))},Pu.get());Rn()[Sa]=()=>{Rn().clearTimeout(J),delete Rn()[Sa];const ct=Rn().grecaptcha;if(!ct)return void B(it(c,"internal-error"));const zt=ct.render;ct.render=(_n,Wn)=>{const Vn=zt(_n,Wn);return this.counter++,Vn},this.hostLanguage=f,I(ct)},Nt(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Sa,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(J),B(it(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=Rn().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Aa{load(c){return(0,p.Z)(function*(){return new Vr(c)})()}clearedOneInstance(){}}const Ma="recaptcha",Nl={theme:"light",type:"image"};class $e{constructor(c,f=Object.assign({},Nl),I){this.parameters=f,this.type=Ma,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mr(I),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof c?document.getElementById(c):c;ce(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Aa:new Qa,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),I=c.getAssertedRecaptcha();return I.getResponse(f)||new Promise(J=>{const Ne=ct=>{!ct||(c.tokenChangeListeners.delete(Ne),J(ct))};c.tokenChangeListeners.add(Ne),c.isInvisible&&I.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(I=>I(f)),"function"==typeof c)c(f);else if("string"==typeof c){const I=Rn()[c];"function"==typeof I&&I(f)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const I=document.createElement("div");f.appendChild(I),f=I}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){ce(Ct()&&!Pt(),c.auth,"internal-error"),yield function xa(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Gn(y){return li.apply(this,arguments)}(c.auth);ce(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ls{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Ai._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Zo(){return(Zo=(0,p.Z)(function*(y,c,f){const I=Mr(y),B=yield oa(I,c,(0,W.m9)(f));return new Ls(B,J=>$r(I,J))})).apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y);yield mr(!1,I,"phone");const B=yield oa(I.auth,c,(0,W.m9)(f));return new Ls(B,J=>Go(I,J))})).apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y),B=yield oa(I.auth,c,(0,W.m9)(f));return new Ls(B,J=>So(I,J))})).apply(this,arguments)}function oa(y,c,f){return vu.apply(this,arguments)}function vu(){return(vu=(0,p.Z)(function*(y,c,f){var I;const B=yield f.verify();try{let J;if(ce("string"==typeof B,y,"argument-error"),ce(f.type===Ma,y,"argument-error"),J="string"==typeof c?{phoneNumber:c}:c,"session"in J){const Ne=J.session;if("phoneNumber"in J)return ce("enroll"===Ne.type,y,"internal-error"),(yield Ca(y,{idToken:Ne.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{ce("signin"===Ne.type,y,"internal-error");const ct=(null===(I=J.multiFactorHint)||void 0===I?void 0:I.uid)||J.multiFactorUid;return ce(ct,y,"missing-multi-factor-info"),(yield Ut(y,{mfaPendingCredential:Ne.credential,mfaEnrollmentId:ct,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ne}=yield gt(y,{phoneNumber:J.phoneNumber,recaptchaToken:B});return Ne}}finally{f._reset()}})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(y,c){yield fs((0,W.m9)(y),c)})).apply(this,arguments)}let _u=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=Mr(f)}verifyPhoneNumber(f,I){return oa(this.auth,f,(0,W.m9)(I))}static credential(f,I){return Ai._fromVerification(f,I)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:I,temporaryProof:B}=f;return I&&B?Ai._fromTokenResponse(I,B):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function mo(y,c){return c?pe(c):(ce(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ka extends Zr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return _r(c,this._buildIdpRequest())}_linkToIdToken(c,f){return _r(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return _r(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function os(y){return ps(y.auth,new ka(y),y.bypassAuthState)}function Ja(y){const{auth:c,user:f}=y;return ce(f,c,"internal-error"),$s(f,new ka(y),y.bypassAuthState)}function w(y){return D.apply(this,arguments)}function D(){return(D=(0,p.Z)(function*(y){const{auth:c,user:f}=y;return ce(f,c,"internal-error"),fs(f,new ka(y),y.bypassAuthState)})).apply(this,arguments)}class _{constructor(c,f,I,B,J=!1){this.auth=c,this.resolver=I,this.user=B,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(I,B){c.pendingPromise={resolve:I,reject:B};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(J){c.reject(J)}});return function(I,B){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:B,postBody:J,tenantId:Ne,error:ct,type:zt}=c;if(ct)return void f.reject(ct);const _n={auth:f.auth,requestUri:I,sessionId:B,tenantId:Ne||void 0,postBody:J||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(zt)(_n))}catch(Wn){f.reject(Wn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return os;case"linkViaPopup":case"linkViaRedirect":return w;case"reauthViaPopup":case"reauthViaRedirect":return Ja;default:me(this.auth,"internal-error")}}resolve(c){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const T=new cn(2e3,1e4);function K(){return(K=(0,p.Z)(function*(y,c,f){const I=Mr(y);It(y,c,es);const B=mo(I,f);return new zn(I,"signInViaPopup",c,B).executeNotNull()})).apply(this,arguments)}function ae(){return(ae=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y);It(I.auth,c,es);const B=mo(I.auth,f);return new zn(I.auth,"reauthViaPopup",c,B,I).executeNotNull()})).apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y);It(I.auth,c,es);const B=mo(I.auth,f);return new zn(I.auth,"linkViaPopup",c,B,I).executeNotNull()})).apply(this,arguments)}let zn=(()=>{class y extends _{constructor(f,I,B,J,Ne){super(f,I,J,Ne),this.provider=B,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const I=yield f.execute();return ce(I,f.auth,"internal-error"),I})()}onExecution(){var f=this;return(0,p.Z)(function*(){se(1===f.filter.length,"Popup operations only handle one event");const I=Xe();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],I),f.authWindow.associatedEvent=I,f.resolver._originValidation(f.auth).catch(B=>{f.reject(B)}),f.resolver._isIframeWebStorageSupported(f.auth,B=>{B||f.reject(it(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(it(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var I,B;this.pollId=null!==(B=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject(it(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,T.get())};f()}}return y.currentPopupAction=null,y})();const nr=new Map;class as extends _{constructor(c,f,I=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,I),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let I=nr.get(f.auth._key());if(!I){try{const J=(yield function ys(y,c){return vi.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;I=()=>Promise.resolve(J)}catch(B){I=()=>Promise.reject(B)}nr.set(f.auth._key(),I)}return f.bypassAuthState||nr.set(f.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(I,c);if("unknown"!==c.type){if(c.eventId){const B=yield I.auth._redirectUserForId(c.eventId);if(B)return I.user=B,f().call(I,c);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function vi(){return(vi=(0,p.Z)(function*(y,c){const f=La(c),I=va(y);if(!(yield I._isAvailable()))return!1;const B="true"===(yield I._get(f));return yield I._remove(f),B})).apply(this,arguments)}function Ss(y,c){return As.apply(this,arguments)}function As(){return(As=(0,p.Z)(function*(y,c){return va(y)._set(La(c),"true")})).apply(this,arguments)}function Yo(y,c){nr.set(y._key(),c)}function va(y){return pe(y._redirectPersistence)}function La(y){return be("pendingRedirect",y.config.apiKey,y.name)}function x(){return(x=(0,p.Z)(function*(y,c,f){const I=Mr(y);It(y,c,es);const B=mo(I,f);return yield Ss(B,I),B._openRedirect(I,c,"signInViaRedirect")})).apply(this,arguments)}function le(){return(le=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y);It(I.auth,c,es);const B=mo(I.auth,f);yield Ss(B,I.auth);const J=yield Jn(I);return B._openRedirect(I.auth,c,"reauthViaRedirect",J)})).apply(this,arguments)}function St(){return(St=(0,p.Z)(function*(y,c,f){const I=(0,W.m9)(y);It(I.auth,c,es);const B=mo(I.auth,f);yield mr(!1,I,c.providerId),yield Ss(B,I.auth);const J=yield Jn(I);return B._openRedirect(I.auth,c,"linkViaRedirect",J)})).apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(y,c){return yield Mr(y)._initializationPromise,vn(y,c,!1)})).apply(this,arguments)}function vn(y,c){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(y,c,f=!1){const I=Mr(y),B=mo(I,c),Ne=yield new as(I,B,f).execute();return Ne&&!f&&(delete Ne.user._redirectEventId,yield I._persistUserIfCurrent(Ne.user),yield I._setRedirectUser(null,c)),Ne})).apply(this,arguments)}function Jn(y){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(y){const c=Xe(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Ur{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(c,I)&&(f=!0,this.sendToConsumer(c,I),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Ys(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Va(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var I;if(c.error&&!Va(c)){const B=(null===(I=c.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";f.onError(it(this.auth,B))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const I=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&I}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(c))}saveEventToCache(c){this.cachedEventUids.add(Ra(c)),this.lastProcessedEventTime=Date.now()}}function Ra(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Va({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function Vo(y){return ku.apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(y,c={}){return Zn(y,"GET","/v1/projects",c)})).apply(this,arguments)}const zf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dd=/^https?/;function ah(){return(ah=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield Vo(y);for(const f of c)try{if(Wf(f))return}catch{}me(y,"unauthorized-domain")})).apply(this,arguments)}function Wf(y){const c=bt(),{protocol:f,hostname:I}=new URL(c);if(y.startsWith("chrome-extension://")){const Ne=new URL(y);return""===Ne.hostname&&""===I?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Ne.hostname===I}if(!dd.test(f))return!1;if(zf.test(y))return I===y;const B=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(I)}const Kf=new cn(3e4,6e4);function hd(){const y=Rn().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let el=null;function qf(y){return el=el||function uc(y){return new Promise((c,f)=>{var I,B,J;function Ne(){hd(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{hd(),f(it(y,"network-request-failed"))},timeout:Kf.get()})}if(null!==(B=null===(I=Rn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==B&&B.Iframe)c(gapi.iframes.getContext());else{if(null===(J=Rn().gapi)||void 0===J||!J.load){const ct=Fo("iframefcb");return Rn()[ct]=()=>{gapi.load?Ne():f(it(y,"network-request-failed"))},Nt(`https://apis.google.com/js/api.js?onload=${ct}`).catch(zt=>f(zt))}Ne()}}).catch(c=>{throw el=null,c})}(y),el}const uh=new cn(5e3,15e3),xs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yo(y){const c=y.config;ce(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?en(c,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,I={apiKey:c.apiKey,appName:y.name,v:Te.SDK_VERSION},B=lc.get(y.config.apiHost);B&&(I.eid=B);const J=y._getFrameworks();return J.length&&(I.fw=J.join(",")),`${f}?${(0,W.xO)(I).slice(1)}`}function fd(){return fd=(0,p.Z)(function*(y){const c=yield qf(y),f=Rn().gapi;return ce(f,y,"internal-error"),c.open({where:document.body,url:yo(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xs,dontclear:!0},I=>new Promise(function(){var B=(0,p.Z)(function*(J,Ne){yield I.restyle({setHideOnLeave:!1});const ct=it(y,"network-request-failed"),zt=Rn().setTimeout(()=>{Ne(ct)},uh.get());function _n(){Rn().clearTimeout(zt),J(I)}I.ping(_n).then(_n,()=>{Ne(ct)})});return function(J,Ne){return B.apply(this,arguments)}}()))}),fd.apply(this,arguments)}const Pl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yf{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lu(y,c,f,I,B,J){ce(y.config.authDomain,y,"auth-domain-config-required"),ce(y.config.apiKey,y,"invalid-api-key");const Ne={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:I,v:Te.SDK_VERSION,eventId:B};if(c instanceof es){c.setDefaultLanguage(y.languageCode),Ne.providerId=c.providerId||"",(0,W.xb)(c.getCustomParameters())||(Ne.customParameters=JSON.stringify(c.getCustomParameters()));for(const[zt,_n]of Object.entries(J||{}))Ne[zt]=_n}if(c instanceof Mi){const zt=c.getScopes().filter(_n=>""!==_n);zt.length>0&&(Ne.scopes=zt.join(","))}y.tenantId&&(Ne.tid=y.tenantId);const ct=Ne;for(const zt of Object.keys(ct))void 0===ct[zt]&&delete ct[zt];return`${function pd({config:y}){return y.emulator?en(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,W.xO)(ct).slice(1)}`}const Ol="webStorageSupport";class cc extends class rl{constructor(c){this.factorId=c}_process(c,f,I){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,I);case"signin":return this._finalizeSignIn(c,f.credential);default:return je("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new cc(c)}_finalizeEnroll(c,f,I){return function ma(y,c){return Zn(y,"POST","/v2/accounts/mfaEnrollment:finalize",In(y,c))}(c,{idToken:f,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function ko(y,c){return Zn(y,"POST","/v2/accounts/mfaSignIn:finalize",In(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dc=(()=>{class y{constructor(){}static assertion(f){return cc._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var Vu="@firebase/auth";class Uu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(I=>{c(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ua(){return window}function Vl(){return(Vl=(0,p.Z)(function*(y,c,f){var I;const{BuildInfo:B}=Ua();se(c.sessionId,"AuthEvent did not contain a session ID");const J=yield Bu(c.sessionId),Ne={};return te()?Ne.ibi=B.packageName:Qn()?Ne.apn=B.packageName:me(y,"operation-not-supported-in-this-environment"),B.displayName&&(Ne.appDisplayName=B.displayName),Ne.sessionId=J,Lu(y,f,c.type,void 0,null!==(I=c.eventId)&&void 0!==I?I:void 0,Ne)})).apply(this,arguments)}function gc(){return(gc=(0,p.Z)(function*(y){const{BuildInfo:c}=Ua(),f={};te()?f.iosBundleId=c.packageName:Qn()?f.androidPackageName=c.packageName:me(y,"operation-not-supported-in-this-environment"),yield Vo(y,f)})).apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(y,c,f){const{cordova:I}=Ua();let B=()=>{};try{yield new Promise((J,Ne)=>{let ct=null;function zt(){var Vn;J();const Vs=null===(Vn=I.plugins.browsertab)||void 0===Vn?void 0:Vn.close;"function"==typeof Vs&&Vs(),"function"==typeof f?.close&&f.close()}function _n(){ct||(ct=window.setTimeout(()=>{Ne(it(y,"redirect-cancelled-by-user"))},2e3))}function Wn(){"visible"===document?.visibilityState&&_n()}c.addPassiveListener(zt),document.addEventListener("resume",_n,!1),Qn()&&document.addEventListener("visibilitychange",Wn,!1),B=()=>{c.removePassiveListener(zt),document.removeEventListener("resume",_n,!1),document.removeEventListener("visibilitychange",Wn,!1),ct&&window.clearTimeout(ct)}})}finally{B()}})).apply(this,arguments)}function Bu(y){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(y){const c=fh(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function fh(y){if(se(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let I=0;I<y.length;I++)f[I]=y.charCodeAt(I);return f}(0,W.Pz)("authIdTokenMaxAge"),function fc(y){(0,Te._registerComponent)(new ke.wA("auth",(c,{options:f})=>{const I=c.getProvider("app").getImmediate(),B=c.getProvider("heartbeat"),{apiKey:J,authDomain:Ne}=I.options;return((ct,zt)=>{ce(J&&!J.includes(":"),"invalid-api-key",{appName:ct.name}),ce(!Ne?.includes(":"),"argument-error",{appName:ct.name});const _n={apiKey:J,authDomain:Ne,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wr(y)},Wn=new xn(ct,zt,_n);return function mt(y,c){const f=c?.persistence||[],I=(Array.isArray(f)?f:[f]).map(pe);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(I,c?.popupRedirectResolver)}(Wn,f),Wn})(I,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,I)=>{c.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new ke.wA("auth-internal",c=>{const f=Mr(c.getProvider("auth").getImmediate());return new Uu(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(Vu,"0.21.0",function Jo(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,Te.registerVersion)(Vu,"0.21.0","esm2017")}("Browser");class yc extends Ur{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function vd(y){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(y){const c=yield _i()._get(Eu(y));return c&&(yield _i()._remove(Eu(y))),c})).apply(this,arguments)}function Xf(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const I=Math.floor(Math.random()*c.length);y.push(c.charAt(I))}return y.join("")}function _i(){return pe(st)}function Eu(y){return be("authEvent",y.config.apiKey,y.name)}function tu(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,W.zd)(f.join("?"))}function nu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:it("no-auth-event")}}function Ba(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ed(y=(0,W.z$)()){return!("file:"!==Ba()&&"ionic:"!==Ba()&&"capacitor:"!==Ba()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function iu(){try{const y=self.localStorage,c=Xe();if(y)return y.setItem(c,"1"),y.removeItem(c),!function _h(y=(0,W.z$)()){return function zr(){return(0,W.w1)()&&11===document?.documentMode}()||function vc(y=(0,W.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,W.hl)()}catch{return _c()&&(0,W.hl)()}return!1}function _c(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Eo(){return(function _d(){return"http:"===Ba()||"https:"===Ba()}()||(0,W.ru)()||Ed())&&!function vs(){return(0,W.b$)()||(0,W.UG)()}()&&iu()&&!_c()}function su(){return Ed()&&typeof document<"u"}function jl(){return(jl=(0,p.Z)(function*(){return!!su()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const ca={LOCAL:"local",NONE:"none",SESSION:"session"},_a=ce,Eh="persistence";function fr(y){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,p.Z)(function*(y){yield y._initializationPromise;const c=$u(),f=be(Eh,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function $u(){var y;try{return(null===(y=function ja(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const wu=ce;class aa{constructor(){this.browserResolver=pe(class to{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jt,this._completeRedirectFn=vn,this._overrideRedirectResult=Yo}_openPopup(c,f,I,B){var J=this;return(0,p.Z)(function*(){var Ne;se(null===(Ne=J.eventManagers[c._key()])||void 0===Ne?void 0:Ne.manager,"_initialize() not called before _openPopup()");const ct=Lu(c,f,I,bt(),B);return function ch(y,c,f,I=500,B=600){const J=Math.max((window.screen.availHeight-B)/2,0).toString(),Ne=Math.max((window.screen.availWidth-I)/2,0).toString();let ct="";const zt=Object.assign(Object.assign({},Pl),{width:I.toString(),height:B.toString(),top:J,left:Ne}),_n=(0,W.z$)().toLowerCase();f&&(ct=Yn(_n)?"_blank":f),Ot(_n)&&(c=c||"http://localhost",zt.scrollbars="yes");const Wn=Object.entries(zt).reduce((Vs,[no,ou])=>`${Vs}${no}=${ou},`,"");if(function dt(y=(0,W.z$)()){var c;return te(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(_n)&&"_self"!==ct)return function Fu(y,c){const f=document.createElement("a");f.href=y,f.target=c;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(I)}(c||"",ct),new Yf(null);const Vn=window.open(c||"",ct,Wn);ce(Vn,y,"popup-blocked");try{Vn.focus()}catch{}return new Yf(Vn)}(c,ct,Xe())})()}_openRedirect(c,f,I,B){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(c),function ur(y){Rn().location.href=y}(Lu(c,f,I,bt(),B)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:B,promise:J}=this.eventManagers[f];return B?Promise.resolve(B):(se(J,"If manager is not set, promise should be"),J)}const I=this.initAndGetManager(c);return this.eventManagers[f]={promise:I},I.catch(()=>{delete this.eventManagers[f]}),I}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const I=yield function ci(y){return fd.apply(this,arguments)}(c),B=new Ur(c);return I.register("authEvent",J=>(ce(J?.authEvent,c,"invalid-auth-event"),{status:B.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:B},f.iframes[c._key()]=I,B})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Ol,{type:Ol},B=>{var J;const Ne=null===(J=B?.[0])||void 0===J?void 0:J[Ol];void 0!==Ne&&f(!!Ne),me(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function oh(y){return ah.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return an()||dn()||te()}}),this.cordovaResolver=pe(class ph{constructor(){this._redirectPersistence=jt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vn,this._overrideRedirectResult=Yo}_initialize(c){var f=this;return(0,p.Z)(function*(){const I=c._key();let B=f.eventManagers.get(I);return B||(B=new yc(c),f.eventManagers.set(I,B),f.attachCallbackListeners(c,B)),B})()}_openPopup(c){me(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,I,B){var J=this;return(0,p.Z)(function*(){!function hh(y){var c,f,I,B,J,Ne,ct,zt,_n,Wn;const Vn=Ua();ce("function"==typeof(null===(c=Vn?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ce(typeof(null===(f=Vn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ce("function"==typeof(null===(J=null===(B=null===(I=Vn?.cordova)||void 0===I?void 0:I.plugins)||void 0===B?void 0:B.browsertab)||void 0===J?void 0:J.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(zt=null===(ct=null===(Ne=Vn?.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===ct?void 0:ct.browsertab)||void 0===zt?void 0:zt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(Wn=null===(_n=Vn?.cordova)||void 0===_n?void 0:_n.InAppBrowser)||void 0===Wn?void 0:Wn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Ne=yield J._initialize(c);yield Ne.initialized(),Ne.resetRedirect(),function Fa(){nr.clear()}(),yield J._originValidation(c);const ct=function il(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Xf(),postBody:null,tenantId:y.tenantId,error:it(y,"no-auth-event")}}(c,I,B);yield function yd(y,c){return _i()._set(Eu(y),c)}(c,ct);const zt=yield function Ll(y,c,f){return Vl.apply(this,arguments)}(c,ct,f),_n=yield function Ul(y){const{cordova:c}=Ua();return new Promise(f=>{c.plugins.browsertab.isAvailable(I=>{let B=null;I?c.plugins.browsertab.openUrl(y):B=c.InAppBrowser.open(y,function Ue(y=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(B)})})}(zt);return function Qf(y,c,f){return mc.apply(this,arguments)}(c,Ne,_n)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function dh(y){return gc.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:I,handleOpenURL:B,BuildInfo:J}=Ua(),Ne=setTimeout((0,p.Z)(function*(){yield vd(c),f.onEvent(nu())}),500),ct=function(){var Wn=(0,p.Z)(function*(Vn){clearTimeout(Ne);const Vs=yield vd(c);let no=null;Vs&&Vn?.url&&(no=function Jf(y,c){var f,I;const B=function ep(y){const c=tu(y),f=c.link?decodeURIComponent(c.link):void 0,I=tu(f).link,B=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return tu(B).link||B||I||f||y}(c);if(B.includes("/__/auth/callback")){const J=tu(B),Ne=J.firebaseError?function Bl(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(J.firebaseError)):null,ct=null===(I=null===(f=Ne?.code)||void 0===f?void 0:f.split("auth/"))||void 0===I?void 0:I[1],zt=ct?it(ct):null;return zt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:B,postBody:null}}return null}(Vs,Vn.url)),f.onEvent(no||nu())});return function(Vs){return Wn.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,ct);const zt=B,_n=`${J.packageName.toLowerCase()}://`;Ua().handleOpenURL=function(){var Wn=(0,p.Z)(function*(Vn){if(Vn.toLowerCase().startsWith(_n)&&ct({url:Vn}),"function"==typeof zt)try{zt(Vn)}catch(Vs){console.error(Vs)}});return function(Vn){return Wn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=jt,this._completeRedirectFn=vn,this._overrideRedirectResult=Yo}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,I,B){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(c,f,I,B)})()}_openRedirect(c,f,I,B){var J=this;return(0,p.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(c,f,I,B)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return su()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function sl(){return jl.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function wc(y){return y.unwrap()}function Dc(y){return Hu(y)}function Hu(y){const{_tokenResponse:c}=y instanceof W.ZR?y.customData:y;if(!c)return null;if(!(y instanceof W.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return _u.credentialFromResult(y);const f=c.providerId;if(!f||"password"===f)return null;let I;switch(f){case"google.com":I=Oi;break;case"facebook.com":I=oo;break;case"github.com":I=js;break;case"twitter.com":I=ts;break;default:const{oauthIdToken:B,oauthAccessToken:J,oauthTokenSecret:Ne,pendingToken:ct,nonce:zt}=c;return J||Ne||B||ct?ct?f.startsWith("saml.")?hs._create(f,ct):Be._fromParams({providerId:f,signInMethod:f,pendingToken:ct,idToken:B,accessToken:J}):new wi(f).credential({idToken:B,accessToken:J,rawNonce:zt}):null}return y instanceof W.ZR?I.credentialFromError(y):I.credentialFromResult(y)}function Xo(y,c){return c.catch(f=>{throw f instanceof W.ZR&&function wd(y,c){var f;const I=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new tp(y,function yi(y,c){var f;const I=(0,W.m9)(y),B=c;return ce(c.customData.operationType,I,"argument-error"),ce(null===(f=B.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,I,"argument-error"),Ts._fromError(I,B)}(y,c));else if(I){const B=Hu(c),J=c;B&&(J.credential=B,J.tenantId=I.tenantId||void 0,J.email=I.email||void 0,J.phoneNumber=I.phoneNumber||void 0)}}(y,f),f}).then(f=>{const B=f.user;return{operationType:f.operationType,credential:Dc(f),additionalUserInfo:rr(f),user:$a.getOrCreate(B)}})}function bc(y,c){return Id.apply(this,arguments)}function Id(){return(Id=(0,p.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:I=>Xo(y,f.confirm(I))}})).apply(this,arguments)}class tp{constructor(c,f){this.resolver=f,this.auth=function Ic(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Xo(wc(this.auth),this.resolver.resolveSignIn(c))}}class $a{constructor(c){this._delegate=c,this.multiFactor=function E(y){const c=(0,W.m9)(y);return m.has(c)||m.set(c,U._fromUser(c)),m.get(c)}(c)}static getOrCreate(c){return $a.USER_MAP.has(c)||$a.USER_MAP.set(c,new $a(c)),$a.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return Xo(f.auth,Go(f._delegate,c))})()}linkWithPhoneNumber(c,f){var I=this;return(0,p.Z)(function*(){return bc(I.auth,function ss(y,c,f){return Lo.apply(this,arguments)}(I._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return Xo(f.auth,function nt(y,c,f){return kt.apply(this,arguments)}(f._delegate,c,aa))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield fr(Mr(f.auth)),function Fe(y,c,f){return function et(y,c,f){return St.apply(this,arguments)}(y,c,f)}(f._delegate,c,aa)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return Xo(f.auth,So(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return bc(this.auth,function ya(y,c,f){return Na.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Xo(this.auth,function ie(y,c,f){return ae.apply(this,arguments)}(this._delegate,c,aa))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield fr(Mr(f.auth)),function F(y,c,f){return function q(y,c,f){return le.apply(this,arguments)}(y,c,f)}(f._delegate,c,aa)})()}sendEmailVerification(c){return function ga(y,c){return ho.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function jn(y,c){return Fi.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function S(y,c){return N((0,W.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function $(y,c){return N((0,W.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function ac(y,c){return Zs.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function sa(y,c){return No.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function zo(y,c,f){return Os.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$a.USER_MAP=new WeakMap;const Ea=ce;let al=(()=>{class y{constructor(f,I){if(this.app=f,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=f.options;Ea(B,"invalid-api-key",{appName:f.name}),Ea(B,"invalid-api-key",{appName:f.name});const J=typeof window<"u"?aa:void 0;this._delegate=I.initialize({options:{persistence:Ci(B,f.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$a.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,I){!function Ei(y,c,f){const I=Mr(y);ce(I._canInitEmulator,I,"emulator-config-failed"),ce(/^https?:\/\//.test(c),I,"invalid-emulator-scheme");const B=!!f?.disableWarnings,J=Bi(c),{host:Ne,port:ct}=function kr(y){const c=Bi(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const I=f[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(I);if(B){const J=B[1];return{host:J,port:_s(I.substr(J.length+1))}}{const[J,Ne]=I.split(":");return{host:J,port:_s(Ne)}}}(c);I.config.emulator={url:`${J}//${Ne}${null===ct?"":`:${ct}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Ne,port:ct,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function Ri(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,I)}applyActionCode(f){return function Li(y,c){return zs.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ps(this._delegate,f)}confirmPasswordReset(f,I){return function Gs(y,c,f){return ni.apply(this,arguments)}(this._delegate,f,I)}createUserWithEmailAndPassword(f,I){var B=this;return(0,p.Z)(function*(){return Xo(B._delegate,function O(y,c,f){return A.apply(this,arguments)}(B._delegate,f,I))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function lo(y,c){return co.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Mn(y,c){return"EMAIL_SIGNIN"===Is.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Ea(Eo(),f._delegate,"operation-not-supported-in-this-environment");const I=yield function pn(y,c){return Nn.apply(this,arguments)}(f._delegate,aa);return I?Xo(f._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ru(y,c){Mr(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,I,B){const{next:J,error:Ne,complete:ct}=Cc(f,I,B);return this._delegate.onAuthStateChanged(J,Ne,ct)}onIdTokenChanged(f,I,B){const{next:J,error:Ne,complete:ct}=Cc(f,I,B);return this._delegate.onIdTokenChanged(J,Ne,ct)}sendSignInLinkToEmail(f,I){return function Qe(y,c,f){return Jt.apply(this,arguments)}(this._delegate,f,I)}sendPasswordResetEmail(f,I){return function uo(y,c,f){return Xr.apply(this,arguments)}(this._delegate,f,I||void 0)}setPersistence(f){var I=this;return(0,p.Z)(function*(){let B;switch(function wh(y,c){_a(Object.values(ca).includes(c),y,"invalid-persistence-type"),(0,W.b$)()?_a(c!==ca.SESSION,y,"unsupported-persistence-type"):(0,W.UG)()?_a(c===ca.NONE,y,"unsupported-persistence-type"):_c()?_a(c===ca.NONE||c===ca.LOCAL&&(0,W.hl)(),y,"unsupported-persistence-type"):_a(c===ca.NONE||iu(),y,"unsupported-persistence-type")}(I._delegate,f),f){case ca.SESSION:B=jt;break;case ca.LOCAL:B=(yield pe(Er)._isAvailable())?Er:st;break;case ca.NONE:B=oe;break;default:return me("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Xo(this._delegate,function Ds(y){return xr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Xo(this._delegate,$r(this._delegate,f))}signInWithCustomToken(f){return Xo(this._delegate,function ao(y,c){return Ao.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,I){return Xo(this._delegate,function Z(y,c,f){return $r((0,W.m9)(y),Xi.credential(c,f))}(this._delegate,f,I))}signInWithEmailLink(f,I){return Xo(this._delegate,function Wi(y,c,f){return Hr.apply(this,arguments)}(this._delegate,f,I))}signInWithPhoneNumber(f,I){return bc(this._delegate,function oc(y,c,f){return Zo.apply(this,arguments)}(this._delegate,f,I))}signInWithPopup(f){var I=this;return(0,p.Z)(function*(){return Ea(Eo(),I._delegate,"operation-not-supported-in-this-environment"),Xo(I._delegate,function P(y,c,f){return K.apply(this,arguments)}(I._delegate,f,aa))})()}signInWithRedirect(f){var I=this;return(0,p.Z)(function*(){return Ea(Eo(),I._delegate,"operation-not-supported-in-this-environment"),yield fr(I._delegate),function Ki(y,c,f){return function Ou(y,c,f){return x.apply(this,arguments)}(y,c,f)}(I._delegate,f,aa)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Mo(y,c){return k.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ca,y})();function Cc(y,c,f){let I=y;"function"!=typeof y&&({next:I,error:c,complete:f}=y);const B=I;return{next:Ne=>B(Ne&&$a.getOrCreate(Ne)),error:c,complete:f}}function Ci(y,c){const f=function ol(y,c){const f=$u();if(!f)return[];const I=be(Eh,y,c);switch(f.getItem(I)){case ca.NONE:return[oe];case ca.LOCAL:return[Er,jt];case ca.SESSION:return[jt];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(Er)&&f.push(Er),typeof window<"u")for(const I of[st,jt])f.includes(I)||f.push(I);return f.includes(oe)||f.push(oe),f}class $l{constructor(){this.providerId="phone",this._delegate=new _u(wc(z.Z.auth()))}static credential(c,f){return _u.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}$l.PHONE_SIGN_IN_METHOD=_u.PHONE_SIGN_IN_METHOD,$l.PROVIDER_ID=_u.PROVIDER_ID;const Ih=ce;class Tc{constructor(c,f,I=z.Z.app()){var B;Ih(null===(B=I.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new $e(c,f,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Hl(y){y.INTERNAL.registerComponent(new ke.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),I=c.getProvider("auth");return new al(f,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xi,FacebookAuthProvider:oo,GithubAuthProvider:js,GoogleAuthProvider:Oi,OAuthProvider:wi,SAMLAuthProvider:Di,PhoneAuthProvider:$l,PhoneMultiFactorGenerator:dc,RecaptchaVerifier:Tc,TwitterAuthProvider:ts,Auth:al,AuthCredential:Zr,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.0")}(z.Z)},8766:(Xt,Je,j)=>{j.d(Je,{Lj:()=>me,X3:()=>Yt});var p=j(5861);let W,Te;const ke=new WeakMap,Pe=new WeakMap,Ve=new WeakMap,de=new WeakMap,he=new WeakMap;let ht={get(ce,je,se){if(ce instanceof IDBTransaction){if("done"===je)return Pe.get(ce);if("objectStoreNames"===je)return ce.objectStoreNames||Ve.get(ce);if("store"===je)return se.objectStoreNames[1]?void 0:se.objectStore(se.objectStoreNames[0])}return qe(ce[je])},set:(ce,je,se)=>(ce[je]=se,!0),has:(ce,je)=>ce instanceof IDBTransaction&&("done"===je||"store"===je)||je in ce};function tt(ce){return"function"==typeof ce?function Ht(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return Te||(Te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...je){return ce.apply(Zt(this),je),qe(ke.get(this))}:function(...je){return qe(ce.apply(Zt(this),je))}:function(je,...se){const De=ce.call(Zt(this),je,...se);return Ve.set(De,je.sort?je.sort():[je]),qe(De)}}(ce):(ce instanceof IDBTransaction&&function yt(ce){if(Pe.has(ce))return;const je=new Promise((se,De)=>{const pe=()=>{ce.removeEventListener("complete",Re),ce.removeEventListener("error",mt),ce.removeEventListener("abort",mt)},Re=()=>{se(),pe()},mt=()=>{De(ce.error||new DOMException("AbortError","AbortError")),pe()};ce.addEventListener("complete",Re),ce.addEventListener("error",mt),ce.addEventListener("abort",mt)});Pe.set(ce,je)}(ce),((ce,je)=>je.some(se=>ce instanceof se))(ce,function Ie(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,ht):ce)}function qe(ce){if(ce instanceof IDBRequest)return function Ce(ce){const je=new Promise((se,De)=>{const pe=()=>{ce.removeEventListener("success",Re),ce.removeEventListener("error",mt)},Re=()=>{se(qe(ce.result)),pe()},mt=()=>{De(ce.error),pe()};ce.addEventListener("success",Re),ce.addEventListener("error",mt)});return je.then(se=>{se instanceof IDBCursor&&ke.set(se,ce)}).catch(()=>{}),he.set(je,ce),je}(ce);if(de.has(ce))return de.get(ce);const je=tt(ce);return je!==ce&&(de.set(ce,je),he.set(je,ce)),je}const Zt=ce=>he.get(ce);function Yt(ce,je,{blocked:se,upgrade:De,blocking:pe,terminated:Re}={}){const mt=indexedDB.open(ce,je),bt=qe(mt);return De&&mt.addEventListener("upgradeneeded",Ct=>{De(qe(mt.result),Ct.oldVersion,Ct.newVersion,qe(mt.transaction))}),se&&mt.addEventListener("blocked",()=>se()),bt.then(Ct=>{Re&&Ct.addEventListener("close",()=>Re()),pe&&Ct.addEventListener("versionchange",()=>pe())}).catch(()=>{}),bt}function me(ce,{blocked:je}={}){const se=indexedDB.deleteDatabase(ce);return je&&se.addEventListener("blocked",()=>je()),qe(se).then(()=>{})}const it=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],It=new Map;function ut(ce,je){if(!(ce instanceof IDBDatabase)||je in ce||"string"!=typeof je)return;if(It.get(je))return It.get(je);const se=je.replace(/FromIndex$/,""),De=je!==se,pe=rt.includes(se);if(!(se in(De?IDBIndex:IDBObjectStore).prototype)||!pe&&!it.includes(se))return;const Re=function(){var mt=(0,p.Z)(function*(bt,...Ct){const Lt=this.transaction(bt,pe?"readwrite":"readonly");let Kt=Lt.store;return De&&(Kt=Kt.index(Ct.shift())),(yield Promise.all([Kt[se](...Ct),pe&&Lt.done]))[0]});return function(Ct){return mt.apply(this,arguments)}}();return It.set(je,Re),Re}!function We(ce){ht=ce(ht)}(ce=>({...ce,get:(je,se,De)=>ut(je,se)||ce.get(je,se,De),has:(je,se)=>!!ut(je,se)||ce.has(je,se)}))},5861:(Xt,Je,j)=>{function p(W,Te,Ie,Me,ke,Pe,Ve){try{var de=W[Pe](Ve),he=de.value}catch(Ce){return void Ie(Ce)}de.done?Te(he):Promise.resolve(he).then(Me,ke)}function z(W){return function(){var Te=this,Ie=arguments;return new Promise(function(Me,ke){var Pe=W.apply(Te,Ie);function Ve(he){p(Pe,Me,ke,Ve,de,"next",he)}function de(he){p(Pe,Me,ke,Ve,de,"throw",he)}Ve(void 0)})}}j.d(Je,{Z:()=>z})}},Xt=>{Xt(Xt.s=4100)}]);