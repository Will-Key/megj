"use strict";(self.webpackChunkmegj=self.webpackChunkmegj||[]).push([[783],{6783:(F,g,s)=>{s.r(g),s.d(g,{RegisterModule:()=>R});var p=s(6895),u=s(9235),e=s(4650),m=s(529),f=s(8996),d=s(2340),h=s(2095);let v=(()=>{class r{constructor(t,n){this.firestore=t,this.http=n}register(t){return(0,f.D)(this.firestore.collection("participants").add({...t,paymentStatus:"NOTPAID",paymentAmount:0,createdAt:new Date,updatedAt:new Date}).then(()=>(this.initSmsSending(t.phoneNumber),this.buildResponse("success","Votre inscription a \xe9t\xe9 prise en compte"))).catch(()=>this.buildResponse("error","Une erreur s'est produite lors de votre inscription")))}buildResponse(t,n){return{status:t,message:n}}initSmsSending(t){u.iA.recipients.push({phone:t}),u.iA.message=d.N.message;const n=u.iA,a=new m.WM({"Content-Type":"application/json",Authorization:`Bearer ${d.N.letextokey}`,"Access-Control-Allow-Methods":"*"});return this.http.post("/api/v1/campaigns",n,{headers:a}).subscribe(c=>this.finishSmsSending(c.id))}finishSmsSending(t){return this.http.post(`/api/v1/campaigns/${t}/schedules`,{},{headers:{Authorization:`Bearer ${d.N.letextokey}`,"Access-Control-Allow-Methods":"*"}}).subscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(h.ST),e.LFG(m.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var o=s(433);let N=(()=>{class r{constructor(t){this.http=t,this.url="https://veriphone.p.rapidapi.com/verify"}validatePhoneNumber(t){const n=(new m.LE).set("phone",t),a=new m.WM({"X-RapidAPI-Key":"c07a088d6fmsh79964970de4e445p1b9c92jsn4347b9b69552","X-RapidAPI-Host":"veriphone.p.rapidapi.com"});return this.http.get(this.url,{headers:a,params:n})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(m.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function b(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre nom"),e.qZA())}function Z(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre pr\xe9nom"),e.qZA())}function E(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre nom de facebook"),e.qZA())}function q(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre num\xe9ro de t\xe9l\xe9phone"),e.qZA())}function C(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer un num\xe9ro de t\xe9l\xe9phone valide"),e.qZA())}function A(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre num\xe9ro de t\xe9l\xe9phone whatsapp"),e.qZA())}function T(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer un num\xe9ro de t\xe9l\xe9phone valide"),e.qZA())}function I(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre ville de r\xe9sidence"),e.qZA())}function _(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez choisir le canal de participation"),e.qZA())}function U(r,i){1&r&&(e.TgZ(0,"small",23),e._uU(1,"Veuillez entrer votre intention..."),e.qZA())}const l=function(r){return{"border-rose-600":r}},x=function(r,i){return{"bg-slate-200":r,"bg-violet-700":i}};let y=(()=>{class r{constructor(t){this.validatePhoneNumberService=t,this.disableBtn=!1,this.onsubmit=new e.vpe}ngOnInit(){this.initForm()}ngOnChanges(t){t.registerResponse&&t.registerResponse.currentValue&&"success"===this.registerResponse.status&&(this.disableBtn=!1,this.form.reset())}initForm(){this.form=new o.cw({name:new o.NI("",{validators:o.kI.required}),firstName:new o.NI("",{validators:o.kI.required}),fbName:new o.NI("",{validators:o.kI.required}),phoneNumber:new o.NI("",{updateOn:"blur",validators:o.kI.required}),whaPhoneNumber:new o.NI("",{updateOn:"blur",validators:o.kI.required}),city:new o.NI("",{validators:o.kI.required}),intention:new o.NI("",{validators:o.kI.required}),participation:new o.NI("",{validators:o.kI.required})})}onSubmit(){this.disableBtn=!0,this.onsubmit.emit(this.form.value)}getError(t,n){return(0,u.xT)(this.form,t,n)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(N))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-form"]],inputs:{registerResponse:"registerResponse"},outputs:{onsubmit:"onsubmit"},features:[e.TTD],decls:60,vars:40,consts:[[1,"w-full"],[3,"formGroup"],[1,"space-y-2","mb-2"],[1,"text-lg","font-bold","text-violet-800"],[1,"text-sm","font-normal","text-violet-600"],[1,"space-y-4"],[1,"flex","flex-col"],[1,"text-sm","text-slate-500","font-normal"],["type","text","placeholder","Veuillez entrer votre nom","formControlName","name",1,"form-input","rounded-md",3,"ngClass"],["class","text-rose-600",4,"ngIf"],["type","text","placeholder","Veullez entrez votre pr\xe9nom(s)","formControlName","firstName",1,"form-input","rounded-md",3,"ngClass"],["type","text","placeholder","Veullez entrez votre nom de facebook","formControlName","fbName",1,"form-input","rounded-md",3,"ngClass"],["type","text","placeholder","Ex: 2250707070707","formControlName","phoneNumber",1,"form-input","rounded-md",3,"ngClass"],["type","text","placeholder","Ex: 2250707070707","formControlName","whaPhoneNumber",1,"form-input","rounded-md",3,"ngClass"],["type","text","placeholder","Veuillez entrer votre ville de r\xe9sidence","formControlName","city",1,"form-input","rounded-md",3,"ngClass"],["formControlName","participation",1,"form-select","rounded-md",3,"ngClass"],["value",""],["value","SANDPIT"],["value","ONLINE"],["rows","4","placeholder","Entrez votre intention...","formControlName","intention",1,"rounded-md",3,"ngClass"],[1,"text-center"],[1,"p-3","text-white","md:w-3/6","w-full","rounded-full",3,"disabled","ngClass","click"],["sbbtn",""],[1,"text-rose-600"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"h3",3),e._uU(4," Formulaire d'inscription "),e.qZA(),e.TgZ(5,"h5",4),e._uU(6," Veuillez remplir tous les champs pour proc\xe9der \xe0 votre inscription "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Nom *"),e.qZA(),e._UZ(11,"input",8),e.YNc(12,b,2,0,"small",9),e.qZA(),e.TgZ(13,"div",6)(14,"label",7),e._uU(15,"Pr\xe9noms *"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,Z,2,0,"small",9),e.qZA(),e.TgZ(18,"div",6)(19,"label",7),e._uU(20,"Nom de facebook *"),e.qZA(),e._UZ(21,"input",11),e.YNc(22,E,2,0,"small",9),e.qZA(),e.TgZ(23,"div",6)(24,"label",7),e._uU(25,"Num\xe9ro de t\xe9l\xe9phone *"),e.qZA(),e._UZ(26,"input",12),e.YNc(27,q,2,0,"small",9),e.YNc(28,C,2,0,"small",9),e.qZA(),e.TgZ(29,"div",6)(30,"label",7),e._uU(31,"Num\xe9ro de t\xe9l\xe9phone whatsapp *"),e.qZA(),e._UZ(32,"input",13),e.YNc(33,A,2,0,"small",9),e.YNc(34,T,2,0,"small",9),e.qZA(),e.TgZ(35,"div",6)(36,"label",7),e._uU(37,"Ville de r\xe9sidence *"),e.qZA(),e._UZ(38,"input",14),e.YNc(39,I,2,0,"small",9),e.qZA(),e.TgZ(40,"div",6)(41,"label",7),e._uU(42,"Participation *"),e.qZA(),e.TgZ(43,"select",15)(44,"option",16),e._uU(45,"S\xe9lectionnez le canal"),e.qZA(),e.TgZ(46,"option",17),e._uU(47,"Sabli\xe8re"),e.qZA(),e.TgZ(48,"option",18),e._uU(49,"En ligne"),e.qZA()(),e.YNc(50,_,2,0,"small",9),e.qZA(),e.TgZ(51,"div",6)(52,"label",7),e._uU(53,"Intention *"),e.qZA(),e._UZ(54,"textarea",19),e.YNc(55,U,2,0,"small",9),e.qZA(),e.TgZ(56,"div",20)(57,"button",21,22),e.NdJ("click",function(){return n.onSubmit()}),e._uU(59," Je m'inscris "),e.qZA()()()()()),2&t){const a=e.MAs(58);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(10),e.Q6J("ngClass",e.VKq(21,l,n.getError("name","required"))),e.xp6(1),e.Q6J("ngIf",n.getError("name","required")),e.xp6(4),e.Q6J("ngClass",e.VKq(23,l,n.getError("firstName","required"))),e.xp6(1),e.Q6J("ngIf",n.getError("firstName","required")),e.xp6(4),e.Q6J("ngClass",e.VKq(25,l,n.getError("fbName","required"))),e.xp6(1),e.Q6J("ngIf",n.getError("fbName","required")),e.xp6(4),e.Q6J("ngClass",e.VKq(27,l,n.getError("phoneNumber","required")||n.getError("phoneNumber","invalidPhoneNumber"))),e.xp6(1),e.Q6J("ngIf",n.getError("phoneNumber","required")),e.xp6(1),e.Q6J("ngIf",n.getError("phoneNumber","invalidPhoneNumber")),e.xp6(4),e.Q6J("ngClass",e.VKq(29,l,n.getError("whaPhoneNumber","required")||n.getError("whaPhoneNumber","invalidPhoneNumber"))),e.xp6(1),e.Q6J("ngIf",n.getError("whaPhoneNumber","required")),e.xp6(1),e.Q6J("ngIf",n.getError("whaPhoneNumber","invalidPhoneNumber")),e.xp6(4),e.Q6J("ngClass",e.VKq(31,l,n.getError("city","required"))),e.xp6(1),e.Q6J("ngIf",n.getError("city","required")),e.xp6(4),e.Q6J("ngClass",e.VKq(33,l,n.getError("participation","required"))),e.xp6(7),e.Q6J("ngIf",n.getError("participation","required")),e.xp6(4),e.Q6J("ngClass",e.VKq(35,l,n.getError("intention","required"))),e.xp6(1),e.Q6J("ngIf",n.getError("intention","required")),e.xp6(2),e.Q6J("disabled",n.form.invalid||n.disableBtn)("ngClass",e.WLB(37,x,a.disabled,!a.disabled))}},dependencies:[p.mk,p.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u]}),r})(),w=(()=>{class r{constructor(t){this.registerService=t}onRegister(t){this.registerService.register(t).subscribe(n=>{this.registerResponse=n,(0,u.h1)(n.status,n.message)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:2,vars:1,consts:[[1,"w-full"],[3,"registerResponse","onsubmit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-form",1),e.NdJ("onsubmit",function(c){return n.onRegister(c)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("registerResponse",n.registerResponse))},dependencies:[y]}),r})();var J=s(7001);const V=[{path:"",component:w}];let R=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.ez,o.u5,o.UX,J.Bz.forChild(V)]}),r})()}}]);